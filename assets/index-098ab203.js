var D1=Object.defineProperty;var L1=(t,r,a)=>r in t?D1(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var sg=(t,r,a)=>(L1(t,typeof r!="symbol"?r+"":r,a),a),lg=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)};var we=(t,r,a)=>(lg(t,r,"read from private field"),a?a.call(t):r.get(t)),Hi=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},Qr=(t,r,a,o)=>(lg(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a);function z1(t,r){for(var a=0;a<r.length;a++){const o=r[a];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in t)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(t,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=a(u);fetch(u.href,d)}})();function js(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sy={exports:{}},vc={},xy={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vs=Symbol.for("react.element"),R1=Symbol.for("react.portal"),F1=Symbol.for("react.fragment"),O1=Symbol.for("react.strict_mode"),M1=Symbol.for("react.profiler"),N1=Symbol.for("react.provider"),H1=Symbol.for("react.context"),G1=Symbol.for("react.forward_ref"),$1=Symbol.for("react.suspense"),j1=Symbol.for("react.memo"),V1=Symbol.for("react.lazy"),ug=Symbol.iterator;function Y1(t){return t===null||typeof t!="object"?null:(t=ug&&t[ug]||t["@@iterator"],typeof t=="function"?t:null)}var wy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ey=Object.assign,Uy={};function So(t,r,a){this.props=t,this.context=r,this.refs=Uy,this.updater=a||wy}So.prototype.isReactComponent={};So.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};So.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cy(){}Cy.prototype=So.prototype;function hp(t,r,a){this.props=t,this.context=r,this.refs=Uy,this.updater=a||wy}var pp=hp.prototype=new Cy;pp.constructor=hp;Ey(pp,So.prototype);pp.isPureReactComponent=!0;var cg=Array.isArray,Ay=Object.prototype.hasOwnProperty,mp={current:null},Ty={key:!0,ref:!0,__self:!0,__source:!0};function Py(t,r,a){var o,u={},d=null,h=null;if(r!=null)for(o in r.ref!==void 0&&(h=r.ref),r.key!==void 0&&(d=""+r.key),r)Ay.call(r,o)&&!Ty.hasOwnProperty(o)&&(u[o]=r[o]);var l=arguments.length-2;if(l===1)u.children=a;else if(1<l){for(var g=Array(l),y=0;y<l;y++)g[y]=arguments[y+2];u.children=g}if(t&&t.defaultProps)for(o in l=t.defaultProps,l)u[o]===void 0&&(u[o]=l[o]);return{$$typeof:Vs,type:t,key:d,ref:h,props:u,_owner:mp.current}}function W1(t,r){return{$$typeof:Vs,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function gp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vs}function q1(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return r[a]})}var dg=/\/+/g;function Ud(t,r){return typeof t=="object"&&t!==null&&t.key!=null?q1(""+t.key):r.toString(36)}function au(t,r,a,o,u){var d=typeof t;(d==="undefined"||d==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(d){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Vs:case R1:h=!0}}if(h)return h=t,u=u(h),t=o===""?"."+Ud(h,0):o,cg(u)?(a="",t!=null&&(a=t.replace(dg,"$&/")+"/"),au(u,r,a,"",function(y){return y})):u!=null&&(gp(u)&&(u=W1(u,a+(!u.key||h&&h.key===u.key?"":(""+u.key).replace(dg,"$&/")+"/")+t)),r.push(u)),1;if(h=0,o=o===""?".":o+":",cg(t))for(var l=0;l<t.length;l++){d=t[l];var g=o+Ud(d,l);h+=au(d,r,a,g,u)}else if(g=Y1(t),typeof g=="function")for(t=g.call(t),l=0;!(d=t.next()).done;)d=d.value,g=o+Ud(d,l++),h+=au(d,r,a,g,u);else if(d==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return h}function Ul(t,r,a){if(t==null)return t;var o=[],u=0;return au(t,o,"","",function(d){return r.call(a,d,u++)}),o}function K1(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},ou={transition:null},X1={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:ou,ReactCurrentOwner:mp};me.Children={map:Ul,forEach:function(t,r,a){Ul(t,function(){r.apply(this,arguments)},a)},count:function(t){var r=0;return Ul(t,function(){r++}),r},toArray:function(t){return Ul(t,function(r){return r})||[]},only:function(t){if(!gp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=So;me.Fragment=F1;me.Profiler=M1;me.PureComponent=hp;me.StrictMode=O1;me.Suspense=$1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X1;me.cloneElement=function(t,r,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=Ey({},t.props),u=t.key,d=t.ref,h=t._owner;if(r!=null){if(r.ref!==void 0&&(d=r.ref,h=mp.current),r.key!==void 0&&(u=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(g in r)Ay.call(r,g)&&!Ty.hasOwnProperty(g)&&(o[g]=r[g]===void 0&&l!==void 0?l[g]:r[g])}var g=arguments.length-2;if(g===1)o.children=a;else if(1<g){l=Array(g);for(var y=0;y<g;y++)l[y]=arguments[y+2];o.children=l}return{$$typeof:Vs,type:t.type,key:u,ref:d,props:o,_owner:h}};me.createContext=function(t){return t={$$typeof:H1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:N1,_context:t},t.Consumer=t};me.createElement=Py;me.createFactory=function(t){var r=Py.bind(null,t);return r.type=t,r};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:G1,render:t}};me.isValidElement=gp;me.lazy=function(t){return{$$typeof:V1,_payload:{_status:-1,_result:t},_init:K1}};me.memo=function(t,r){return{$$typeof:j1,type:t,compare:r===void 0?null:r}};me.startTransition=function(t){var r=ou.transition;ou.transition={};try{t()}finally{ou.transition=r}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,r){return jt.current.useCallback(t,r)};me.useContext=function(t){return jt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};me.useEffect=function(t,r){return jt.current.useEffect(t,r)};me.useId=function(){return jt.current.useId()};me.useImperativeHandle=function(t,r,a){return jt.current.useImperativeHandle(t,r,a)};me.useInsertionEffect=function(t,r){return jt.current.useInsertionEffect(t,r)};me.useLayoutEffect=function(t,r){return jt.current.useLayoutEffect(t,r)};me.useMemo=function(t,r){return jt.current.useMemo(t,r)};me.useReducer=function(t,r,a){return jt.current.useReducer(t,r,a)};me.useRef=function(t){return jt.current.useRef(t)};me.useState=function(t){return jt.current.useState(t)};me.useSyncExternalStore=function(t,r,a){return jt.current.useSyncExternalStore(t,r,a)};me.useTransition=function(){return jt.current.useTransition()};me.version="18.2.0";xy.exports=me;var C=xy.exports;const ue=js(C),_c=z1({__proto__:null,default:ue},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1=C,Z1=Symbol.for("react.element"),J1=Symbol.for("react.fragment"),ew=Object.prototype.hasOwnProperty,tw=Q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rw={key:!0,ref:!0,__self:!0,__source:!0};function Iy(t,r,a){var o,u={},d=null,h=null;a!==void 0&&(d=""+a),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(h=r.ref);for(o in r)ew.call(r,o)&&!rw.hasOwnProperty(o)&&(u[o]=r[o]);if(t&&t.defaultProps)for(o in r=t.defaultProps,r)u[o]===void 0&&(u[o]=r[o]);return{$$typeof:Z1,type:t,key:d,ref:h,props:u,_owner:tw.current}}vc.Fragment=J1;vc.jsx=Iy;vc.jsxs=Iy;Sy.exports=vc;var j=Sy.exports,Tf={},By={exports:{}},pr={},ky={exports:{}},Dy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(I,L){var M=I.length;I.push(L);e:for(;0<M;){var k=M-1>>>1,$=I[k];if(0<u($,L))I[k]=L,I[M]=$,M=k;else break e}}function a(I){return I.length===0?null:I[0]}function o(I){if(I.length===0)return null;var L=I[0],M=I.pop();if(M!==L){I[0]=M;e:for(var k=0,$=I.length,J=$>>>1;k<J;){var ae=2*(k+1)-1,ce=I[ae],X=ae+1,ee=I[X];if(0>u(ce,M))X<$&&0>u(ee,ce)?(I[k]=ee,I[X]=M,k=X):(I[k]=ce,I[ae]=M,k=ae);else if(X<$&&0>u(ee,M))I[k]=ee,I[X]=M,k=X;else break e}}return L}function u(I,L){var M=I.sortIndex-L.sortIndex;return M!==0?M:I.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var h=Date,l=h.now();t.unstable_now=function(){return h.now()-l}}var g=[],y=[],v=1,b=null,e=3,n=!1,s=!1,c=!1,f=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var L=a(y);L!==null;){if(L.callback===null)o(y);else if(L.startTime<=I)o(y),L.sortIndex=L.expirationTime,r(g,L);else break;L=a(y)}}function S(I){if(c=!1,_(I),!s)if(a(g)!==null)s=!0,F(w);else{var L=a(y);L!==null&&O(S,L.startTime-I)}}function w(I,L){s=!1,c&&(c=!1,m(A),A=-1),n=!0;var M=e;try{for(_(L),b=a(g);b!==null&&(!(b.expirationTime>L)||I&&!P());){var k=b.callback;if(typeof k=="function"){b.callback=null,e=b.priorityLevel;var $=k(b.expirationTime<=L);L=t.unstable_now(),typeof $=="function"?b.callback=$:b===a(g)&&o(g),_(L)}else o(g);b=a(g)}if(b!==null)var J=!0;else{var ae=a(y);ae!==null&&O(S,ae.startTime-L),J=!1}return J}finally{b=null,e=M,n=!1}}var x=!1,U=null,A=-1,E=5,T=-1;function P(){return!(t.unstable_now()-T<E)}function z(){if(U!==null){var I=t.unstable_now();T=I;var L=!0;try{L=U(!0,I)}finally{L?R():(x=!1,U=null)}}else x=!1}var R;if(typeof p=="function")R=function(){p(z)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,B=D.port2;D.port1.onmessage=z,R=function(){B.postMessage(null)}}else R=function(){f(z,0)};function F(I){U=I,x||(x=!0,R())}function O(I,L){A=f(function(){I(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){s||n||(s=!0,F(w))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return e},t.unstable_getFirstCallbackNode=function(){return a(g)},t.unstable_next=function(I){switch(e){case 1:case 2:case 3:var L=3;break;default:L=e}var M=e;e=L;try{return I()}finally{e=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,L){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var M=e;e=I;try{return L()}finally{e=M}},t.unstable_scheduleCallback=function(I,L,M){var k=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?k+M:k):M=k,I){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=M+$,I={id:v++,callback:L,priorityLevel:I,startTime:M,expirationTime:$,sortIndex:-1},M>k?(I.sortIndex=M,r(y,I),a(g)===null&&I===a(y)&&(c?(m(A),A=-1):c=!0,O(S,M-k))):(I.sortIndex=$,r(g,I),s||n||(s=!0,F(w))),I},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(I){var L=e;return function(){var M=e;e=L;try{return I.apply(this,arguments)}finally{e=M}}}})(Dy);ky.exports=Dy;var iw=ky.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly=C,hr=iw;function N(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zy=new Set,gs={};function da(t,r){so(t,r),so(t+"Capture",r)}function so(t,r){for(gs[t]=r,t=0;t<r.length;t++)zy.add(r[t])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pf=Object.prototype.hasOwnProperty,nw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fg={},hg={};function aw(t){return Pf.call(hg,t)?!0:Pf.call(fg,t)?!1:nw.test(t)?hg[t]=!0:(fg[t]=!0,!1)}function ow(t,r,a,o){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return o?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sw(t,r,a,o){if(r===null||typeof r>"u"||ow(t,r,a,o))return!0;if(o)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Vt(t,r,a,o,u,d,h){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=a,this.propertyName=t,this.type=r,this.sanitizeURL=d,this.removeEmptyString=h}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];At[r]=new Vt(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vp=/[\-:]([a-z])/g;function _p(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(vp,_p);At[r]=new Vt(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(vp,_p);At[r]=new Vt(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(vp,_p);At[r]=new Vt(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yp(t,r,a,o){var u=At.hasOwnProperty(r)?At[r]:null;(u!==null?u.type!==0:o||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(sw(r,a,u,o)&&(a=null),o||u===null?aw(r)&&(a===null?t.removeAttribute(r):t.setAttribute(r,""+a)):u.mustUseProperty?t[u.propertyName]=a===null?u.type===3?!1:"":a:(r=u.attributeName,o=u.attributeNamespace,a===null?t.removeAttribute(r):(u=u.type,a=u===3||u===4&&a===!0?"":""+a,o?t.setAttributeNS(o,r,a):t.setAttribute(r,a))))}var Li=Ly.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),Ta=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),bp=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),Ry=Symbol.for("react.provider"),Fy=Symbol.for("react.context"),Sp=Symbol.for("react.forward_ref"),Bf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),xp=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),Oy=Symbol.for("react.offscreen"),pg=Symbol.iterator;function Po(t){return t===null||typeof t!="object"?null:(t=pg&&t[pg]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Cd;function Vo(t){if(Cd===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Cd=r&&r[1]||""}return`
`+Cd+t}var Ad=!1;function Td(t,r){if(!t||Ad)return"";Ad=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(y){var o=y}Reflect.construct(t,[],r)}else{try{r.call()}catch(y){o=y}t.call(r.prototype)}else{try{throw Error()}catch(y){o=y}t()}}catch(y){if(y&&o&&typeof y.stack=="string"){for(var u=y.stack.split(`
`),d=o.stack.split(`
`),h=u.length-1,l=d.length-1;1<=h&&0<=l&&u[h]!==d[l];)l--;for(;1<=h&&0<=l;h--,l--)if(u[h]!==d[l]){if(h!==1||l!==1)do if(h--,l--,0>l||u[h]!==d[l]){var g=`
`+u[h].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=h&&0<=l);break}}}finally{Ad=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?Vo(t):""}function lw(t){switch(t.tag){case 5:return Vo(t.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return t=Td(t.type,!1),t;case 11:return t=Td(t.type.render,!1),t;case 1:return t=Td(t.type,!0),t;default:return""}}function Df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case Ta:return"Portal";case If:return"Profiler";case bp:return"StrictMode";case Bf:return"Suspense";case kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fy:return(t.displayName||"Context")+".Consumer";case Ry:return(t._context.displayName||"Context")+".Provider";case Sp:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xp:return r=t.displayName||null,r!==null?r:Df(t.type)||"Memo";case qi:r=t._payload,t=t._init;try{return Df(t(r))}catch{}}return null}function uw(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Df(r);case 8:return r===bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function _n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function My(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function cw(t){var r=My(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),o=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return u.call(this)},set:function(h){o=""+h,d.call(this,h)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(h){o=""+h},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Al(t){t._valueTracker||(t._valueTracker=cw(t))}function Ny(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),o="";return t&&(o=My(t)?t.checked?"true":"false":t.value),t=o,t!==a?(r.setValue(t),!0):!1}function Cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lf(t,r){var a=r.checked;return Ke({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function mg(t,r){var a=r.defaultValue==null?"":r.defaultValue,o=r.checked!=null?r.checked:r.defaultChecked;a=_n(r.value!=null?r.value:a),t._wrapperState={initialChecked:o,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Hy(t,r){r=r.checked,r!=null&&yp(t,"checked",r,!1)}function zf(t,r){Hy(t,r);var a=_n(r.value),o=r.type;if(a!=null)o==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Rf(t,r.type,a):r.hasOwnProperty("defaultValue")&&Rf(t,r.type,_n(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function gg(t,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var o=r.type;if(!(o!=="submit"&&o!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,a||r===t.value||(t.value=r),t.defaultValue=r}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Rf(t,r,a){(r!=="number"||Cu(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var Yo=Array.isArray;function Wa(t,r,a,o){if(t=t.options,r){r={};for(var u=0;u<a.length;u++)r["$"+a[u]]=!0;for(a=0;a<t.length;a++)u=r.hasOwnProperty("$"+t[a].value),t[a].selected!==u&&(t[a].selected=u),u&&o&&(t[a].defaultSelected=!0)}else{for(a=""+_n(a),r=null,u=0;u<t.length;u++){if(t[u].value===a){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}r!==null||t[u].disabled||(r=t[u])}r!==null&&(r.selected=!0)}}function Ff(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(N(91));return Ke({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vg(t,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(N(92));if(Yo(a)){if(1<a.length)throw Error(N(93));a=a[0]}r=a}r==null&&(r=""),a=r}t._wrapperState={initialValue:_n(a)}}function Gy(t,r){var a=_n(r.value),o=_n(r.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),r.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),o!=null&&(t.defaultValue=""+o)}function _g(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function $y(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Of(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?$y(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tl,jy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,o,u){MSApp.execUnsafeLocalFunction(function(){return t(r,a,o,u)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function vs(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dw=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(t){dw.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),rs[r]=rs[t]})});function Vy(t,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||rs.hasOwnProperty(t)&&rs[t]?(""+r).trim():r+"px"}function Yy(t,r){t=t.style;for(var a in r)if(r.hasOwnProperty(a)){var o=a.indexOf("--")===0,u=Vy(a,r[a],o);a==="float"&&(a="cssFloat"),o?t.setProperty(a,u):t[a]=u}}var fw=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mf(t,r){if(r){if(fw[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(N(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(N(61))}if(r.style!=null&&typeof r.style!="object")throw Error(N(62))}}function Nf(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=null;function wp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gf=null,qa=null,Ka=null;function yg(t){if(t=qs(t)){if(typeof Gf!="function")throw Error(N(280));var r=t.stateNode;r&&(r=wc(r),Gf(t.stateNode,t.type,r))}}function Wy(t){qa?Ka?Ka.push(t):Ka=[t]:qa=t}function qy(){if(qa){var t=qa,r=Ka;if(Ka=qa=null,yg(t),r)for(t=0;t<r.length;t++)yg(r[t])}}function Ky(t,r){return t(r)}function Xy(){}var Pd=!1;function Qy(t,r,a){if(Pd)return t(r,a);Pd=!0;try{return Ky(t,r,a)}finally{Pd=!1,(qa!==null||Ka!==null)&&(Xy(),qy())}}function _s(t,r){var a=t.stateNode;if(a===null)return null;var o=wc(a);if(o===null)return null;a=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(N(231,r,typeof a));return a}var $f=!1;if(Ii)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){$f=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{$f=!1}function hw(t,r,a,o,u,d,h,l,g){var y=Array.prototype.slice.call(arguments,3);try{r.apply(a,y)}catch(v){this.onError(v)}}var is=!1,Au=null,Tu=!1,jf=null,pw={onError:function(t){is=!0,Au=t}};function mw(t,r,a,o,u,d,h,l,g){is=!1,Au=null,hw.apply(pw,arguments)}function gw(t,r,a,o,u,d,h,l,g){if(mw.apply(this,arguments),is){if(is){var y=Au;is=!1,Au=null}else throw Error(N(198));Tu||(Tu=!0,jf=y)}}function fa(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function Zy(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function bg(t){if(fa(t)!==t)throw Error(N(188))}function vw(t){var r=t.alternate;if(!r){if(r=fa(t),r===null)throw Error(N(188));return r!==t?null:t}for(var a=t,o=r;;){var u=a.return;if(u===null)break;var d=u.alternate;if(d===null){if(o=u.return,o!==null){a=o;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===a)return bg(u),t;if(d===o)return bg(u),r;d=d.sibling}throw Error(N(188))}if(a.return!==o.return)a=u,o=d;else{for(var h=!1,l=u.child;l;){if(l===a){h=!0,a=u,o=d;break}if(l===o){h=!0,o=u,a=d;break}l=l.sibling}if(!h){for(l=d.child;l;){if(l===a){h=!0,a=d,o=u;break}if(l===o){h=!0,o=d,a=u;break}l=l.sibling}if(!h)throw Error(N(189))}}if(a.alternate!==o)throw Error(N(190))}if(a.tag!==3)throw Error(N(188));return a.stateNode.current===a?t:r}function Jy(t){return t=vw(t),t!==null?e0(t):null}function e0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=e0(t);if(r!==null)return r;t=t.sibling}return null}var t0=hr.unstable_scheduleCallback,Sg=hr.unstable_cancelCallback,_w=hr.unstable_shouldYield,yw=hr.unstable_requestPaint,it=hr.unstable_now,bw=hr.unstable_getCurrentPriorityLevel,Ep=hr.unstable_ImmediatePriority,r0=hr.unstable_UserBlockingPriority,Pu=hr.unstable_NormalPriority,Sw=hr.unstable_LowPriority,i0=hr.unstable_IdlePriority,yc=null,ri=null;function xw(t){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(yc,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Uw,ww=Math.log,Ew=Math.LN2;function Uw(t){return t>>>=0,t===0?32:31-(ww(t)/Ew|0)|0}var Pl=64,Il=4194304;function Wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iu(t,r){var a=t.pendingLanes;if(a===0)return 0;var o=0,u=t.suspendedLanes,d=t.pingedLanes,h=a&268435455;if(h!==0){var l=h&~u;l!==0?o=Wo(l):(d&=h,d!==0&&(o=Wo(d)))}else h=a&~u,h!==0?o=Wo(h):d!==0&&(o=Wo(d));if(o===0)return 0;if(r!==0&&r!==o&&!(r&u)&&(u=o&-o,d=r&-r,u>=d||u===16&&(d&4194240)!==0))return r;if(o&4&&(o|=a&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=o;0<r;)a=31-Gr(r),u=1<<a,o|=t[a],r&=~u;return o}function Cw(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aw(t,r){for(var a=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,d=t.pendingLanes;0<d;){var h=31-Gr(d),l=1<<h,g=u[h];g===-1?(!(l&a)||l&o)&&(u[h]=Cw(l,r)):g<=r&&(t.expiredLanes|=l),d&=~l}}function Vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n0(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function Id(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Ys(t,r,a){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Gr(r),t[r]=a}function Tw(t,r){var a=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<a;){var u=31-Gr(a),d=1<<u;r[u]=0,o[u]=-1,t[u]=-1,a&=~d}}function Up(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var o=31-Gr(a),u=1<<o;u&r|t[o]&r&&(t[o]|=r),a&=~u}}var Pe=0;function a0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var o0,Cp,s0,l0,u0,Yf=!1,Bl=[],sn=null,ln=null,un=null,ys=new Map,bs=new Map,Xi=[],Pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xg(t,r){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":ys.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(r.pointerId)}}function Bo(t,r,a,o,u,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[u]},r!==null&&(r=qs(r),r!==null&&Cp(r)),t):(t.eventSystemFlags|=o,r=t.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),t)}function Iw(t,r,a,o,u){switch(r){case"focusin":return sn=Bo(sn,t,r,a,o,u),!0;case"dragenter":return ln=Bo(ln,t,r,a,o,u),!0;case"mouseover":return un=Bo(un,t,r,a,o,u),!0;case"pointerover":var d=u.pointerId;return ys.set(d,Bo(ys.get(d)||null,t,r,a,o,u)),!0;case"gotpointercapture":return d=u.pointerId,bs.set(d,Bo(bs.get(d)||null,t,r,a,o,u)),!0}return!1}function c0(t){var r=Vn(t.target);if(r!==null){var a=fa(r);if(a!==null){if(r=a.tag,r===13){if(r=Zy(a),r!==null){t.blockedOn=r,u0(t.priority,function(){s0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function su(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Wf(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Hf=o,a.target.dispatchEvent(o),Hf=null}else return r=qs(a),r!==null&&Cp(r),t.blockedOn=a,!1;r.shift()}return!0}function wg(t,r,a){su(t)&&a.delete(r)}function Bw(){Yf=!1,sn!==null&&su(sn)&&(sn=null),ln!==null&&su(ln)&&(ln=null),un!==null&&su(un)&&(un=null),ys.forEach(wg),bs.forEach(wg)}function ko(t,r){t.blockedOn===r&&(t.blockedOn=null,Yf||(Yf=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,Bw)))}function Ss(t){function r(u){return ko(u,t)}if(0<Bl.length){ko(Bl[0],t);for(var a=1;a<Bl.length;a++){var o=Bl[a];o.blockedOn===t&&(o.blockedOn=null)}}for(sn!==null&&ko(sn,t),ln!==null&&ko(ln,t),un!==null&&ko(un,t),ys.forEach(r),bs.forEach(r),a=0;a<Xi.length;a++)o=Xi[a],o.blockedOn===t&&(o.blockedOn=null);for(;0<Xi.length&&(a=Xi[0],a.blockedOn===null);)c0(a),a.blockedOn===null&&Xi.shift()}var Xa=Li.ReactCurrentBatchConfig,Bu=!0;function kw(t,r,a,o){var u=Pe,d=Xa.transition;Xa.transition=null;try{Pe=1,Ap(t,r,a,o)}finally{Pe=u,Xa.transition=d}}function Dw(t,r,a,o){var u=Pe,d=Xa.transition;Xa.transition=null;try{Pe=4,Ap(t,r,a,o)}finally{Pe=u,Xa.transition=d}}function Ap(t,r,a,o){if(Bu){var u=Wf(t,r,a,o);if(u===null)Nd(t,r,o,ku,a),xg(t,o);else if(Iw(u,t,r,a,o))o.stopPropagation();else if(xg(t,o),r&4&&-1<Pw.indexOf(t)){for(;u!==null;){var d=qs(u);if(d!==null&&o0(d),d=Wf(t,r,a,o),d===null&&Nd(t,r,o,ku,a),d===u)break;u=d}u!==null&&o.stopPropagation()}else Nd(t,r,o,null,a)}}var ku=null;function Wf(t,r,a,o){if(ku=null,t=wp(o),t=Vn(t),t!==null)if(r=fa(t),r===null)t=null;else if(a=r.tag,a===13){if(t=Zy(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return ku=t,null}function d0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bw()){case Ep:return 1;case r0:return 4;case Pu:case Sw:return 16;case i0:return 536870912;default:return 16}default:return 16}}var tn=null,Tp=null,lu=null;function f0(){if(lu)return lu;var t,r=Tp,a=r.length,o,u="value"in tn?tn.value:tn.textContent,d=u.length;for(t=0;t<a&&r[t]===u[t];t++);var h=a-t;for(o=1;o<=h&&r[a-o]===u[d-o];o++);return lu=u.slice(t,1<o?1-o:void 0)}function uu(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function kl(){return!0}function Eg(){return!1}function mr(t){function r(a,o,u,d,h){this._reactName=a,this._targetInst=u,this.type=o,this.nativeEvent=d,this.target=h,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(a=t[l],this[l]=a?a(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?kl:Eg,this.isPropagationStopped=Eg,this}return Ke(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),r}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pp=mr(xo),Ws=Ke({},xo,{view:0,detail:0}),Lw=mr(Ws),Bd,kd,Do,bc=Ke({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ip,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(Bd=t.screenX-Do.screenX,kd=t.screenY-Do.screenY):kd=Bd=0,Do=t),Bd)},movementY:function(t){return"movementY"in t?t.movementY:kd}}),Ug=mr(bc),zw=Ke({},bc,{dataTransfer:0}),Rw=mr(zw),Fw=Ke({},Ws,{relatedTarget:0}),Dd=mr(Fw),Ow=Ke({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Mw=mr(Ow),Nw=Ke({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hw=mr(Nw),Gw=Ke({},xo,{data:0}),Cg=mr(Gw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yw(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Vw[t])?!!r[t]:!1}function Ip(){return Yw}var Ww=Ke({},Ws,{key:function(t){if(t.key){var r=$w[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ip,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qw=mr(Ww),Kw=Ke({},bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ag=mr(Kw),Xw=Ke({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ip}),Qw=mr(Xw),Zw=Ke({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jw=mr(Zw),eE=Ke({},bc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tE=mr(eE),rE=[9,13,27,32],Bp=Ii&&"CompositionEvent"in window,ns=null;Ii&&"documentMode"in document&&(ns=document.documentMode);var iE=Ii&&"TextEvent"in window&&!ns,h0=Ii&&(!Bp||ns&&8<ns&&11>=ns),Tg=String.fromCharCode(32),Pg=!1;function p0(t,r){switch(t){case"keyup":return rE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ia=!1;function nE(t,r){switch(t){case"compositionend":return m0(r);case"keypress":return r.which!==32?null:(Pg=!0,Tg);case"textInput":return t=r.data,t===Tg&&Pg?null:t;default:return null}}function aE(t,r){if(Ia)return t==="compositionend"||!Bp&&p0(t,r)?(t=f0(),lu=Tp=tn=null,Ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return h0&&r.locale!=="ko"?null:r.data;default:return null}}var oE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ig(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!oE[t.type]:r==="textarea"}function g0(t,r,a,o){Wy(o),r=Du(r,"onChange"),0<r.length&&(a=new Pp("onChange","change",null,a,o),t.push({event:a,listeners:r}))}var as=null,xs=null;function sE(t){A0(t,0)}function Sc(t){var r=Da(t);if(Ny(r))return t}function lE(t,r){if(t==="change")return r}var v0=!1;if(Ii){var Ld;if(Ii){var zd="oninput"in document;if(!zd){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),zd=typeof Bg.oninput=="function"}Ld=zd}else Ld=!1;v0=Ld&&(!document.documentMode||9<document.documentMode)}function kg(){as&&(as.detachEvent("onpropertychange",_0),xs=as=null)}function _0(t){if(t.propertyName==="value"&&Sc(xs)){var r=[];g0(r,xs,t,wp(t)),Qy(sE,r)}}function uE(t,r,a){t==="focusin"?(kg(),as=r,xs=a,as.attachEvent("onpropertychange",_0)):t==="focusout"&&kg()}function cE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sc(xs)}function dE(t,r){if(t==="click")return Sc(r)}function fE(t,r){if(t==="input"||t==="change")return Sc(r)}function hE(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Vr=typeof Object.is=="function"?Object.is:hE;function ws(t,r){if(Vr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var u=a[o];if(!Pf.call(r,u)||!Vr(t[u],r[u]))return!1}return!0}function Dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lg(t,r){var a=Dg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=r&&o>=r)return{node:a,offset:r-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dg(a)}}function y0(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?y0(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function b0(){for(var t=window,r=Cu();r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Cu(t.document)}return r}function kp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function pE(t){var r=b0(),a=t.focusedElem,o=t.selectionRange;if(r!==a&&a&&a.ownerDocument&&y0(a.ownerDocument.documentElement,a)){if(o!==null&&kp(a)){if(r=o.start,t=o.end,t===void 0&&(t=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(t,a.value.length);else if(t=(r=a.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var u=a.textContent.length,d=Math.min(o.start,u);o=o.end===void 0?d:Math.min(o.end,u),!t.extend&&d>o&&(u=o,o=d,d=u),u=Lg(a,d);var h=Lg(a,o);u&&h&&(t.rangeCount!==1||t.anchorNode!==u.node||t.anchorOffset!==u.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(r=r.createRange(),r.setStart(u.node,u.offset),t.removeAllRanges(),d>o?(t.addRange(r),t.extend(h.node,h.offset)):(r.setEnd(h.node,h.offset),t.addRange(r)))}}for(r=[],t=a;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)t=r[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mE=Ii&&"documentMode"in document&&11>=document.documentMode,Ba=null,qf=null,os=null,Kf=!1;function zg(t,r,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kf||Ba==null||Ba!==Cu(o)||(o=Ba,"selectionStart"in o&&kp(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),os&&ws(os,o)||(os=o,o=Du(qf,"onSelect"),0<o.length&&(r=new Pp("onSelect","select",null,r,a),t.push({event:r,listeners:o}),r.target=Ba)))}function Dl(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var ka={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},Rd={},S0={};Ii&&(S0=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function xc(t){if(Rd[t])return Rd[t];if(!ka[t])return t;var r=ka[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in S0)return Rd[t]=r[a];return t}var x0=xc("animationend"),w0=xc("animationiteration"),E0=xc("animationstart"),U0=xc("transitionend"),C0=new Map,Rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(t,r){C0.set(t,r),da(r,[t])}for(var Fd=0;Fd<Rg.length;Fd++){var Od=Rg[Fd],gE=Od.toLowerCase(),vE=Od[0].toUpperCase()+Od.slice(1);Sn(gE,"on"+vE)}Sn(x0,"onAnimationEnd");Sn(w0,"onAnimationIteration");Sn(E0,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(U0,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_E=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function Fg(t,r,a){var o=t.type||"unknown-event";t.currentTarget=a,gw(o,r,void 0,t),t.currentTarget=null}function A0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],u=o.event;o=o.listeners;e:{var d=void 0;if(r)for(var h=o.length-1;0<=h;h--){var l=o[h],g=l.instance,y=l.currentTarget;if(l=l.listener,g!==d&&u.isPropagationStopped())break e;Fg(u,l,y),d=g}else for(h=0;h<o.length;h++){if(l=o[h],g=l.instance,y=l.currentTarget,l=l.listener,g!==d&&u.isPropagationStopped())break e;Fg(u,l,y),d=g}}}if(Tu)throw t=jf,Tu=!1,jf=null,t}function Ne(t,r){var a=r[eh];a===void 0&&(a=r[eh]=new Set);var o=t+"__bubble";a.has(o)||(T0(r,t,2,!1),a.add(o))}function Md(t,r,a){var o=0;r&&(o|=4),T0(a,t,o,r)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function Es(t){if(!t[Ll]){t[Ll]=!0,zy.forEach(function(a){a!=="selectionchange"&&(_E.has(a)||Md(a,!1,t),Md(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ll]||(r[Ll]=!0,Md("selectionchange",!1,r))}}function T0(t,r,a,o){switch(d0(r)){case 1:var u=kw;break;case 4:u=Dw;break;default:u=Ap}a=u.bind(null,r,a,t),u=void 0,!$f||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(r,a,{capture:!0,passive:u}):t.addEventListener(r,a,!0):u!==void 0?t.addEventListener(r,a,{passive:u}):t.addEventListener(r,a,!1)}function Nd(t,r,a,o,u){var d=o;if(!(r&1)&&!(r&2)&&o!==null)e:for(;;){if(o===null)return;var h=o.tag;if(h===3||h===4){var l=o.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(h===4)for(h=o.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===u||g.nodeType===8&&g.parentNode===u))return;h=h.return}for(;l!==null;){if(h=Vn(l),h===null)return;if(g=h.tag,g===5||g===6){o=d=h;continue e}l=l.parentNode}}o=o.return}Qy(function(){var y=d,v=wp(a),b=[];e:{var e=C0.get(t);if(e!==void 0){var n=Pp,s=t;switch(t){case"keypress":if(uu(a)===0)break e;case"keydown":case"keyup":n=qw;break;case"focusin":s="focus",n=Dd;break;case"focusout":s="blur",n=Dd;break;case"beforeblur":case"afterblur":n=Dd;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":n=Ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":n=Rw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":n=Qw;break;case x0:case w0:case E0:n=Mw;break;case U0:n=Jw;break;case"scroll":n=Lw;break;case"wheel":n=tE;break;case"copy":case"cut":case"paste":n=Hw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":n=Ag}var c=(r&4)!==0,f=!c&&t==="scroll",m=c?e!==null?e+"Capture":null:e;c=[];for(var p=y,_;p!==null;){_=p;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,m!==null&&(S=_s(p,m),S!=null&&c.push(Us(p,S,_)))),f)break;p=p.return}0<c.length&&(e=new n(e,s,null,a,v),b.push({event:e,listeners:c}))}}if(!(r&7)){e:{if(e=t==="mouseover"||t==="pointerover",n=t==="mouseout"||t==="pointerout",e&&a!==Hf&&(s=a.relatedTarget||a.fromElement)&&(Vn(s)||s[Bi]))break e;if((n||e)&&(e=v.window===v?v:(e=v.ownerDocument)?e.defaultView||e.parentWindow:window,n?(s=a.relatedTarget||a.toElement,n=y,s=s?Vn(s):null,s!==null&&(f=fa(s),s!==f||s.tag!==5&&s.tag!==6)&&(s=null)):(n=null,s=y),n!==s)){if(c=Ug,S="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(c=Ag,S="onPointerLeave",m="onPointerEnter",p="pointer"),f=n==null?e:Da(n),_=s==null?e:Da(s),e=new c(S,p+"leave",n,a,v),e.target=f,e.relatedTarget=_,S=null,Vn(v)===y&&(c=new c(m,p+"enter",s,a,v),c.target=_,c.relatedTarget=f,S=c),f=S,n&&s)t:{for(c=n,m=s,p=0,_=c;_;_=ya(_))p++;for(_=0,S=m;S;S=ya(S))_++;for(;0<p-_;)c=ya(c),p--;for(;0<_-p;)m=ya(m),_--;for(;p--;){if(c===m||m!==null&&c===m.alternate)break t;c=ya(c),m=ya(m)}c=null}else c=null;n!==null&&Og(b,e,n,c,!1),s!==null&&f!==null&&Og(b,f,s,c,!0)}}e:{if(e=y?Da(y):window,n=e.nodeName&&e.nodeName.toLowerCase(),n==="select"||n==="input"&&e.type==="file")var w=lE;else if(Ig(e))if(v0)w=fE;else{w=cE;var x=uE}else(n=e.nodeName)&&n.toLowerCase()==="input"&&(e.type==="checkbox"||e.type==="radio")&&(w=dE);if(w&&(w=w(t,y))){g0(b,w,a,v);break e}x&&x(t,e,y),t==="focusout"&&(x=e._wrapperState)&&x.controlled&&e.type==="number"&&Rf(e,"number",e.value)}switch(x=y?Da(y):window,t){case"focusin":(Ig(x)||x.contentEditable==="true")&&(Ba=x,qf=y,os=null);break;case"focusout":os=qf=Ba=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,zg(b,a,v);break;case"selectionchange":if(mE)break;case"keydown":case"keyup":zg(b,a,v)}var U;if(Bp)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ia?p0(t,a)&&(A="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(A="onCompositionStart");A&&(h0&&a.locale!=="ko"&&(Ia||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ia&&(U=f0()):(tn=v,Tp="value"in tn?tn.value:tn.textContent,Ia=!0)),x=Du(y,A),0<x.length&&(A=new Cg(A,t,null,a,v),b.push({event:A,listeners:x}),U?A.data=U:(U=m0(a),U!==null&&(A.data=U)))),(U=iE?nE(t,a):aE(t,a))&&(y=Du(y,"onBeforeInput"),0<y.length&&(v=new Cg("onBeforeInput","beforeinput",null,a,v),b.push({event:v,listeners:y}),v.data=U))}A0(b,r)})}function Us(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Du(t,r){for(var a=r+"Capture",o=[];t!==null;){var u=t,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=_s(t,a),d!=null&&o.unshift(Us(t,d,u)),d=_s(t,r),d!=null&&o.push(Us(t,d,u))),t=t.return}return o}function ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Og(t,r,a,o,u){for(var d=r._reactName,h=[];a!==null&&a!==o;){var l=a,g=l.alternate,y=l.stateNode;if(g!==null&&g===o)break;l.tag===5&&y!==null&&(l=y,u?(g=_s(a,d),g!=null&&h.unshift(Us(a,g,l))):u||(g=_s(a,d),g!=null&&h.push(Us(a,g,l)))),a=a.return}h.length!==0&&t.push({event:r,listeners:h})}var yE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function Mg(t){return(typeof t=="string"?t:""+t).replace(yE,`
`).replace(bE,"")}function zl(t,r,a){if(r=Mg(r),Mg(t)!==r&&a)throw Error(N(425))}function Lu(){}var Xf=null,Qf=null;function Zf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,SE=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,xE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(t){return Ng.resolve(null).then(t).catch(wE)}:Jf;function wE(t){setTimeout(function(){throw t})}function Hd(t,r){var a=r,o=0;do{var u=a.nextSibling;if(t.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(o===0){t.removeChild(u),Ss(r);return}o--}else a!=="$"&&a!=="$?"&&a!=="$!"||o++;a=u}while(a);Ss(r)}function cn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Hg(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}var wo=Math.random().toString(36).slice(2),ei="__reactFiber$"+wo,Cs="__reactProps$"+wo,Bi="__reactContainer$"+wo,eh="__reactEvents$"+wo,EE="__reactListeners$"+wo,UE="__reactHandles$"+wo;function Vn(t){var r=t[ei];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Bi]||a[ei]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Hg(t);t!==null;){if(a=t[ei])return a;t=Hg(t)}return r}t=a,a=t.parentNode}return null}function qs(t){return t=t[ei]||t[Bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function wc(t){return t[Cs]||null}var th=[],La=-1;function xn(t){return{current:t}}function He(t){0>La||(t.current=th[La],th[La]=null,La--)}function Me(t,r){La++,th[La]=t.current,t.current=r}var yn={},Rt=xn(yn),Jt=xn(!1),ea=yn;function lo(t,r){var a=t.type.contextTypes;if(!a)return yn;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===r)return o.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in a)u[d]=r[d];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=u),u}function er(t){return t=t.childContextTypes,t!=null}function zu(){He(Jt),He(Rt)}function Gg(t,r,a){if(Rt.current!==yn)throw Error(N(168));Me(Rt,r),Me(Jt,a)}function P0(t,r,a){var o=t.stateNode;if(r=r.childContextTypes,typeof o.getChildContext!="function")return a;o=o.getChildContext();for(var u in o)if(!(u in r))throw Error(N(108,uw(t)||"Unknown",u));return Ke({},a,o)}function Ru(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yn,ea=Rt.current,Me(Rt,t),Me(Jt,Jt.current),!0}function $g(t,r,a){var o=t.stateNode;if(!o)throw Error(N(169));a?(t=P0(t,r,ea),o.__reactInternalMemoizedMergedChildContext=t,He(Jt),He(Rt),Me(Rt,t)):He(Jt),Me(Jt,a)}var bi=null,Ec=!1,Gd=!1;function I0(t){bi===null?bi=[t]:bi.push(t)}function CE(t){Ec=!0,I0(t)}function wn(){if(!Gd&&bi!==null){Gd=!0;var t=0,r=Pe;try{var a=bi;for(Pe=1;t<a.length;t++){var o=a[t];do o=o(!0);while(o!==null)}bi=null,Ec=!1}catch(u){throw bi!==null&&(bi=bi.slice(t+1)),t0(Ep,wn),u}finally{Pe=r,Gd=!1}}return null}var za=[],Ra=0,Fu=null,Ou=0,Er=[],Ur=0,ta=null,Ai=1,Ti="";function zn(t,r){za[Ra++]=Ou,za[Ra++]=Fu,Fu=t,Ou=r}function B0(t,r,a){Er[Ur++]=Ai,Er[Ur++]=Ti,Er[Ur++]=ta,ta=t;var o=Ai;t=Ti;var u=32-Gr(o)-1;o&=~(1<<u),a+=1;var d=32-Gr(r)+u;if(30<d){var h=u-u%5;d=(o&(1<<h)-1).toString(32),o>>=h,u-=h,Ai=1<<32-Gr(r)+u|a<<u|o,Ti=d+t}else Ai=1<<d|a<<u|o,Ti=t}function Dp(t){t.return!==null&&(zn(t,1),B0(t,1,0))}function Lp(t){for(;t===Fu;)Fu=za[--Ra],za[Ra]=null,Ou=za[--Ra],za[Ra]=null;for(;t===ta;)ta=Er[--Ur],Er[Ur]=null,Ti=Er[--Ur],Er[Ur]=null,Ai=Er[--Ur],Er[Ur]=null}var cr=null,lr=null,je=!1,Nr=null;function k0(t,r){var a=Cr(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=t,r=t.deletions,r===null?(t.deletions=[a],t.flags|=16):r.push(a)}function jg(t,r){switch(t.tag){case 5:var a=t.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,cr=t,lr=cn(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,cr=t,lr=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=ta!==null?{id:Ai,overflow:Ti}:null,t.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Cr(18,null,null,0),a.stateNode=r,a.return=t,t.child=a,cr=t,lr=null,!0):!1;default:return!1}}function rh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ih(t){if(je){var r=lr;if(r){var a=r;if(!jg(t,r)){if(rh(t))throw Error(N(418));r=cn(a.nextSibling);var o=cr;r&&jg(t,r)?k0(o,a):(t.flags=t.flags&-4097|2,je=!1,cr=t)}}else{if(rh(t))throw Error(N(418));t.flags=t.flags&-4097|2,je=!1,cr=t}}}function Vg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cr=t}function Rl(t){if(t!==cr)return!1;if(!je)return Vg(t),je=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Zf(t.type,t.memoizedProps)),r&&(r=lr)){if(rh(t))throw D0(),Error(N(418));for(;r;)k0(t,r),r=cn(r.nextSibling)}if(Vg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(r===0){lr=cn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}t=t.nextSibling}lr=null}}else lr=cr?cn(t.stateNode.nextSibling):null;return!0}function D0(){for(var t=lr;t;)t=cn(t.nextSibling)}function uo(){lr=cr=null,je=!1}function zp(t){Nr===null?Nr=[t]:Nr.push(t)}var AE=Li.ReactCurrentBatchConfig;function Fr(t,r){if(t&&t.defaultProps){r=Ke({},r),t=t.defaultProps;for(var a in t)r[a]===void 0&&(r[a]=t[a]);return r}return r}var Mu=xn(null),Nu=null,Fa=null,Rp=null;function Fp(){Rp=Fa=Nu=null}function Op(t){var r=Mu.current;He(Mu),t._currentValue=r}function nh(t,r,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),t===a)break;t=t.return}}function Qa(t,r){Nu=t,Rp=Fa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Qt=!0),t.firstContext=null)}function Ir(t){var r=t._currentValue;if(Rp!==t)if(t={context:t,memoizedValue:r,next:null},Fa===null){if(Nu===null)throw Error(N(308));Fa=t,Nu.dependencies={lanes:0,firstContext:t}}else Fa=Fa.next=t;return r}var Yn=null;function Mp(t){Yn===null?Yn=[t]:Yn.push(t)}function L0(t,r,a,o){var u=r.interleaved;return u===null?(a.next=a,Mp(r)):(a.next=u.next,u.next=a),r.interleaved=a,ki(t,o)}function ki(t,r){t.lanes|=r;var a=t.alternate;for(a!==null&&(a.lanes|=r),a=t,t=t.return;t!==null;)t.childLanes|=r,a=t.alternate,a!==null&&(a.childLanes|=r),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Ki=!1;function Np(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function dn(t,r,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,xe&2){var u=o.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),o.pending=r,ki(t,a)}return u=o.interleaved,u===null?(r.next=r,Mp(o)):(r.next=u.next,u.next=r),o.interleaved=r,ki(t,a)}function cu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,Up(t,a)}}function Yg(t,r){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var u=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var h={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};d===null?u=d=h:d=d.next=h,a=a.next}while(a!==null);d===null?u=d=r:d=d.next=r}else u=d=r;a={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:o.shared,effects:o.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}function Hu(t,r,a,o){var u=t.updateQueue;Ki=!1;var d=u.firstBaseUpdate,h=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var g=l,y=g.next;g.next=null,h===null?d=y:h.next=y,h=g;var v=t.alternate;v!==null&&(v=v.updateQueue,l=v.lastBaseUpdate,l!==h&&(l===null?v.firstBaseUpdate=y:l.next=y,v.lastBaseUpdate=g))}if(d!==null){var b=u.baseState;h=0,v=y=g=null,l=d;do{var e=l.lane,n=l.eventTime;if((o&e)===e){v!==null&&(v=v.next={eventTime:n,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var s=t,c=l;switch(e=r,n=a,c.tag){case 1:if(s=c.payload,typeof s=="function"){b=s.call(n,b,e);break e}b=s;break e;case 3:s.flags=s.flags&-65537|128;case 0:if(s=c.payload,e=typeof s=="function"?s.call(n,b,e):s,e==null)break e;b=Ke({},b,e);break e;case 2:Ki=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,e=u.effects,e===null?u.effects=[l]:e.push(l))}else n={eventTime:n,lane:e,tag:l.tag,payload:l.payload,callback:l.callback,next:null},v===null?(y=v=n,g=b):v=v.next=n,h|=e;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;e=l,l=e.next,e.next=null,u.lastBaseUpdate=e,u.shared.pending=null}}while(1);if(v===null&&(g=b),u.baseState=g,u.firstBaseUpdate=y,u.lastBaseUpdate=v,r=u.shared.interleaved,r!==null){u=r;do h|=u.lane,u=u.next;while(u!==r)}else d===null&&(u.shared.lanes=0);ia|=h,t.lanes=h,t.memoizedState=b}}function Wg(t,r,a){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var o=t[r],u=o.callback;if(u!==null){if(o.callback=null,o=a,typeof u!="function")throw Error(N(191,u));u.call(o)}}}var R0=new Ly.Component().refs;function ah(t,r,a,o){r=t.memoizedState,a=a(o,r),a=a==null?r:Ke({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Uc={isMounted:function(t){return(t=t._reactInternals)?fa(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var o=$t(),u=hn(t),d=Pi(o,u);d.payload=r,a!=null&&(d.callback=a),r=dn(t,d,u),r!==null&&($r(r,t,u,o),cu(r,t,u))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var o=$t(),u=hn(t),d=Pi(o,u);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=dn(t,d,u),r!==null&&($r(r,t,u,o),cu(r,t,u))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=$t(),o=hn(t),u=Pi(a,o);u.tag=2,r!=null&&(u.callback=r),r=dn(t,u,o),r!==null&&($r(r,t,o,a),cu(r,t,o))}};function qg(t,r,a,o,u,d,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,h):r.prototype&&r.prototype.isPureReactComponent?!ws(a,o)||!ws(u,d):!0}function F0(t,r,a){var o=!1,u=yn,d=r.contextType;return typeof d=="object"&&d!==null?d=Ir(d):(u=er(r)?ea:Rt.current,o=r.contextTypes,d=(o=o!=null)?lo(t,u):yn),r=new r(a,d),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Uc,t.stateNode=r,r._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=u,t.__reactInternalMemoizedMaskedChildContext=d),r}function Kg(t,r,a,o){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,o),r.state!==t&&Uc.enqueueReplaceState(r,r.state,null)}function oh(t,r,a,o){var u=t.stateNode;u.props=a,u.state=t.memoizedState,u.refs=R0,Np(t);var d=r.contextType;typeof d=="object"&&d!==null?u.context=Ir(d):(d=er(r)?ea:Rt.current,u.context=lo(t,d)),u.state=t.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(ah(t,r,d,a),u.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(r=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),r!==u.state&&Uc.enqueueReplaceState(u,u.state,null),Hu(t,a,u,o),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,r,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(N(309));var o=a.stateNode}if(!o)throw Error(N(147,t));var u=o,d=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(h){var l=u.refs;l===R0&&(l=u.refs={}),h===null?delete l[d]:l[d]=h},r._stringRef=d,r)}if(typeof t!="string")throw Error(N(284));if(!a._owner)throw Error(N(290,t))}return t}function Fl(t,r){throw t=Object.prototype.toString.call(r),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Xg(t){var r=t._init;return r(t._payload)}function O0(t){function r(m,p){if(t){var _=m.deletions;_===null?(m.deletions=[p],m.flags|=16):_.push(p)}}function a(m,p){if(!t)return null;for(;p!==null;)r(m,p),p=p.sibling;return null}function o(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function u(m,p){return m=pn(m,p),m.index=0,m.sibling=null,m}function d(m,p,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<p?(m.flags|=2,p):_):(m.flags|=2,p)):(m.flags|=1048576,p)}function h(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,_,S){return p===null||p.tag!==6?(p=Kd(_,m.mode,S),p.return=m,p):(p=u(p,_),p.return=m,p)}function g(m,p,_,S){var w=_.type;return w===Pa?v(m,p,_.props.children,S,_.key):p!==null&&(p.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qi&&Xg(w)===p.type)?(S=u(p,_.props),S.ref=Lo(m,p,_),S.return=m,S):(S=gu(_.type,_.key,_.props,null,m.mode,S),S.ref=Lo(m,p,_),S.return=m,S)}function y(m,p,_,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=Xd(_,m.mode,S),p.return=m,p):(p=u(p,_.children||[]),p.return=m,p)}function v(m,p,_,S,w){return p===null||p.tag!==7?(p=Xn(_,m.mode,S,w),p.return=m,p):(p=u(p,_),p.return=m,p)}function b(m,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Kd(""+p,m.mode,_),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Cl:return _=gu(p.type,p.key,p.props,null,m.mode,_),_.ref=Lo(m,null,p),_.return=m,_;case Ta:return p=Xd(p,m.mode,_),p.return=m,p;case qi:var S=p._init;return b(m,S(p._payload),_)}if(Yo(p)||Po(p))return p=Xn(p,m.mode,_,null),p.return=m,p;Fl(m,p)}return null}function e(m,p,_,S){var w=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:l(m,p,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cl:return _.key===w?g(m,p,_,S):null;case Ta:return _.key===w?y(m,p,_,S):null;case qi:return w=_._init,e(m,p,w(_._payload),S)}if(Yo(_)||Po(_))return w!==null?null:v(m,p,_,S,null);Fl(m,_)}return null}function n(m,p,_,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(_)||null,l(p,m,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cl:return m=m.get(S.key===null?_:S.key)||null,g(p,m,S,w);case Ta:return m=m.get(S.key===null?_:S.key)||null,y(p,m,S,w);case qi:var x=S._init;return n(m,p,_,x(S._payload),w)}if(Yo(S)||Po(S))return m=m.get(_)||null,v(p,m,S,w,null);Fl(p,S)}return null}function s(m,p,_,S){for(var w=null,x=null,U=p,A=p=0,E=null;U!==null&&A<_.length;A++){U.index>A?(E=U,U=null):E=U.sibling;var T=e(m,U,_[A],S);if(T===null){U===null&&(U=E);break}t&&U&&T.alternate===null&&r(m,U),p=d(T,p,A),x===null?w=T:x.sibling=T,x=T,U=E}if(A===_.length)return a(m,U),je&&zn(m,A),w;if(U===null){for(;A<_.length;A++)U=b(m,_[A],S),U!==null&&(p=d(U,p,A),x===null?w=U:x.sibling=U,x=U);return je&&zn(m,A),w}for(U=o(m,U);A<_.length;A++)E=n(U,m,A,_[A],S),E!==null&&(t&&E.alternate!==null&&U.delete(E.key===null?A:E.key),p=d(E,p,A),x===null?w=E:x.sibling=E,x=E);return t&&U.forEach(function(P){return r(m,P)}),je&&zn(m,A),w}function c(m,p,_,S){var w=Po(_);if(typeof w!="function")throw Error(N(150));if(_=w.call(_),_==null)throw Error(N(151));for(var x=w=null,U=p,A=p=0,E=null,T=_.next();U!==null&&!T.done;A++,T=_.next()){U.index>A?(E=U,U=null):E=U.sibling;var P=e(m,U,T.value,S);if(P===null){U===null&&(U=E);break}t&&U&&P.alternate===null&&r(m,U),p=d(P,p,A),x===null?w=P:x.sibling=P,x=P,U=E}if(T.done)return a(m,U),je&&zn(m,A),w;if(U===null){for(;!T.done;A++,T=_.next())T=b(m,T.value,S),T!==null&&(p=d(T,p,A),x===null?w=T:x.sibling=T,x=T);return je&&zn(m,A),w}for(U=o(m,U);!T.done;A++,T=_.next())T=n(U,m,A,T.value,S),T!==null&&(t&&T.alternate!==null&&U.delete(T.key===null?A:T.key),p=d(T,p,A),x===null?w=T:x.sibling=T,x=T);return t&&U.forEach(function(z){return r(m,z)}),je&&zn(m,A),w}function f(m,p,_,S){if(typeof _=="object"&&_!==null&&_.type===Pa&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Cl:e:{for(var w=_.key,x=p;x!==null;){if(x.key===w){if(w=_.type,w===Pa){if(x.tag===7){a(m,x.sibling),p=u(x,_.props.children),p.return=m,m=p;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qi&&Xg(w)===x.type){a(m,x.sibling),p=u(x,_.props),p.ref=Lo(m,x,_),p.return=m,m=p;break e}a(m,x);break}else r(m,x);x=x.sibling}_.type===Pa?(p=Xn(_.props.children,m.mode,S,_.key),p.return=m,m=p):(S=gu(_.type,_.key,_.props,null,m.mode,S),S.ref=Lo(m,p,_),S.return=m,m=S)}return h(m);case Ta:e:{for(x=_.key;p!==null;){if(p.key===x)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){a(m,p.sibling),p=u(p,_.children||[]),p.return=m,m=p;break e}else{a(m,p);break}else r(m,p);p=p.sibling}p=Xd(_,m.mode,S),p.return=m,m=p}return h(m);case qi:return x=_._init,f(m,p,x(_._payload),S)}if(Yo(_))return s(m,p,_,S);if(Po(_))return c(m,p,_,S);Fl(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(a(m,p.sibling),p=u(p,_),p.return=m,m=p):(a(m,p),p=Kd(_,m.mode,S),p.return=m,m=p),h(m)):a(m,p)}return f}var co=O0(!0),M0=O0(!1),Ks={},ii=xn(Ks),As=xn(Ks),Ts=xn(Ks);function Wn(t){if(t===Ks)throw Error(N(174));return t}function Hp(t,r){switch(Me(Ts,r),Me(As,t),Me(ii,Ks),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Of(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Of(r,t)}He(ii),Me(ii,r)}function fo(){He(ii),He(As),He(Ts)}function N0(t){Wn(Ts.current);var r=Wn(ii.current),a=Of(r,t.type);r!==a&&(Me(As,t),Me(ii,a))}function Gp(t){As.current===t&&(He(ii),He(As))}var We=xn(0);function Gu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $d=[];function $p(){for(var t=0;t<$d.length;t++)$d[t]._workInProgressVersionPrimary=null;$d.length=0}var du=Li.ReactCurrentDispatcher,jd=Li.ReactCurrentBatchConfig,ra=0,qe=null,dt=null,mt=null,$u=!1,ss=!1,Ps=0,TE=0;function Bt(){throw Error(N(321))}function jp(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Vr(t[a],r[a]))return!1;return!0}function Vp(t,r,a,o,u,d){if(ra=d,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,du.current=t===null||t.memoizedState===null?kE:DE,t=a(o,u),ss){d=0;do{if(ss=!1,Ps=0,25<=d)throw Error(N(301));d+=1,mt=dt=null,r.updateQueue=null,du.current=LE,t=a(o,u)}while(ss)}if(du.current=ju,r=dt!==null&&dt.next!==null,ra=0,mt=dt=qe=null,$u=!1,r)throw Error(N(300));return t}function Yp(){var t=Ps!==0;return Ps=0,t}function Jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?qe.memoizedState=mt=t:mt=mt.next=t,mt}function Br(){if(dt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var r=mt===null?qe.memoizedState:mt.next;if(r!==null)mt=r,dt=t;else{if(t===null)throw Error(N(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?qe.memoizedState=mt=t:mt=mt.next=t}return mt}function Is(t,r){return typeof r=="function"?r(t):r}function Vd(t){var r=Br(),a=r.queue;if(a===null)throw Error(N(311));a.lastRenderedReducer=t;var o=dt,u=o.baseQueue,d=a.pending;if(d!==null){if(u!==null){var h=u.next;u.next=d.next,d.next=h}o.baseQueue=u=d,a.pending=null}if(u!==null){d=u.next,o=o.baseState;var l=h=null,g=null,y=d;do{var v=y.lane;if((ra&v)===v)g!==null&&(g=g.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),o=y.hasEagerState?y.eagerState:t(o,y.action);else{var b={lane:v,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};g===null?(l=g=b,h=o):g=g.next=b,qe.lanes|=v,ia|=v}y=y.next}while(y!==null&&y!==d);g===null?h=o:g.next=l,Vr(o,r.memoizedState)||(Qt=!0),r.memoizedState=o,r.baseState=h,r.baseQueue=g,a.lastRenderedState=o}if(t=a.interleaved,t!==null){u=t;do d=u.lane,qe.lanes|=d,ia|=d,u=u.next;while(u!==t)}else u===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Yd(t){var r=Br(),a=r.queue;if(a===null)throw Error(N(311));a.lastRenderedReducer=t;var o=a.dispatch,u=a.pending,d=r.memoizedState;if(u!==null){a.pending=null;var h=u=u.next;do d=t(d,h.action),h=h.next;while(h!==u);Vr(d,r.memoizedState)||(Qt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,o]}function H0(){}function G0(t,r){var a=qe,o=Br(),u=r(),d=!Vr(o.memoizedState,u);if(d&&(o.memoizedState=u,Qt=!0),o=o.queue,Wp(V0.bind(null,a,o,t),[t]),o.getSnapshot!==r||d||mt!==null&&mt.memoizedState.tag&1){if(a.flags|=2048,Bs(9,j0.bind(null,a,o,u,r),void 0,null),gt===null)throw Error(N(349));ra&30||$0(a,r,u)}return u}function $0(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=qe.updateQueue,r===null?(r={lastEffect:null,stores:null},qe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function j0(t,r,a,o){r.value=a,r.getSnapshot=o,Y0(r)&&W0(t)}function V0(t,r,a){return a(function(){Y0(r)&&W0(t)})}function Y0(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Vr(t,a)}catch{return!0}}function W0(t){var r=ki(t,1);r!==null&&$r(r,t,1,-1)}function Qg(t){var r=Jr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:t},r.queue=t,t=t.dispatch=BE.bind(null,qe,t),[r.memoizedState,t]}function Bs(t,r,a,o){return t={tag:t,create:r,destroy:a,deps:o,next:null},r=qe.updateQueue,r===null?(r={lastEffect:null,stores:null},qe.updateQueue=r,r.lastEffect=t.next=t):(a=r.lastEffect,a===null?r.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,r.lastEffect=t)),t}function q0(){return Br().memoizedState}function fu(t,r,a,o){var u=Jr();qe.flags|=t,u.memoizedState=Bs(1|r,a,void 0,o===void 0?null:o)}function Cc(t,r,a,o){var u=Br();o=o===void 0?null:o;var d=void 0;if(dt!==null){var h=dt.memoizedState;if(d=h.destroy,o!==null&&jp(o,h.deps)){u.memoizedState=Bs(r,a,d,o);return}}qe.flags|=t,u.memoizedState=Bs(1|r,a,d,o)}function Zg(t,r){return fu(8390656,8,t,r)}function Wp(t,r){return Cc(2048,8,t,r)}function K0(t,r){return Cc(4,2,t,r)}function X0(t,r){return Cc(4,4,t,r)}function Q0(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Z0(t,r,a){return a=a!=null?a.concat([t]):null,Cc(4,4,Q0.bind(null,r,t),a)}function qp(){}function J0(t,r){var a=Br();r=r===void 0?null:r;var o=a.memoizedState;return o!==null&&r!==null&&jp(r,o[1])?o[0]:(a.memoizedState=[t,r],t)}function eb(t,r){var a=Br();r=r===void 0?null:r;var o=a.memoizedState;return o!==null&&r!==null&&jp(r,o[1])?o[0]:(t=t(),a.memoizedState=[t,r],t)}function tb(t,r,a){return ra&21?(Vr(a,r)||(a=n0(),qe.lanes|=a,ia|=a,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=a)}function PE(t,r){var a=Pe;Pe=a!==0&&4>a?a:4,t(!0);var o=jd.transition;jd.transition={};try{t(!1),r()}finally{Pe=a,jd.transition=o}}function rb(){return Br().memoizedState}function IE(t,r,a){var o=hn(t);if(a={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null},ib(t))nb(r,a);else if(a=L0(t,r,a,o),a!==null){var u=$t();$r(a,t,o,u),ab(a,r,o)}}function BE(t,r,a){var o=hn(t),u={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null};if(ib(t))nb(r,u);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var h=r.lastRenderedState,l=d(h,a);if(u.hasEagerState=!0,u.eagerState=l,Vr(l,h)){var g=r.interleaved;g===null?(u.next=u,Mp(r)):(u.next=g.next,g.next=u),r.interleaved=u;return}}catch{}finally{}a=L0(t,r,u,o),a!==null&&(u=$t(),$r(a,t,o,u),ab(a,r,o))}}function ib(t){var r=t.alternate;return t===qe||r!==null&&r===qe}function nb(t,r){ss=$u=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function ab(t,r,a){if(a&4194240){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,Up(t,a)}}var ju={readContext:Ir,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},kE={readContext:Ir,useCallback:function(t,r){return Jr().memoizedState=[t,r===void 0?null:r],t},useContext:Ir,useEffect:Zg,useImperativeHandle:function(t,r,a){return a=a!=null?a.concat([t]):null,fu(4194308,4,Q0.bind(null,r,t),a)},useLayoutEffect:function(t,r){return fu(4194308,4,t,r)},useInsertionEffect:function(t,r){return fu(4,2,t,r)},useMemo:function(t,r){var a=Jr();return r=r===void 0?null:r,t=t(),a.memoizedState=[t,r],t},useReducer:function(t,r,a){var o=Jr();return r=a!==void 0?a(r):r,o.memoizedState=o.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},o.queue=t,t=t.dispatch=IE.bind(null,qe,t),[o.memoizedState,t]},useRef:function(t){var r=Jr();return t={current:t},r.memoizedState=t},useState:Qg,useDebugValue:qp,useDeferredValue:function(t){return Jr().memoizedState=t},useTransition:function(){var t=Qg(!1),r=t[0];return t=PE.bind(null,t[1]),Jr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,a){var o=qe,u=Jr();if(je){if(a===void 0)throw Error(N(407));a=a()}else{if(a=r(),gt===null)throw Error(N(349));ra&30||$0(o,r,a)}u.memoizedState=a;var d={value:a,getSnapshot:r};return u.queue=d,Zg(V0.bind(null,o,d,t),[t]),o.flags|=2048,Bs(9,j0.bind(null,o,d,a,r),void 0,null),a},useId:function(){var t=Jr(),r=gt.identifierPrefix;if(je){var a=Ti,o=Ai;a=(o&~(1<<32-Gr(o)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ps++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=TE++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},DE={readContext:Ir,useCallback:J0,useContext:Ir,useEffect:Wp,useImperativeHandle:Z0,useInsertionEffect:K0,useLayoutEffect:X0,useMemo:eb,useReducer:Vd,useRef:q0,useState:function(){return Vd(Is)},useDebugValue:qp,useDeferredValue:function(t){var r=Br();return tb(r,dt.memoizedState,t)},useTransition:function(){var t=Vd(Is)[0],r=Br().memoizedState;return[t,r]},useMutableSource:H0,useSyncExternalStore:G0,useId:rb,unstable_isNewReconciler:!1},LE={readContext:Ir,useCallback:J0,useContext:Ir,useEffect:Wp,useImperativeHandle:Z0,useInsertionEffect:K0,useLayoutEffect:X0,useMemo:eb,useReducer:Yd,useRef:q0,useState:function(){return Yd(Is)},useDebugValue:qp,useDeferredValue:function(t){var r=Br();return dt===null?r.memoizedState=t:tb(r,dt.memoizedState,t)},useTransition:function(){var t=Yd(Is)[0],r=Br().memoizedState;return[t,r]},useMutableSource:H0,useSyncExternalStore:G0,useId:rb,unstable_isNewReconciler:!1};function ho(t,r){try{var a="",o=r;do a+=lw(o),o=o.return;while(o);var u=a}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:t,source:r,stack:u,digest:null}}function Wd(t,r,a){return{value:t,source:null,stack:a??null,digest:r??null}}function sh(t,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var zE=typeof WeakMap=="function"?WeakMap:Map;function ob(t,r,a){a=Pi(-1,a),a.tag=3,a.payload={element:null};var o=r.value;return a.callback=function(){Yu||(Yu=!0,vh=o),sh(t,r)},a}function sb(t,r,a){a=Pi(-1,a),a.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var u=r.value;a.payload=function(){return o(u)},a.callback=function(){sh(t,r)}}var d=t.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(a.callback=function(){sh(t,r),typeof o!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var h=r.stack;this.componentDidCatch(r.value,{componentStack:h!==null?h:""})}),a}function Jg(t,r,a){var o=t.pingCache;if(o===null){o=t.pingCache=new zE;var u=new Set;o.set(r,u)}else u=o.get(r),u===void 0&&(u=new Set,o.set(r,u));u.has(a)||(u.add(a),t=KE.bind(null,t,r,a),r.then(t,t))}function ev(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function tv(t,r,a,o,u){return t.mode&1?(t.flags|=65536,t.lanes=u,t):(t===r?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Pi(-1,1),r.tag=2,dn(a,r,1))),a.lanes|=1),t)}var RE=Li.ReactCurrentOwner,Qt=!1;function Ht(t,r,a,o){r.child=t===null?M0(r,null,a,o):co(r,t.child,a,o)}function rv(t,r,a,o,u){a=a.render;var d=r.ref;return Qa(r,u),o=Vp(t,r,a,o,d,u),a=Yp(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,Di(t,r,u)):(je&&a&&Dp(r),r.flags|=1,Ht(t,r,o,u),r.child)}function iv(t,r,a,o,u){if(t===null){var d=a.type;return typeof d=="function"&&!rm(d)&&d.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=d,lb(t,r,d,o,u)):(t=gu(a.type,null,o,r,r.mode,u),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!(t.lanes&u)){var h=d.memoizedProps;if(a=a.compare,a=a!==null?a:ws,a(h,o)&&t.ref===r.ref)return Di(t,r,u)}return r.flags|=1,t=pn(d,o),t.ref=r.ref,t.return=r,r.child=t}function lb(t,r,a,o,u){if(t!==null){var d=t.memoizedProps;if(ws(d,o)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=o=d,(t.lanes&u)!==0)t.flags&131072&&(Qt=!0);else return r.lanes=t.lanes,Di(t,r,u)}return lh(t,r,a,o,u)}function ub(t,r,a){var o=r.pendingProps,u=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Ma,or),or|=a;else{if(!(a&1073741824))return t=d!==null?d.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Me(Ma,or),or|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:a,Me(Ma,or),or|=o}else d!==null?(o=d.baseLanes|a,r.memoizedState=null):o=a,Me(Ma,or),or|=o;return Ht(t,r,u,a),r.child}function cb(t,r){var a=r.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function lh(t,r,a,o,u){var d=er(a)?ea:Rt.current;return d=lo(r,d),Qa(r,u),a=Vp(t,r,a,o,d,u),o=Yp(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,Di(t,r,u)):(je&&o&&Dp(r),r.flags|=1,Ht(t,r,a,u),r.child)}function nv(t,r,a,o,u){if(er(a)){var d=!0;Ru(r)}else d=!1;if(Qa(r,u),r.stateNode===null)hu(t,r),F0(r,a,o),oh(r,a,o,u),o=!0;else if(t===null){var h=r.stateNode,l=r.memoizedProps;h.props=l;var g=h.context,y=a.contextType;typeof y=="object"&&y!==null?y=Ir(y):(y=er(a)?ea:Rt.current,y=lo(r,y));var v=a.getDerivedStateFromProps,b=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function";b||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==o||g!==y)&&Kg(r,h,o,y),Ki=!1;var e=r.memoizedState;h.state=e,Hu(r,o,h,u),g=r.memoizedState,l!==o||e!==g||Jt.current||Ki?(typeof v=="function"&&(ah(r,a,v,o),g=r.memoizedState),(l=Ki||qg(r,a,l,o,e,g,y))?(b||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(r.flags|=4194308)):(typeof h.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=g),h.props=o,h.state=g,h.context=y,o=l):(typeof h.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{h=r.stateNode,z0(t,r),l=r.memoizedProps,y=r.type===r.elementType?l:Fr(r.type,l),h.props=y,b=r.pendingProps,e=h.context,g=a.contextType,typeof g=="object"&&g!==null?g=Ir(g):(g=er(a)?ea:Rt.current,g=lo(r,g));var n=a.getDerivedStateFromProps;(v=typeof n=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==b||e!==g)&&Kg(r,h,o,g),Ki=!1,e=r.memoizedState,h.state=e,Hu(r,o,h,u);var s=r.memoizedState;l!==b||e!==s||Jt.current||Ki?(typeof n=="function"&&(ah(r,a,n,o),s=r.memoizedState),(y=Ki||qg(r,a,y,o,e,s,g)||!1)?(v||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,s,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,s,g)),typeof h.componentDidUpdate=="function"&&(r.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof h.componentDidUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=s),h.props=o,h.state=s,h.context=g,o=y):(typeof h.componentDidUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=1024),o=!1)}return uh(t,r,a,o,d,u)}function uh(t,r,a,o,u,d){cb(t,r);var h=(r.flags&128)!==0;if(!o&&!h)return u&&$g(r,a,!1),Di(t,r,d);o=r.stateNode,RE.current=r;var l=h&&typeof a.getDerivedStateFromError!="function"?null:o.render();return r.flags|=1,t!==null&&h?(r.child=co(r,t.child,null,d),r.child=co(r,null,l,d)):Ht(t,r,l,d),r.memoizedState=o.state,u&&$g(r,a,!0),r.child}function db(t){var r=t.stateNode;r.pendingContext?Gg(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Gg(t,r.context,!1),Hp(t,r.containerInfo)}function av(t,r,a,o,u){return uo(),zp(u),r.flags|=256,Ht(t,r,a,o),r.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function dh(t){return{baseLanes:t,cachePool:null,transitions:null}}function fb(t,r,a){var o=r.pendingProps,u=We.current,d=!1,h=(r.flags&128)!==0,l;if((l=h)||(l=t!==null&&t.memoizedState===null?!1:(u&2)!==0),l?(d=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(u|=1),Me(We,u&1),t===null)return ih(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(h=o.children,t=o.fallback,d?(o=r.mode,d=r.child,h={mode:"hidden",children:h},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=h):d=Pc(h,o,0,null),t=Xn(t,o,a,null),d.return=r,t.return=r,d.sibling=t,r.child=d,r.child.memoizedState=dh(a),r.memoizedState=ch,t):Kp(r,h));if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return FE(t,r,h,o,l,u,a);if(d){d=o.fallback,h=r.mode,u=t.child,l=u.sibling;var g={mode:"hidden",children:o.children};return!(h&1)&&r.child!==u?(o=r.child,o.childLanes=0,o.pendingProps=g,r.deletions=null):(o=pn(u,g),o.subtreeFlags=u.subtreeFlags&14680064),l!==null?d=pn(l,d):(d=Xn(d,h,a,null),d.flags|=2),d.return=r,o.return=r,o.sibling=d,r.child=o,o=d,d=r.child,h=t.child.memoizedState,h=h===null?dh(a):{baseLanes:h.baseLanes|a,cachePool:null,transitions:h.transitions},d.memoizedState=h,d.childLanes=t.childLanes&~a,r.memoizedState=ch,o}return d=t.child,t=d.sibling,o=pn(d,{mode:"visible",children:o.children}),!(r.mode&1)&&(o.lanes=a),o.return=r,o.sibling=null,t!==null&&(a=r.deletions,a===null?(r.deletions=[t],r.flags|=16):a.push(t)),r.child=o,r.memoizedState=null,o}function Kp(t,r){return r=Pc({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Ol(t,r,a,o){return o!==null&&zp(o),co(r,t.child,null,a),t=Kp(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function FE(t,r,a,o,u,d,h){if(a)return r.flags&256?(r.flags&=-257,o=Wd(Error(N(422))),Ol(t,r,h,o)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(d=o.fallback,u=r.mode,o=Pc({mode:"visible",children:o.children},u,0,null),d=Xn(d,u,h,null),d.flags|=2,o.return=r,d.return=r,o.sibling=d,r.child=o,r.mode&1&&co(r,t.child,null,h),r.child.memoizedState=dh(h),r.memoizedState=ch,d);if(!(r.mode&1))return Ol(t,r,h,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var l=o.dgst;return o=l,d=Error(N(419)),o=Wd(d,o,void 0),Ol(t,r,h,o)}if(l=(h&t.childLanes)!==0,Qt||l){if(o=gt,o!==null){switch(h&-h){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|h)?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,ki(t,u),$r(o,t,u,-1))}return tm(),o=Wd(Error(N(421))),Ol(t,r,h,o)}return u.data==="$?"?(r.flags|=128,r.child=t.child,r=XE.bind(null,t),u._reactRetry=r,null):(t=d.treeContext,lr=cn(u.nextSibling),cr=r,je=!0,Nr=null,t!==null&&(Er[Ur++]=Ai,Er[Ur++]=Ti,Er[Ur++]=ta,Ai=t.id,Ti=t.overflow,ta=r),r=Kp(r,o.children),r.flags|=4096,r)}function ov(t,r,a){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r),nh(t.return,r,a)}function qd(t,r,a,o,u){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:u}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=u)}function hb(t,r,a){var o=r.pendingProps,u=o.revealOrder,d=o.tail;if(Ht(t,r,o.children,a),o=We.current,o&2)o=o&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,a,r);else if(t.tag===19)ov(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(Me(We,o),!(r.mode&1))r.memoizedState=null;else switch(u){case"forwards":for(a=r.child,u=null;a!==null;)t=a.alternate,t!==null&&Gu(t)===null&&(u=a),a=a.sibling;a=u,a===null?(u=r.child,r.child=null):(u=a.sibling,a.sibling=null),qd(r,!1,u,a,d);break;case"backwards":for(a=null,u=r.child,r.child=null;u!==null;){if(t=u.alternate,t!==null&&Gu(t)===null){r.child=u;break}t=u.sibling,u.sibling=a,a=u,u=t}qd(r,!0,a,null,d);break;case"together":qd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function hu(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Di(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ia|=r.lanes,!(a&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(N(153));if(r.child!==null){for(t=r.child,a=pn(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=pn(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function OE(t,r,a){switch(r.tag){case 3:db(r),uo();break;case 5:N0(r);break;case 1:er(r.type)&&Ru(r);break;case 4:Hp(r,r.stateNode.containerInfo);break;case 10:var o=r.type._context,u=r.memoizedProps.value;Me(Mu,o._currentValue),o._currentValue=u;break;case 13:if(o=r.memoizedState,o!==null)return o.dehydrated!==null?(Me(We,We.current&1),r.flags|=128,null):a&r.child.childLanes?fb(t,r,a):(Me(We,We.current&1),t=Di(t,r,a),t!==null?t.sibling:null);Me(We,We.current&1);break;case 19:if(o=(a&r.childLanes)!==0,t.flags&128){if(o)return hb(t,r,a);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Me(We,We.current),o)break;return null;case 22:case 23:return r.lanes=0,ub(t,r,a)}return Di(t,r,a)}var pb,fh,mb,gb;pb=function(t,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};fh=function(){};mb=function(t,r,a,o){var u=t.memoizedProps;if(u!==o){t=r.stateNode,Wn(ii.current);var d=null;switch(a){case"input":u=Lf(t,u),o=Lf(t,o),d=[];break;case"select":u=Ke({},u,{value:void 0}),o=Ke({},o,{value:void 0}),d=[];break;case"textarea":u=Ff(t,u),o=Ff(t,o),d=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=Lu)}Mf(a,o);var h;a=null;for(y in u)if(!o.hasOwnProperty(y)&&u.hasOwnProperty(y)&&u[y]!=null)if(y==="style"){var l=u[y];for(h in l)l.hasOwnProperty(h)&&(a||(a={}),a[h]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(gs.hasOwnProperty(y)?d||(d=[]):(d=d||[]).push(y,null));for(y in o){var g=o[y];if(l=u!=null?u[y]:void 0,o.hasOwnProperty(y)&&g!==l&&(g!=null||l!=null))if(y==="style")if(l){for(h in l)!l.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(a||(a={}),a[h]="");for(h in g)g.hasOwnProperty(h)&&l[h]!==g[h]&&(a||(a={}),a[h]=g[h])}else a||(d||(d=[]),d.push(y,a)),a=g;else y==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,l=l?l.__html:void 0,g!=null&&l!==g&&(d=d||[]).push(y,g)):y==="children"?typeof g!="string"&&typeof g!="number"||(d=d||[]).push(y,""+g):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(gs.hasOwnProperty(y)?(g!=null&&y==="onScroll"&&Ne("scroll",t),d||l===g||(d=[])):(d=d||[]).push(y,g))}a&&(d=d||[]).push("style",a);var y=d;(r.updateQueue=y)&&(r.flags|=4)}};gb=function(t,r,a,o){a!==o&&(r.flags|=4)};function zo(t,r){if(!je)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function kt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(r)for(var u=t.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=a,r}function ME(t,r,a){var o=r.pendingProps;switch(Lp(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(r),null;case 1:return er(r.type)&&zu(),kt(r),null;case 3:return o=r.stateNode,fo(),He(Jt),He(Rt),$p(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Rl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Nr!==null&&(bh(Nr),Nr=null))),fh(t,r),kt(r),null;case 5:Gp(r);var u=Wn(Ts.current);if(a=r.type,t!==null&&r.stateNode!=null)mb(t,r,a,o,u),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!o){if(r.stateNode===null)throw Error(N(166));return kt(r),null}if(t=Wn(ii.current),Rl(r)){o=r.stateNode,a=r.type;var d=r.memoizedProps;switch(o[ei]=r,o[Cs]=d,t=(r.mode&1)!==0,a){case"dialog":Ne("cancel",o),Ne("close",o);break;case"iframe":case"object":case"embed":Ne("load",o);break;case"video":case"audio":for(u=0;u<qo.length;u++)Ne(qo[u],o);break;case"source":Ne("error",o);break;case"img":case"image":case"link":Ne("error",o),Ne("load",o);break;case"details":Ne("toggle",o);break;case"input":mg(o,d),Ne("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Ne("invalid",o);break;case"textarea":vg(o,d),Ne("invalid",o)}Mf(a,d),u=null;for(var h in d)if(d.hasOwnProperty(h)){var l=d[h];h==="children"?typeof l=="string"?o.textContent!==l&&(d.suppressHydrationWarning!==!0&&zl(o.textContent,l,t),u=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&zl(o.textContent,l,t),u=["children",""+l]):gs.hasOwnProperty(h)&&l!=null&&h==="onScroll"&&Ne("scroll",o)}switch(a){case"input":Al(o),gg(o,d,!0);break;case"textarea":Al(o),_g(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=Lu)}o=u,r.updateQueue=o,o!==null&&(r.flags|=4)}else{h=u.nodeType===9?u:u.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$y(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=h.createElement(a,{is:o.is}):(t=h.createElement(a),a==="select"&&(h=t,o.multiple?h.multiple=!0:o.size&&(h.size=o.size))):t=h.createElementNS(t,a),t[ei]=r,t[Cs]=o,pb(t,r,!1,!1),r.stateNode=t;e:{switch(h=Nf(a,o),a){case"dialog":Ne("cancel",t),Ne("close",t),u=o;break;case"iframe":case"object":case"embed":Ne("load",t),u=o;break;case"video":case"audio":for(u=0;u<qo.length;u++)Ne(qo[u],t);u=o;break;case"source":Ne("error",t),u=o;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),u=o;break;case"details":Ne("toggle",t),u=o;break;case"input":mg(t,o),u=Lf(t,o),Ne("invalid",t);break;case"option":u=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},u=Ke({},o,{value:void 0}),Ne("invalid",t);break;case"textarea":vg(t,o),u=Ff(t,o),Ne("invalid",t);break;default:u=o}Mf(a,u),l=u;for(d in l)if(l.hasOwnProperty(d)){var g=l[d];d==="style"?Yy(t,g):d==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&jy(t,g)):d==="children"?typeof g=="string"?(a!=="textarea"||g!=="")&&vs(t,g):typeof g=="number"&&vs(t,""+g):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(gs.hasOwnProperty(d)?g!=null&&d==="onScroll"&&Ne("scroll",t):g!=null&&yp(t,d,g,h))}switch(a){case"input":Al(t),gg(t,o,!1);break;case"textarea":Al(t),_g(t);break;case"option":o.value!=null&&t.setAttribute("value",""+_n(o.value));break;case"select":t.multiple=!!o.multiple,d=o.value,d!=null?Wa(t,!!o.multiple,d,!1):o.defaultValue!=null&&Wa(t,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(t.onclick=Lu)}switch(a){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return kt(r),null;case 6:if(t&&r.stateNode!=null)gb(t,r,t.memoizedProps,o);else{if(typeof o!="string"&&r.stateNode===null)throw Error(N(166));if(a=Wn(Ts.current),Wn(ii.current),Rl(r)){if(o=r.stateNode,a=r.memoizedProps,o[ei]=r,(d=o.nodeValue!==a)&&(t=cr,t!==null))switch(t.tag){case 3:zl(o.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zl(o.nodeValue,a,(t.mode&1)!==0)}d&&(r.flags|=4)}else o=(a.nodeType===9?a:a.ownerDocument).createTextNode(o),o[ei]=r,r.stateNode=o}return kt(r),null;case 13:if(He(We),o=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&lr!==null&&r.mode&1&&!(r.flags&128))D0(),uo(),r.flags|=98560,d=!1;else if(d=Rl(r),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(N(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(N(317));d[ei]=r}else uo(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;kt(r),d=!1}else Nr!==null&&(bh(Nr),Nr=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(r.child.flags|=8192,r.mode&1&&(t===null||We.current&1?ft===0&&(ft=3):tm())),r.updateQueue!==null&&(r.flags|=4),kt(r),null);case 4:return fo(),fh(t,r),t===null&&Es(r.stateNode.containerInfo),kt(r),null;case 10:return Op(r.type._context),kt(r),null;case 17:return er(r.type)&&zu(),kt(r),null;case 19:if(He(We),d=r.memoizedState,d===null)return kt(r),null;if(o=(r.flags&128)!==0,h=d.rendering,h===null)if(o)zo(d,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(h=Gu(t),h!==null){for(r.flags|=128,zo(d,!1),o=h.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),r.subtreeFlags=0,o=a,a=r.child;a!==null;)d=a,t=o,d.flags&=14680066,h=d.alternate,h===null?(d.childLanes=0,d.lanes=t,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=h.childLanes,d.lanes=h.lanes,d.child=h.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=h.memoizedProps,d.memoizedState=h.memoizedState,d.updateQueue=h.updateQueue,d.type=h.type,t=h.dependencies,d.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Me(We,We.current&1|2),r.child}t=t.sibling}d.tail!==null&&it()>po&&(r.flags|=128,o=!0,zo(d,!1),r.lanes=4194304)}else{if(!o)if(t=Gu(h),t!==null){if(r.flags|=128,o=!0,a=t.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),zo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!je)return kt(r),null}else 2*it()-d.renderingStartTime>po&&a!==1073741824&&(r.flags|=128,o=!0,zo(d,!1),r.lanes=4194304);d.isBackwards?(h.sibling=r.child,r.child=h):(a=d.last,a!==null?a.sibling=h:r.child=h,d.last=h)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=it(),r.sibling=null,a=We.current,Me(We,o?a&1|2:a&1),r):(kt(r),null);case 22:case 23:return em(),o=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(r.flags|=8192),o&&r.mode&1?or&1073741824&&(kt(r),r.subtreeFlags&6&&(r.flags|=8192)):kt(r),null;case 24:return null;case 25:return null}throw Error(N(156,r.tag))}function NE(t,r){switch(Lp(r),r.tag){case 1:return er(r.type)&&zu(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return fo(),He(Jt),He(Rt),$p(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Gp(r),null;case 13:if(He(We),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(N(340));uo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return He(We),null;case 4:return fo(),null;case 10:return Op(r.type._context),null;case 22:case 23:return em(),null;case 24:return null;default:return null}}var Ml=!1,zt=!1,HE=typeof WeakSet=="function"?WeakSet:Set,G=null;function Oa(t,r){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(o){tt(t,r,o)}else a.current=null}function hh(t,r,a){try{a()}catch(o){tt(t,r,o)}}var sv=!1;function GE(t,r){if(Xf=Bu,t=b0(),kp(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var u=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var h=0,l=-1,g=-1,y=0,v=0,b=t,e=null;t:for(;;){for(var n;b!==a||u!==0&&b.nodeType!==3||(l=h+u),b!==d||o!==0&&b.nodeType!==3||(g=h+o),b.nodeType===3&&(h+=b.nodeValue.length),(n=b.firstChild)!==null;)e=b,b=n;for(;;){if(b===t)break t;if(e===a&&++y===u&&(l=h),e===d&&++v===o&&(g=h),(n=b.nextSibling)!==null)break;b=e,e=b.parentNode}b=n}a=l===-1||g===-1?null:{start:l,end:g}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qf={focusedElem:t,selectionRange:a},Bu=!1,G=r;G!==null;)if(r=G,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,G=t;else for(;G!==null;){r=G;try{var s=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var c=s.memoizedProps,f=s.memoizedState,m=r.stateNode,p=m.getSnapshotBeforeUpdate(r.elementType===r.type?c:Fr(r.type,c),f);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=r.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(S){tt(r,r.return,S)}if(t=r.sibling,t!==null){t.return=r.return,G=t;break}G=r.return}return s=sv,sv=!1,s}function ls(t,r,a){var o=r.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&t)===t){var d=u.destroy;u.destroy=void 0,d!==void 0&&hh(r,a,d)}u=u.next}while(u!==o)}}function Ac(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var o=a.create;a.destroy=o()}a=a.next}while(a!==r)}}function ph(t){var r=t.ref;if(r!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof r=="function"?r(t):r.current=t}}function vb(t){var r=t.alternate;r!==null&&(t.alternate=null,vb(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[ei],delete r[Cs],delete r[eh],delete r[EE],delete r[UE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _b(t){return t.tag===5||t.tag===3||t.tag===4}function lv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_b(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mh(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Lu));else if(o!==4&&(t=t.child,t!==null))for(mh(t,r,a),t=t.sibling;t!==null;)mh(t,r,a),t=t.sibling}function gh(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(gh(t,r,a),t=t.sibling;t!==null;)gh(t,r,a),t=t.sibling}var wt=null,Or=!1;function Gi(t,r,a){for(a=a.child;a!==null;)yb(t,r,a),a=a.sibling}function yb(t,r,a){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(yc,a)}catch{}switch(a.tag){case 5:zt||Oa(a,r);case 6:var o=wt,u=Or;wt=null,Gi(t,r,a),wt=o,Or=u,wt!==null&&(Or?(t=wt,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):wt.removeChild(a.stateNode));break;case 18:wt!==null&&(Or?(t=wt,a=a.stateNode,t.nodeType===8?Hd(t.parentNode,a):t.nodeType===1&&Hd(t,a),Ss(t)):Hd(wt,a.stateNode));break;case 4:o=wt,u=Or,wt=a.stateNode.containerInfo,Or=!0,Gi(t,r,a),wt=o,Or=u;break;case 0:case 11:case 14:case 15:if(!zt&&(o=a.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var d=u,h=d.destroy;d=d.tag,h!==void 0&&(d&2||d&4)&&hh(a,r,h),u=u.next}while(u!==o)}Gi(t,r,a);break;case 1:if(!zt&&(Oa(a,r),o=a.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(l){tt(a,r,l)}Gi(t,r,a);break;case 21:Gi(t,r,a);break;case 22:a.mode&1?(zt=(o=zt)||a.memoizedState!==null,Gi(t,r,a),zt=o):Gi(t,r,a);break;default:Gi(t,r,a)}}function uv(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new HE),r.forEach(function(o){var u=QE.bind(null,t,o);a.has(o)||(a.add(o),o.then(u,u))})}}function zr(t,r){var a=r.deletions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];try{var d=t,h=r,l=h;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,Or=!1;break e;case 3:wt=l.stateNode.containerInfo,Or=!0;break e;case 4:wt=l.stateNode.containerInfo,Or=!0;break e}l=l.return}if(wt===null)throw Error(N(160));yb(d,h,u),wt=null,Or=!1;var g=u.alternate;g!==null&&(g.return=null),u.return=null}catch(y){tt(u,r,y)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)bb(r,t),r=r.sibling}function bb(t,r){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(r,t),Zr(t),o&4){try{ls(3,t,t.return),Ac(3,t)}catch(c){tt(t,t.return,c)}try{ls(5,t,t.return)}catch(c){tt(t,t.return,c)}}break;case 1:zr(r,t),Zr(t),o&512&&a!==null&&Oa(a,a.return);break;case 5:if(zr(r,t),Zr(t),o&512&&a!==null&&Oa(a,a.return),t.flags&32){var u=t.stateNode;try{vs(u,"")}catch(c){tt(t,t.return,c)}}if(o&4&&(u=t.stateNode,u!=null)){var d=t.memoizedProps,h=a!==null?a.memoizedProps:d,l=t.type,g=t.updateQueue;if(t.updateQueue=null,g!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&Hy(u,d),Nf(l,h);var y=Nf(l,d);for(h=0;h<g.length;h+=2){var v=g[h],b=g[h+1];v==="style"?Yy(u,b):v==="dangerouslySetInnerHTML"?jy(u,b):v==="children"?vs(u,b):yp(u,v,b,y)}switch(l){case"input":zf(u,d);break;case"textarea":Gy(u,d);break;case"select":var e=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var n=d.value;n!=null?Wa(u,!!d.multiple,n,!1):e!==!!d.multiple&&(d.defaultValue!=null?Wa(u,!!d.multiple,d.defaultValue,!0):Wa(u,!!d.multiple,d.multiple?[]:"",!1))}u[Cs]=d}catch(c){tt(t,t.return,c)}}break;case 6:if(zr(r,t),Zr(t),o&4){if(t.stateNode===null)throw Error(N(162));u=t.stateNode,d=t.memoizedProps;try{u.nodeValue=d}catch(c){tt(t,t.return,c)}}break;case 3:if(zr(r,t),Zr(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ss(r.containerInfo)}catch(c){tt(t,t.return,c)}break;case 4:zr(r,t),Zr(t);break;case 13:zr(r,t),Zr(t),u=t.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(Zp=it())),o&4&&uv(t);break;case 22:if(v=a!==null&&a.memoizedState!==null,t.mode&1?(zt=(y=zt)||v,zr(r,t),zt=y):zr(r,t),Zr(t),o&8192){if(y=t.memoizedState!==null,(t.stateNode.isHidden=y)&&!v&&t.mode&1)for(G=t,v=t.child;v!==null;){for(b=G=v;G!==null;){switch(e=G,n=e.child,e.tag){case 0:case 11:case 14:case 15:ls(4,e,e.return);break;case 1:Oa(e,e.return);var s=e.stateNode;if(typeof s.componentWillUnmount=="function"){o=e,a=e.return;try{r=o,s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){tt(o,a,c)}}break;case 5:Oa(e,e.return);break;case 22:if(e.memoizedState!==null){dv(b);continue}}n!==null?(n.return=e,G=n):dv(b)}v=v.sibling}e:for(v=null,b=t;;){if(b.tag===5){if(v===null){v=b;try{u=b.stateNode,y?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=b.stateNode,g=b.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,l.style.display=Vy("display",h))}catch(c){tt(t,t.return,c)}}}else if(b.tag===6){if(v===null)try{b.stateNode.nodeValue=y?"":b.memoizedProps}catch(c){tt(t,t.return,c)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;v===b&&(v=null),b=b.return}v===b&&(v=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:zr(r,t),Zr(t),o&4&&uv(t);break;case 21:break;default:zr(r,t),Zr(t)}}function Zr(t){var r=t.flags;if(r&2){try{e:{for(var a=t.return;a!==null;){if(_b(a)){var o=a;break e}a=a.return}throw Error(N(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(vs(u,""),o.flags&=-33);var d=lv(t);gh(t,d,u);break;case 3:case 4:var h=o.stateNode.containerInfo,l=lv(t);mh(t,l,h);break;default:throw Error(N(161))}}catch(g){tt(t,t.return,g)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function $E(t,r,a){G=t,Sb(t)}function Sb(t,r,a){for(var o=(t.mode&1)!==0;G!==null;){var u=G,d=u.child;if(u.tag===22&&o){var h=u.memoizedState!==null||Ml;if(!h){var l=u.alternate,g=l!==null&&l.memoizedState!==null||zt;l=Ml;var y=zt;if(Ml=h,(zt=g)&&!y)for(G=u;G!==null;)h=G,g=h.child,h.tag===22&&h.memoizedState!==null?fv(u):g!==null?(g.return=h,G=g):fv(u);for(;d!==null;)G=d,Sb(d),d=d.sibling;G=u,Ml=l,zt=y}cv(t)}else u.subtreeFlags&8772&&d!==null?(d.return=u,G=d):cv(t)}}function cv(t){for(;G!==null;){var r=G;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:zt||Ac(5,r);break;case 1:var o=r.stateNode;if(r.flags&4&&!zt)if(a===null)o.componentDidMount();else{var u=r.elementType===r.type?a.memoizedProps:Fr(r.type,a.memoizedProps);o.componentDidUpdate(u,a.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&Wg(r,d,o);break;case 3:var h=r.updateQueue;if(h!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Wg(r,h,a)}break;case 5:var l=r.stateNode;if(a===null&&r.flags&4){a=l;var g=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&a.focus();break;case"img":g.src&&(a.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var y=r.alternate;if(y!==null){var v=y.memoizedState;if(v!==null){var b=v.dehydrated;b!==null&&Ss(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}zt||r.flags&512&&ph(r)}catch(e){tt(r,r.return,e)}}if(r===t){G=null;break}if(a=r.sibling,a!==null){a.return=r.return,G=a;break}G=r.return}}function dv(t){for(;G!==null;){var r=G;if(r===t){G=null;break}var a=r.sibling;if(a!==null){a.return=r.return,G=a;break}G=r.return}}function fv(t){for(;G!==null;){var r=G;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ac(4,r)}catch(g){tt(r,a,g)}break;case 1:var o=r.stateNode;if(typeof o.componentDidMount=="function"){var u=r.return;try{o.componentDidMount()}catch(g){tt(r,u,g)}}var d=r.return;try{ph(r)}catch(g){tt(r,d,g)}break;case 5:var h=r.return;try{ph(r)}catch(g){tt(r,h,g)}}}catch(g){tt(r,r.return,g)}if(r===t){G=null;break}var l=r.sibling;if(l!==null){l.return=r.return,G=l;break}G=r.return}}var jE=Math.ceil,Vu=Li.ReactCurrentDispatcher,Xp=Li.ReactCurrentOwner,Tr=Li.ReactCurrentBatchConfig,xe=0,gt=null,ot=null,Ut=0,or=0,Ma=xn(0),ft=0,ks=null,ia=0,Tc=0,Qp=0,us=null,Xt=null,Zp=0,po=1/0,vi=null,Yu=!1,vh=null,fn=null,Nl=!1,rn=null,Wu=0,cs=0,_h=null,pu=-1,mu=0;function $t(){return xe&6?it():pu!==-1?pu:pu=it()}function hn(t){return t.mode&1?xe&2&&Ut!==0?Ut&-Ut:AE.transition!==null?(mu===0&&(mu=n0()),mu):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:d0(t.type)),t):1}function $r(t,r,a,o){if(50<cs)throw cs=0,_h=null,Error(N(185));Ys(t,a,o),(!(xe&2)||t!==gt)&&(t===gt&&(!(xe&2)&&(Tc|=a),ft===4&&Qi(t,Ut)),tr(t,o),a===1&&xe===0&&!(r.mode&1)&&(po=it()+500,Ec&&wn()))}function tr(t,r){var a=t.callbackNode;Aw(t,r);var o=Iu(t,t===gt?Ut:0);if(o===0)a!==null&&Sg(a),t.callbackNode=null,t.callbackPriority=0;else if(r=o&-o,t.callbackPriority!==r){if(a!=null&&Sg(a),r===1)t.tag===0?CE(hv.bind(null,t)):I0(hv.bind(null,t)),xE(function(){!(xe&6)&&wn()}),a=null;else{switch(a0(o)){case 1:a=Ep;break;case 4:a=r0;break;case 16:a=Pu;break;case 536870912:a=i0;break;default:a=Pu}a=Pb(a,xb.bind(null,t))}t.callbackPriority=r,t.callbackNode=a}}function xb(t,r){if(pu=-1,mu=0,xe&6)throw Error(N(327));var a=t.callbackNode;if(Za()&&t.callbackNode!==a)return null;var o=Iu(t,t===gt?Ut:0);if(o===0)return null;if(o&30||o&t.expiredLanes||r)r=qu(t,o);else{r=o;var u=xe;xe|=2;var d=Eb();(gt!==t||Ut!==r)&&(vi=null,po=it()+500,Kn(t,r));do try{WE();break}catch(l){wb(t,l)}while(1);Fp(),Vu.current=d,xe=u,ot!==null?r=0:(gt=null,Ut=0,r=ft)}if(r!==0){if(r===2&&(u=Vf(t),u!==0&&(o=u,r=yh(t,u))),r===1)throw a=ks,Kn(t,0),Qi(t,o),tr(t,it()),a;if(r===6)Qi(t,o);else{if(u=t.current.alternate,!(o&30)&&!VE(u)&&(r=qu(t,o),r===2&&(d=Vf(t),d!==0&&(o=d,r=yh(t,d))),r===1))throw a=ks,Kn(t,0),Qi(t,o),tr(t,it()),a;switch(t.finishedWork=u,t.finishedLanes=o,r){case 0:case 1:throw Error(N(345));case 2:Rn(t,Xt,vi);break;case 3:if(Qi(t,o),(o&130023424)===o&&(r=Zp+500-it(),10<r)){if(Iu(t,0)!==0)break;if(u=t.suspendedLanes,(u&o)!==o){$t(),t.pingedLanes|=t.suspendedLanes&u;break}t.timeoutHandle=Jf(Rn.bind(null,t,Xt,vi),r);break}Rn(t,Xt,vi);break;case 4:if(Qi(t,o),(o&4194240)===o)break;for(r=t.eventTimes,u=-1;0<o;){var h=31-Gr(o);d=1<<h,h=r[h],h>u&&(u=h),o&=~d}if(o=u,o=it()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*jE(o/1960))-o,10<o){t.timeoutHandle=Jf(Rn.bind(null,t,Xt,vi),o);break}Rn(t,Xt,vi);break;case 5:Rn(t,Xt,vi);break;default:throw Error(N(329))}}}return tr(t,it()),t.callbackNode===a?xb.bind(null,t):null}function yh(t,r){var a=us;return t.current.memoizedState.isDehydrated&&(Kn(t,r).flags|=256),t=qu(t,r),t!==2&&(r=Xt,Xt=a,r!==null&&bh(r)),t}function bh(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function VE(t){for(var r=t;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var o=0;o<a.length;o++){var u=a[o],d=u.getSnapshot;u=u.value;try{if(!Vr(d(),u))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qi(t,r){for(r&=~Qp,r&=~Tc,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var a=31-Gr(r),o=1<<a;t[a]=-1,r&=~o}}function hv(t){if(xe&6)throw Error(N(327));Za();var r=Iu(t,0);if(!(r&1))return tr(t,it()),null;var a=qu(t,r);if(t.tag!==0&&a===2){var o=Vf(t);o!==0&&(r=o,a=yh(t,o))}if(a===1)throw a=ks,Kn(t,0),Qi(t,r),tr(t,it()),a;if(a===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Rn(t,Xt,vi),tr(t,it()),null}function Jp(t,r){var a=xe;xe|=1;try{return t(r)}finally{xe=a,xe===0&&(po=it()+500,Ec&&wn())}}function na(t){rn!==null&&rn.tag===0&&!(xe&6)&&Za();var r=xe;xe|=1;var a=Tr.transition,o=Pe;try{if(Tr.transition=null,Pe=1,t)return t()}finally{Pe=o,Tr.transition=a,xe=r,!(xe&6)&&wn()}}function em(){or=Ma.current,He(Ma)}function Kn(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,SE(a)),ot!==null)for(a=ot.return;a!==null;){var o=a;switch(Lp(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&zu();break;case 3:fo(),He(Jt),He(Rt),$p();break;case 5:Gp(o);break;case 4:fo();break;case 13:He(We);break;case 19:He(We);break;case 10:Op(o.type._context);break;case 22:case 23:em()}a=a.return}if(gt=t,ot=t=pn(t.current,null),Ut=or=r,ft=0,ks=null,Qp=Tc=ia=0,Xt=us=null,Yn!==null){for(r=0;r<Yn.length;r++)if(a=Yn[r],o=a.interleaved,o!==null){a.interleaved=null;var u=o.next,d=a.pending;if(d!==null){var h=d.next;d.next=u,o.next=h}a.pending=o}Yn=null}return t}function wb(t,r){do{var a=ot;try{if(Fp(),du.current=ju,$u){for(var o=qe.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}$u=!1}if(ra=0,mt=dt=qe=null,ss=!1,Ps=0,Xp.current=null,a===null||a.return===null){ft=1,ks=r,ot=null;break}e:{var d=t,h=a.return,l=a,g=r;if(r=Ut,l.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var y=g,v=l,b=v.tag;if(!(v.mode&1)&&(b===0||b===11||b===15)){var e=v.alternate;e?(v.updateQueue=e.updateQueue,v.memoizedState=e.memoizedState,v.lanes=e.lanes):(v.updateQueue=null,v.memoizedState=null)}var n=ev(h);if(n!==null){n.flags&=-257,tv(n,h,l,d,r),n.mode&1&&Jg(d,y,r),r=n,g=y;var s=r.updateQueue;if(s===null){var c=new Set;c.add(g),r.updateQueue=c}else s.add(g);break e}else{if(!(r&1)){Jg(d,y,r),tm();break e}g=Error(N(426))}}else if(je&&l.mode&1){var f=ev(h);if(f!==null){!(f.flags&65536)&&(f.flags|=256),tv(f,h,l,d,r),zp(ho(g,l));break e}}d=g=ho(g,l),ft!==4&&(ft=2),us===null?us=[d]:us.push(d),d=h;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var m=ob(d,g,r);Yg(d,m);break e;case 1:l=g;var p=d.type,_=d.stateNode;if(!(d.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fn===null||!fn.has(_)))){d.flags|=65536,r&=-r,d.lanes|=r;var S=sb(d,l,r);Yg(d,S);break e}}d=d.return}while(d!==null)}Cb(a)}catch(w){r=w,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(1)}function Eb(){var t=Vu.current;return Vu.current=ju,t===null?ju:t}function tm(){(ft===0||ft===3||ft===2)&&(ft=4),gt===null||!(ia&268435455)&&!(Tc&268435455)||Qi(gt,Ut)}function qu(t,r){var a=xe;xe|=2;var o=Eb();(gt!==t||Ut!==r)&&(vi=null,Kn(t,r));do try{YE();break}catch(u){wb(t,u)}while(1);if(Fp(),xe=a,Vu.current=o,ot!==null)throw Error(N(261));return gt=null,Ut=0,ft}function YE(){for(;ot!==null;)Ub(ot)}function WE(){for(;ot!==null&&!_w();)Ub(ot)}function Ub(t){var r=Tb(t.alternate,t,or);t.memoizedProps=t.pendingProps,r===null?Cb(t):ot=r,Xp.current=null}function Cb(t){var r=t;do{var a=r.alternate;if(t=r.return,r.flags&32768){if(a=NE(a,r),a!==null){a.flags&=32767,ot=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ot=null;return}}else if(a=ME(a,r,or),a!==null){ot=a;return}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);ft===0&&(ft=5)}function Rn(t,r,a){var o=Pe,u=Tr.transition;try{Tr.transition=null,Pe=1,qE(t,r,a,o)}finally{Tr.transition=u,Pe=o}return null}function qE(t,r,a,o){do Za();while(rn!==null);if(xe&6)throw Error(N(327));a=t.finishedWork;var u=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var d=a.lanes|a.childLanes;if(Tw(t,d),t===gt&&(ot=gt=null,Ut=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Nl||(Nl=!0,Pb(Pu,function(){return Za(),null})),d=(a.flags&15990)!==0,a.subtreeFlags&15990||d){d=Tr.transition,Tr.transition=null;var h=Pe;Pe=1;var l=xe;xe|=4,Xp.current=null,GE(t,a),bb(a,t),pE(Qf),Bu=!!Xf,Qf=Xf=null,t.current=a,$E(a),yw(),xe=l,Pe=h,Tr.transition=d}else t.current=a;if(Nl&&(Nl=!1,rn=t,Wu=u),d=t.pendingLanes,d===0&&(fn=null),xw(a.stateNode),tr(t,it()),r!==null)for(o=t.onRecoverableError,a=0;a<r.length;a++)u=r[a],o(u.value,{componentStack:u.stack,digest:u.digest});if(Yu)throw Yu=!1,t=vh,vh=null,t;return Wu&1&&t.tag!==0&&Za(),d=t.pendingLanes,d&1?t===_h?cs++:(cs=0,_h=t):cs=0,wn(),null}function Za(){if(rn!==null){var t=a0(Wu),r=Tr.transition,a=Pe;try{if(Tr.transition=null,Pe=16>t?16:t,rn===null)var o=!1;else{if(t=rn,rn=null,Wu=0,xe&6)throw Error(N(331));var u=xe;for(xe|=4,G=t.current;G!==null;){var d=G,h=d.child;if(G.flags&16){var l=d.deletions;if(l!==null){for(var g=0;g<l.length;g++){var y=l[g];for(G=y;G!==null;){var v=G;switch(v.tag){case 0:case 11:case 15:ls(8,v,d)}var b=v.child;if(b!==null)b.return=v,G=b;else for(;G!==null;){v=G;var e=v.sibling,n=v.return;if(vb(v),v===y){G=null;break}if(e!==null){e.return=n,G=e;break}G=n}}}var s=d.alternate;if(s!==null){var c=s.child;if(c!==null){s.child=null;do{var f=c.sibling;c.sibling=null,c=f}while(c!==null)}}G=d}}if(d.subtreeFlags&2064&&h!==null)h.return=d,G=h;else e:for(;G!==null;){if(d=G,d.flags&2048)switch(d.tag){case 0:case 11:case 15:ls(9,d,d.return)}var m=d.sibling;if(m!==null){m.return=d.return,G=m;break e}G=d.return}}var p=t.current;for(G=p;G!==null;){h=G;var _=h.child;if(h.subtreeFlags&2064&&_!==null)_.return=h,G=_;else e:for(h=p;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ac(9,l)}}catch(w){tt(l,l.return,w)}if(l===h){G=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,G=S;break e}G=l.return}}if(xe=u,wn(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(yc,t)}catch{}o=!0}return o}finally{Pe=a,Tr.transition=r}}return!1}function pv(t,r,a){r=ho(a,r),r=ob(t,r,1),t=dn(t,r,1),r=$t(),t!==null&&(Ys(t,1,r),tr(t,r))}function tt(t,r,a){if(t.tag===3)pv(t,t,a);else for(;r!==null;){if(r.tag===3){pv(r,t,a);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(fn===null||!fn.has(o))){t=ho(a,t),t=sb(r,t,1),r=dn(r,t,1),t=$t(),r!==null&&(Ys(r,1,t),tr(r,t));break}}r=r.return}}function KE(t,r,a){var o=t.pingCache;o!==null&&o.delete(r),r=$t(),t.pingedLanes|=t.suspendedLanes&a,gt===t&&(Ut&a)===a&&(ft===4||ft===3&&(Ut&130023424)===Ut&&500>it()-Zp?Kn(t,0):Qp|=a),tr(t,r)}function Ab(t,r){r===0&&(t.mode&1?(r=Il,Il<<=1,!(Il&130023424)&&(Il=4194304)):r=1);var a=$t();t=ki(t,r),t!==null&&(Ys(t,r,a),tr(t,a))}function XE(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Ab(t,a)}function QE(t,r){var a=0;switch(t.tag){case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(a=u.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(N(314))}o!==null&&o.delete(r),Ab(t,a)}var Tb;Tb=function(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps||Jt.current)Qt=!0;else{if(!(t.lanes&a)&&!(r.flags&128))return Qt=!1,OE(t,r,a);Qt=!!(t.flags&131072)}else Qt=!1,je&&r.flags&1048576&&B0(r,Ou,r.index);switch(r.lanes=0,r.tag){case 2:var o=r.type;hu(t,r),t=r.pendingProps;var u=lo(r,Rt.current);Qa(r,a),u=Vp(null,r,o,t,u,a);var d=Yp();return r.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,er(o)?(d=!0,Ru(r)):d=!1,r.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Np(r),u.updater=Uc,r.stateNode=u,u._reactInternals=r,oh(r,o,t,a),r=uh(null,r,o,!0,d,a)):(r.tag=0,je&&d&&Dp(r),Ht(null,r,u,a),r=r.child),r;case 16:o=r.elementType;e:{switch(hu(t,r),t=r.pendingProps,u=o._init,o=u(o._payload),r.type=o,u=r.tag=JE(o),t=Fr(o,t),u){case 0:r=lh(null,r,o,t,a);break e;case 1:r=nv(null,r,o,t,a);break e;case 11:r=rv(null,r,o,t,a);break e;case 14:r=iv(null,r,o,Fr(o.type,t),a);break e}throw Error(N(306,o,""))}return r;case 0:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),lh(t,r,o,u,a);case 1:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),nv(t,r,o,u,a);case 3:e:{if(db(r),t===null)throw Error(N(387));o=r.pendingProps,d=r.memoizedState,u=d.element,z0(t,r),Hu(r,o,null,a);var h=r.memoizedState;if(o=h.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){u=ho(Error(N(423)),r),r=av(t,r,o,a,u);break e}else if(o!==u){u=ho(Error(N(424)),r),r=av(t,r,o,a,u);break e}else for(lr=cn(r.stateNode.containerInfo.firstChild),cr=r,je=!0,Nr=null,a=M0(r,null,o,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(uo(),o===u){r=Di(t,r,a);break e}Ht(t,r,o,a)}r=r.child}return r;case 5:return N0(r),t===null&&ih(r),o=r.type,u=r.pendingProps,d=t!==null?t.memoizedProps:null,h=u.children,Zf(o,u)?h=null:d!==null&&Zf(o,d)&&(r.flags|=32),cb(t,r),Ht(t,r,h,a),r.child;case 6:return t===null&&ih(r),null;case 13:return fb(t,r,a);case 4:return Hp(r,r.stateNode.containerInfo),o=r.pendingProps,t===null?r.child=co(r,null,o,a):Ht(t,r,o,a),r.child;case 11:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),rv(t,r,o,u,a);case 7:return Ht(t,r,r.pendingProps,a),r.child;case 8:return Ht(t,r,r.pendingProps.children,a),r.child;case 12:return Ht(t,r,r.pendingProps.children,a),r.child;case 10:e:{if(o=r.type._context,u=r.pendingProps,d=r.memoizedProps,h=u.value,Me(Mu,o._currentValue),o._currentValue=h,d!==null)if(Vr(d.value,h)){if(d.children===u.children&&!Jt.current){r=Di(t,r,a);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var l=d.dependencies;if(l!==null){h=d.child;for(var g=l.firstContext;g!==null;){if(g.context===o){if(d.tag===1){g=Pi(-1,a&-a),g.tag=2;var y=d.updateQueue;if(y!==null){y=y.shared;var v=y.pending;v===null?g.next=g:(g.next=v.next,v.next=g),y.pending=g}}d.lanes|=a,g=d.alternate,g!==null&&(g.lanes|=a),nh(d.return,a,r),l.lanes|=a;break}g=g.next}}else if(d.tag===10)h=d.type===r.type?null:d.child;else if(d.tag===18){if(h=d.return,h===null)throw Error(N(341));h.lanes|=a,l=h.alternate,l!==null&&(l.lanes|=a),nh(h,a,r),h=d.sibling}else h=d.child;if(h!==null)h.return=d;else for(h=d;h!==null;){if(h===r){h=null;break}if(d=h.sibling,d!==null){d.return=h.return,h=d;break}h=h.return}d=h}Ht(t,r,u.children,a),r=r.child}return r;case 9:return u=r.type,o=r.pendingProps.children,Qa(r,a),u=Ir(u),o=o(u),r.flags|=1,Ht(t,r,o,a),r.child;case 14:return o=r.type,u=Fr(o,r.pendingProps),u=Fr(o.type,u),iv(t,r,o,u,a);case 15:return lb(t,r,r.type,r.pendingProps,a);case 17:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),hu(t,r),r.tag=1,er(o)?(t=!0,Ru(r)):t=!1,Qa(r,a),F0(r,o,u),oh(r,o,u,a),uh(null,r,o,!0,t,a);case 19:return hb(t,r,a);case 22:return ub(t,r,a)}throw Error(N(156,r.tag))};function Pb(t,r){return t0(t,r)}function ZE(t,r,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,r,a,o){return new ZE(t,r,a,o)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JE(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sp)return 11;if(t===xp)return 14}return 2}function pn(t,r){var a=t.alternate;return a===null?(a=Cr(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function gu(t,r,a,o,u,d){var h=2;if(o=t,typeof t=="function")rm(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case Pa:return Xn(a.children,u,d,r);case bp:h=8,u|=8;break;case If:return t=Cr(12,a,r,u|2),t.elementType=If,t.lanes=d,t;case Bf:return t=Cr(13,a,r,u),t.elementType=Bf,t.lanes=d,t;case kf:return t=Cr(19,a,r,u),t.elementType=kf,t.lanes=d,t;case Oy:return Pc(a,u,d,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ry:h=10;break e;case Fy:h=9;break e;case Sp:h=11;break e;case xp:h=14;break e;case qi:h=16,o=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return r=Cr(h,a,r,u),r.elementType=t,r.type=o,r.lanes=d,r}function Xn(t,r,a,o){return t=Cr(7,t,o,r),t.lanes=a,t}function Pc(t,r,a,o){return t=Cr(22,t,o,r),t.elementType=Oy,t.lanes=a,t.stateNode={isHidden:!1},t}function Kd(t,r,a){return t=Cr(6,t,null,r),t.lanes=a,t}function Xd(t,r,a){return r=Cr(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function eU(t,r,a,o,u){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function im(t,r,a,o,u,d,h,l,g){return t=new eU(t,r,a,l,g),r===1?(r=1,d===!0&&(r|=8)):r=0,d=Cr(3,null,null,r),t.current=d,d.stateNode=t,d.memoizedState={element:o,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(d),t}function tU(t,r,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ta,key:o==null?null:""+o,children:t,containerInfo:r,implementation:a}}function Ib(t){if(!t)return yn;t=t._reactInternals;e:{if(fa(t)!==t||t.tag!==1)throw Error(N(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(er(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(N(171))}if(t.tag===1){var a=t.type;if(er(a))return P0(t,a,r)}return r}function Bb(t,r,a,o,u,d,h,l,g){return t=im(a,o,!0,t,u,d,h,l,g),t.context=Ib(null),a=t.current,o=$t(),u=hn(a),d=Pi(o,u),d.callback=r??null,dn(a,d,u),t.current.lanes=u,Ys(t,u,o),tr(t,o),t}function Ic(t,r,a,o){var u=r.current,d=$t(),h=hn(u);return a=Ib(a),r.context===null?r.context=a:r.pendingContext=a,r=Pi(d,h),r.payload={element:t},o=o===void 0?null:o,o!==null&&(r.callback=o),t=dn(u,r,h),t!==null&&($r(t,u,h,d),cu(t,u,h)),h}function Ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function nm(t,r){mv(t,r),(t=t.alternate)&&mv(t,r)}function rU(){return null}var kb=typeof reportError=="function"?reportError:function(t){console.error(t)};function am(t){this._internalRoot=t}Bc.prototype.render=am.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(N(409));Ic(t,r,null,null)};Bc.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;na(function(){Ic(null,t,null,null)}),r[Bi]=null}};function Bc(t){this._internalRoot=t}Bc.prototype.unstable_scheduleHydration=function(t){if(t){var r=l0();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Xi.length&&r!==0&&r<Xi[a].priority;a++);Xi.splice(a,0,t),a===0&&c0(t)}};function om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gv(){}function iU(t,r,a,o,u){if(u){if(typeof o=="function"){var d=o;o=function(){var y=Ku(h);d.call(y)}}var h=Bb(r,o,t,0,null,!1,!1,"",gv);return t._reactRootContainer=h,t[Bi]=h.current,Es(t.nodeType===8?t.parentNode:t),na(),h}for(;u=t.lastChild;)t.removeChild(u);if(typeof o=="function"){var l=o;o=function(){var y=Ku(g);l.call(y)}}var g=im(t,0,!1,null,null,!1,!1,"",gv);return t._reactRootContainer=g,t[Bi]=g.current,Es(t.nodeType===8?t.parentNode:t),na(function(){Ic(r,g,a,o)}),g}function Dc(t,r,a,o,u){var d=a._reactRootContainer;if(d){var h=d;if(typeof u=="function"){var l=u;u=function(){var g=Ku(h);l.call(g)}}Ic(r,h,t,u)}else h=iU(a,r,t,u,o);return Ku(h)}o0=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var a=Wo(r.pendingLanes);a!==0&&(Up(r,a|1),tr(r,it()),!(xe&6)&&(po=it()+500,wn()))}break;case 13:na(function(){var o=ki(t,1);if(o!==null){var u=$t();$r(o,t,1,u)}}),nm(t,1)}};Cp=function(t){if(t.tag===13){var r=ki(t,134217728);if(r!==null){var a=$t();$r(r,t,134217728,a)}nm(t,134217728)}};s0=function(t){if(t.tag===13){var r=hn(t),a=ki(t,r);if(a!==null){var o=$t();$r(a,t,r,o)}nm(t,r)}};l0=function(){return Pe};u0=function(t,r){var a=Pe;try{return Pe=t,r()}finally{Pe=a}};Gf=function(t,r,a){switch(r){case"input":if(zf(t,a),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var o=a[r];if(o!==t&&o.form===t.form){var u=wc(o);if(!u)throw Error(N(90));Ny(o),zf(o,u)}}}break;case"textarea":Gy(t,a);break;case"select":r=a.value,r!=null&&Wa(t,!!a.multiple,r,!1)}};Ky=Jp;Xy=na;var nU={usingClientEntryPoint:!1,Events:[qs,Da,wc,Wy,qy,Jp]},Ro={findFiberByHostInstance:Vn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aU={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jy(t),t===null?null:t.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance||rU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{yc=Hl.inject(aU),ri=Hl}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nU;pr.createPortal=function(t,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!om(r))throw Error(N(200));return tU(t,r,null,a)};pr.createRoot=function(t,r){if(!om(t))throw Error(N(299));var a=!1,o="",u=kb;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),r=im(t,1,!1,null,null,a,!1,o,u),t[Bi]=r.current,Es(t.nodeType===8?t.parentNode:t),new am(r)};pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=Jy(r),t=t===null?null:t.stateNode,t};pr.flushSync=function(t){return na(t)};pr.hydrate=function(t,r,a){if(!kc(r))throw Error(N(200));return Dc(null,t,r,!0,a)};pr.hydrateRoot=function(t,r,a){if(!om(t))throw Error(N(405));var o=a!=null&&a.hydratedSources||null,u=!1,d="",h=kb;if(a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onRecoverableError!==void 0&&(h=a.onRecoverableError)),r=Bb(r,null,t,1,a??null,u,!1,d,h),t[Bi]=r.current,Es(t),o)for(t=0;t<o.length;t++)a=o[t],u=a._getVersion,u=u(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,u]:r.mutableSourceEagerHydrationData.push(a,u);return new Bc(r)};pr.render=function(t,r,a){if(!kc(r))throw Error(N(200));return Dc(null,t,r,!1,a)};pr.unmountComponentAtNode=function(t){if(!kc(t))throw Error(N(40));return t._reactRootContainer?(na(function(){Dc(null,null,t,!1,function(){t._reactRootContainer=null,t[Bi]=null})}),!0):!1};pr.unstable_batchedUpdates=Jp;pr.unstable_renderSubtreeIntoContainer=function(t,r,a,o){if(!kc(a))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Dc(t,r,a,!1,o)};pr.version="18.2.0-next-9e3b772b8-20220608";function Db(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Db)}catch(t){console.error(t)}}Db(),By.exports=pr;var Xs=By.exports;const Lb=js(Xs);var vv=Xs;Tf.createRoot=vv.createRoot,Tf.hydrateRoot=vv.hydrateRoot;function nt(t){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nt(t)}function aa(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function Yt(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function ai(t){Yt(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||nt(t)==="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function oU(t,r){Yt(2,arguments);var a=ai(t).getTime(),o=aa(r);return new Date(a+o)}var sU={};function Lc(){return sU}function lU(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}function uU(t){return Yt(1,arguments),t instanceof Date||nt(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function cU(t){if(Yt(1,arguments),!uU(t)&&typeof t!="number")return!1;var r=ai(t);return!isNaN(Number(r))}function dU(t,r){Yt(2,arguments);var a=aa(r);return oU(t,-a)}var fU=864e5;function hU(t){Yt(1,arguments);var r=ai(t),a=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var o=r.getTime(),u=a-o;return Math.floor(u/fU)+1}function Xu(t){Yt(1,arguments);var r=1,a=ai(t),o=a.getUTCDay(),u=(o<r?7:0)+o-r;return a.setUTCDate(a.getUTCDate()-u),a.setUTCHours(0,0,0,0),a}function zb(t){Yt(1,arguments);var r=ai(t),a=r.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(a+1,0,4),o.setUTCHours(0,0,0,0);var u=Xu(o),d=new Date(0);d.setUTCFullYear(a,0,4),d.setUTCHours(0,0,0,0);var h=Xu(d);return r.getTime()>=u.getTime()?a+1:r.getTime()>=h.getTime()?a:a-1}function pU(t){Yt(1,arguments);var r=zb(t),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var o=Xu(a);return o}var mU=6048e5;function gU(t){Yt(1,arguments);var r=ai(t),a=Xu(r).getTime()-pU(r).getTime();return Math.round(a/mU)+1}function Qu(t,r){var a,o,u,d,h,l,g,y;Yt(1,arguments);var v=Lc(),b=aa((a=(o=(u=(d=r==null?void 0:r.weekStartsOn)!==null&&d!==void 0?d:r==null||(h=r.locale)===null||h===void 0||(l=h.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&u!==void 0?u:v.weekStartsOn)!==null&&o!==void 0?o:(g=v.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&a!==void 0?a:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var e=ai(t),n=e.getUTCDay(),s=(n<b?7:0)+n-b;return e.setUTCDate(e.getUTCDate()-s),e.setUTCHours(0,0,0,0),e}function Rb(t,r){var a,o,u,d,h,l,g,y;Yt(1,arguments);var v=ai(t),b=v.getUTCFullYear(),e=Lc(),n=aa((a=(o=(u=(d=r==null?void 0:r.firstWeekContainsDate)!==null&&d!==void 0?d:r==null||(h=r.locale)===null||h===void 0||(l=h.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&u!==void 0?u:e.firstWeekContainsDate)!==null&&o!==void 0?o:(g=e.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(n>=1&&n<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var s=new Date(0);s.setUTCFullYear(b+1,0,n),s.setUTCHours(0,0,0,0);var c=Qu(s,r),f=new Date(0);f.setUTCFullYear(b,0,n),f.setUTCHours(0,0,0,0);var m=Qu(f,r);return v.getTime()>=c.getTime()?b+1:v.getTime()>=m.getTime()?b:b-1}function vU(t,r){var a,o,u,d,h,l,g,y;Yt(1,arguments);var v=Lc(),b=aa((a=(o=(u=(d=r==null?void 0:r.firstWeekContainsDate)!==null&&d!==void 0?d:r==null||(h=r.locale)===null||h===void 0||(l=h.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&u!==void 0?u:v.firstWeekContainsDate)!==null&&o!==void 0?o:(g=v.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&a!==void 0?a:1),e=Rb(t,r),n=new Date(0);n.setUTCFullYear(e,0,b),n.setUTCHours(0,0,0,0);var s=Qu(n,r);return s}var _U=6048e5;function yU(t,r){Yt(1,arguments);var a=ai(t),o=Qu(a,r).getTime()-vU(a,r).getTime();return Math.round(o/_U)+1}function Te(t,r){for(var a=t<0?"-":"",o=Math.abs(t).toString();o.length<r;)o="0"+o;return a+o}var bU={y:function(r,a){var o=r.getUTCFullYear(),u=o>0?o:1-o;return Te(a==="yy"?u%100:u,a.length)},M:function(r,a){var o=r.getUTCMonth();return a==="M"?String(o+1):Te(o+1,2)},d:function(r,a){return Te(r.getUTCDate(),a.length)},a:function(r,a){var o=r.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h:function(r,a){return Te(r.getUTCHours()%12||12,a.length)},H:function(r,a){return Te(r.getUTCHours(),a.length)},m:function(r,a){return Te(r.getUTCMinutes(),a.length)},s:function(r,a){return Te(r.getUTCSeconds(),a.length)},S:function(r,a){var o=a.length,u=r.getUTCMilliseconds(),d=Math.floor(u*Math.pow(10,o-3));return Te(d,a.length)}};const $i=bU;var ba={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SU={G:function(r,a,o){var u=r.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return o.era(u,{width:"abbreviated"});case"GGGGG":return o.era(u,{width:"narrow"});case"GGGG":default:return o.era(u,{width:"wide"})}},y:function(r,a,o){if(a==="yo"){var u=r.getUTCFullYear(),d=u>0?u:1-u;return o.ordinalNumber(d,{unit:"year"})}return $i.y(r,a)},Y:function(r,a,o,u){var d=Rb(r,u),h=d>0?d:1-d;if(a==="YY"){var l=h%100;return Te(l,2)}return a==="Yo"?o.ordinalNumber(h,{unit:"year"}):Te(h,a.length)},R:function(r,a){var o=zb(r);return Te(o,a.length)},u:function(r,a){var o=r.getUTCFullYear();return Te(o,a.length)},Q:function(r,a,o){var u=Math.ceil((r.getUTCMonth()+1)/3);switch(a){case"Q":return String(u);case"QQ":return Te(u,2);case"Qo":return o.ordinalNumber(u,{unit:"quarter"});case"QQQ":return o.quarter(u,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(u,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(u,{width:"wide",context:"formatting"})}},q:function(r,a,o){var u=Math.ceil((r.getUTCMonth()+1)/3);switch(a){case"q":return String(u);case"qq":return Te(u,2);case"qo":return o.ordinalNumber(u,{unit:"quarter"});case"qqq":return o.quarter(u,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(u,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(u,{width:"wide",context:"standalone"})}},M:function(r,a,o){var u=r.getUTCMonth();switch(a){case"M":case"MM":return $i.M(r,a);case"Mo":return o.ordinalNumber(u+1,{unit:"month"});case"MMM":return o.month(u,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(u,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(u,{width:"wide",context:"formatting"})}},L:function(r,a,o){var u=r.getUTCMonth();switch(a){case"L":return String(u+1);case"LL":return Te(u+1,2);case"Lo":return o.ordinalNumber(u+1,{unit:"month"});case"LLL":return o.month(u,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(u,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(u,{width:"wide",context:"standalone"})}},w:function(r,a,o,u){var d=yU(r,u);return a==="wo"?o.ordinalNumber(d,{unit:"week"}):Te(d,a.length)},I:function(r,a,o){var u=gU(r);return a==="Io"?o.ordinalNumber(u,{unit:"week"}):Te(u,a.length)},d:function(r,a,o){return a==="do"?o.ordinalNumber(r.getUTCDate(),{unit:"date"}):$i.d(r,a)},D:function(r,a,o){var u=hU(r);return a==="Do"?o.ordinalNumber(u,{unit:"dayOfYear"}):Te(u,a.length)},E:function(r,a,o){var u=r.getUTCDay();switch(a){case"E":case"EE":case"EEE":return o.day(u,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(u,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(u,{width:"short",context:"formatting"});case"EEEE":default:return o.day(u,{width:"wide",context:"formatting"})}},e:function(r,a,o,u){var d=r.getUTCDay(),h=(d-u.weekStartsOn+8)%7||7;switch(a){case"e":return String(h);case"ee":return Te(h,2);case"eo":return o.ordinalNumber(h,{unit:"day"});case"eee":return o.day(d,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(d,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(d,{width:"short",context:"formatting"});case"eeee":default:return o.day(d,{width:"wide",context:"formatting"})}},c:function(r,a,o,u){var d=r.getUTCDay(),h=(d-u.weekStartsOn+8)%7||7;switch(a){case"c":return String(h);case"cc":return Te(h,a.length);case"co":return o.ordinalNumber(h,{unit:"day"});case"ccc":return o.day(d,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(d,{width:"narrow",context:"standalone"});case"cccccc":return o.day(d,{width:"short",context:"standalone"});case"cccc":default:return o.day(d,{width:"wide",context:"standalone"})}},i:function(r,a,o){var u=r.getUTCDay(),d=u===0?7:u;switch(a){case"i":return String(d);case"ii":return Te(d,a.length);case"io":return o.ordinalNumber(d,{unit:"day"});case"iii":return o.day(u,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(u,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(u,{width:"short",context:"formatting"});case"iiii":default:return o.day(u,{width:"wide",context:"formatting"})}},a:function(r,a,o){var u=r.getUTCHours(),d=u/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(d,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(r,a,o){var u=r.getUTCHours(),d;switch(u===12?d=ba.noon:u===0?d=ba.midnight:d=u/12>=1?"pm":"am",a){case"b":case"bb":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(d,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(r,a,o){var u=r.getUTCHours(),d;switch(u>=17?d=ba.evening:u>=12?d=ba.afternoon:u>=4?d=ba.morning:d=ba.night,a){case"B":case"BB":case"BBB":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(d,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(r,a,o){if(a==="ho"){var u=r.getUTCHours()%12;return u===0&&(u=12),o.ordinalNumber(u,{unit:"hour"})}return $i.h(r,a)},H:function(r,a,o){return a==="Ho"?o.ordinalNumber(r.getUTCHours(),{unit:"hour"}):$i.H(r,a)},K:function(r,a,o){var u=r.getUTCHours()%12;return a==="Ko"?o.ordinalNumber(u,{unit:"hour"}):Te(u,a.length)},k:function(r,a,o){var u=r.getUTCHours();return u===0&&(u=24),a==="ko"?o.ordinalNumber(u,{unit:"hour"}):Te(u,a.length)},m:function(r,a,o){return a==="mo"?o.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):$i.m(r,a)},s:function(r,a,o){return a==="so"?o.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):$i.s(r,a)},S:function(r,a){return $i.S(r,a)},X:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();if(h===0)return"Z";switch(a){case"X":return yv(h);case"XXXX":case"XX":return Fn(h);case"XXXXX":case"XXX":default:return Fn(h,":")}},x:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();switch(a){case"x":return yv(h);case"xxxx":case"xx":return Fn(h);case"xxxxx":case"xxx":default:return Fn(h,":")}},O:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+_v(h,":");case"OOOO":default:return"GMT"+Fn(h,":")}},z:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+_v(h,":");case"zzzz":default:return"GMT"+Fn(h,":")}},t:function(r,a,o,u){var d=u._originalDate||r,h=Math.floor(d.getTime()/1e3);return Te(h,a.length)},T:function(r,a,o,u){var d=u._originalDate||r,h=d.getTime();return Te(h,a.length)}};function _v(t,r){var a=t>0?"-":"+",o=Math.abs(t),u=Math.floor(o/60),d=o%60;if(d===0)return a+String(u);var h=r||"";return a+String(u)+h+Te(d,2)}function yv(t,r){if(t%60===0){var a=t>0?"-":"+";return a+Te(Math.abs(t)/60,2)}return Fn(t,r)}function Fn(t,r){var a=r||"",o=t>0?"-":"+",u=Math.abs(t),d=Te(Math.floor(u/60),2),h=Te(u%60,2);return o+d+a+h}const xU=SU;var bv=function(r,a){switch(r){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},Fb=function(r,a){switch(r){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},wU=function(r,a){var o=r.match(/(P+)(p+)?/)||[],u=o[1],d=o[2];if(!d)return bv(r,a);var h;switch(u){case"P":h=a.dateTime({width:"short"});break;case"PP":h=a.dateTime({width:"medium"});break;case"PPP":h=a.dateTime({width:"long"});break;case"PPPP":default:h=a.dateTime({width:"full"});break}return h.replace("{{date}}",bv(u,a)).replace("{{time}}",Fb(d,a))},EU={p:Fb,P:wU};const UU=EU;var CU=["D","DD"],AU=["YY","YYYY"];function TU(t){return CU.indexOf(t)!==-1}function PU(t){return AU.indexOf(t)!==-1}function Sv(t,r,a){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var IU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BU=function(r,a,o){var u,d=IU[r];return typeof d=="string"?u=d:a===1?u=d.one:u=d.other.replace("{{count}}",a.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+u:u+" ago":u};const kU=BU;function Qd(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.width?String(r.width):t.defaultWidth,o=t.formats[a]||t.formats[t.defaultWidth];return o}}var DU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RU={date:Qd({formats:DU,defaultWidth:"full"}),time:Qd({formats:LU,defaultWidth:"full"}),dateTime:Qd({formats:zU,defaultWidth:"full"})};const FU=RU;var OU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},MU=function(r,a,o,u){return OU[r]};const NU=MU;function Fo(t){return function(r,a){var o=a!=null&&a.context?String(a.context):"standalone",u;if(o==="formatting"&&t.formattingValues){var d=t.defaultFormattingWidth||t.defaultWidth,h=a!=null&&a.width?String(a.width):d;u=t.formattingValues[h]||t.formattingValues[d]}else{var l=t.defaultWidth,g=a!=null&&a.width?String(a.width):t.defaultWidth;u=t.values[g]||t.values[l]}var y=t.argumentCallback?t.argumentCallback(r):r;return u[y]}}var HU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$U={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},YU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WU=function(r,a){var o=Number(r),u=o%100;if(u>20||u<10)switch(u%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},qU={ordinalNumber:WU,era:Fo({values:HU,defaultWidth:"wide"}),quarter:Fo({values:GU,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:Fo({values:$U,defaultWidth:"wide"}),day:Fo({values:jU,defaultWidth:"wide"}),dayPeriod:Fo({values:VU,defaultWidth:"wide",formattingValues:YU,defaultFormattingWidth:"wide"})};const KU=qU;function Oo(t){return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.width,u=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],d=r.match(u);if(!d)return null;var h=d[0],l=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],g=Array.isArray(l)?QU(l,function(b){return b.test(h)}):XU(l,function(b){return b.test(h)}),y;y=t.valueCallback?t.valueCallback(g):g,y=a.valueCallback?a.valueCallback(y):y;var v=r.slice(h.length);return{value:y,rest:v}}}function XU(t,r){for(var a in t)if(t.hasOwnProperty(a)&&r(t[a]))return a}function QU(t,r){for(var a=0;a<t.length;a++)if(r(t[a]))return a}function ZU(t){return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.match(t.matchPattern);if(!o)return null;var u=o[0],d=r.match(t.parsePattern);if(!d)return null;var h=t.valueCallback?t.valueCallback(d[0]):d[0];h=a.valueCallback?a.valueCallback(h):h;var l=r.slice(u.length);return{value:h,rest:l}}}var JU=/^(\d+)(th|st|nd|rd)?/i,eC=/\d+/i,tC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rC={any:[/^b/i,/^(a|c)/i]},iC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nC={any:[/1/i,/2/i,/3/i,/4/i]},aC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},oC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},dC={ordinalNumber:ZU({matchPattern:JU,parsePattern:eC,valueCallback:function(r){return parseInt(r,10)}}),era:Oo({matchPatterns:tC,defaultMatchWidth:"wide",parsePatterns:rC,defaultParseWidth:"any"}),quarter:Oo({matchPatterns:iC,defaultMatchWidth:"wide",parsePatterns:nC,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:Oo({matchPatterns:aC,defaultMatchWidth:"wide",parsePatterns:oC,defaultParseWidth:"any"}),day:Oo({matchPatterns:sC,defaultMatchWidth:"wide",parsePatterns:lC,defaultParseWidth:"any"}),dayPeriod:Oo({matchPatterns:uC,defaultMatchWidth:"any",parsePatterns:cC,defaultParseWidth:"any"})};const fC=dC;var hC={code:"en-US",formatDistance:kU,formatLong:FU,formatRelative:NU,localize:KU,match:fC,options:{weekStartsOn:0,firstWeekContainsDate:1}};const pC=hC;var mC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vC=/^'([^]*?)'?$/,_C=/''/g,yC=/[a-zA-Z]/;function bC(t,r,a){var o,u,d,h,l,g,y,v,b,e,n,s,c,f,m,p,_,S;Yt(2,arguments);var w=String(r),x=Lc(),U=(o=(u=a==null?void 0:a.locale)!==null&&u!==void 0?u:x.locale)!==null&&o!==void 0?o:pC,A=aa((d=(h=(l=(g=a==null?void 0:a.firstWeekContainsDate)!==null&&g!==void 0?g:a==null||(y=a.locale)===null||y===void 0||(v=y.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&l!==void 0?l:x.firstWeekContainsDate)!==null&&h!==void 0?h:(b=x.locale)===null||b===void 0||(e=b.options)===null||e===void 0?void 0:e.firstWeekContainsDate)!==null&&d!==void 0?d:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=aa((n=(s=(c=(f=a==null?void 0:a.weekStartsOn)!==null&&f!==void 0?f:a==null||(m=a.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&c!==void 0?c:x.weekStartsOn)!==null&&s!==void 0?s:(_=x.locale)===null||_===void 0||(S=_.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&n!==void 0?n:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!U.localize)throw new RangeError("locale must contain localize property");if(!U.formatLong)throw new RangeError("locale must contain formatLong property");var T=ai(t);if(!cU(T))throw new RangeError("Invalid time value");var P=lU(T),z=dU(T,P),R={firstWeekContainsDate:A,weekStartsOn:E,locale:U,_originalDate:T},D=w.match(gC).map(function(B){var F=B[0];if(F==="p"||F==="P"){var O=UU[F];return O(B,U.formatLong)}return B}).join("").match(mC).map(function(B){if(B==="''")return"'";var F=B[0];if(F==="'")return SC(B);var O=xU[F];if(O)return!(a!=null&&a.useAdditionalWeekYearTokens)&&PU(B)&&Sv(B,r,String(t)),!(a!=null&&a.useAdditionalDayOfYearTokens)&&TU(B)&&Sv(B,r,String(t)),O(z,B,U.localize,R);if(F.match(yC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return B}).join("");return D}function SC(t){var r=t.match(vC);return r?r[1].replace(_C,"'"):t}function Sh(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function sm(t,r){if(t){if(typeof t=="string")return Sh(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Sh(t,r)}}function xh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wh(t,r){return wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},wh(t,r)}function lm(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&wh(t,r)}function Zu(t){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Zu(t)}function xC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wC(t,r){if(r&&(nt(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xh(t)}function um(t){var r=xC();return function(){var o=Zu(t),u;if(r){var d=Zu(this).constructor;u=Reflect.construct(o,arguments,d)}else u=o.apply(this,arguments);return wC(this,u)}}function ha(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function EC(t,r){if(nt(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var o=a.call(t,r||"default");if(nt(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ob(t){var r=EC(t,"string");return nt(r)==="symbol"?r:String(r)}function xv(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ob(o.key),o)}}function pa(t,r,a){return r&&xv(t.prototype,r),a&&xv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function le(t,r,a){return r=Ob(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Mb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var r={}.hasOwnProperty;function a(){for(var o=[],u=0;u<arguments.length;u++){var d=arguments[u];if(d){var h=typeof d;if(h==="string"||h==="number")o.push(d);else if(Array.isArray(d)){if(d.length){var l=a.apply(null,d);l&&o.push(l)}}else if(h==="object"){if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]")){o.push(d.toString());continue}for(var g in d)r.call(d,g)&&d[g]&&o.push(g)}}}return o.join(" ")}t.exports?(a.default=a,t.exports=a):window.classNames=a})()})(Mb);var UC=Mb.exports;const ht=js(UC);function ni(){return ni=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},ni.apply(this,arguments)}var Nb={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=typeof Symbol=="function"&&Symbol.for,cm=yt?Symbol.for("react.element"):60103,dm=yt?Symbol.for("react.portal"):60106,zc=yt?Symbol.for("react.fragment"):60107,Rc=yt?Symbol.for("react.strict_mode"):60108,Fc=yt?Symbol.for("react.profiler"):60114,Oc=yt?Symbol.for("react.provider"):60109,Mc=yt?Symbol.for("react.context"):60110,fm=yt?Symbol.for("react.async_mode"):60111,Nc=yt?Symbol.for("react.concurrent_mode"):60111,Hc=yt?Symbol.for("react.forward_ref"):60112,Gc=yt?Symbol.for("react.suspense"):60113,CC=yt?Symbol.for("react.suspense_list"):60120,$c=yt?Symbol.for("react.memo"):60115,jc=yt?Symbol.for("react.lazy"):60116,AC=yt?Symbol.for("react.block"):60121,TC=yt?Symbol.for("react.fundamental"):60117,PC=yt?Symbol.for("react.responder"):60118,IC=yt?Symbol.for("react.scope"):60119;function gr(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case cm:switch(t=t.type,t){case fm:case Nc:case zc:case Fc:case Rc:case Gc:return t;default:switch(t=t&&t.$$typeof,t){case Mc:case Hc:case jc:case $c:case Oc:return t;default:return r}}case dm:return r}}}function Hb(t){return gr(t)===Nc}Ie.AsyncMode=fm;Ie.ConcurrentMode=Nc;Ie.ContextConsumer=Mc;Ie.ContextProvider=Oc;Ie.Element=cm;Ie.ForwardRef=Hc;Ie.Fragment=zc;Ie.Lazy=jc;Ie.Memo=$c;Ie.Portal=dm;Ie.Profiler=Fc;Ie.StrictMode=Rc;Ie.Suspense=Gc;Ie.isAsyncMode=function(t){return Hb(t)||gr(t)===fm};Ie.isConcurrentMode=Hb;Ie.isContextConsumer=function(t){return gr(t)===Mc};Ie.isContextProvider=function(t){return gr(t)===Oc};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===cm};Ie.isForwardRef=function(t){return gr(t)===Hc};Ie.isFragment=function(t){return gr(t)===zc};Ie.isLazy=function(t){return gr(t)===jc};Ie.isMemo=function(t){return gr(t)===$c};Ie.isPortal=function(t){return gr(t)===dm};Ie.isProfiler=function(t){return gr(t)===Fc};Ie.isStrictMode=function(t){return gr(t)===Rc};Ie.isSuspense=function(t){return gr(t)===Gc};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===zc||t===Nc||t===Fc||t===Rc||t===Gc||t===CC||typeof t=="object"&&t!==null&&(t.$$typeof===jc||t.$$typeof===$c||t.$$typeof===Oc||t.$$typeof===Mc||t.$$typeof===Hc||t.$$typeof===TC||t.$$typeof===PC||t.$$typeof===IC||t.$$typeof===AC)};Ie.typeOf=gr;Nb.exports=Ie;var hm=Nb.exports;function Eh(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[];return ue.Children.forEach(t,function(o){o==null&&!r.keepEmpty||(Array.isArray(o)?a=a.concat(Eh(o)):hm.isFragment(o)&&o.props?a=a.concat(Eh(o.props.children,r)):a.push(o))}),a}var Uh={},BC=function(r){};function kC(t,r){}function DC(t,r){}function LC(){Uh={}}function Gb(t,r,a){!r&&!Uh[a]&&(t(!1,a),Uh[a]=!0)}function Vc(t,r){Gb(kC,t,r)}function zC(t,r){Gb(DC,t,r)}Vc.preMessage=BC;Vc.resetWarned=LC;Vc.noteOnce=zC;function wv(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,o)}return a}function W(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?wv(Object(a),!0).forEach(function(o){le(t,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wv(Object(a)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(a,o))})}return t}function pm(t,r,a){var o=C.useRef({});return(!("value"in o.current)||a(o.current.condition,r))&&(o.current.value=t(),o.current.condition=r),o.current.value}function mm(t,r){typeof t=="function"?t(r):nt(t)==="object"&&t&&"current"in t&&(t.current=r)}function Yc(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=r.filter(function(u){return u});return o.length<=1?o[0]:function(u){r.forEach(function(d){mm(d,u)})}}function $b(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return pm(function(){return Yc.apply(void 0,r)},r,function(o,u){return o.length!==u.length||o.every(function(d,h){return d!==u[h]})})}function Wc(t){var r,a,o=hm.isMemo(t)?t.type.type:t.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)||typeof t=="function"&&!((a=t.prototype)!==null&&a!==void 0&&a.render))}function Ju(t){return t instanceof HTMLElement||t instanceof SVGElement}function Ch(t){return Ju(t)?t:t instanceof ue.Component?Lb.findDOMNode(t):null}var jb=function(){if(typeof Map<"u")return Map;function t(r,a){var o=-1;return r.some(function(u,d){return u[0]===a?(o=d,!0):!1}),o}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(a){var o=t(this.__entries__,a),u=this.__entries__[o];return u&&u[1]},r.prototype.set=function(a,o){var u=t(this.__entries__,a);~u?this.__entries__[u][1]=o:this.__entries__.push([a,o])},r.prototype.delete=function(a){var o=this.__entries__,u=t(o,a);~u&&o.splice(u,1)},r.prototype.has=function(a){return!!~t(this.__entries__,a)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(a,o){o===void 0&&(o=null);for(var u=0,d=this.__entries__;u<d.length;u++){var h=d[u];a.call(o,h[1],h[0])}},r}()}(),Ah=typeof window<"u"&&typeof document<"u"&&window.document===document,ec=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),RC=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ec):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),FC=2;function OC(t,r){var a=!1,o=!1,u=0;function d(){a&&(a=!1,t()),o&&l()}function h(){RC(d)}function l(){var g=Date.now();if(a){if(g-u<FC)return;o=!0}else a=!0,o=!1,setTimeout(h,r);u=g}return l}var MC=20,NC=["top","right","bottom","left","width","height","size","weight"],HC=typeof MutationObserver<"u",GC=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=OC(this.refresh.bind(this),MC)}return t.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},t.prototype.removeObserver=function(r){var a=this.observers_,o=a.indexOf(r);~o&&a.splice(o,1),!a.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},t.prototype.updateObservers_=function(){var r=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return r.forEach(function(a){return a.broadcastActive()}),r.length>0},t.prototype.connect_=function(){!Ah||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),HC?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Ah||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(r){var a=r.propertyName,o=a===void 0?"":a,u=NC.some(function(d){return!!~o.indexOf(d)});u&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Vb=function(t,r){for(var a=0,o=Object.keys(r);a<o.length;a++){var u=o[a];Object.defineProperty(t,u,{value:r[u],enumerable:!1,writable:!1,configurable:!0})}return t},mo=function(t){var r=t&&t.ownerDocument&&t.ownerDocument.defaultView;return r||ec},Yb=qc(0,0,0,0);function tc(t){return parseFloat(t)||0}function Ev(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return r.reduce(function(o,u){var d=t["border-"+u+"-width"];return o+tc(d)},0)}function $C(t){for(var r=["top","right","bottom","left"],a={},o=0,u=r;o<u.length;o++){var d=u[o],h=t["padding-"+d];a[d]=tc(h)}return a}function jC(t){var r=t.getBBox();return qc(0,0,r.width,r.height)}function VC(t){var r=t.clientWidth,a=t.clientHeight;if(!r&&!a)return Yb;var o=mo(t).getComputedStyle(t),u=$C(o),d=u.left+u.right,h=u.top+u.bottom,l=tc(o.width),g=tc(o.height);if(o.boxSizing==="border-box"&&(Math.round(l+d)!==r&&(l-=Ev(o,"left","right")+d),Math.round(g+h)!==a&&(g-=Ev(o,"top","bottom")+h)),!WC(t)){var y=Math.round(l+d)-r,v=Math.round(g+h)-a;Math.abs(y)!==1&&(l-=y),Math.abs(v)!==1&&(g-=v)}return qc(u.left,u.top,l,g)}var YC=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof mo(t).SVGGraphicsElement}:function(t){return t instanceof mo(t).SVGElement&&typeof t.getBBox=="function"}}();function WC(t){return t===mo(t).document.documentElement}function qC(t){return Ah?YC(t)?jC(t):VC(t):Yb}function KC(t){var r=t.x,a=t.y,o=t.width,u=t.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,h=Object.create(d.prototype);return Vb(h,{x:r,y:a,width:o,height:u,top:a,right:r+o,bottom:u+a,left:r}),h}function qc(t,r,a,o){return{x:t,y:r,width:a,height:o}}var XC=function(){function t(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=qc(0,0,0,0),this.target=r}return t.prototype.isActive=function(){var r=qC(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},t}(),QC=function(){function t(r,a){var o=KC(a);Vb(this,{target:r,contentRect:o})}return t}(),ZC=function(){function t(r,a,o){if(this.activeObservations_=[],this.observations_=new jb,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=a,this.callbackCtx_=o}return t.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof mo(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(r)||(a.set(r,new XC(r)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof mo(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(r)&&(a.delete(r),a.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&r.activeObservations_.push(a)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,a=this.activeObservations_.map(function(o){return new QC(o.target,o.broadcastRect())});this.callback_.call(r,a,r),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Wb=typeof WeakMap<"u"?new WeakMap:new jb,qb=function(){function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=GC.getInstance(),o=new ZC(r,a,this);Wb.set(this,o)}return t}();["observe","unobserve","disconnect"].forEach(function(t){qb.prototype[t]=function(){var r;return(r=Wb.get(this))[t].apply(r,arguments)}});var JC=function(){return typeof ec.ResizeObserver<"u"?ec.ResizeObserver:qb}(),nn=new Map;function e2(t){t.forEach(function(r){var a,o=r.target;(a=nn.get(o))===null||a===void 0||a.forEach(function(u){return u(o)})})}var Kb=new JC(e2);function t2(t,r){nn.has(t)||(nn.set(t,new Set),Kb.observe(t)),nn.get(t).add(r)}function r2(t,r){nn.has(t)&&(nn.get(t).delete(r),nn.get(t).size||(Kb.unobserve(t),nn.delete(t)))}var i2=function(t){lm(a,t);var r=um(a);function a(){return ha(this,a),r.apply(this,arguments)}return pa(a,[{key:"render",value:function(){return this.props.children}}]),a}(C.Component),Th=C.createContext(null);function n2(t){var r=t.children,a=t.onBatchResize,o=C.useRef(0),u=C.useRef([]),d=C.useContext(Th),h=C.useCallback(function(l,g,y){o.current+=1;var v=o.current;u.current.push({size:l,element:g,data:y}),Promise.resolve().then(function(){v===o.current&&(a==null||a(u.current),u.current=[])}),d==null||d(l,g,y)},[a,d]);return C.createElement(Th.Provider,{value:h},r)}function a2(t,r){var a=t.children,o=t.disabled,u=C.useRef(null),d=C.useRef(null),h=C.useContext(Th),l=typeof a=="function",g=l?a(u):a,y=C.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),v=!l&&C.isValidElement(g)&&Wc(g),b=v?g.ref:null,e=C.useMemo(function(){return Yc(b,u)},[b,u]),n=function(){return Ch(u.current)||Ch(d.current)};C.useImperativeHandle(r,function(){return n()});var s=C.useRef(t);s.current=t;var c=C.useCallback(function(f){var m=s.current,p=m.onResize,_=m.data,S=f.getBoundingClientRect(),w=S.width,x=S.height,U=f.offsetWidth,A=f.offsetHeight,E=Math.floor(w),T=Math.floor(x);if(y.current.width!==E||y.current.height!==T||y.current.offsetWidth!==U||y.current.offsetHeight!==A){var P={width:E,height:T,offsetWidth:U,offsetHeight:A};y.current=P;var z=U===Math.round(w)?w:U,R=A===Math.round(x)?x:A,D=W(W({},P),{},{offsetWidth:z,offsetHeight:R});h==null||h(D,f,_),p&&Promise.resolve().then(function(){p(D,f)})}},[]);return C.useEffect(function(){var f=n();return f&&!o&&t2(f,c),function(){return r2(f,c)}},[u.current,o]),C.createElement(i2,{ref:d},v?C.cloneElement(g,{ref:e}):g)}var o2=C.forwardRef(a2),s2="rc-observer-key";function l2(t,r){var a=t.children,o=typeof a=="function"?[a]:Eh(a);return o.map(function(u,d){var h=(u==null?void 0:u.key)||"".concat(s2,"-").concat(d);return C.createElement(o2,ni({},t,{key:h,ref:d===0?r:void 0}),u)})}var gm=C.forwardRef(l2);gm.Collection=n2;function u2(t){if(Array.isArray(t))return Sh(t)}function Xb(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(t){return u2(t)||Xb(t)||sm(t)||c2()}var Qb=function(r){return+setTimeout(r,16)},Zb=function(r){return clearTimeout(r)};typeof window<"u"&&"requestAnimationFrame"in window&&(Qb=function(r){return window.requestAnimationFrame(r)},Zb=function(r){return window.cancelAnimationFrame(r)});var Uv=0,vm=new Map;function Jb(t){vm.delete(t)}var oa=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Uv+=1;var o=Uv;function u(d){if(d===0)Jb(o),r();else{var h=Qb(function(){u(d-1)});vm.set(o,h)}}return u(a),o};oa.cancel=function(t){var r=vm.get(t);return Jb(r),Zb(r)};function _m(t){for(var r=0,a,o=0,u=t.length;u>=4;++o,u-=4)a=t.charCodeAt(o)&255|(t.charCodeAt(++o)&255)<<8|(t.charCodeAt(++o)&255)<<16|(t.charCodeAt(++o)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,r=(a&65535)*1540483477+((a>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(u){case 3:r^=(t.charCodeAt(o+2)&255)<<16;case 2:r^=(t.charCodeAt(o+1)&255)<<8;case 1:r^=t.charCodeAt(o)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}function d2(t,r){if(t==null)return{};var a={},o=Object.keys(t),u,d;for(d=0;d<o.length;d++)u=o[d],!(r.indexOf(u)>=0)&&(a[u]=t[u]);return a}function sa(t,r){if(t==null)return{};var a=d2(t,r),o,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(u=0;u<d.length;u++)o=d[u],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(a[o]=t[o])}return a}function eS(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=new Set;function u(d,h){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=o.has(d);if(Vc(!g,"Warning: There may be circular references"),g)return!1;if(d===h)return!0;if(a&&l>1)return!1;o.add(d);var y=l+1;if(Array.isArray(d)){if(!Array.isArray(h)||d.length!==h.length)return!1;for(var v=0;v<d.length;v++)if(!u(d[v],h[v],y))return!1;return!0}if(d&&h&&nt(d)==="object"&&nt(h)==="object"){var b=Object.keys(d);return b.length!==Object.keys(h).length?!1:b.every(function(e){return u(d[e],h[e],y)})}return!1}return u(t,r)}var Cv="%",f2=function(){function t(r){ha(this,t),le(this,"instanceId",void 0),le(this,"cache",new Map),this.instanceId=r}return pa(t,[{key:"get",value:function(a){return this.cache.get(a.join(Cv))||null}},{key:"update",value:function(a,o){var u=a.join(Cv),d=this.cache.get(u),h=o(d);h===null?this.cache.delete(u):this.cache.set(u,h)}}]),t}(),Ph="data-token-hash",Qn="data-css-hash",Na="__cssinjs_instance__";function h2(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var r=document.body.querySelectorAll("style[".concat(Qn,"]"))||[],a=document.head.firstChild;Array.from(r).forEach(function(u){u[Na]=u[Na]||t,u[Na]===t&&document.head.insertBefore(u,a)});var o={};Array.from(document.querySelectorAll("style[".concat(Qn,"]"))).forEach(function(u){var d=u.getAttribute(Qn);if(o[d]){if(u[Na]===t){var h;(h=u.parentNode)===null||h===void 0||h.removeChild(u)}}else o[d]=!0})}return new f2(t)}var p2=C.createContext({hashPriority:"low",cache:h2(),defaultCache:!0});const ym=p2;function rr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function m2(t,r){if(!t)return!1;if(t.contains)return t.contains(r);for(var a=r;a;){if(a===t)return!0;a=a.parentNode}return!1}var Av="data-rc-order",Tv="data-rc-priority",g2="rc-util-key",Ih=new Map;function tS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.mark;return r?r.startsWith("data-")?r:"data-".concat(r):g2}function Kc(t){if(t.attachTo)return t.attachTo;var r=document.querySelector("head");return r||document.body}function v2(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function rS(t){return Array.from((Ih.get(t)||t).children).filter(function(r){return r.tagName==="STYLE"})}function iS(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!rr())return null;var a=r.csp,o=r.prepend,u=r.priority,d=u===void 0?0:u,h=v2(o),l=h==="prependQueue",g=document.createElement("style");g.setAttribute(Av,h),l&&d&&g.setAttribute(Tv,"".concat(d)),a!=null&&a.nonce&&(g.nonce=a==null?void 0:a.nonce),g.innerHTML=t;var y=Kc(r),v=y.firstChild;if(o){if(l){var b=rS(y).filter(function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(Av)))return!1;var n=Number(e.getAttribute(Tv)||0);return d>=n});if(b.length)return y.insertBefore(g,b[b.length-1].nextSibling),g}y.insertBefore(g,v)}else y.appendChild(g);return g}function nS(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Kc(r);return rS(a).find(function(o){return o.getAttribute(tS(r))===t})}function rc(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=nS(t,r);if(a){var o=Kc(r);o.removeChild(a)}}function _2(t,r){var a=Ih.get(t);if(!a||!m2(document,a)){var o=iS("",r),u=o.parentNode;Ih.set(t,u),t.removeChild(o)}}function Ds(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Kc(a);_2(o,a);var u=nS(r,a);if(u){var d,h;if((d=a.csp)!==null&&d!==void 0&&d.nonce&&u.nonce!==((h=a.csp)===null||h===void 0?void 0:h.nonce)){var l;u.nonce=(l=a.csp)===null||l===void 0?void 0:l.nonce}return u.innerHTML!==t&&(u.innerHTML=t),u}var g=iS(t,a);return g.setAttribute(tS(a),r),g}function aS(t){if(Array.isArray(t))return t}function y2(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var o,u,d,h,l=[],g=!0,y=!1;try{if(d=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;g=!1}else for(;!(g=(o=d.call(a)).done)&&(l.push(o.value),l.length!==r);g=!0);}catch(v){y=!0,u=v}finally{try{if(!g&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(y)throw u}}return l}}function oS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(t,r){return aS(t)||y2(t,r)||sm(t,r)||oS()}function b2(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}var bm=function(){function t(){ha(this,t),le(this,"cache",void 0),le(this,"keys",void 0),le(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return pa(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(a){var o,u,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h={map:this.cache};return a.forEach(function(l){if(!h)h=void 0;else{var g,y;h=(g=h)===null||g===void 0||(y=g.map)===null||y===void 0?void 0:y.get(l)}}),(o=h)!==null&&o!==void 0&&o.value&&d&&(h.value[1]=this.cacheCallTimes++),(u=h)===null||u===void 0?void 0:u.value}},{key:"get",value:function(a){var o;return(o=this.internalGet(a,!0))===null||o===void 0?void 0:o[0]}},{key:"has",value:function(a){return!!this.internalGet(a)}},{key:"set",value:function(a,o){var u=this;if(!this.has(a)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var d=this.keys.reduce(function(y,v){var b=Y(y,2),e=b[1];return u.internalGet(v)[1]<e?[v,u.internalGet(v)[1]]:y},[this.keys[0],this.cacheCallTimes]),h=Y(d,1),l=h[0];this.delete(l)}this.keys.push(a)}var g=this.cache;a.forEach(function(y,v){if(v===a.length-1)g.set(y,{value:[o,u.cacheCallTimes++]});else{var b=g.get(y);b?b.map||(b.map=new Map):g.set(y,{map:new Map}),g=g.get(y).map}})}},{key:"deleteByPath",value:function(a,o){var u=a.get(o[0]);if(o.length===1){var d;return u.map?a.set(o[0],{map:u.map}):a.delete(o[0]),(d=u.value)===null||d===void 0?void 0:d[0]}var h=this.deleteByPath(u.map,o.slice(1));return(!u.map||u.map.size===0)&&!u.value&&a.delete(o[0]),h}},{key:"delete",value:function(a){if(this.has(a))return this.keys=this.keys.filter(function(o){return!b2(o,a)}),this.deleteByPath(this.cache,a)}}]),t}();le(bm,"MAX_CACHE_SIZE",20);le(bm,"MAX_CACHE_OFFSET",5);var Pv=0,sS=function(){function t(r){ha(this,t),le(this,"derivatives",void 0),le(this,"id",void 0),this.derivatives=Array.isArray(r)?r:[r],this.id=Pv,r.length===0&&(r.length>0,void 0),Pv+=1}return pa(t,[{key:"getDerivativeToken",value:function(a){return this.derivatives.reduce(function(o,u){return u(a,o)},void 0)}}]),t}(),Zd=new bm;function Bh(t){var r=Array.isArray(t)?t:[t];return Zd.has(r)||Zd.set(r,new sS(r)),Zd.get(r)}var Iv=new WeakMap;function ic(t){var r=Iv.get(t)||"";return r||(Object.keys(t).forEach(function(a){var o=t[a];r+=a,o instanceof sS?r+=o.id:o&&nt(o)==="object"?r+=ic(o):r+=o}),Iv.set(t,r)),r}function S2(t,r){return _m("".concat(r,"_").concat(ic(t)))}var ds="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),lS="_bAmBoO_";function x2(t,r,a){if(rr()){var o,u;Ds(t,ds);var d=document.createElement("div");d.style.position="fixed",d.style.left="0",d.style.top="0",r==null||r(d),document.body.appendChild(d);var h=a?a(d):(o=getComputedStyle(d).content)===null||o===void 0?void 0:o.includes(lS);return(u=d.parentNode)===null||u===void 0||u.removeChild(d),rc(ds),h}return!1}var Jd=void 0;function w2(){return Jd===void 0&&(Jd=x2("@layer ".concat(ds," { .").concat(ds,' { content: "').concat(lS,'"!important; } }'),function(t){t.className=ds})),Jd}var Bv=rr()?C.useLayoutEffect:C.useEffect,Gt=function(r,a){var o=C.useRef(!0);Bv(function(){return r(o.current)},a),Bv(function(){return o.current=!1,function(){o.current=!0}},[])},kv=function(r,a){Gt(function(o){if(!o)return r()},a)},E2=W({},_c),Dv=E2.useInsertionEffect,U2=function(r,a,o){C.useMemo(r,o),Gt(function(){return a(!0)},o)},C2=Dv?function(t,r,a){return Dv(function(){return t(),r()},a)}:U2;const A2=C2;var T2=W({},_c),P2=T2.useInsertionEffect,I2=function(r){var a=[],o=!1;function u(d){o||a.push(d)}return C.useEffect(function(){return o=!1,function(){o=!0,a.length&&a.forEach(function(d){return d()})}},r),u},B2=function(){return function(r){r()}},k2=typeof P2<"u"?I2:B2;const D2=k2;function uS(t,r,a,o,u){var d=C.useContext(ym),h=d.cache,l=[t].concat(st(r)),g=l.join("_"),y=D2([g]),v=function(s){h.update(l,function(c){var f=c||[],m=Y(f,2),p=m[0],_=p===void 0?0:p,S=m[1],w=S,x=w||a(),U=[_,x];return s?s(U):U})};C.useMemo(function(){v()},[g]);var b=h.get(l),e=b[1];return A2(function(){u==null||u(e)},function(n){return v(function(s){var c=Y(s,2),f=c[0],m=c[1];return n&&f===0&&(u==null||u(e)),[f+1,m]}),function(){h.update(l,function(s){var c=s||[],f=Y(c,2),m=f[0],p=m===void 0?0:m,_=f[1],S=p-1;return S===0?(y(function(){return o==null?void 0:o(_,!1)}),null):[p-1,_]})}},[g]),e}var L2={},z2="css",Gn=new Map;function R2(t){Gn.set(t,(Gn.get(t)||0)+1)}function F2(t,r){if(typeof document<"u"){var a=document.querySelectorAll("style[".concat(Ph,'="').concat(t,'"]'));a.forEach(function(o){if(o[Na]===r){var u;(u=o.parentNode)===null||u===void 0||u.removeChild(o)}})}}var O2=0;function M2(t,r){Gn.set(t,(Gn.get(t)||0)-1);var a=Array.from(Gn.keys()),o=a.filter(function(u){var d=Gn.get(u)||0;return d<=0});a.length-o.length>O2&&o.forEach(function(u){F2(u,r),Gn.delete(u)})}var N2=function(r,a,o,u){var d=o.getDerivativeToken(r),h=W(W({},d),a);return u&&(h=u(h)),h};function H2(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=C.useContext(ym),u=o.cache.instanceId,d=a.salt,h=d===void 0?"":d,l=a.override,g=l===void 0?L2:l,y=a.formatToken,v=a.getComputedToken,b=C.useMemo(function(){return Object.assign.apply(Object,[{}].concat(st(r)))},[r]),e=C.useMemo(function(){return ic(b)},[b]),n=C.useMemo(function(){return ic(g)},[g]),s=uS("token",[h,t.id,e,n],function(){var c=v?v(b,g,t):N2(b,g,t,y),f=S2(c,h);c._tokenKey=f,R2(f);var m="".concat(z2,"-").concat(_m(f));return c._hashId=m,[c,m]},function(c){M2(c[0]._tokenKey,u)});return s}var G2={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},cS="comm",dS="rule",fS="decl",$2="@import",j2="@keyframes",V2="@layer",Y2=Math.abs,Sm=String.fromCharCode;function hS(t){return t.trim()}function vu(t,r,a){return t.replace(r,a)}function W2(t,r){return t.indexOf(r)}function Ls(t,r){return t.charCodeAt(r)|0}function zs(t,r,a){return t.slice(r,a)}function Si(t){return t.length}function q2(t){return t.length}function Gl(t,r){return r.push(t),t}var Xc=1,go=1,pS=0,kr=0,at=0,Eo="";function xm(t,r,a,o,u,d,h,l){return{value:t,root:r,parent:a,type:o,props:u,children:d,line:Xc,column:go,length:h,return:"",siblings:l}}function K2(){return at}function X2(){return at=kr>0?Ls(Eo,--kr):0,go--,at===10&&(go=1,Xc--),at}function jr(){return at=kr<pS?Ls(Eo,kr++):0,go++,at===10&&(go=1,Xc++),at}function Zn(){return Ls(Eo,kr)}function _u(){return kr}function Qc(t,r){return zs(Eo,t,r)}function kh(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Q2(t){return Xc=go=1,pS=Si(Eo=t),kr=0,[]}function Z2(t){return Eo="",t}function ef(t){return hS(Qc(kr-1,Dh(t===91?t+2:t===40?t+1:t)))}function J2(t){for(;(at=Zn())&&at<33;)jr();return kh(t)>2||kh(at)>3?"":" "}function eA(t,r){for(;--r&&jr()&&!(at<48||at>102||at>57&&at<65||at>70&&at<97););return Qc(t,_u()+(r<6&&Zn()==32&&jr()==32))}function Dh(t){for(;jr();)switch(at){case t:return kr;case 34:case 39:t!==34&&t!==39&&Dh(at);break;case 40:t===41&&Dh(t);break;case 92:jr();break}return kr}function tA(t,r){for(;jr()&&t+at!==47+10;)if(t+at===42+42&&Zn()===47)break;return"/*"+Qc(r,kr-1)+"*"+Sm(t===47?t:jr())}function rA(t){for(;!kh(Zn());)jr();return Qc(t,kr)}function iA(t){return Z2(yu("",null,null,null,[""],t=Q2(t),0,[0],t))}function yu(t,r,a,o,u,d,h,l,g){for(var y=0,v=0,b=h,e=0,n=0,s=0,c=1,f=1,m=1,p=0,_="",S=u,w=d,x=o,U=_;f;)switch(s=p,p=jr()){case 40:if(s!=108&&Ls(U,b-1)==58){W2(U+=vu(ef(p),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:U+=ef(p);break;case 9:case 10:case 13:case 32:U+=J2(s);break;case 92:U+=eA(_u()-1,7);continue;case 47:switch(Zn()){case 42:case 47:Gl(nA(tA(jr(),_u()),r,a,g),g);break;default:U+="/"}break;case 123*c:l[y++]=Si(U)*m;case 125*c:case 59:case 0:switch(p){case 0:case 125:f=0;case 59+v:m==-1&&(U=vu(U,/\f/g,"")),n>0&&Si(U)-b&&Gl(n>32?zv(U+";",o,a,b-1,g):zv(vu(U," ","")+";",o,a,b-2,g),g);break;case 59:U+=";";default:if(Gl(x=Lv(U,r,a,y,v,u,l,_,S=[],w=[],b,d),d),p===123)if(v===0)yu(U,r,x,x,S,d,b,l,w);else switch(e===99&&Ls(U,3)===110?100:e){case 100:case 108:case 109:case 115:yu(t,x,x,o&&Gl(Lv(t,x,x,0,0,u,l,_,u,S=[],b,w),w),u,w,b,l,o?S:w);break;default:yu(U,x,x,x,[""],w,0,l,w)}}y=v=n=0,c=m=1,_=U="",b=h;break;case 58:b=1+Si(U),n=s;default:if(c<1){if(p==123)--c;else if(p==125&&c++==0&&X2()==125)continue}switch(U+=Sm(p),p*c){case 38:m=v>0?1:(U+="\f",-1);break;case 44:l[y++]=(Si(U)-1)*m,m=1;break;case 64:Zn()===45&&(U+=ef(jr())),e=Zn(),v=b=Si(_=U+=rA(_u())),p++;break;case 45:s===45&&Si(U)==2&&(c=0)}}return d}function Lv(t,r,a,o,u,d,h,l,g,y,v,b){for(var e=u-1,n=u===0?d:[""],s=q2(n),c=0,f=0,m=0;c<o;++c)for(var p=0,_=zs(t,e+1,e=Y2(f=h[c])),S=t;p<s;++p)(S=hS(f>0?n[p]+" "+_:vu(_,/&\f/g,n[p])))&&(g[m++]=S);return xm(t,r,a,u===0?dS:l,g,y,v,b)}function nA(t,r,a,o){return xm(t,r,a,cS,Sm(K2()),zs(t,2,-2),0,o)}function zv(t,r,a,o,u){return xm(t,r,a,fS,zs(t,0,o),zs(t,o+1,-1),o,u)}function Lh(t,r){for(var a="",o=0;o<t.length;o++)a+=r(t[o],o,t,r)||"";return a}function aA(t,r,a,o){switch(t.type){case V2:if(t.children.length)break;case $2:case fS:return t.return=t.return||t.value;case cS:return"";case j2:return t.return=t.value+"{"+Lh(t.children,o)+"}";case dS:if(!Si(t.value=t.props.join(",")))return""}return Si(a=Lh(t.children,o))?t.return=t.value+"{"+a+"}":""}var Rv="data-ant-cssinjs-cache-path",mS="_FILE_STYLE__",Jn,gS=!0;function oA(){if(!Jn&&(Jn={},rr())){var t=document.createElement("div");t.className=Rv,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var r=getComputedStyle(t).content||"";r=r.replace(/^"/,"").replace(/"$/,""),r.split(";").forEach(function(u){var d=u.split(":"),h=Y(d,2),l=h[0],g=h[1];Jn[l]=g});var a=document.querySelector("style[".concat(Rv,"]"));if(a){var o;gS=!1,(o=a.parentNode)===null||o===void 0||o.removeChild(a)}document.body.removeChild(t)}}function sA(t){return oA(),!!Jn[t]}function lA(t){var r=Jn[t],a=null;if(r&&rr())if(gS)a=mS;else{var o=document.querySelector("style[".concat(Qn,'="').concat(Jn[t],'"]'));o?a=o.innerHTML:delete Jn[t]}return[a,r]}var Fv=rr(),uA="_skip_check_",vS="_multi_value_";function Ov(t){var r=Lh(iA(t),aA);return r.replace(/\{%%%\:[^;];}/g,";")}function cA(t){return nt(t)==="object"&&t&&(uA in t||vS in t)}function dA(t,r,a){if(!r)return t;var o=".".concat(r),u=a==="low"?":where(".concat(o,")"):o,d=t.split(",").map(function(h){var l,g=h.trim().split(/\s+/),y=g[0]||"",v=((l=y.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return y="".concat(v).concat(u).concat(y.slice(v.length)),[y].concat(st(g.slice(1))).join(" ")});return d.join(",")}var fA=function t(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},u=o.root,d=o.injectHash,h=o.parentSelectors,l=a.hashId,g=a.layer;a.path;var y=a.hashPriority,v=a.transformers,b=v===void 0?[]:v;a.linters;var e="",n={};function s(_){var S=_.getName(l);if(!n[S]){var w=t(_.style,a,{root:!1,parentSelectors:h}),x=Y(w,1),U=x[0];n[S]="@keyframes ".concat(_.getName(l)).concat(U)}}function c(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _.forEach(function(w){Array.isArray(w)?c(w,S):w&&S.push(w)}),S}var f=c(Array.isArray(r)?r:[r]);if(f.forEach(function(_){var S=typeof _=="string"&&!u?{}:_;if(typeof S=="string")e+="".concat(S,`
`);else if(S._keyframe)s(S);else{var w=b.reduce(function(x,U){var A;return(U==null||(A=U.visit)===null||A===void 0?void 0:A.call(U,x))||x},S);Object.keys(w).forEach(function(x){var U=w[x];if(nt(U)==="object"&&U&&(x!=="animationName"||!U._keyframe)&&!cA(U)){var A=!1,E=x.trim(),T=!1;(u||d)&&l?E.startsWith("@")?A=!0:E=dA(x,l,y):u&&!l&&(E==="&"||E==="")&&(E="",T=!0);var P=t(U,a,{root:T,injectHash:A,parentSelectors:[].concat(st(h),[E])}),z=Y(P,2),R=z[0],D=z[1];n=W(W({},n),D),e+="".concat(E).concat(R)}else{let I=function(L,M){var k=L.replace(/[A-Z]/g,function(J){return"-".concat(J.toLowerCase())}),$=M;!G2[L]&&typeof $=="number"&&$!==0&&($="".concat($,"px")),L==="animationName"&&M!==null&&M!==void 0&&M._keyframe&&(s(M),$=M.getName(l)),e+="".concat(k,":").concat($,";")};var O=I,B,F=(B=U==null?void 0:U.value)!==null&&B!==void 0?B:U;nt(U)==="object"&&U!==null&&U!==void 0&&U[vS]&&Array.isArray(F)?F.forEach(function(L){I(x,L)}):I(x,F)}})}}),!u)e="{".concat(e,"}");else if(g&&w2()){var m=g.split(","),p=m[m.length-1].trim();e="@layer ".concat(p," {").concat(e,"}"),m.length>1&&(e="@layer ".concat(g,"{%%%:%}").concat(e))}return[e,n]};function hA(t,r){return _m("".concat(t.join("%")).concat(r))}function pA(){return null}function zh(t,r){var a=t.token,o=t.path,u=t.hashId,d=t.layer,h=t.nonce,l=t.clientOnly,g=t.order,y=g===void 0?0:g,v=C.useContext(ym),b=v.autoClear;v.mock;var e=v.defaultCache,n=v.hashPriority,s=v.container,c=v.ssrInline,f=v.transformers,m=v.linters,p=v.cache,_=a._tokenKey,S=[_].concat(st(o)),w=Fv,x=uS("style",S,function(){var P=S.join("|");if(sA(P)){var z=lA(P),R=Y(z,2),D=R[0],B=R[1];if(D)return[D,_,B,{},l,y]}var F=r(),O=fA(F,{hashId:u,hashPriority:n,layer:d,path:o.join("-"),transformers:f,linters:m}),I=Y(O,2),L=I[0],M=I[1],k=Ov(L),$=hA(S,k);return[k,_,$,M,l,y]},function(P,z){var R=Y(P,3),D=R[2];(z||b)&&Fv&&rc(D,{mark:Qn})},function(P){var z=Y(P,4),R=z[0];z[1];var D=z[2],B=z[3];if(w&&R!==mS){var F={mark:Qn,prepend:"queue",attachTo:s,priority:y},O=typeof h=="function"?h():h;O&&(F.csp={nonce:O});var I=Ds(R,D,F);I[Na]=p.instanceId,I.setAttribute(Ph,_),Object.keys(B).forEach(function(L){Ds(Ov(B[L]),"_effect-".concat(L),F)})}}),U=Y(x,3),A=U[0],E=U[1],T=U[2];return function(P){var z;if(!c||w||!e)z=C.createElement(pA,null);else{var R;z=C.createElement("style",ni({},(R={},le(R,Ph,E),le(R,Qn,T),R),{dangerouslySetInnerHTML:{__html:A}}))}return C.createElement(C.Fragment,null,z,P)}}var Dr=function(){function t(r,a){ha(this,t),le(this,"name",void 0),le(this,"style",void 0),le(this,"_keyframe",!0),this.name=r,this.style=a}return pa(t,[{key:"getName",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return a?"".concat(a,"-").concat(this.name):this.name}}]),t}();function Sa(t){return t.notSplit=!0,t}Sa(["borderTop","borderBottom"]),Sa(["borderTop"]),Sa(["borderBottom"]),Sa(["borderLeft","borderRight"]),Sa(["borderLeft"]),Sa(["borderRight"]);var mA=C.createContext({});const gA=mA;function vA(t){return aS(t)||Xb(t)||sm(t)||oS()}function Rh(t,r){for(var a=t,o=0;o<r.length;o+=1){if(a==null)return;a=a[r[o]]}return a}function _S(t,r,a,o){if(!r.length)return a;var u=vA(r),d=u[0],h=u.slice(1),l;return!t&&typeof d=="number"?l=[]:Array.isArray(t)?l=st(t):l=W({},t),o&&a===void 0&&h.length===1?delete l[d][h[0]]:l[d]=_S(l[d],h,a,o),l}function tf(t,r,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return r.length&&o&&a===void 0&&!Rh(t,r.slice(0,-1))?t:_S(t,r,a,o)}function _A(t){return nt(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function Mv(t){return Array.isArray(t)?[]:{}}var yA=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function bA(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=Mv(r[0]);return r.forEach(function(u){function d(h,l){var g=new Set(l),y=Rh(u,h),v=Array.isArray(y);if(v||_A(y)){if(!g.has(y)){g.add(y);var b=Rh(o,h);v?o=tf(o,h,[]):(!b||nt(b)!=="object")&&(o=tf(o,h,Mv(y))),yA(y).forEach(function(e){d([].concat(st(h),[e]),g)})}}else o=tf(o,h,y)}d([])}),o}function SA(){}const xA=()=>{const t=()=>{};return t.deprecated=SA,t},wA=C.createContext(void 0),EA={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var UA={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const CA={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},yS=CA,AA={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},UA),timePickerLocale:Object.assign({},yS)},Nv=AA,nr="${label} is not a valid ${type}",TA={locale:"en",Pagination:EA,DatePicker:Nv,TimePicker:yS,Calendar:Nv,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:nr,method:nr,array:nr,object:nr,number:nr,date:nr,boolean:nr,integer:nr,float:nr,regexp:nr,email:nr,url:nr,hex:nr},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},Zc=TA;Object.assign({},Zc.Modal);let bu=[];const Hv=()=>bu.reduce((t,r)=>Object.assign(Object.assign({},t),r),Zc.Modal);function PA(t){if(t){const r=Object.assign({},t);return bu.push(r),Hv(),()=>{bu=bu.filter(a=>a!==r),Hv()}}Object.assign({},Zc.Modal)}const IA=C.createContext(void 0),bS=IA,BA="internalMark",kA=t=>{const{locale:r={},children:a,_ANT_MARK__:o}=t;C.useEffect(()=>PA(r&&r.Modal),[r]);const u=C.useMemo(()=>Object.assign(Object.assign({},r),{exist:!0}),[r]);return C.createElement(bS.Provider,{value:u},a)},DA=kA;function Ct(t,r){LA(t)&&(t="100%");var a=zA(t);return t=r===360?t:Math.min(r,Math.max(0,parseFloat(t))),a&&(t=parseInt(String(t*r),10)/100),Math.abs(t-r)<1e-6?1:(r===360?t=(t<0?t%r+r:t%r)/parseFloat(String(r)):t=t%r/parseFloat(String(r)),t)}function $l(t){return Math.min(1,Math.max(0,t))}function LA(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function zA(t){return typeof t=="string"&&t.indexOf("%")!==-1}function SS(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function jl(t){return t<=1?"".concat(Number(t)*100,"%"):t}function qn(t){return t.length===1?"0"+t:String(t)}function RA(t,r,a){return{r:Ct(t,255)*255,g:Ct(r,255)*255,b:Ct(a,255)*255}}function Gv(t,r,a){t=Ct(t,255),r=Ct(r,255),a=Ct(a,255);var o=Math.max(t,r,a),u=Math.min(t,r,a),d=0,h=0,l=(o+u)/2;if(o===u)h=0,d=0;else{var g=o-u;switch(h=l>.5?g/(2-o-u):g/(o+u),o){case t:d=(r-a)/g+(r<a?6:0);break;case r:d=(a-t)/g+2;break;case a:d=(t-r)/g+4;break}d/=6}return{h:d,s:h,l}}function rf(t,r,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(r-t)*(6*a):a<1/2?r:a<2/3?t+(r-t)*(2/3-a)*6:t}function FA(t,r,a){var o,u,d;if(t=Ct(t,360),r=Ct(r,100),a=Ct(a,100),r===0)u=a,d=a,o=a;else{var h=a<.5?a*(1+r):a+r-a*r,l=2*a-h;o=rf(l,h,t+1/3),u=rf(l,h,t),d=rf(l,h,t-1/3)}return{r:o*255,g:u*255,b:d*255}}function Fh(t,r,a){t=Ct(t,255),r=Ct(r,255),a=Ct(a,255);var o=Math.max(t,r,a),u=Math.min(t,r,a),d=0,h=o,l=o-u,g=o===0?0:l/o;if(o===u)d=0;else{switch(o){case t:d=(r-a)/l+(r<a?6:0);break;case r:d=(a-t)/l+2;break;case a:d=(t-r)/l+4;break}d/=6}return{h:d,s:g,v:h}}function OA(t,r,a){t=Ct(t,360)*6,r=Ct(r,100),a=Ct(a,100);var o=Math.floor(t),u=t-o,d=a*(1-r),h=a*(1-u*r),l=a*(1-(1-u)*r),g=o%6,y=[a,h,d,d,l,a][g],v=[l,a,a,h,d,d][g],b=[d,d,l,a,a,h][g];return{r:y*255,g:v*255,b:b*255}}function Oh(t,r,a,o){var u=[qn(Math.round(t).toString(16)),qn(Math.round(r).toString(16)),qn(Math.round(a).toString(16))];return o&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0):u.join("")}function MA(t,r,a,o,u){var d=[qn(Math.round(t).toString(16)),qn(Math.round(r).toString(16)),qn(Math.round(a).toString(16)),qn(NA(o))];return u&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function NA(t){return Math.round(parseFloat(t)*255).toString(16)}function $v(t){return ar(t)/255}function ar(t){return parseInt(t,16)}function HA(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var Mh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ca(t){var r={r:0,g:0,b:0},a=1,o=null,u=null,d=null,h=!1,l=!1;return typeof t=="string"&&(t=jA(t)),typeof t=="object"&&(pi(t.r)&&pi(t.g)&&pi(t.b)?(r=RA(t.r,t.g,t.b),h=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):pi(t.h)&&pi(t.s)&&pi(t.v)?(o=jl(t.s),u=jl(t.v),r=OA(t.h,o,u),h=!0,l="hsv"):pi(t.h)&&pi(t.s)&&pi(t.l)&&(o=jl(t.s),d=jl(t.l),r=FA(t.h,o,d),h=!0,l="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(a=t.a)),a=SS(a),{ok:h,format:t.format||l,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a}}var GA="[-\\+]?\\d+%?",$A="[-\\+]?\\d*\\.\\d+%?",an="(?:".concat($A,")|(?:").concat(GA,")"),nf="[\\s|\\(]+(".concat(an,")[,|\\s]+(").concat(an,")[,|\\s]+(").concat(an,")\\s*\\)?"),af="[\\s|\\(]+(".concat(an,")[,|\\s]+(").concat(an,")[,|\\s]+(").concat(an,")[,|\\s]+(").concat(an,")\\s*\\)?"),Rr={CSS_UNIT:new RegExp(an),rgb:new RegExp("rgb"+nf),rgba:new RegExp("rgba"+af),hsl:new RegExp("hsl"+nf),hsla:new RegExp("hsla"+af),hsv:new RegExp("hsv"+nf),hsva:new RegExp("hsva"+af),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function jA(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var r=!1;if(Mh[t])t=Mh[t],r=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var a=Rr.rgb.exec(t);return a?{r:a[1],g:a[2],b:a[3]}:(a=Rr.rgba.exec(t),a?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=Rr.hsl.exec(t),a?{h:a[1],s:a[2],l:a[3]}:(a=Rr.hsla.exec(t),a?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=Rr.hsv.exec(t),a?{h:a[1],s:a[2],v:a[3]}:(a=Rr.hsva.exec(t),a?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=Rr.hex8.exec(t),a?{r:ar(a[1]),g:ar(a[2]),b:ar(a[3]),a:$v(a[4]),format:r?"name":"hex8"}:(a=Rr.hex6.exec(t),a?{r:ar(a[1]),g:ar(a[2]),b:ar(a[3]),format:r?"name":"hex"}:(a=Rr.hex4.exec(t),a?{r:ar(a[1]+a[1]),g:ar(a[2]+a[2]),b:ar(a[3]+a[3]),a:$v(a[4]+a[4]),format:r?"name":"hex8"}:(a=Rr.hex3.exec(t),a?{r:ar(a[1]+a[1]),g:ar(a[2]+a[2]),b:ar(a[3]+a[3]),format:r?"name":"hex"}:!1)))))))))}function pi(t){return!!Rr.CSS_UNIT.exec(String(t))}var Zt=function(){function t(r,a){r===void 0&&(r=""),a===void 0&&(a={});var o;if(r instanceof t)return r;typeof r=="number"&&(r=HA(r)),this.originalInput=r;var u=Ca(r);this.originalInput=r,this.r=u.r,this.g=u.g,this.b=u.b,this.a=u.a,this.roundA=Math.round(100*this.a)/100,this.format=(o=a.format)!==null&&o!==void 0?o:u.format,this.gradientType=a.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=u.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},t.prototype.getLuminance=function(){var r=this.toRgb(),a,o,u,d=r.r/255,h=r.g/255,l=r.b/255;return d<=.03928?a=d/12.92:a=Math.pow((d+.055)/1.055,2.4),h<=.03928?o=h/12.92:o=Math.pow((h+.055)/1.055,2.4),l<=.03928?u=l/12.92:u=Math.pow((l+.055)/1.055,2.4),.2126*a+.7152*o+.0722*u},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(r){return this.a=SS(r),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},t.prototype.toHsv=function(){var r=Fh(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},t.prototype.toHsvString=function(){var r=Fh(this.r,this.g,this.b),a=Math.round(r.h*360),o=Math.round(r.s*100),u=Math.round(r.v*100);return this.a===1?"hsv(".concat(a,", ").concat(o,"%, ").concat(u,"%)"):"hsva(".concat(a,", ").concat(o,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var r=Gv(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},t.prototype.toHslString=function(){var r=Gv(this.r,this.g,this.b),a=Math.round(r.h*360),o=Math.round(r.s*100),u=Math.round(r.l*100);return this.a===1?"hsl(".concat(a,", ").concat(o,"%, ").concat(u,"%)"):"hsla(".concat(a,", ").concat(o,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(r){return r===void 0&&(r=!1),Oh(this.r,this.g,this.b,r)},t.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},t.prototype.toHex8=function(r){return r===void 0&&(r=!1),MA(this.r,this.g,this.b,this.a,r)},t.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},t.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var r=Math.round(this.r),a=Math.round(this.g),o=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(a,", ").concat(o,")"):"rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var r=function(a){return"".concat(Math.round(Ct(a,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var r=function(a){return Math.round(Ct(a,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+Oh(this.r,this.g,this.b,!1),a=0,o=Object.entries(Mh);a<o.length;a++){var u=o[a],d=u[0],h=u[1];if(r===h)return d}return!1},t.prototype.toString=function(r){var a=!!r;r=r??this.format;var o=!1,u=this.a<1&&this.a>=0,d=!a&&u&&(r.startsWith("hex")||r==="name");return d?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(o=this.toRgbString()),r==="prgb"&&(o=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(o=this.toHexString()),r==="hex3"&&(o=this.toHexString(!0)),r==="hex4"&&(o=this.toHex8String(!0)),r==="hex8"&&(o=this.toHex8String()),r==="name"&&(o=this.toName()),r==="hsl"&&(o=this.toHslString()),r==="hsv"&&(o=this.toHsvString()),o||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.l+=r/100,a.l=$l(a.l),new t(a)},t.prototype.brighten=function(r){r===void 0&&(r=10);var a=this.toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(255*-(r/100)))),a.g=Math.max(0,Math.min(255,a.g-Math.round(255*-(r/100)))),a.b=Math.max(0,Math.min(255,a.b-Math.round(255*-(r/100)))),new t(a)},t.prototype.darken=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.l-=r/100,a.l=$l(a.l),new t(a)},t.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},t.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},t.prototype.desaturate=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.s-=r/100,a.s=$l(a.s),new t(a)},t.prototype.saturate=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.s+=r/100,a.s=$l(a.s),new t(a)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(r){var a=this.toHsl(),o=(a.h+r)%360;return a.h=o<0?360+o:o,new t(a)},t.prototype.mix=function(r,a){a===void 0&&(a=50);var o=this.toRgb(),u=new t(r).toRgb(),d=a/100,h={r:(u.r-o.r)*d+o.r,g:(u.g-o.g)*d+o.g,b:(u.b-o.b)*d+o.b,a:(u.a-o.a)*d+o.a};return new t(h)},t.prototype.analogous=function(r,a){r===void 0&&(r=6),a===void 0&&(a=30);var o=this.toHsl(),u=360/a,d=[this];for(o.h=(o.h-(u*r>>1)+720)%360;--r;)o.h=(o.h+u)%360,d.push(new t(o));return d},t.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new t(r)},t.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var a=this.toHsv(),o=a.h,u=a.s,d=a.v,h=[],l=1/r;r--;)h.push(new t({h:o,s:u,v:d})),d=(d+l)%1;return h},t.prototype.splitcomplement=function(){var r=this.toHsl(),a=r.h;return[this,new t({h:(a+72)%360,s:r.s,l:r.l}),new t({h:(a+216)%360,s:r.s,l:r.l})]},t.prototype.onBackground=function(r){var a=this.toRgb(),o=new t(r).toRgb(),u=a.a+o.a*(1-a.a);return new t({r:(a.r*a.a+o.r*o.a*(1-a.a))/u,g:(a.g*a.a+o.g*o.a*(1-a.a))/u,b:(a.b*a.a+o.b*o.a*(1-a.a))/u,a:u})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(r){for(var a=this.toHsl(),o=a.h,u=[this],d=360/r,h=1;h<r;h++)u.push(new t({h:(o+h*d)%360,s:a.s,l:a.l}));return u},t.prototype.equals=function(r){return this.toRgbString()===new t(r).toRgbString()},t}(),Vl=2,jv=.16,VA=.05,YA=.05,WA=.15,xS=5,wS=4,qA=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Vv(t){var r=t.r,a=t.g,o=t.b,u=Fh(r,a,o);return{h:u.h*360,s:u.s,v:u.v}}function Yl(t){var r=t.r,a=t.g,o=t.b;return"#".concat(Oh(r,a,o,!1))}function KA(t,r,a){var o=a/100,u={r:(r.r-t.r)*o+t.r,g:(r.g-t.g)*o+t.g,b:(r.b-t.b)*o+t.b};return u}function Yv(t,r,a){var o;return Math.round(t.h)>=60&&Math.round(t.h)<=240?o=a?Math.round(t.h)-Vl*r:Math.round(t.h)+Vl*r:o=a?Math.round(t.h)+Vl*r:Math.round(t.h)-Vl*r,o<0?o+=360:o>=360&&(o-=360),o}function Wv(t,r,a){if(t.h===0&&t.s===0)return t.s;var o;return a?o=t.s-jv*r:r===wS?o=t.s+jv:o=t.s+VA*r,o>1&&(o=1),a&&r===xS&&o>.1&&(o=.1),o<.06&&(o=.06),Number(o.toFixed(2))}function qv(t,r,a){var o;return a?o=t.v+YA*r:o=t.v-WA*r,o>1&&(o=1),Number(o.toFixed(2))}function vo(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[],o=Ca(t),u=xS;u>0;u-=1){var d=Vv(o),h=Yl(Ca({h:Yv(d,u,!0),s:Wv(d,u,!0),v:qv(d,u,!0)}));a.push(h)}a.push(Yl(o));for(var l=1;l<=wS;l+=1){var g=Vv(o),y=Yl(Ca({h:Yv(g,l),s:Wv(g,l),v:qv(g,l)}));a.push(y)}return r.theme==="dark"?qA.map(function(v){var b=v.index,e=v.opacity,n=Yl(KA(Ca(r.backgroundColor||"#141414"),Ca(a[b]),e*100));return n}):a}var of={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},sf={},lf={};Object.keys(of).forEach(function(t){sf[t]=vo(of[t]),sf[t].primary=sf[t][5],lf[t]=vo(of[t],{theme:"dark",backgroundColor:"#141414"}),lf[t].primary=lf[t][5]});const XA=t=>{const{controlHeight:r}=t;return{controlHeightSM:r*.75,controlHeightXS:r*.5,controlHeightLG:r*1.25}},QA=XA;function ZA(t){const{sizeUnit:r,sizeStep:a}=t;return{sizeXXL:r*(a+8),sizeXL:r*(a+4),sizeLG:r*(a+2),sizeMD:r*(a+1),sizeMS:r*a,size:r*a,sizeSM:r*(a-1),sizeXS:r*(a-2),sizeXXS:r*(a-3)}}const ES={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},JA=Object.assign(Object.assign({},ES),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Jc=JA;function eT(t,r){let{generateColorPalettes:a,generateNeutralColorPalettes:o}=r;const{colorSuccess:u,colorWarning:d,colorError:h,colorInfo:l,colorPrimary:g,colorBgBase:y,colorTextBase:v}=t,b=a(g),e=a(u),n=a(d),s=a(h),c=a(l),f=o(y,v),m=t.colorLink||t.colorInfo,p=a(m);return Object.assign(Object.assign({},f),{colorPrimaryBg:b[1],colorPrimaryBgHover:b[2],colorPrimaryBorder:b[3],colorPrimaryBorderHover:b[4],colorPrimaryHover:b[5],colorPrimary:b[6],colorPrimaryActive:b[7],colorPrimaryTextHover:b[8],colorPrimaryText:b[9],colorPrimaryTextActive:b[10],colorSuccessBg:e[1],colorSuccessBgHover:e[2],colorSuccessBorder:e[3],colorSuccessBorderHover:e[4],colorSuccessHover:e[4],colorSuccess:e[6],colorSuccessActive:e[7],colorSuccessTextHover:e[8],colorSuccessText:e[9],colorSuccessTextActive:e[10],colorErrorBg:s[1],colorErrorBgHover:s[2],colorErrorBorder:s[3],colorErrorBorderHover:s[4],colorErrorHover:s[5],colorError:s[6],colorErrorActive:s[7],colorErrorTextHover:s[8],colorErrorText:s[9],colorErrorTextActive:s[10],colorWarningBg:n[1],colorWarningBgHover:n[2],colorWarningBorder:n[3],colorWarningBorderHover:n[4],colorWarningHover:n[4],colorWarning:n[6],colorWarningActive:n[7],colorWarningTextHover:n[8],colorWarningText:n[9],colorWarningTextActive:n[10],colorInfoBg:c[1],colorInfoBgHover:c[2],colorInfoBorder:c[3],colorInfoBorderHover:c[4],colorInfoHover:c[4],colorInfo:c[6],colorInfoActive:c[7],colorInfoTextHover:c[8],colorInfoText:c[9],colorInfoTextActive:c[10],colorLinkHover:p[4],colorLink:p[6],colorLinkActive:p[7],colorBgMask:new Zt("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const tT=t=>{let r=t,a=t,o=t,u=t;return t<6&&t>=5?r=t+1:t<16&&t>=6?r=t+2:t>=16&&(r=16),t<7&&t>=5?a=4:t<8&&t>=7?a=5:t<14&&t>=8?a=6:t<16&&t>=14?a=7:t>=16&&(a=8),t<6&&t>=2?o=1:t>=6&&(o=2),t>4&&t<8?u=4:t>=8&&(u=6),{borderRadius:t>16?16:t,borderRadiusXS:o,borderRadiusSM:a,borderRadiusLG:r,borderRadiusOuter:u}},rT=tT;function iT(t){const{motionUnit:r,motionBase:a,borderRadius:o,lineWidth:u}=t;return Object.assign({motionDurationFast:`${(a+r).toFixed(1)}s`,motionDurationMid:`${(a+r*2).toFixed(1)}s`,motionDurationSlow:`${(a+r*3).toFixed(1)}s`,lineWidthBold:u+1},rT(o))}const mi=(t,r)=>new Zt(t).setAlpha(r).toRgbString(),Mo=(t,r)=>new Zt(t).darken(r).toHexString(),nT=t=>{const r=vo(t);return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[4],6:r[5],7:r[6],8:r[4],9:r[5],10:r[6]}},aT=(t,r)=>{const a=t||"#fff",o=r||"#000";return{colorBgBase:a,colorTextBase:o,colorText:mi(o,.88),colorTextSecondary:mi(o,.65),colorTextTertiary:mi(o,.45),colorTextQuaternary:mi(o,.25),colorFill:mi(o,.15),colorFillSecondary:mi(o,.06),colorFillTertiary:mi(o,.04),colorFillQuaternary:mi(o,.02),colorBgLayout:Mo(a,4),colorBgContainer:Mo(a,0),colorBgElevated:Mo(a,0),colorBgSpotlight:mi(o,.85),colorBorder:Mo(a,15),colorBorderSecondary:Mo(a,6)}};function oT(t){const r=new Array(10).fill(null).map((a,o)=>{const u=o-1,d=t*Math.pow(2.71828,u/5),h=o>1?Math.floor(d):Math.ceil(d);return Math.floor(h/2)*2});return r[1]=t,r.map(a=>{const o=a+8;return{size:a,lineHeight:o/a}})}const sT=t=>{const r=oT(t),a=r.map(u=>u.size),o=r.map(u=>u.lineHeight);return{fontSizeSM:a[0],fontSize:a[1],fontSizeLG:a[2],fontSizeXL:a[3],fontSizeHeading1:a[6],fontSizeHeading2:a[5],fontSizeHeading3:a[4],fontSizeHeading4:a[3],fontSizeHeading5:a[2],lineHeight:o[1],lineHeightLG:o[2],lineHeightSM:o[0],lineHeightHeading1:o[6],lineHeightHeading2:o[5],lineHeightHeading3:o[4],lineHeightHeading4:o[3],lineHeightHeading5:o[2]}},lT=sT;function uT(t){const r=Object.keys(ES).map(a=>{const o=vo(t[a]);return new Array(10).fill(1).reduce((u,d,h)=>(u[`${a}-${h+1}`]=o[h],u[`${a}${h+1}`]=o[h],u),{})}).reduce((a,o)=>(a=Object.assign(Object.assign({},a),o),a),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),r),eT(t,{generateColorPalettes:nT,generateNeutralColorPalettes:aT})),lT(t.fontSize)),ZA(t)),QA(t)),iT(t))}const US=Bh(uT),CS={token:Jc,hashed:!0},AS=ue.createContext(CS),nc=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],cT="5.9.1";function uf(t){return t>=0&&t<=255}function Wl(t,r){const{r:a,g:o,b:u,a:d}=new Zt(t).toRgb();if(d<1)return t;const{r:h,g:l,b:g}=new Zt(r).toRgb();for(let y=.01;y<=1;y+=.01){const v=Math.round((a-h*(1-y))/y),b=Math.round((o-l*(1-y))/y),e=Math.round((u-g*(1-y))/y);if(uf(v)&&uf(b)&&uf(e))return new Zt({r:v,g:b,b:e,a:Math.round(y*100)/100}).toRgbString()}return new Zt({r:a,g:o,b:u,a:1}).toRgbString()}var dT=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};function TS(t){const{override:r}=t,a=dT(t,["override"]),o=Object.assign({},r);Object.keys(Jc).forEach(e=>{delete o[e]});const u=Object.assign(Object.assign({},a),o),d=480,h=576,l=768,g=992,y=1200,v=1600;if(u.motion===!1){const e="0s";u.motionDurationFast=e,u.motionDurationMid=e,u.motionDurationSlow=e}return Object.assign(Object.assign(Object.assign({},u),{colorFillContent:u.colorFillSecondary,colorFillContentHover:u.colorFill,colorFillAlter:u.colorFillQuaternary,colorBgContainerDisabled:u.colorFillTertiary,colorBorderBg:u.colorBgContainer,colorSplit:Wl(u.colorBorderSecondary,u.colorBgContainer),colorTextPlaceholder:u.colorTextQuaternary,colorTextDisabled:u.colorTextQuaternary,colorTextHeading:u.colorText,colorTextLabel:u.colorTextSecondary,colorTextDescription:u.colorTextTertiary,colorTextLightSolid:u.colorWhite,colorHighlight:u.colorError,colorBgTextHover:u.colorFillSecondary,colorBgTextActive:u.colorFill,colorIcon:u.colorTextTertiary,colorIconHover:u.colorText,colorErrorOutline:Wl(u.colorErrorBg,u.colorBgContainer),colorWarningOutline:Wl(u.colorWarningBg,u.colorBgContainer),fontSizeIcon:u.fontSizeSM,lineWidthFocus:u.lineWidth*4,lineWidth:u.lineWidth,controlOutlineWidth:u.lineWidth*2,controlInteractiveSize:u.controlHeight/2,controlItemBgHover:u.colorFillTertiary,controlItemBgActive:u.colorPrimaryBg,controlItemBgActiveHover:u.colorPrimaryBgHover,controlItemBgActiveDisabled:u.colorFill,controlTmpOutline:u.colorFillQuaternary,controlOutline:Wl(u.colorPrimaryBg,u.colorBgContainer),lineType:u.lineType,borderRadius:u.borderRadius,borderRadiusXS:u.borderRadiusXS,borderRadiusSM:u.borderRadiusSM,borderRadiusLG:u.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:u.sizeXXS,paddingXS:u.sizeXS,paddingSM:u.sizeSM,padding:u.size,paddingMD:u.sizeMD,paddingLG:u.sizeLG,paddingXL:u.sizeXL,paddingContentHorizontalLG:u.sizeLG,paddingContentVerticalLG:u.sizeMS,paddingContentHorizontal:u.sizeMS,paddingContentVertical:u.sizeSM,paddingContentHorizontalSM:u.size,paddingContentVerticalSM:u.sizeXS,marginXXS:u.sizeXXS,marginXS:u.sizeXS,marginSM:u.sizeSM,margin:u.size,marginMD:u.sizeMD,marginLG:u.sizeLG,marginXL:u.sizeXL,marginXXL:u.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:h-1,screenSM:h,screenSMMin:h,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:g-1,screenLG:g,screenLGMin:g,screenLGMax:y-1,screenXL:y,screenXLMin:y,screenXLMax:v-1,screenXXL:v,screenXXLMin:v,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Zt("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Zt("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Zt("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),o)}var Kv=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const PS=(t,r,a)=>{const o=a.getDerivativeToken(t),{override:u}=r,d=Kv(r,["override"]);let h=Object.assign(Object.assign({},o),{override:u});return h=TS(h),d&&Object.entries(d).forEach(l=>{let[g,y]=l;const{theme:v}=y,b=Kv(y,["theme"]);let e=b;v&&(e=PS(Object.assign(Object.assign({},h),b),{override:b},v)),h[g]=e}),h};function ed(){const{token:t,hashed:r,theme:a,components:o}=ue.useContext(AS),u=`${cT}-${r||""}`,d=a||US,[h,l]=H2(d,[Jc,t],{salt:u,override:Object.assign({override:t},o),getComputedToken:PS,formatToken:TS});return[d,h,r?l:""]}function xi(t){var r=C.useRef();r.current=t;var a=C.useCallback(function(){for(var o,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return(o=r.current)===null||o===void 0?void 0:o.call.apply(o,[r].concat(d))},[]);return a}function Ja(t){var r=C.useRef(!1),a=C.useState(t),o=Y(a,2),u=o[0],d=o[1];C.useEffect(function(){return r.current=!1,function(){r.current=!0}},[]);function h(l,g){g&&r.current||d(l)}return[u,h]}function cf(t){return t!==void 0}function IS(t,r){var a=r||{},o=a.defaultValue,u=a.value,d=a.onChange,h=a.postState,l=Ja(function(){return cf(u)?u:cf(o)?typeof o=="function"?o():o:typeof t=="function"?t():t}),g=Y(l,2),y=g[0],v=g[1],b=u!==void 0?u:y,e=h?h(b):b,n=xi(d),s=Ja([b]),c=Y(s,2),f=c[0],m=c[1];kv(function(){var _=f[0];y!==_&&n(y,_)},[f]),kv(function(){cf(u)||v(u)},[u]);var p=xi(function(_,S){v(_,S),m([b],S)});return[e,p]}const BS="anticon",fT=(t,r)=>r||(t?`ant-${t}`:"ant"),ma=C.createContext({getPrefixCls:fT,iconPrefixCls:BS}),hT=(t,r,a,o,u)=>{const d=t/2,h=0,l=d,g=a*1/Math.sqrt(2),y=d-a*(1-1/Math.sqrt(2)),v=d-r*(1/Math.sqrt(2)),b=a*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),e=2*d-v,n=b,s=2*d-g,c=y,f=2*d-h,m=l,p=d*Math.sqrt(2)+a*(Math.sqrt(2)-2),_=a*(Math.sqrt(2)-1);return{pointerEvents:"none",width:t,height:t,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:t,height:t/2,background:o,clipPath:{_multi_value_:!0,value:[`polygon(${_}px 100%, 50% ${_}px, ${2*d-_}px 100%, ${_}px 100%)`,`path('M ${h} ${l} A ${a} ${a} 0 0 0 ${g} ${y} L ${v} ${b} A ${r} ${r} 0 0 1 ${e} ${n} L ${s} ${c} A ${a} ${a} 0 0 0 ${f} ${m} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:p,height:p,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${r}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:u,zIndex:0,background:"transparent"}}},kS=t=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:t.fontFamily}),pT=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),mT=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active,\n  &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),gT=(t,r)=>{const{fontFamily:a,fontSize:o}=t,u=`[class^="${r}"], [class*=" ${r}"]`;return{[u]:{fontFamily:a,fontSize:o,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[u]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},DS=typeof CSSINJS_STATISTIC<"u";let Nh=!0;function Rs(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!DS)return Object.assign.apply(Object,[{}].concat(r));Nh=!1;const o={};return r.forEach(u=>{Object.keys(u).forEach(h=>{Object.defineProperty(o,h,{configurable:!0,enumerable:!0,get:()=>u[h]})})}),Nh=!0,o}const Xv={};function vT(){}function _T(t){let r,a=t,o=vT;return DS&&(r=new Set,a=new Proxy(t,{get(u,d){return Nh&&r.add(d),u[d]}}),o=(u,d)=>{var h;Xv[u]={global:Array.from(r),component:Object.assign(Object.assign({},(h=Xv[u])===null||h===void 0?void 0:h.component),d)}}),{token:a,keys:r,flush:o}}const yT=(t,r)=>{const[a,o]=ed();return zh({theme:a,token:o,hashId:"",path:["ant-design-icons",t],nonce:()=>r==null?void 0:r.nonce},()=>[{[`.${t}`]:Object.assign(Object.assign({},pT()),{[`.${t} .${t}-icon`]:{display:"block"}})}])},LS=yT;function zS(t,r,a){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const u=Array.isArray(t)?t:[t,t],[d]=u,h=u.join("-");return l=>{const[g,y,v]=ed(),{getPrefixCls:b,iconPrefixCls:e,csp:n}=C.useContext(ma),s=b(),c={theme:g,token:y,hashId:v,nonce:()=>n==null?void 0:n.nonce,clientOnly:o.clientOnly,order:o.order||-999};return zh(Object.assign(Object.assign({},c),{clientOnly:!1,path:["Shared",s]}),()=>[{"&":mT(y)}]),LS(e),[zh(Object.assign(Object.assign({},c),{path:[h,l,e]}),()=>{const{token:f,flush:m}=_T(y),p=Object.assign({},y[d]);if(o.deprecatedTokens){const{deprecatedTokens:A}=o;A.forEach(E=>{let[T,P]=E;var z;(p!=null&&p[T]||p!=null&&p[P])&&((z=p[P])!==null&&z!==void 0||(p[P]=p==null?void 0:p[T]))})}const _=typeof a=="function"?a(Rs(f,p??{})):a,S=Object.assign(Object.assign({},_),p),w=`.${l}`,x=Rs(f,{componentCls:w,prefixCls:l,iconCls:`.${e}`,antCls:`.${s}`},S),U=r(x,{hashId:v,prefixCls:l,rootPrefixCls:s,iconPrefixCls:e,overrideComponentToken:p});return m(d,S),[o.resetStyle===!1?null:gT(y,l),U]}),v]}}function bT(t,r){return nc.reduce((a,o)=>{const u=t[`${o}1`],d=t[`${o}3`],h=t[`${o}6`],l=t[`${o}7`];return Object.assign(Object.assign({},a),r(o,{lightColor:u,lightBorderColor:d,darkColor:h,textColor:l}))},{})}const ST=`-ant-${Date.now()}-${Math.random()}`;function xT(t,r){const a={},o=(h,l)=>{let g=h.clone();return g=(l==null?void 0:l(g))||g,g.toRgbString()},u=(h,l)=>{const g=new Zt(h),y=vo(g.toRgbString());a[`${l}-color`]=o(g),a[`${l}-color-disabled`]=y[1],a[`${l}-color-hover`]=y[4],a[`${l}-color-active`]=y[6],a[`${l}-color-outline`]=g.clone().setAlpha(.2).toRgbString(),a[`${l}-color-deprecated-bg`]=y[0],a[`${l}-color-deprecated-border`]=y[2]};if(r.primaryColor){u(r.primaryColor,"primary");const h=new Zt(r.primaryColor),l=vo(h.toRgbString());l.forEach((y,v)=>{a[`primary-${v+1}`]=y}),a["primary-color-deprecated-l-35"]=o(h,y=>y.lighten(35)),a["primary-color-deprecated-l-20"]=o(h,y=>y.lighten(20)),a["primary-color-deprecated-t-20"]=o(h,y=>y.tint(20)),a["primary-color-deprecated-t-50"]=o(h,y=>y.tint(50)),a["primary-color-deprecated-f-12"]=o(h,y=>y.setAlpha(y.getAlpha()*.12));const g=new Zt(l[0]);a["primary-color-active-deprecated-f-30"]=o(g,y=>y.setAlpha(y.getAlpha()*.3)),a["primary-color-active-deprecated-d-02"]=o(g,y=>y.darken(2))}return r.successColor&&u(r.successColor,"success"),r.warningColor&&u(r.warningColor,"warning"),r.errorColor&&u(r.errorColor,"error"),r.infoColor&&u(r.infoColor,"info"),`
  :root {
    ${Object.keys(a).map(h=>`--${t}-${h}: ${a[h]};`).join(`
`)}
  }
  `.trim()}function wT(t,r){const a=xT(t,r);rr()&&Ds(a,`${ST}-dynamic-theme`)}const Hh=C.createContext(!1),ET=t=>{let{children:r,disabled:a}=t;const o=C.useContext(Hh);return C.createElement(Hh.Provider,{value:a??o},r)},RS=Hh,Gh=C.createContext(void 0),UT=t=>{let{children:r,size:a}=t;const o=C.useContext(Gh);return C.createElement(Gh.Provider,{value:a||o},r)},wm=Gh;function CT(){const t=C.useContext(RS),r=C.useContext(wm);return{componentDisabled:t,componentSize:r}}function AT(t,r){const a=t||{},o=a.inherit===!1||!r?CS:r;return pm(()=>{if(!t)return r;const u=Object.assign({},o.components);return Object.keys(t.components||{}).forEach(d=>{u[d]=Object.assign(Object.assign({},u[d]),t.components[d])}),Object.assign(Object.assign(Object.assign({},o),a),{token:Object.assign(Object.assign({},o.token),a.token),components:u})},[a,o],(u,d)=>u.some((h,l)=>{const g=d[l];return!eS(h,g,!0)}))}var TT=["children"],FS=C.createContext({});function PT(t){var r=t.children,a=sa(t,TT);return C.createElement(FS.Provider,{value:a},r)}var IT=function(t){lm(a,t);var r=um(a);function a(){return ha(this,a),r.apply(this,arguments)}return pa(a,[{key:"render",value:function(){return this.props.children}}]),a}(C.Component),On="none",ql="appear",Kl="enter",Xl="leave",Qv="none",Mr="prepare",Ha="start",Ga="active",Em="end",OS="prepared";function Zv(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit".concat(t)]="webkit".concat(r),a["Moz".concat(t)]="moz".concat(r),a["ms".concat(t)]="MS".concat(r),a["O".concat(t)]="o".concat(r.toLowerCase()),a}function BT(t,r){var a={animationend:Zv("Animation","AnimationEnd"),transitionend:Zv("Transition","TransitionEnd")};return t&&("AnimationEvent"in r||delete a.animationend.animation,"TransitionEvent"in r||delete a.transitionend.transition),a}var kT=BT(rr(),typeof window<"u"?window:{}),MS={};if(rr()){var DT=document.createElement("div");MS=DT.style}var Ql={};function NS(t){if(Ql[t])return Ql[t];var r=kT[t];if(r)for(var a=Object.keys(r),o=a.length,u=0;u<o;u+=1){var d=a[u];if(Object.prototype.hasOwnProperty.call(r,d)&&d in MS)return Ql[t]=r[d],Ql[t]}return""}var HS=NS("animationend"),GS=NS("transitionend"),$S=!!(HS&&GS),Jv=HS||"animationend",e_=GS||"transitionend";function t_(t,r){if(!t)return null;if(nt(t)==="object"){var a=r.replace(/-\w/g,function(o){return o[1].toUpperCase()});return t[a]}return"".concat(t,"-").concat(r)}const LT=function(t){var r=C.useRef(),a=C.useRef(t);a.current=t;var o=C.useCallback(function(h){a.current(h)},[]);function u(h){h&&(h.removeEventListener(e_,o),h.removeEventListener(Jv,o))}function d(h){r.current&&r.current!==h&&u(r.current),h&&h!==r.current&&(h.addEventListener(e_,o),h.addEventListener(Jv,o),r.current=h)}return C.useEffect(function(){return function(){u(r.current)}},[]),[d,u]};var jS=rr()?C.useLayoutEffect:C.useEffect;const zT=function(){var t=C.useRef(null);function r(){oa.cancel(t.current)}function a(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;r();var d=oa(function(){u<=1?o({isCanceled:function(){return d!==t.current}}):a(o,u-1)});t.current=d}return C.useEffect(function(){return function(){r()}},[]),[a,r]};var RT=[Mr,Ha,Ga,Em],FT=[Mr,OS],VS=!1,OT=!0;function YS(t){return t===Ga||t===Em}const MT=function(t,r,a){var o=Ja(Qv),u=Y(o,2),d=u[0],h=u[1],l=zT(),g=Y(l,2),y=g[0],v=g[1];function b(){h(Mr,!0)}var e=r?FT:RT;return jS(function(){if(d!==Qv&&d!==Em){var n=e.indexOf(d),s=e[n+1],c=a(d);c===VS?h(s,!0):s&&y(function(f){function m(){f.isCanceled()||h(s,!0)}c===!0?m():Promise.resolve(c).then(m)})}},[t,d]),C.useEffect(function(){return function(){v()}},[]),[b,d]};function NT(t,r,a,o){var u=o.motionEnter,d=u===void 0?!0:u,h=o.motionAppear,l=h===void 0?!0:h,g=o.motionLeave,y=g===void 0?!0:g,v=o.motionDeadline,b=o.motionLeaveImmediately,e=o.onAppearPrepare,n=o.onEnterPrepare,s=o.onLeavePrepare,c=o.onAppearStart,f=o.onEnterStart,m=o.onLeaveStart,p=o.onAppearActive,_=o.onEnterActive,S=o.onLeaveActive,w=o.onAppearEnd,x=o.onEnterEnd,U=o.onLeaveEnd,A=o.onVisibleChanged,E=Ja(),T=Y(E,2),P=T[0],z=T[1],R=Ja(On),D=Y(R,2),B=D[0],F=D[1],O=Ja(null),I=Y(O,2),L=I[0],M=I[1],k=C.useRef(!1),$=C.useRef(null);function J(){return a()}var ae=C.useRef(!1);function ce(){F(On,!0),M(null,!0)}function X(Q){var te=J();if(!(Q&&!Q.deadline&&Q.target!==te)){var ve=ae.current,Qe;B===ql&&ve?Qe=w==null?void 0:w(te,Q):B===Kl&&ve?Qe=x==null?void 0:x(te,Q):B===Xl&&ve&&(Qe=U==null?void 0:U(te,Q)),B!==On&&ve&&Qe!==!1&&ce()}}var ee=LT(X),be=Y(ee,1),de=be[0],_e=function(te){var ve,Qe,pt;switch(te){case ql:return ve={},le(ve,Mr,e),le(ve,Ha,c),le(ve,Ga,p),ve;case Kl:return Qe={},le(Qe,Mr,n),le(Qe,Ha,f),le(Qe,Ga,_),Qe;case Xl:return pt={},le(pt,Mr,s),le(pt,Ha,m),le(pt,Ga,S),pt;default:return{}}},Ee=C.useMemo(function(){return _e(B)},[B]),Xe=MT(B,!t,function(Q){if(Q===Mr){var te=Ee[Mr];return te?te(J()):VS}if(fe in Ee){var ve;M(((ve=Ee[fe])===null||ve===void 0?void 0:ve.call(Ee,J(),null))||null)}return fe===Ga&&(de(J()),v>0&&(clearTimeout($.current),$.current=setTimeout(function(){X({deadline:!0})},v))),fe===OS&&ce(),OT}),ge=Y(Xe,2),Le=ge[0],fe=ge[1],Be=YS(fe);ae.current=Be,jS(function(){z(r);var Q=k.current;k.current=!0;var te;!Q&&r&&l&&(te=ql),Q&&r&&d&&(te=Kl),(Q&&!r&&y||!Q&&b&&!r&&y)&&(te=Xl);var ve=_e(te);te&&(t||ve[Mr])?(F(te),Le()):F(On)},[r]),C.useEffect(function(){(B===ql&&!l||B===Kl&&!d||B===Xl&&!y)&&F(On)},[l,d,y]),C.useEffect(function(){return function(){k.current=!1,clearTimeout($.current)}},[]);var ye=C.useRef(!1);C.useEffect(function(){P&&(ye.current=!0),P!==void 0&&B===On&&((ye.current||P)&&(A==null||A(P)),ye.current=!0)},[P,B]);var ie=L;return Ee[Mr]&&fe===Ha&&(ie=W({transition:"none"},ie)),[B,fe,ie,P??r]}function HT(t){var r=t;nt(t)==="object"&&(r=t.transitionSupport);function a(u,d){return!!(u.motionName&&r&&d!==!1)}var o=C.forwardRef(function(u,d){var h=u.visible,l=h===void 0?!0:h,g=u.removeOnLeave,y=g===void 0?!0:g,v=u.forceRender,b=u.children,e=u.motionName,n=u.leavedClassName,s=u.eventProps,c=C.useContext(FS),f=c.motion,m=a(u,f),p=C.useRef(),_=C.useRef();function S(){try{return p.current instanceof HTMLElement?p.current:Ch(_.current)}catch{return null}}var w=NT(m,l,S,u),x=Y(w,4),U=x[0],A=x[1],E=x[2],T=x[3],P=C.useRef(T);T&&(P.current=!0);var z=C.useCallback(function(M){p.current=M,mm(d,M)},[d]),R,D=W(W({},s),{},{visible:l});if(!b)R=null;else if(U===On)T?R=b(W({},D),z):!y&&P.current&&n?R=b(W(W({},D),{},{className:n}),z):v||!y&&!n?R=b(W(W({},D),{},{style:{display:"none"}}),z):R=null;else{var B,F;A===Mr?F="prepare":YS(A)?F="active":A===Ha&&(F="start");var O=t_(e,"".concat(U,"-").concat(F));R=b(W(W({},D),{},{className:ht(t_(e,U),(B={},le(B,O,O&&F),le(B,e,typeof e=="string"),B)),style:E}),z)}if(C.isValidElement(R)&&Wc(R)){var I=R,L=I.ref;L||(R=C.cloneElement(R,{ref:z}))}return C.createElement(IT,{ref:_},R)});return o.displayName="CSSMotion",o}const Um=HT($S);var $h="add",jh="keep",Vh="remove",df="removed";function GT(t){var r;return t&&nt(t)==="object"&&"key"in t?r=t:r={key:t},W(W({},r),{},{key:String(r.key)})}function Yh(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(GT)}function $T(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=[],o=0,u=r.length,d=Yh(t),h=Yh(r);d.forEach(function(y){for(var v=!1,b=o;b<u;b+=1){var e=h[b];if(e.key===y.key){o<b&&(a=a.concat(h.slice(o,b).map(function(n){return W(W({},n),{},{status:$h})})),o=b),a.push(W(W({},e),{},{status:jh})),o+=1,v=!0;break}}v||a.push(W(W({},y),{},{status:Vh}))}),o<u&&(a=a.concat(h.slice(o).map(function(y){return W(W({},y),{},{status:$h})})));var l={};a.forEach(function(y){var v=y.key;l[v]=(l[v]||0)+1});var g=Object.keys(l).filter(function(y){return l[y]>1});return g.forEach(function(y){a=a.filter(function(v){var b=v.key,e=v.status;return b!==y||e!==Vh}),a.forEach(function(v){v.key===y&&(v.status=jh)})}),a}var jT=["component","children","onVisibleChanged","onAllRemoved"],VT=["status"],YT=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function WT(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Um,a=function(o){lm(d,o);var u=um(d);function d(){var h;ha(this,d);for(var l=arguments.length,g=new Array(l),y=0;y<l;y++)g[y]=arguments[y];return h=u.call.apply(u,[this].concat(g)),le(xh(h),"state",{keyEntities:[]}),le(xh(h),"removeKey",function(v){var b=h.state.keyEntities,e=b.map(function(n){return n.key!==v?n:W(W({},n),{},{status:df})});return h.setState({keyEntities:e}),e.filter(function(n){var s=n.status;return s!==df}).length}),h}return pa(d,[{key:"render",value:function(){var l=this,g=this.state.keyEntities,y=this.props,v=y.component,b=y.children,e=y.onVisibleChanged,n=y.onAllRemoved,s=sa(y,jT),c=v||C.Fragment,f={};return YT.forEach(function(m){f[m]=s[m],delete s[m]}),delete s.keys,C.createElement(c,s,g.map(function(m,p){var _=m.status,S=sa(m,VT),w=_===$h||_===jh;return C.createElement(r,ni({},f,{key:S.key,visible:w,eventProps:S,onVisibleChanged:function(U){if(e==null||e(U,{key:S.key}),!U){var A=l.removeKey(S.key);A===0&&n&&n()}}}),function(x,U){return b(W(W({},x),{},{index:p}),U)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,g){var y=l.keys,v=g.keyEntities,b=Yh(y),e=$T(v,b);return{keyEntities:e.filter(function(n){var s=v.find(function(c){var f=c.key;return n.key===f});return!(s&&s.status===df&&n.status===Vh)})}}}]),d}(C.Component);return le(a,"defaultProps",{component:"div"}),a}WT($S);function qT(t){const{children:r}=t,[,a]=ed(),{motion:o}=a,u=C.useRef(!1);return u.current=u.current||o===!1,u.current?C.createElement(PT,{motion:o},r):r}const KT=()=>null;var XT=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const QT=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],ZT="ant";let WS;function JT(){return WS||ZT}function eP(t){return Object.keys(t).some(r=>r.endsWith("Color"))}const tP=t=>{let{prefixCls:r,iconPrefixCls:a,theme:o}=t;r!==void 0&&(WS=r),o&&eP(o)&&wT(JT(),o)},rP=t=>{const{children:r,csp:a,autoInsertSpaceInButton:o,alert:u,anchor:d,form:h,locale:l,componentSize:g,direction:y,space:v,virtual:b,dropdownMatchSelectWidth:e,popupMatchSelectWidth:n,popupOverflow:s,legacyLocale:c,parentContext:f,iconPrefixCls:m,theme:p,componentDisabled:_,segmented:S,statistic:w,spin:x,calendar:U,carousel:A,cascader:E,collapse:T,typography:P,checkbox:z,descriptions:R,divider:D,drawer:B,skeleton:F,steps:O,image:I,layout:L,list:M,mentions:k,modal:$,progress:J,result:ae,slider:ce,breadcrumb:X,menu:ee,pagination:be,input:de,empty:_e,badge:Ee,radio:Xe,rate:ge,switch:Le,transfer:fe,avatar:Be,message:ye,tag:ie,table:Q,card:te,tabs:ve,timeline:Qe,timePicker:pt,upload:Lr,notification:Tt,tree:Un,colorPicker:oi,datePicker:Ze,wave:Pt}=t,Ve=C.useCallback((ze,Ce)=>{const{prefixCls:ne}=t;if(Ce)return Ce;const he=ne||f.getPrefixCls("");return ze?`${he}-${ze}`:he},[f.getPrefixCls,t.prefixCls]),Ft=m||f.iconPrefixCls||BS,bt=a||f.csp;LS(Ft,bt);const Wt=AT(p,f.theme),lt={csp:bt,autoInsertSpaceInButton:o,alert:u,anchor:d,locale:l||c,direction:y,space:v,virtual:b,popupMatchSelectWidth:n??e,popupOverflow:s,getPrefixCls:Ve,iconPrefixCls:Ft,theme:Wt,segmented:S,statistic:w,spin:x,calendar:U,carousel:A,cascader:E,collapse:T,typography:P,checkbox:z,descriptions:R,divider:D,drawer:B,skeleton:F,steps:O,image:I,input:de,layout:L,list:M,mentions:k,modal:$,progress:J,result:ae,slider:ce,breadcrumb:X,menu:ee,pagination:be,empty:_e,badge:Ee,radio:Xe,rate:ge,switch:Le,transfer:fe,avatar:Be,message:ye,tag:ie,table:Q,card:te,tabs:ve,timeline:Qe,timePicker:pt,upload:Lr,notification:Tt,tree:Un,colorPicker:oi,datePicker:Ze,wave:Pt},It=Object.assign({},f);Object.keys(lt).forEach(ze=>{lt[ze]!==void 0&&(It[ze]=lt[ze])}),QT.forEach(ze=>{const Ce=t[ze];Ce&&(It[ze]=Ce)});const Wr=pm(()=>It,It,(ze,Ce)=>{const ne=Object.keys(ze),he=Object.keys(Ce);return ne.length!==he.length||ne.some(Je=>ze[Je]!==Ce[Je])}),zi=C.useMemo(()=>({prefixCls:Ft,csp:bt}),[Ft,bt]);let Ue=C.createElement(C.Fragment,null,C.createElement(KT,{dropdownMatchSelectWidth:e}),r);const ut=C.useMemo(()=>{var ze,Ce,ne,he;return bA(((ze=Zc.Form)===null||ze===void 0?void 0:ze.defaultValidateMessages)||{},((ne=(Ce=Wr.locale)===null||Ce===void 0?void 0:Ce.Form)===null||ne===void 0?void 0:ne.defaultValidateMessages)||{},((he=Wr.form)===null||he===void 0?void 0:he.validateMessages)||{},(h==null?void 0:h.validateMessages)||{})},[Wr,h==null?void 0:h.validateMessages]);Object.keys(ut).length>0&&(Ue=C.createElement(wA.Provider,{value:ut},Ue)),l&&(Ue=C.createElement(DA,{locale:l,_ANT_MARK__:BA},Ue)),(Ft||bt)&&(Ue=C.createElement(gA.Provider,{value:zi},Ue)),g&&(Ue=C.createElement(UT,{size:g},Ue)),Ue=C.createElement(qT,null,Ue);const si=C.useMemo(()=>{const ze=Wt||{},{algorithm:Ce,token:ne,components:he}=ze,Je=XT(ze,["algorithm","token","components"]),vr=Ce&&(!Array.isArray(Ce)||Ce.length>0)?Bh(Ce):US,_r={};return Object.entries(he||{}).forEach(li=>{let[St,ui]=li;const Ge=Object.assign({},ui);"algorithm"in Ge&&(Ge.algorithm===!0?Ge.theme=vr:(Array.isArray(Ge.algorithm)||typeof Ge.algorithm=="function")&&(Ge.theme=Bh(Ge.algorithm)),delete Ge.algorithm),_r[St]=Ge}),Object.assign(Object.assign({},Je),{theme:vr,token:Object.assign(Object.assign({},Jc),ne),components:_r})},[Wt]);return p&&(Ue=C.createElement(AS.Provider,{value:si},Ue)),_!==void 0&&(Ue=C.createElement(ET,{disabled:_},Ue)),C.createElement(ma.Provider,{value:Wr},Ue)},Qs=t=>{const r=C.useContext(ma),a=C.useContext(bS);return C.createElement(rP,Object.assign({parentContext:r,legacyLocale:a},t))};Qs.ConfigContext=ma;Qs.SizeContext=wm;Qs.config=tP;Qs.useConfig=CT;Object.defineProperty(Qs,"SizeContext",{get:()=>wm});function qS(t){var r;return t==null||(r=t.getRootNode)===null||r===void 0?void 0:r.call(t)}function iP(t){return qS(t)instanceof ShadowRoot}function Wh(t){return iP(t)?qS(t):null}const{isValidElement:Cm}=_c;function nP(t){return t&&Cm(t)&&t.type===C.Fragment}function aP(t,r,a){return Cm(t)?C.cloneElement(t,typeof a=="function"?a(t.props||{}):a):r}function KS(t,r){return aP(t,t,r)}var q={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var a=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||a>=q.F1&&a<=q.F12)return!1;switch(a){case q.ALT:case q.CAPS_LOCK:case q.CONTEXT_MENU:case q.CTRL:case q.DOWN:case q.END:case q.ESC:case q.HOME:case q.INSERT:case q.LEFT:case q.MAC_FF_META:case q.META:case q.NUMLOCK:case q.NUM_CENTER:case q.PAGE_DOWN:case q.PAGE_UP:case q.PAUSE:case q.PRINT_SCREEN:case q.RIGHT:case q.SHIFT:case q.UP:case q.WIN_KEY:case q.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=q.ZERO&&r<=q.NINE||r>=q.NUM_ZERO&&r<=q.NUM_MULTIPLY||r>=q.A&&r<=q.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case q.SPACE:case q.QUESTION_MARK:case q.NUM_PLUS:case q.NUM_MINUS:case q.NUM_PERIOD:case q.NUM_DIVISION:case q.SEMICOLON:case q.DASH:case q.EQUALS:case q.COMMA:case q.PERIOD:case q.SLASH:case q.APOSTROPHE:case q.SINGLE_QUOTE:case q.OPEN_SQUARE_BRACKET:case q.BACKSLASH:case q.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const oP=(t,r,a)=>a!==void 0?a:`${t}-${r}`,sP=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var r=t.getBBox(),a=r.width,o=r.height;if(a||o)return!0}if(t.getBoundingClientRect){var u=t.getBoundingClientRect(),d=u.width,h=u.height;if(d||h)return!0}}return!1};globalThis&&globalThis.__rest;const lP=C.createContext(null),uP=t=>{let{children:r}=t;return C.createElement(lP.Provider,{value:null},r)};var XS=C.createContext(null),r_=[];function cP(t,r){var a=C.useState(function(){if(!rr())return null;var s=document.createElement("div");return s}),o=Y(a,1),u=o[0],d=C.useRef(!1),h=C.useContext(XS),l=C.useState(r_),g=Y(l,2),y=g[0],v=g[1],b=h||(d.current?void 0:function(s){v(function(c){var f=[s].concat(st(c));return f})});function e(){u.parentElement||document.body.appendChild(u),d.current=!0}function n(){var s;(s=u.parentElement)===null||s===void 0||s.removeChild(u),d.current=!1}return Gt(function(){return t?h?h(e):e():n(),n},[t]),Gt(function(){y.length&&(y.forEach(function(s){return s()}),v(r_))},[y]),[u,b]}var ff;function dP(t){if(typeof document>"u")return 0;if(t||ff===void 0){var r=document.createElement("div");r.style.width="100%",r.style.height="200px";var a=document.createElement("div"),o=a.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",a.appendChild(r),document.body.appendChild(a);var u=r.offsetWidth;a.style.overflow="scroll";var d=r.offsetWidth;u===d&&(d=a.clientWidth),document.body.removeChild(a),ff=u-d}return ff}function i_(t){var r=t.match(/^(.*)px$/),a=Number(r==null?void 0:r[1]);return Number.isNaN(a)?dP():a}function fP(t){if(typeof document>"u"||!t||!(t instanceof Element))return{width:0,height:0};var r=getComputedStyle(t,"::-webkit-scrollbar"),a=r.width,o=r.height;return{width:i_(a),height:i_(o)}}function hP(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var pP="rc-util-locker-".concat(Date.now()),n_=0;function mP(t){var r=!!t,a=C.useState(function(){return n_+=1,"".concat(pP,"_").concat(n_)}),o=Y(a,1),u=o[0];Gt(function(){if(r){var d=fP(document.body).width,h=hP();Ds(`
html body {
  overflow-y: hidden;
  `.concat(h?"width: calc(100% - ".concat(d,"px);"):"",`
}`),u)}else rc(u);return function(){rc(u)}},[r,u])}var a_=!1;function gP(t){return typeof t=="boolean"&&(a_=t),a_}var o_=function(r){return r===!1?!1:!rr()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},QS=C.forwardRef(function(t,r){var a=t.open,o=t.autoLock,u=t.getContainer;t.debug;var d=t.autoDestroy,h=d===void 0?!0:d,l=t.children,g=C.useState(a),y=Y(g,2),v=y[0],b=y[1],e=v||a;C.useEffect(function(){(h||a)&&b(a)},[a,h]);var n=C.useState(function(){return o_(u)}),s=Y(n,2),c=s[0],f=s[1];C.useEffect(function(){var P=o_(u);f(P??null)});var m=cP(e&&!c),p=Y(m,2),_=p[0],S=p[1],w=c??_;mP(o&&a&&rr()&&(w===_||w===document.body));var x=null;if(l&&Wc(l)&&r){var U=l;x=U.ref}var A=$b(x,r);if(!e||!rr()||c===void 0)return null;var E=w===!1||gP(),T=l;return r&&(T=C.cloneElement(l,{ref:A})),C.createElement(XS.Provider,{value:S},E?T:Xs.createPortal(T,w))});function vP(){var t=W({},_c);return t.useId}var s_=0;function _P(t){var r=C.useState("ssr-id"),a=Y(r,2),o=a[0],u=a[1],d=vP(),h=d==null?void 0:d();return C.useEffect(function(){if(!d){var l=s_;s_+=1,u("rc_unique_".concat(l))}},[]),t||h||o}const yP=t=>({animationDuration:t,animationFillMode:"both"}),bP=t=>({animationDuration:t,animationFillMode:"both"}),SP=function(t,r,a,o){const d=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${d}${t}-enter,
      ${d}${t}-appear
    `]:Object.assign(Object.assign({},yP(o)),{animationPlayState:"paused"}),[`${d}${t}-leave`]:Object.assign(Object.assign({},bP(o)),{animationPlayState:"paused"}),[`
      ${d}${t}-enter${t}-enter-active,
      ${d}${t}-appear${t}-appear-active
    `]:{animationName:r,animationPlayState:"running"},[`${d}${t}-leave${t}-leave-active`]:{animationName:a,animationPlayState:"running",pointerEvents:"none"}}},xP=new Dr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),wP=new Dr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),l_=new Dr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),u_=new Dr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),EP=new Dr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),UP=new Dr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),CP=new Dr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),AP=new Dr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),TP=new Dr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),PP=new Dr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),IP=new Dr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),BP=new Dr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),kP={zoom:{inKeyframes:xP,outKeyframes:wP},"zoom-big":{inKeyframes:l_,outKeyframes:u_},"zoom-big-fast":{inKeyframes:l_,outKeyframes:u_},"zoom-left":{inKeyframes:CP,outKeyframes:AP},"zoom-right":{inKeyframes:TP,outKeyframes:PP},"zoom-up":{inKeyframes:EP,outKeyframes:UP},"zoom-down":{inKeyframes:IP,outKeyframes:BP}},DP=(t,r)=>{const{antCls:a}=t,o=`${a}-${r}`,{inKeyframes:u,outKeyframes:d}=kP[r];return[SP(o,u,d,r==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${o}-enter,
        ${o}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${o}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},LP=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var c_=C.createContext(null);function d_(t){return t?Array.isArray(t)?t:[t]:[]}function zP(t,r,a,o){return C.useMemo(function(){var u=d_(a??r),d=d_(o??r),h=new Set(u),l=new Set(d);return t&&(h.has("hover")&&(h.delete("hover"),h.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[h,l]},[t,r,a,o])}function RP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return a?t[0]===r[0]:t[0]===r[0]&&t[1]===r[1]}function FP(t,r,a,o){for(var u=a.points,d=Object.keys(t),h=0;h<d.length;h+=1){var l,g=d[h];if(RP((l=t[g])===null||l===void 0?void 0:l.points,u,o))return"".concat(r,"-placement-").concat(g)}return""}function f_(t,r,a,o){return r||(a?{motionName:"".concat(t,"-").concat(a)}:o?{motionName:o}:null)}function Zs(t){return t.ownerDocument.defaultView}function qh(t){for(var r=[],a=t==null?void 0:t.parentElement,o=["hidden","scroll","clip","auto"];a;){var u=Zs(a).getComputedStyle(a),d=u.overflowX,h=u.overflowY,l=u.overflow;[d,h,l].some(function(g){return o.includes(g)})&&r.push(a),a=a.parentElement}return r}function Fs(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?r:t}function No(t){return Fs(parseFloat(t),0)}function h_(t,r){var a=W({},t);return(r||[]).forEach(function(o){if(!(o instanceof HTMLBodyElement||o instanceof HTMLHtmlElement)){var u=Zs(o).getComputedStyle(o),d=u.overflow,h=u.overflowClipMargin,l=u.borderTopWidth,g=u.borderBottomWidth,y=u.borderLeftWidth,v=u.borderRightWidth,b=o.getBoundingClientRect(),e=o.offsetHeight,n=o.clientHeight,s=o.offsetWidth,c=o.clientWidth,f=No(l),m=No(g),p=No(y),_=No(v),S=Fs(Math.round(b.width/s*1e3)/1e3),w=Fs(Math.round(b.height/e*1e3)/1e3),x=(s-c-p-_)*S,U=(e-n-f-m)*w,A=f*w,E=m*w,T=p*S,P=_*S,z=0,R=0;if(d==="clip"){var D=No(h);z=D*S,R=D*w}var B=b.x+T-z,F=b.y+A-R,O=B+b.width+2*z-T-P-x,I=F+b.height+2*R-A-E-U;a.left=Math.max(a.left,B),a.top=Math.max(a.top,F),a.right=Math.min(a.right,O),a.bottom=Math.min(a.bottom,I)}}),a}function p_(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a="".concat(r),o=a.match(/^(.*)\%$/);return o?t*(parseFloat(o[1])/100):parseFloat(a)}function m_(t,r){var a=r||[],o=Y(a,2),u=o[0],d=o[1];return[p_(t.width,u),p_(t.height,d)]}function g_(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function xa(t,r){var a=r[0],o=r[1],u,d;return a==="t"?d=t.y:a==="b"?d=t.y+t.height:d=t.y+t.height/2,o==="l"?u=t.x:o==="r"?u=t.x+t.width:u=t.x+t.width/2,{x:u,y:d}}function ji(t,r){var a={t:"b",b:"t",l:"r",r:"l"};return t.map(function(o,u){return u===r?a[o]||"c":o}).join("")}function OP(t,r,a,o,u,d,h){var l=C.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:u[o]||{}}),g=Y(l,2),y=g[0],v=g[1],b=C.useRef(0),e=C.useMemo(function(){return r?qh(r):[]},[r]),n=C.useRef({}),s=function(){n.current={}};t||s();var c=xi(function(){if(r&&a&&t){let ir=function(To,hi){var Dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q,Sl=L.x+To,xl=L.y+hi,xd=Sl+be,wd=xl+ee,V=Math.max(Sl,Dn.left),oe=Math.max(xl,Dn.top),$e=Math.min(xd,Dn.right),rt=Math.min(wd,Dn.bottom);return Math.max(0,($e-V)*(rt-oe))},kn=function(){Ae=L.y+he,pe=Ae+ee,Z=L.x+ne,Re=Z+be};var Bn=ir,ag=kn,p,_,S=r,w=S.ownerDocument,x=Zs(S),U=x.getComputedStyle(S),A=U.width,E=U.height,T=U.position,P=S.style.left,z=S.style.top,R=S.style.right,D=S.style.bottom,B=W(W({},u[o]),d),F=w.createElement("div");(p=S.parentElement)===null||p===void 0||p.appendChild(F),F.style.left="".concat(S.offsetLeft,"px"),F.style.top="".concat(S.offsetTop,"px"),F.style.position=T,F.style.height="".concat(S.offsetHeight,"px"),F.style.width="".concat(S.offsetWidth,"px"),S.style.left="0",S.style.top="0",S.style.right="auto",S.style.bottom="auto";var O;if(Array.isArray(a))O={x:a[0],y:a[1],width:0,height:0};else{var I=a.getBoundingClientRect();O={x:I.x,y:I.y,width:I.width,height:I.height}}var L=S.getBoundingClientRect(),M=w.documentElement,k=M.clientWidth,$=M.clientHeight,J=M.scrollWidth,ae=M.scrollHeight,ce=M.scrollTop,X=M.scrollLeft,ee=L.height,be=L.width,de=O.height,_e=O.width,Ee={left:0,top:0,right:k,bottom:$},Xe={left:-X,top:-ce,right:J-X,bottom:ae-ce},ge=B.htmlRegion,Le="visible",fe="visibleFirst";ge!=="scroll"&&ge!==fe&&(ge=Le);var Be=ge===fe,ye=h_(Xe,e),ie=h_(Ee,e),Q=ge===Le?ie:ye,te=Be?ie:Q;S.style.left="auto",S.style.top="auto",S.style.right="0",S.style.bottom="0";var ve=S.getBoundingClientRect();S.style.left=P,S.style.top=z,S.style.right=R,S.style.bottom=D,(_=S.parentElement)===null||_===void 0||_.removeChild(F);var Qe=Fs(Math.round(be/parseFloat(A)*1e3)/1e3),pt=Fs(Math.round(ee/parseFloat(E)*1e3)/1e3);if(Qe===0||pt===0||Ju(a)&&!sP(a))return;var Lr=B.offset,Tt=B.targetOffset,Un=m_(L,Lr),oi=Y(Un,2),Ze=oi[0],Pt=oi[1],Ve=m_(O,Tt),Ft=Y(Ve,2),bt=Ft[0],Wt=Ft[1];O.x-=bt,O.y-=Wt;var lt=B.points||[],It=Y(lt,2),Wr=It[0],zi=It[1],Ue=g_(zi),ut=g_(Wr),si=xa(O,Ue),ze=xa(L,ut),Ce=W({},B),ne=si.x-ze.x+Ze,he=si.y-ze.y+Pt,Je=ir(ne,he),vr=ir(ne,he,ie),_r=xa(O,["t","l"]),li=xa(L,["t","l"]),St=xa(O,["b","r"]),ui=xa(L,["b","r"]),Ge=B.overflow||{},Cn=Ge.adjustX,An=Ge.adjustY,Tn=Ge.shiftX,Ri=Ge.shiftY,Fi=function(hi){return typeof hi=="boolean"?hi:hi>=0},Ae,pe,Z,Re;kn();var ke=Fi(An),qt=ut[0]===Ue[0];if(ke&&ut[0]==="t"&&(pe>te.bottom||n.current.bt)){var Ot=he;qt?Ot-=ee-de:Ot=_r.y-ui.y-Pt;var Ye=ir(ne,Ot),ci=ir(ne,Ot,ie);Ye>Je||Ye===Je&&(!Be||ci>=vr)?(n.current.bt=!0,he=Ot,Pt=-Pt,Ce.points=[ji(ut,0),ji(Ue,0)]):n.current.bt=!1}if(ke&&ut[0]==="b"&&(Ae<te.top||n.current.tb)){var qr=he;qt?qr+=ee-de:qr=St.y-li.y-Pt;var Pn=ir(ne,qr),di=ir(ne,qr,ie);Pn>Je||Pn===Je&&(!Be||di>=vr)?(n.current.tb=!0,he=qr,Pt=-Pt,Ce.points=[ji(ut,0),ji(Ue,0)]):n.current.tb=!1}var va=Fi(Cn),hl=ut[1]===Ue[1];if(va&&ut[1]==="l"&&(Re>te.right||n.current.rl)){var In=ne;hl?In-=be-_e:In=_r.x-ui.x-Ze;var pl=ir(In,he),dd=ir(In,he,ie);pl>Je||pl===Je&&(!Be||dd>=vr)?(n.current.rl=!0,ne=In,Ze=-Ze,Ce.points=[ji(ut,1),ji(Ue,1)]):n.current.rl=!1}if(va&&ut[1]==="r"&&(Z<te.left||n.current.lr)){var Kr=ne;hl?Kr+=be-_e:Kr=St.x-li.x-Ze;var _a=ir(Kr,he),fd=ir(Kr,he,ie);_a>Je||_a===Je&&(!Be||fd>=vr)?(n.current.lr=!0,ne=Kr,Ze=-Ze,Ce.points=[ji(ut,1),ji(Ue,1)]):n.current.lr=!1}kn();var Oi=Tn===!0?0:Tn;typeof Oi=="number"&&(Z<ie.left&&(ne-=Z-ie.left-Ze,O.x+_e<ie.left+Oi&&(ne+=O.x-ie.left+_e-Oi)),Re>ie.right&&(ne-=Re-ie.right-Ze,O.x>ie.right-Oi&&(ne+=O.x-ie.right+Oi)));var Xr=Ri===!0?0:Ri;typeof Xr=="number"&&(Ae<ie.top&&(he-=Ae-ie.top-Pt,O.y+de<ie.top+Xr&&(he+=O.y-ie.top+de-Xr)),pe>ie.bottom&&(he-=pe-ie.bottom-Pt,O.y>ie.bottom-Xr&&(he+=O.y-ie.bottom+Xr)));var fi=L.x+ne,ml=fi+be,Mi=L.y+he,Ni=Mi+ee,gl=O.x,hd=gl+_e,vl=O.y,_l=vl+de,pd=Math.max(fi,gl),md=Math.min(ml,hd),gd=(pd+md)/2,yl=gd-fi,vd=Math.max(Mi,vl),_d=Math.min(Ni,_l),bl=(vd+_d)/2,yd=bl-Mi;h==null||h(r,Ce);var bd=ve.right-L.x-(ne+L.width),Sd=ve.bottom-L.y-(he+L.height);v({ready:!0,offsetX:ne/Qe,offsetY:he/pt,offsetR:bd/Qe,offsetB:Sd/pt,arrowX:yl/Qe,arrowY:yd/pt,scaleX:Qe,scaleY:pt,align:Ce})}}),f=function(){b.current+=1;var _=b.current;Promise.resolve().then(function(){b.current===_&&c()})},m=function(){v(function(_){return W(W({},_),{},{ready:!1})})};return Gt(m,[o]),Gt(function(){t||m()},[t]),[y.ready,y.offsetX,y.offsetY,y.offsetR,y.offsetB,y.arrowX,y.arrowY,y.scaleX,y.scaleY,y.align,f]}function MP(t,r,a,o,u){Gt(function(){if(t&&r&&a){let e=function(){o(),u()};var b=e,d=r,h=a,l=qh(d),g=qh(h),y=Zs(h),v=new Set([y].concat(st(l),st(g)));return v.forEach(function(n){n.addEventListener("scroll",e,{passive:!0})}),y.addEventListener("resize",e,{passive:!0}),o(),function(){v.forEach(function(n){n.removeEventListener("scroll",e),y.removeEventListener("resize",e)})}}},[t,r,a])}function NP(t,r,a,o,u,d,h,l){var g=C.useRef(t),y=C.useRef(!1);g.current!==t&&(y.current=!0,g.current=t),C.useEffect(function(){var v=oa(function(){y.current=!1});return function(){oa.cancel(v)}},[t]),C.useEffect(function(){if(r&&o&&(!u||d)){var v=function(){var x=!1,U=function(T){var P=T.target;x=h(P)},A=function(T){var P=T.target;!y.current&&g.current&&!x&&!h(P)&&l(!1)};return[U,A]},b=v(),e=Y(b,2),n=e[0],s=e[1],c=v(),f=Y(c,2),m=f[0],p=f[1],_=Zs(o);_.addEventListener("mousedown",n,!0),_.addEventListener("click",s,!0),_.addEventListener("contextmenu",s,!0);var S=Wh(a);return S&&(S.addEventListener("mousedown",m,!0),S.addEventListener("click",p,!0),S.addEventListener("contextmenu",p,!0)),function(){_.removeEventListener("mousedown",n,!0),_.removeEventListener("click",s,!0),_.removeEventListener("contextmenu",s,!0),S&&(S.removeEventListener("mousedown",m,!0),S.removeEventListener("click",p,!0),S.removeEventListener("contextmenu",p,!0))}}},[r,a,o,u,d])}function HP(t){var r=t.prefixCls,a=t.align,o=t.arrow,u=t.arrowPos,d=o||{},h=d.className,l=d.content,g=u.x,y=g===void 0?0:g,v=u.y,b=v===void 0?0:v,e=C.useRef();if(!a||!a.points)return null;var n={position:"absolute"};if(a.autoArrow!==!1){var s=a.points[0],c=a.points[1],f=s[0],m=s[1],p=c[0],_=c[1];f===p||!["t","b"].includes(f)?n.top=b:f==="t"?n.top=0:n.bottom=0,m===_||!["l","r"].includes(m)?n.left=y:m==="l"?n.left=0:n.right=0}return C.createElement("div",{ref:e,className:ht("".concat(r,"-arrow"),h),style:n},l)}function GP(t){var r=t.prefixCls,a=t.open,o=t.zIndex,u=t.mask,d=t.motion;return u?C.createElement(Um,ni({},d,{motionAppear:!0,visible:a,removeOnLeave:!0}),function(h){var l=h.className;return C.createElement("div",{style:{zIndex:o},className:ht("".concat(r,"-mask"),l)})}):null}var $P=C.memo(function(t){var r=t.children;return r},function(t,r){return r.cache}),jP=C.forwardRef(function(t,r){var a=t.popup,o=t.className,u=t.prefixCls,d=t.style,h=t.target,l=t.onVisibleChanged,g=t.open,y=t.keepDom,v=t.onClick,b=t.mask,e=t.arrow,n=t.arrowPos,s=t.align,c=t.motion,f=t.maskMotion,m=t.forceRender,p=t.getPopupContainer,_=t.autoDestroy,S=t.portal,w=t.zIndex,x=t.onMouseEnter,U=t.onMouseLeave,A=t.onPointerEnter,E=t.ready,T=t.offsetX,P=t.offsetY,z=t.offsetR,R=t.offsetB,D=t.onAlign,B=t.onPrepare,F=t.stretch,O=t.targetWidth,I=t.targetHeight,L=typeof a=="function"?a():a,M=g||y,k=(p==null?void 0:p.length)>0,$=C.useState(!p||!k),J=Y($,2),ae=J[0],ce=J[1];if(Gt(function(){!ae&&k&&h&&ce(!0)},[ae,k,h]),!ae)return null;var X="auto",ee={left:"-1000vw",top:"-1000vh",right:X,bottom:X};if(E||!g){var be=s.points,de=s._experimental,_e=de==null?void 0:de.dynamicInset,Ee=_e&&be[0][1]==="r",Xe=_e&&be[0][0]==="b";Ee?(ee.right=z,ee.left=X):(ee.left=T,ee.right=X),Xe?(ee.bottom=R,ee.top=X):(ee.top=P,ee.bottom=X)}var ge={};return F&&(F.includes("height")&&I?ge.height=I:F.includes("minHeight")&&I&&(ge.minHeight=I),F.includes("width")&&O?ge.width=O:F.includes("minWidth")&&O&&(ge.minWidth=O)),g||(ge.pointerEvents="none"),C.createElement(S,{open:m||M,getContainer:p&&function(){return p(h)},autoDestroy:_},C.createElement(GP,{prefixCls:u,open:g,zIndex:w,mask:b,motion:f}),C.createElement(gm,{onResize:D,disabled:!g},function(Le){return C.createElement(Um,ni({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:m,leavedClassName:"".concat(u,"-hidden")},c,{onAppearPrepare:B,onEnterPrepare:B,visible:g,onVisibleChanged:function(Be){var ye;c==null||(ye=c.onVisibleChanged)===null||ye===void 0||ye.call(c,Be),l(Be)}}),function(fe,Be){var ye=fe.className,ie=fe.style,Q=ht(u,ye,o);return C.createElement("div",{ref:Yc(Le,r,Be),className:Q,style:W(W(W(W({"--arrow-x":"".concat(n.x||0,"px"),"--arrow-y":"".concat(n.y||0,"px")},ee),ge),ie),{},{boxSizing:"border-box",zIndex:w},d),onMouseEnter:x,onMouseLeave:U,onPointerEnter:A,onClick:v},e&&C.createElement(HP,{prefixCls:u,arrow:e,arrowPos:n,align:s}),C.createElement($P,{cache:!g},L))})}))}),VP=C.forwardRef(function(t,r){var a=t.children,o=t.getTriggerDOMNode,u=Wc(a),d=C.useCallback(function(l){mm(r,o?o(l):l)},[o]),h=$b(d,a.ref);return u?C.cloneElement(a,{ref:h}):a}),YP=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function WP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QS,r=C.forwardRef(function(a,o){var u=a.prefixCls,d=u===void 0?"rc-trigger-popup":u,h=a.children,l=a.action,g=l===void 0?"hover":l,y=a.showAction,v=a.hideAction,b=a.popupVisible,e=a.defaultPopupVisible,n=a.onPopupVisibleChange,s=a.afterPopupVisibleChange,c=a.mouseEnterDelay,f=a.mouseLeaveDelay,m=f===void 0?.1:f,p=a.focusDelay,_=a.blurDelay,S=a.mask,w=a.maskClosable,x=w===void 0?!0:w,U=a.getPopupContainer,A=a.forceRender,E=a.autoDestroy,T=a.destroyPopupOnHide,P=a.popup,z=a.popupClassName,R=a.popupStyle,D=a.popupPlacement,B=a.builtinPlacements,F=B===void 0?{}:B,O=a.popupAlign,I=a.zIndex,L=a.stretch,M=a.getPopupClassNameFromAlign,k=a.alignPoint,$=a.onPopupClick,J=a.onPopupAlign,ae=a.arrow,ce=a.popupMotion,X=a.maskMotion,ee=a.popupTransitionName,be=a.popupAnimation,de=a.maskTransitionName,_e=a.maskAnimation,Ee=a.className,Xe=a.getTriggerDOMNode,ge=sa(a,YP),Le=E||T||!1,fe=C.useState(!1),Be=Y(fe,2),ye=Be[0],ie=Be[1];Gt(function(){ie(LP())},[]);var Q=C.useRef({}),te=C.useContext(c_),ve=C.useMemo(function(){return{registerSubPopup:function(oe,$e){Q.current[oe]=$e,te==null||te.registerSubPopup(oe,$e)}}},[te]),Qe=_P(),pt=C.useState(null),Lr=Y(pt,2),Tt=Lr[0],Un=Lr[1],oi=xi(function(V){Ju(V)&&Tt!==V&&Un(V),te==null||te.registerSubPopup(Qe,V)}),Ze=C.useState(null),Pt=Y(Ze,2),Ve=Pt[0],Ft=Pt[1],bt=xi(function(V){Ju(V)&&Ve!==V&&Ft(V)}),Wt=C.Children.only(h),lt=(Wt==null?void 0:Wt.props)||{},It={},Wr=xi(function(V){var oe,$e,rt=Ve;return(rt==null?void 0:rt.contains(V))||((oe=Wh(rt))===null||oe===void 0?void 0:oe.host)===V||V===rt||(Tt==null?void 0:Tt.contains(V))||(($e=Wh(Tt))===null||$e===void 0?void 0:$e.host)===V||V===Tt||Object.values(Q.current).some(function(et){return(et==null?void 0:et.contains(V))||V===et})}),zi=f_(d,ce,be,ee),Ue=f_(d,X,_e,de),ut=C.useState(e||!1),si=Y(ut,2),ze=si[0],Ce=si[1],ne=b??ze,he=xi(function(V){b===void 0&&Ce(V)});Gt(function(){Ce(b||!1)},[b]);var Je=C.useRef(ne);Je.current=ne;var vr=xi(function(V){Xs.flushSync(function(){ne!==V&&(he(V),n==null||n(V))})}),_r=C.useRef(),li=function(){clearTimeout(_r.current)},St=function(oe){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;li(),$e===0?vr(oe):_r.current=setTimeout(function(){vr(oe)},$e*1e3)};C.useEffect(function(){return li},[]);var ui=C.useState(!1),Ge=Y(ui,2),Cn=Ge[0],An=Ge[1];Gt(function(V){(!V||ne)&&An(!0)},[ne]);var Tn=C.useState(null),Ri=Y(Tn,2),Fi=Ri[0],Ae=Ri[1],pe=C.useState([0,0]),Z=Y(pe,2),Re=Z[0],ke=Z[1],qt=function(oe){ke([oe.clientX,oe.clientY])},Ot=OP(ne,Tt,k?Re:Ve,D,F,O,J),Ye=Y(Ot,11),ci=Ye[0],qr=Ye[1],Pn=Ye[2],di=Ye[3],va=Ye[4],hl=Ye[5],In=Ye[6],pl=Ye[7],dd=Ye[8],Kr=Ye[9],_a=Ye[10],fd=zP(ye,g,y,v),Oi=Y(fd,2),Xr=Oi[0],fi=Oi[1],ml=Xr.has("click"),Mi=fi.has("click")||fi.has("contextMenu"),Ni=xi(function(){Cn||_a()}),gl=function(){Je.current&&k&&Mi&&St(!1)};MP(ne,Ve,Tt,Ni,gl),Gt(function(){Ni()},[Re,D]),Gt(function(){ne&&!(F!=null&&F[D])&&Ni()},[JSON.stringify(O)]);var hd=C.useMemo(function(){var V=FP(F,d,Kr,k);return ht(V,M==null?void 0:M(Kr))},[Kr,M,F,d,k]);C.useImperativeHandle(o,function(){return{forceAlign:Ni}});var vl=C.useState(0),_l=Y(vl,2),pd=_l[0],md=_l[1],gd=C.useState(0),yl=Y(gd,2),vd=yl[0],_d=yl[1],bl=function(){if(L&&Ve){var oe=Ve.getBoundingClientRect();md(oe.width),_d(oe.height)}},yd=function(){bl(),Ni()},bd=function(oe){An(!1),_a(),s==null||s(oe)},Sd=function(){return new Promise(function(oe){bl(),Ae(function(){return oe})})};Gt(function(){Fi&&(_a(),Fi(),Ae(null))},[Fi]);function Bn(V,oe,$e,rt){It[V]=function(et){var wl;rt==null||rt(et),St(oe,$e);for(var Ed=arguments.length,og=new Array(Ed>1?Ed-1:0),El=1;El<Ed;El++)og[El-1]=arguments[El];(wl=lt[V])===null||wl===void 0||wl.call.apply(wl,[lt,et].concat(og))}}(ml||Mi)&&(It.onClick=function(V){var oe;Je.current&&Mi?St(!1):!Je.current&&ml&&(qt(V),St(!0));for(var $e=arguments.length,rt=new Array($e>1?$e-1:0),et=1;et<$e;et++)rt[et-1]=arguments[et];(oe=lt.onClick)===null||oe===void 0||oe.call.apply(oe,[lt,V].concat(rt))}),NP(ne,Mi,Ve,Tt,S,x,Wr,St);var ag=Xr.has("hover"),ir=fi.has("hover"),kn,To;ag&&(Bn("onMouseEnter",!0,c,function(V){qt(V)}),Bn("onPointerEnter",!0,c,function(V){qt(V)}),kn=function(){(ne||Cn)&&St(!0,c)},k&&(It.onMouseMove=function(V){var oe;(oe=lt.onMouseMove)===null||oe===void 0||oe.call(lt,V)})),ir&&(Bn("onMouseLeave",!1,m),Bn("onPointerLeave",!1,m),To=function(){St(!1,m)}),Xr.has("focus")&&Bn("onFocus",!0,p),fi.has("focus")&&Bn("onBlur",!1,_),Xr.has("contextMenu")&&(It.onContextMenu=function(V){var oe;Je.current&&fi.has("contextMenu")?St(!1):(qt(V),St(!0)),V.preventDefault();for(var $e=arguments.length,rt=new Array($e>1?$e-1:0),et=1;et<$e;et++)rt[et-1]=arguments[et];(oe=lt.onContextMenu)===null||oe===void 0||oe.call.apply(oe,[lt,V].concat(rt))}),Ee&&(It.className=ht(lt.className,Ee));var hi=W(W({},lt),It),Dn={},Sl=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Sl.forEach(function(V){ge[V]&&(Dn[V]=function(){for(var oe,$e=arguments.length,rt=new Array($e),et=0;et<$e;et++)rt[et]=arguments[et];(oe=hi[V])===null||oe===void 0||oe.call.apply(oe,[hi].concat(rt)),ge[V].apply(ge,rt)})});var xl=C.cloneElement(Wt,W(W({},hi),Dn)),xd={x:hl,y:In},wd=ae?W({},ae!==!0?ae:{}):null;return C.createElement(C.Fragment,null,C.createElement(gm,{disabled:!ne,ref:bt,onResize:yd},C.createElement(VP,{getTriggerDOMNode:Xe},xl)),C.createElement(c_.Provider,{value:ve},C.createElement(jP,{portal:t,ref:oi,prefixCls:d,popup:P,className:ht(z,hd),style:R,target:Ve,onMouseEnter:kn,onMouseLeave:To,onPointerEnter:kn,zIndex:I,open:ne,keepDom:Cn,onClick:$,mask:S,motion:zi,maskMotion:Ue,onVisibleChanged:bd,onPrepare:Sd,forceRender:A,autoDestroy:Le,getPopupContainer:U,align:Kr,arrow:wd,arrowPos:xd,ready:ci,offsetX:qr,offsetY:Pn,offsetR:di,offsetB:va,onAlign:Ni,stretch:L,targetWidth:pd/pl,targetHeight:vd/dd})))});return r}const qP=WP(QS);var wa={shiftX:64,adjustY:1},Ea={adjustX:1,shiftY:!0},yr=[0,0],KP={left:{points:["cr","cl"],overflow:Ea,offset:[-4,0],targetOffset:yr},right:{points:["cl","cr"],overflow:Ea,offset:[4,0],targetOffset:yr},top:{points:["bc","tc"],overflow:wa,offset:[0,-4],targetOffset:yr},bottom:{points:["tc","bc"],overflow:wa,offset:[0,4],targetOffset:yr},topLeft:{points:["bl","tl"],overflow:wa,offset:[0,-4],targetOffset:yr},leftTop:{points:["tr","tl"],overflow:Ea,offset:[-4,0],targetOffset:yr},topRight:{points:["br","tr"],overflow:wa,offset:[0,-4],targetOffset:yr},rightTop:{points:["tl","tr"],overflow:Ea,offset:[4,0],targetOffset:yr},bottomRight:{points:["tr","br"],overflow:wa,offset:[0,4],targetOffset:yr},rightBottom:{points:["bl","br"],overflow:Ea,offset:[4,0],targetOffset:yr},bottomLeft:{points:["tl","bl"],overflow:wa,offset:[0,4],targetOffset:yr},leftBottom:{points:["br","bl"],overflow:Ea,offset:[-4,0],targetOffset:yr}};function ZS(t){var r=t.children,a=t.prefixCls,o=t.id,u=t.overlayInnerStyle,d=t.className,h=t.style;return C.createElement("div",{className:ht("".concat(a,"-content"),d),style:h},C.createElement("div",{className:"".concat(a,"-inner"),id:o,role:"tooltip",style:u},typeof r=="function"?r():r))}var XP=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],QP=function(r,a){var o=r.overlayClassName,u=r.trigger,d=u===void 0?["hover"]:u,h=r.mouseEnterDelay,l=h===void 0?0:h,g=r.mouseLeaveDelay,y=g===void 0?.1:g,v=r.overlayStyle,b=r.prefixCls,e=b===void 0?"rc-tooltip":b,n=r.children,s=r.onVisibleChange,c=r.afterVisibleChange,f=r.transitionName,m=r.animation,p=r.motion,_=r.placement,S=_===void 0?"right":_,w=r.align,x=w===void 0?{}:w,U=r.destroyTooltipOnHide,A=U===void 0?!1:U,E=r.defaultVisible,T=r.getTooltipContainer,P=r.overlayInnerStyle;r.arrowContent;var z=r.overlay,R=r.id,D=r.showArrow,B=D===void 0?!0:D,F=sa(r,XP),O=C.useRef(null);C.useImperativeHandle(a,function(){return O.current});var I=W({},F);"visible"in r&&(I.popupVisible=r.visible);var L=function(){return C.createElement(ZS,{key:"content",prefixCls:e,id:R,overlayInnerStyle:P},z)};return C.createElement(qP,ni({popupClassName:o,prefixCls:e,popup:L,action:d,builtinPlacements:KP,popupPlacement:S,ref:O,popupAlign:x,getPopupContainer:T,onPopupVisibleChange:s,afterPopupVisibleChange:c,popupTransitionName:f,popupAnimation:m,popupMotion:p,defaultPopupVisible:E,autoDestroy:A,mouseLeaveDelay:y,popupStyle:v,mouseEnterDelay:l,arrow:B},I),n)};const ZP=C.forwardRef(QP),JS=8;function ex(t){const r=JS,{contentRadius:a,limitVerticalRadius:o}=t,u=a>12?a+2:12;return{dropdownArrowOffset:u,dropdownArrowOffsetVertical:o?r:u}}function Zl(t,r){return t?r:{}}function JP(t,r){const{componentCls:a,sizePopupArrow:o,borderRadiusXS:u,borderRadiusOuter:d,boxShadowPopoverArrow:h}=t,{colorBg:l,contentRadius:g=t.borderRadiusLG,limitVerticalRadius:y,arrowDistance:v=0,arrowPlacement:b={left:!0,right:!0,top:!0,bottom:!0}}=r,{dropdownArrowOffsetVertical:e,dropdownArrowOffset:n}=ex({contentRadius:g,limitVerticalRadius:y});return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({[`${a}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},hT(o,u,d,l,h)),{"&:before":{background:l}})]},Zl(!!b.top,{[[`&-placement-top ${a}-arrow`,`&-placement-topLeft ${a}-arrow`,`&-placement-topRight ${a}-arrow`].join(",")]:{bottom:v,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${a}-arrow`]:{left:{_skip_check_:!0,value:n}},[`&-placement-topRight ${a}-arrow`]:{right:{_skip_check_:!0,value:n}}})),Zl(!!b.bottom,{[[`&-placement-bottom ${a}-arrow`,`&-placement-bottomLeft ${a}-arrow`,`&-placement-bottomRight ${a}-arrow`].join(",")]:{top:v,transform:"translateY(-100%)"},[`&-placement-bottom ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${a}-arrow`]:{left:{_skip_check_:!0,value:n}},[`&-placement-bottomRight ${a}-arrow`]:{right:{_skip_check_:!0,value:n}}})),Zl(!!b.left,{[[`&-placement-left ${a}-arrow`,`&-placement-leftTop ${a}-arrow`,`&-placement-leftBottom ${a}-arrow`].join(",")]:{right:{_skip_check_:!0,value:v},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${a}-arrow`]:{top:e},[`&-placement-leftBottom ${a}-arrow`]:{bottom:e}})),Zl(!!b.right,{[[`&-placement-right ${a}-arrow`,`&-placement-rightTop ${a}-arrow`,`&-placement-rightBottom ${a}-arrow`].join(",")]:{left:{_skip_check_:!0,value:v},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${a}-arrow`]:{top:e},[`&-placement-rightBottom ${a}-arrow`]:{bottom:e}}))}}function eI(t,r,a,o){if(o===!1)return{adjustX:!1,adjustY:!1};const u=o&&typeof o=="object"?o:{},d={};switch(t){case"top":case"bottom":d.shiftX=r.dropdownArrowOffset*2+a;break;case"left":case"right":d.shiftY=r.dropdownArrowOffsetVertical*2+a;break}const h=Object.assign(Object.assign({},d),u);return h.shiftX||(h.adjustX=!0),h.shiftY||(h.adjustY=!0),h}const v_={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},tI={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},rI=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function iI(t){const{arrowWidth:r,autoAdjustOverflow:a,arrowPointAtCenter:o,offset:u,borderRadius:d,visibleFirst:h}=t,l=r/2,g={};return Object.keys(v_).forEach(y=>{const v=o&&tI[y]||v_[y],b=Object.assign(Object.assign({},v),{offset:[0,0]});switch(g[y]=b,rI.has(y)&&(b.autoArrow=!1),y){case"top":case"topLeft":case"topRight":b.offset[1]=-l-u;break;case"bottom":case"bottomLeft":case"bottomRight":b.offset[1]=l+u;break;case"left":case"leftTop":case"leftBottom":b.offset[0]=-l-u;break;case"right":case"rightTop":case"rightBottom":b.offset[0]=l+u;break}const e=ex({contentRadius:d,limitVerticalRadius:!0});if(o)switch(y){case"topLeft":case"bottomLeft":b.offset[0]=-e.dropdownArrowOffset-l;break;case"topRight":case"bottomRight":b.offset[0]=e.dropdownArrowOffset+l;break;case"leftTop":case"rightTop":b.offset[1]=-e.dropdownArrowOffset-l;break;case"leftBottom":case"rightBottom":b.offset[1]=e.dropdownArrowOffset+l;break}b.overflow=eI(y,e,r,a),h&&(b.htmlRegion="visibleFirst")}),g}const nI=t=>{const{componentCls:r,tooltipMaxWidth:a,tooltipColor:o,tooltipBg:u,tooltipBorderRadius:d,zIndexPopup:h,controlHeight:l,boxShadowSecondary:g,paddingSM:y,paddingXS:v,tooltipRadiusOuter:b}=t;return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},kS(t)),{position:"absolute",zIndex:h,display:"block",width:"max-content",maxWidth:a,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":u,[`${r}-inner`]:{minWidth:l,minHeight:l,padding:`${y/2}px ${v}px`,color:o,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:u,borderRadius:d,boxShadow:g,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:Math.min(d,JS)}},[`${r}-content`]:{position:"relative"}}),bT(t,(e,n)=>{let{darkColor:s}=n;return{[`&${r}-${e}`]:{[`${r}-inner`]:{backgroundColor:s},[`${r}-arrow`]:{"--antd-arrow-background-color":s}}}})),{"&-rtl":{direction:"rtl"}})},JP(Rs(t,{borderRadiusOuter:b}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:d,limitVerticalRadius:!0}),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},tx=(t,r)=>zS("Tooltip",o=>{if(r===!1)return[];const{borderRadius:u,colorTextLightSolid:d,colorBgDefault:h,borderRadiusOuter:l}=o,g=Rs(o,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:u,tooltipBg:h,tooltipRadiusOuter:l>4?4:l});return[nI(g),DP(o,"zoom-big-fast")]},o=>{let{zIndexPopupBase:u,colorBgSpotlight:d}=o;return{zIndexPopup:u+70,colorBgDefault:d}},{resetStyle:!1})(t),aI=nc.map(t=>`${t}-inverse`);function oI(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(st(aI),st(nc)).includes(t):nc.includes(t)}function rx(t,r){const a=oI(r),o=ht({[`${t}-${r}`]:r&&a}),u={},d={};return r&&!a&&(u.background=r,d["--antd-arrow-background-color"]=r),{className:o,overlayStyle:u,arrowStyle:d}}const sI=t=>{const{prefixCls:r,className:a,placement:o="top",title:u,color:d,overlayInnerStyle:h}=t,{getPrefixCls:l}=C.useContext(ma),g=l("tooltip",r),[y,v]=tx(g,!0),b=rx(g,d),e=b.arrowStyle,n=Object.assign(Object.assign({},h),b.overlayStyle),s=ht(v,g,`${g}-pure`,`${g}-placement-${o}`,a,b.className);return y(C.createElement("div",{className:s,style:e},C.createElement("div",{className:`${g}-arrow`}),C.createElement(ZS,Object.assign({},t,{className:v,prefixCls:g,overlayInnerStyle:n}),u)))},lI=sI;var uI=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const cI=(t,r)=>{const a={},o=Object.assign({},t);return r.forEach(u=>{t&&u in t&&(a[u]=t[u],delete o[u])}),{picked:a,omitted:o}};function dI(t,r){const a=t.type;if((a.__ANT_BUTTON===!0||t.type==="button")&&t.props.disabled||a.__ANT_SWITCH===!0&&(t.props.disabled||t.props.loading)||a.__ANT_RADIO===!0&&t.props.disabled){const{picked:o,omitted:u}=cI(t.props.style,["position","left","right","top","bottom","float","display","zIndex"]),d=Object.assign(Object.assign({display:"inline-block"},o),{cursor:"not-allowed",width:t.props.block?"100%":void 0}),h=Object.assign(Object.assign({},u),{pointerEvents:"none"}),l=KS(t,{style:h,className:null});return C.createElement("span",{style:d,className:ht(t.props.className,`${r}-disabled-compatible-wrapper`)},l)}return t}const ix=C.forwardRef((t,r)=>{var a,o;const{prefixCls:u,openClassName:d,getTooltipContainer:h,overlayClassName:l,color:g,overlayInnerStyle:y,children:v,afterOpenChange:b,afterVisibleChange:e,destroyTooltipOnHide:n,arrow:s=!0,title:c,overlay:f,builtinPlacements:m,arrowPointAtCenter:p=!1,autoAdjustOverflow:_=!0}=t,S=!!s,[,w]=ed(),{getPopupContainer:x,getPrefixCls:U,direction:A}=C.useContext(ma),E=xA(),T=C.useRef(null),P=()=>{var Q;(Q=T.current)===null||Q===void 0||Q.forceAlign()};C.useImperativeHandle(r,()=>({forceAlign:P,forcePopupAlign:()=>{E.deprecated(!1,"forcePopupAlign","forceAlign"),P()}}));const[z,R]=IS(!1,{value:(a=t.open)!==null&&a!==void 0?a:t.visible,defaultValue:(o=t.defaultOpen)!==null&&o!==void 0?o:t.defaultVisible}),D=!c&&!f&&c!==0,B=Q=>{var te,ve;R(D?!1:Q),D||((te=t.onOpenChange)===null||te===void 0||te.call(t,Q),(ve=t.onVisibleChange)===null||ve===void 0||ve.call(t,Q))},F=C.useMemo(()=>{var Q,te;let ve=p;return typeof s=="object"&&(ve=(te=(Q=s.pointAtCenter)!==null&&Q!==void 0?Q:s.arrowPointAtCenter)!==null&&te!==void 0?te:p),m||iI({arrowPointAtCenter:ve,autoAdjustOverflow:_,arrowWidth:S?w.sizePopupArrow:0,borderRadius:w.borderRadius,offset:w.marginXXS,visibleFirst:!0})},[p,s,m,w]),O=C.useMemo(()=>c===0?c:f||c||"",[f,c]),I=C.createElement(uP,null,typeof O=="function"?O():O),{getPopupContainer:L,placement:M="top",mouseEnterDelay:k=.1,mouseLeaveDelay:$=.1,overlayStyle:J,rootClassName:ae}=t,ce=uI(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),X=U("tooltip",u),ee=U(),be=t["data-popover-inject"];let de=z;!("open"in t)&&!("visible"in t)&&D&&(de=!1);const _e=dI(Cm(v)&&!nP(v)?v:C.createElement("span",null,v),X),Ee=_e.props,Xe=!Ee.className||typeof Ee.className=="string"?ht(Ee.className,d||`${X}-open`):Ee.className,[ge,Le]=tx(X,!be),fe=rx(X,g),Be=fe.arrowStyle,ye=Object.assign(Object.assign({},y),fe.overlayStyle),ie=ht(l,{[`${X}-rtl`]:A==="rtl"},fe.className,ae,Le);return ge(C.createElement(ZP,Object.assign({},ce,{showArrow:S,placement:M,mouseEnterDelay:k,mouseLeaveDelay:$,prefixCls:X,overlayClassName:ie,overlayStyle:Object.assign(Object.assign({},Be),J),getTooltipContainer:L||h||x,ref:T,builtinPlacements:F,overlay:I,visible:de,onVisibleChange:B,afterVisibleChange:b??e,overlayInnerStyle:ye,arrowContent:C.createElement("span",{className:`${X}-arrow-content`}),motion:{motionName:oP(ee,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!n}),de?KS(_e,{className:Xe}):_e))});ix._InternalPanelDoNotUseOrYouWillBeFired=lI;const fI=ix;var ga=C.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function Kh(t,r,a){return(t-r)/(a-r)}function Am(t,r,a,o){var u=Kh(r,a,o),d={};switch(t){case"rtl":d.right="".concat(u*100,"%"),d.transform="translateX(50%)";break;case"btt":d.bottom="".concat(u*100,"%"),d.transform="translateY(50%)";break;case"ttb":d.top="".concat(u*100,"%"),d.transform="translateY(-50%)";break;default:d.left="".concat(u*100,"%"),d.transform="translateX(-50%)";break}return d}function $a(t,r){return Array.isArray(t)?t[r]:t}var hI=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],pI=C.forwardRef(function(t,r){var a,o,u=t.prefixCls,d=t.value,h=t.valueIndex,l=t.onStartMove,g=t.style,y=t.render,v=t.dragging,b=t.onOffsetChange,e=sa(t,hI),n=C.useContext(ga),s=n.min,c=n.max,f=n.direction,m=n.disabled,p=n.keyboard,_=n.range,S=n.tabIndex,w=n.ariaLabelForHandle,x=n.ariaLabelledByForHandle,U=n.ariaValueTextFormatterForHandle,A="".concat(u,"-handle"),E=function(D){m||l(D,h)},T=function(D){if(!m&&p){var B=null;switch(D.which||D.keyCode){case q.LEFT:B=f==="ltr"||f==="btt"?-1:1;break;case q.RIGHT:B=f==="ltr"||f==="btt"?1:-1;break;case q.UP:B=f!=="ttb"?1:-1;break;case q.DOWN:B=f!=="ttb"?-1:1;break;case q.HOME:B="min";break;case q.END:B="max";break;case q.PAGE_UP:B=2;break;case q.PAGE_DOWN:B=-2;break}B!==null&&(D.preventDefault(),b(B,h))}},P=Am(f,d,s,c),z=C.createElement("div",ni({ref:r,className:ht(A,(a={},le(a,"".concat(A,"-").concat(h+1),_),le(a,"".concat(A,"-dragging"),v),a)),style:W(W({},P),g),onMouseDown:E,onTouchStart:E,onKeyDown:T,tabIndex:m?null:$a(S,h),role:"slider","aria-valuemin":s,"aria-valuemax":c,"aria-valuenow":d,"aria-disabled":m,"aria-label":$a(w,h),"aria-labelledby":$a(x,h),"aria-valuetext":(o=$a(U,h))===null||o===void 0?void 0:o(d),"aria-orientation":f==="ltr"||f==="rtl"?"horizontal":"vertical"},e));return y&&(z=y(z,{index:h,prefixCls:u,value:d,dragging:v})),z}),mI=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],gI=C.forwardRef(function(t,r){var a=t.prefixCls,o=t.style,u=t.onStartMove,d=t.onOffsetChange,h=t.values,l=t.handleRender,g=t.draggingIndex,y=sa(t,mI),v=C.useRef({});return C.useImperativeHandle(r,function(){return{focus:function(e){var n;(n=v.current[e])===null||n===void 0||n.focus()}}}),C.createElement(C.Fragment,null,h.map(function(b,e){return C.createElement(pI,ni({ref:function(s){s?v.current[e]=s:delete v.current[e]},dragging:g===e,prefixCls:a,style:$a(o,e),key:e,value:b,valueIndex:e,onStartMove:u,onOffsetChange:d,render:l},y))}))});function __(t){var r="touches"in t?t.touches[0]:t;return{pageX:r.pageX,pageY:r.pageY}}function vI(t,r,a,o,u,d,h,l,g){var y=C.useState(null),v=Y(y,2),b=v[0],e=v[1],n=C.useState(-1),s=Y(n,2),c=s[0],f=s[1],m=C.useState(a),p=Y(m,2),_=p[0],S=p[1],w=C.useState(a),x=Y(w,2),U=x[0],A=x[1],E=C.useRef(null),T=C.useRef(null);C.useEffect(function(){c===-1&&S(a)},[a,c]),C.useEffect(function(){return function(){document.removeEventListener("mousemove",E.current),document.removeEventListener("mouseup",T.current),document.removeEventListener("touchmove",E.current),document.removeEventListener("touchend",T.current)}},[]);var P=function(O,I){_.some(function(L,M){return L!==O[M]})&&(I!==void 0&&e(I),S(O),h(O))},z=function(O,I){if(O===-1){var L=U[0],M=U[U.length-1],k=o-L,$=u-M,J=I*(u-o);J=Math.max(J,k),J=Math.min(J,$);var ae=d(L+J);J=ae-L;var ce=U.map(function(de){return de+J});P(ce)}else{var X=(u-o)*I,ee=st(_);ee[O]=U[O];var be=g(ee,X,O,"dist");P(be.values,be.value)}},R=C.useRef(z);R.current=z;var D=function(O,I){O.stopPropagation();var L=a[I];f(I),e(L),A(a);var M=__(O),k=M.pageX,$=M.pageY,J=function(X){X.preventDefault();var ee=__(X),be=ee.pageX,de=ee.pageY,_e=be-k,Ee=de-$,Xe=t.current.getBoundingClientRect(),ge=Xe.width,Le=Xe.height,fe;switch(r){case"btt":fe=-Ee/Le;break;case"ttb":fe=Ee/Le;break;case"rtl":fe=-_e/ge;break;default:fe=_e/ge}R.current(I,fe)},ae=function ce(X){X.preventDefault(),document.removeEventListener("mouseup",ce),document.removeEventListener("mousemove",J),document.removeEventListener("touchend",ce),document.removeEventListener("touchmove",J),E.current=null,T.current=null,f(-1),l()};document.addEventListener("mouseup",ae),document.addEventListener("mousemove",J),document.addEventListener("touchend",ae),document.addEventListener("touchmove",J),E.current=J,T.current=ae},B=C.useMemo(function(){var F=st(a).sort(function(I,L){return I-L}),O=st(_).sort(function(I,L){return I-L});return F.every(function(I,L){return I===O[L]})?_:a},[a,_]);return[c,b,B,D]}function _I(t){var r,a=t.prefixCls,o=t.style,u=t.start,d=t.end,h=t.index,l=t.onStartMove,g=C.useContext(ga),y=g.direction,v=g.min,b=g.max,e=g.disabled,n=g.range,s="".concat(a,"-track"),c=Kh(u,v,b),f=Kh(d,v,b),m=function(S){!e&&l&&l(S,-1)},p={};switch(y){case"rtl":p.right="".concat(c*100,"%"),p.width="".concat(f*100-c*100,"%");break;case"btt":p.bottom="".concat(c*100,"%"),p.height="".concat(f*100-c*100,"%");break;case"ttb":p.top="".concat(c*100,"%"),p.height="".concat(f*100-c*100,"%");break;default:p.left="".concat(c*100,"%"),p.width="".concat(f*100-c*100,"%")}return C.createElement("div",{className:ht(s,(r={},le(r,"".concat(s,"-").concat(h+1),n),le(r,"".concat(a,"-track-draggable"),l),r)),style:W(W({},p),o),onMouseDown:m,onTouchStart:m})}function yI(t){var r=t.prefixCls,a=t.style,o=t.values,u=t.startPoint,d=t.onStartMove,h=C.useContext(ga),l=h.included,g=h.range,y=h.min,v=C.useMemo(function(){if(!g){if(o.length===0)return[];var b=u??y,e=o[0];return[{start:Math.min(b,e),end:Math.max(b,e)}]}for(var n=[],s=0;s<o.length-1;s+=1)n.push({start:o[s],end:o[s+1]});return n},[o,g,u,y]);return l?v.map(function(b,e){var n=b.start,s=b.end;return C.createElement(_I,{index:e,prefixCls:r,style:$a(a,e),start:n,end:s,key:e,onStartMove:d})}):null}function bI(t){var r=t.prefixCls,a=t.style,o=t.children,u=t.value,d=t.onClick,h=C.useContext(ga),l=h.min,g=h.max,y=h.direction,v=h.includedStart,b=h.includedEnd,e=h.included,n="".concat(r,"-text"),s=Am(y,u,l,g);return C.createElement("span",{className:ht(n,le({},"".concat(n,"-active"),e&&v<=u&&u<=b)),style:W(W({},s),a),onMouseDown:function(f){f.stopPropagation()},onClick:function(){d(u)}},o)}function SI(t){var r=t.prefixCls,a=t.marks,o=t.onClick,u="".concat(r,"-mark");return a.length?C.createElement("div",{className:u},a.map(function(d){var h=d.value,l=d.style,g=d.label;return C.createElement(bI,{key:h,prefixCls:u,style:l,value:h,onClick:o},g)})):null}function xI(t){var r=t.prefixCls,a=t.value,o=t.style,u=t.activeStyle,d=C.useContext(ga),h=d.min,l=d.max,g=d.direction,y=d.included,v=d.includedStart,b=d.includedEnd,e="".concat(r,"-dot"),n=y&&v<=a&&a<=b,s=W(W({},Am(g,a,h,l)),typeof o=="function"?o(a):o);return n&&(s=W(W({},s),typeof u=="function"?u(a):u)),C.createElement("span",{className:ht(e,le({},"".concat(e,"-active"),n)),style:s})}function wI(t){var r=t.prefixCls,a=t.marks,o=t.dots,u=t.style,d=t.activeStyle,h=C.useContext(ga),l=h.min,g=h.max,y=h.step,v=C.useMemo(function(){var b=new Set;if(a.forEach(function(n){b.add(n.value)}),o&&y!==null)for(var e=l;e<=g;)b.add(e),e+=y;return Array.from(b)},[l,g,y,o,a]);return C.createElement("div",{className:"".concat(r,"-step")},v.map(function(b){return C.createElement(xI,{prefixCls:r,key:b,value:b,style:u,activeStyle:d})}))}function EI(t,r,a,o,u,d){var h=C.useCallback(function(n){var s=isFinite(n)?n:t;return s=Math.min(r,n),s=Math.max(t,s),s},[t,r]),l=C.useCallback(function(n){if(a!==null){var s=t+Math.round((h(n)-t)/a)*a,c=function(_){return(String(_).split(".")[1]||"").length},f=Math.max(c(a),c(r),c(t)),m=Number(s.toFixed(f));return t<=m&&m<=r?m:null}return null},[a,t,r,h]),g=C.useCallback(function(n){var s=h(n),c=o.map(function(p){return p.value});a!==null&&c.push(l(n)),c.push(t,r);var f=c[0],m=r-t;return c.forEach(function(p){var _=Math.abs(s-p);_<=m&&(f=p,m=_)}),f},[t,r,o,a,h,l]),y=function n(s,c,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof c=="number"){var p,_=s[f],S=_+c,w=[];o.forEach(function(T){w.push(T.value)}),w.push(t,r),w.push(l(_));var x=c>0?1:-1;m==="unit"?w.push(l(_+x*a)):w.push(l(S)),w=w.filter(function(T){return T!==null}).filter(function(T){return c<0?T<=_:T>=_}),m==="unit"&&(w=w.filter(function(T){return T!==_}));var U=m==="unit"?_:S;p=w[0];var A=Math.abs(p-U);if(w.forEach(function(T){var P=Math.abs(T-U);P<A&&(p=T,A=P)}),p===void 0)return c<0?t:r;if(m==="dist")return p;if(Math.abs(c)>1){var E=st(s);return E[f]=p,n(E,c-x,f,m)}return p}else{if(c==="min")return t;if(c==="max")return r}},v=function(s,c,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",p=s[f],_=y(s,c,f,m);return{value:_,changed:_!==p}},b=function(s){return d===null&&s===0||typeof d=="number"&&s<d},e=function(s,c,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",p=s.map(g),_=p[f],S=y(p,c,f,m);if(p[f]=S,u===!1){var w=d||0;f>0&&p[f-1]!==_&&(p[f]=Math.max(p[f],p[f-1]+w)),f<p.length-1&&p[f+1]!==_&&(p[f]=Math.min(p[f],p[f+1]-w))}else if(typeof d=="number"||d===null){for(var x=f+1;x<p.length;x+=1)for(var U=!0;b(p[x]-p[x-1])&&U;){var A=v(p,1,x);p[x]=A.value,U=A.changed}for(var E=f;E>0;E-=1)for(var T=!0;b(p[E]-p[E-1])&&T;){var P=v(p,-1,E-1);p[E-1]=P.value,T=P.changed}for(var z=p.length-1;z>0;z-=1)for(var R=!0;b(p[z]-p[z-1])&&R;){var D=v(p,-1,z-1);p[z-1]=D.value,R=D.changed}for(var B=0;B<p.length-1;B+=1)for(var F=!0;b(p[B+1]-p[B])&&F;){var O=v(p,1,B+1);p[B+1]=O.value,F=O.changed}}return{value:p[f],values:p}};return[g,e]}var UI=C.forwardRef(function(t,r){var a,o=t.prefixCls,u=o===void 0?"rc-slider":o,d=t.className,h=t.style,l=t.disabled,g=l===void 0?!1:l,y=t.keyboard,v=y===void 0?!0:y,b=t.autoFocus,e=t.onFocus,n=t.onBlur,s=t.min,c=s===void 0?0:s,f=t.max,m=f===void 0?100:f,p=t.step,_=p===void 0?1:p,S=t.value,w=t.defaultValue,x=t.range,U=t.count,A=t.onChange,E=t.onBeforeChange,T=t.onAfterChange,P=t.allowCross,z=P===void 0?!0:P,R=t.pushable,D=R===void 0?!1:R,B=t.draggableTrack,F=t.reverse,O=t.vertical,I=t.included,L=I===void 0?!0:I,M=t.startPoint,k=t.trackStyle,$=t.handleStyle,J=t.railStyle,ae=t.dotStyle,ce=t.activeDotStyle,X=t.marks,ee=t.dots,be=t.handleRender,de=t.tabIndex,_e=de===void 0?0:de,Ee=t.ariaLabelForHandle,Xe=t.ariaLabelledByForHandle,ge=t.ariaValueTextFormatterForHandle,Le=C.useRef(),fe=C.useRef(),Be=C.useMemo(function(){return O?F?"ttb":"btt":F?"rtl":"ltr"},[F,O]),ye=C.useMemo(function(){return isFinite(c)?c:0},[c]),ie=C.useMemo(function(){return isFinite(m)?m:100},[m]),Q=C.useMemo(function(){return _!==null&&_<=0?1:_},[_]),te=C.useMemo(function(){return typeof D=="boolean"?D?Q:!1:D>=0?D:!1},[D,Q]),ve=C.useMemo(function(){var Ae=Object.keys(X||{});return Ae.map(function(pe){var Z=X[pe],Re={value:Number(pe)};return Z&&nt(Z)==="object"&&!C.isValidElement(Z)&&("label"in Z||"style"in Z)?(Re.style=Z.style,Re.label=Z.label):Re.label=Z,Re}).filter(function(pe){var Z=pe.label;return Z||typeof Z=="number"}).sort(function(pe,Z){return pe.value-Z.value})},[X]),Qe=EI(ye,ie,Q,ve,z,te),pt=Y(Qe,2),Lr=pt[0],Tt=pt[1],Un=IS(w,{value:S}),oi=Y(Un,2),Ze=oi[0],Pt=oi[1],Ve=C.useMemo(function(){var Ae=Ze==null?[]:Array.isArray(Ze)?Ze:[Ze],pe=Y(Ae,1),Z=pe[0],Re=Z===void 0?ye:Z,ke=Ze===null?[]:[Re];if(x){if(ke=st(Ae),U||Ze===void 0){var qt=U>=0?U+1:2;for(ke=ke.slice(0,qt);ke.length<qt;){var Ot;ke.push((Ot=ke[ke.length-1])!==null&&Ot!==void 0?Ot:ye)}}ke.sort(function(Ye,ci){return Ye-ci})}return ke.forEach(function(Ye,ci){ke[ci]=Lr(Ye)}),ke},[Ze,x,ye,U,Lr]),Ft=C.useRef(Ve);Ft.current=Ve;var bt=function(pe){return x?pe:pe[0]},Wt=function(pe){var Z=st(pe).sort(function(Re,ke){return Re-ke});A&&!eS(Z,Ft.current,!0)&&A(bt(Z)),Pt(Z)},lt=function(pe){if(!g){var Z=0,Re=ie-ye;Ve.forEach(function(qt,Ot){var Ye=Math.abs(pe-qt);Ye<=Re&&(Re=Ye,Z=Ot)});var ke=st(Ve);ke[Z]=pe,x&&!Ve.length&&U===void 0&&ke.push(pe),E==null||E(bt(ke)),Wt(ke),T==null||T(bt(ke))}},It=function(pe){pe.preventDefault();var Z=fe.current.getBoundingClientRect(),Re=Z.width,ke=Z.height,qt=Z.left,Ot=Z.top,Ye=Z.bottom,ci=Z.right,qr=pe.clientX,Pn=pe.clientY,di;switch(Be){case"btt":di=(Ye-Pn)/ke;break;case"ttb":di=(Pn-Ot)/ke;break;case"rtl":di=(ci-qr)/Re;break;default:di=(qr-qt)/Re}var va=ye+di*(ie-ye);lt(Lr(va))},Wr=C.useState(null),zi=Y(Wr,2),Ue=zi[0],ut=zi[1],si=function(pe,Z){if(!g){var Re=Tt(Ve,pe,Z);E==null||E(bt(Ve)),Wt(Re.values),T==null||T(bt(Re.values)),ut(Re.value)}};C.useEffect(function(){if(Ue!==null){var Ae=Ve.indexOf(Ue);Ae>=0&&Le.current.focus(Ae)}ut(null)},[Ue]);var ze=C.useMemo(function(){return B&&Q===null?!1:B},[B,Q]),Ce=function(){T==null||T(bt(Ft.current))},ne=vI(fe,Be,Ve,ye,ie,Lr,Wt,Ce,Tt),he=Y(ne,4),Je=he[0],vr=he[1],_r=he[2],li=he[3],St=function(pe,Z){li(pe,Z),E==null||E(bt(Ft.current))},ui=Je!==-1;C.useEffect(function(){if(!ui){var Ae=Ve.lastIndexOf(vr);Le.current.focus(Ae)}},[ui]);var Ge=C.useMemo(function(){return st(_r).sort(function(Ae,pe){return Ae-pe})},[_r]),Cn=C.useMemo(function(){return x?[Ge[0],Ge[Ge.length-1]]:[ye,Ge[0]]},[Ge,x,ye]),An=Y(Cn,2),Tn=An[0],Ri=An[1];C.useImperativeHandle(r,function(){return{focus:function(){Le.current.focus(0)},blur:function(){var pe=document,Z=pe.activeElement;fe.current.contains(Z)&&(Z==null||Z.blur())}}}),C.useEffect(function(){b&&Le.current.focus(0)},[]);var Fi=C.useMemo(function(){return{min:ye,max:ie,direction:Be,disabled:g,keyboard:v,step:Q,included:L,includedStart:Tn,includedEnd:Ri,range:x,tabIndex:_e,ariaLabelForHandle:Ee,ariaLabelledByForHandle:Xe,ariaValueTextFormatterForHandle:ge}},[ye,ie,Be,g,v,Q,L,Tn,Ri,x,_e,Ee,Xe,ge]);return C.createElement(ga.Provider,{value:Fi},C.createElement("div",{ref:fe,className:ht(u,d,(a={},le(a,"".concat(u,"-disabled"),g),le(a,"".concat(u,"-vertical"),O),le(a,"".concat(u,"-horizontal"),!O),le(a,"".concat(u,"-with-marks"),ve.length),a)),style:h,onMouseDown:It},C.createElement("div",{className:"".concat(u,"-rail"),style:J}),C.createElement(yI,{prefixCls:u,style:k,values:Ge,startPoint:M,onStartMove:ze?St:null}),C.createElement(wI,{prefixCls:u,marks:ve,dots:ee,style:ae,activeStyle:ce}),C.createElement(gI,{ref:Le,prefixCls:u,style:$,values:_r,draggingIndex:Je,onStartMove:St,onOffsetChange:si,onFocus:e,onBlur:n,handleRender:be}),C.createElement(SI,{prefixCls:u,marks:ve,onClick:lt})))});const CI=C.forwardRef((t,r)=>{const{open:a}=t,o=C.useRef(null),u=C.useRef(null);function d(){oa.cancel(u.current),u.current=null}function h(){u.current=oa(()=>{var l;(l=o.current)===null||l===void 0||l.forceAlign(),u.current=null})}return C.useEffect(()=>(a?h():d(),d),[a,t.title]),C.createElement(fI,Object.assign({ref:Yc(o,r)},t))}),AI=CI,TI=t=>{const{componentCls:r,antCls:a,controlSize:o,dotSize:u,marginFull:d,marginPart:h,colorFillContentHover:l}=t;return{[r]:Object.assign(Object.assign({},kS(t)),{position:"relative",height:o,margin:`${h}px ${d}px`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${d}px ${h}px`},[`${r}-rail`]:{position:"absolute",backgroundColor:t.railBg,borderRadius:t.borderRadiusXS,transition:`background-color ${t.motionDurationMid}`},[`${r}-track`]:{position:"absolute",backgroundColor:t.trackBg,borderRadius:t.borderRadiusXS,transition:`background-color ${t.motionDurationMid}`},[`${r}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${r}-rail`]:{backgroundColor:t.railHoverBg},[`${r}-track`]:{backgroundColor:t.trackHoverBg},[`${r}-dot`]:{borderColor:l},[`${r}-handle::after`]:{boxShadow:`0 0 0 ${t.handleLineWidth}px ${t.colorPrimaryBorderHover}`},[`${r}-dot-active`]:{borderColor:t.dotActiveBorderColor}},[`${r}-handle`]:{position:"absolute",width:t.handleSize,height:t.handleSize,outline:"none",[`${r}-dragging`]:{zIndex:1},"&::before":{content:'""',position:"absolute",insetInlineStart:-t.handleLineWidth,insetBlockStart:-t.handleLineWidth,width:t.handleSize+t.handleLineWidth*2,height:t.handleSize+t.handleLineWidth*2,backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:t.handleSize,height:t.handleSize,backgroundColor:t.colorBgElevated,boxShadow:`0 0 0 ${t.handleLineWidth}px ${t.handleColor}`,borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${t.motionDurationMid},
            inset-block-start ${t.motionDurationMid},
            width ${t.motionDurationMid},
            height ${t.motionDurationMid},
            box-shadow ${t.motionDurationMid}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:-((t.handleSizeHover-t.handleSize)/2+t.handleLineWidthHover),insetBlockStart:-((t.handleSizeHover-t.handleSize)/2+t.handleLineWidthHover),width:t.handleSizeHover+t.handleLineWidthHover*2,height:t.handleSizeHover+t.handleLineWidthHover*2},"&::after":{boxShadow:`0 0 0 ${t.handleLineWidthHover}px ${t.handleActiveColor}`,width:t.handleSizeHover,height:t.handleSizeHover,insetInlineStart:(t.handleSize-t.handleSizeHover)/2,insetBlockStart:(t.handleSize-t.handleSizeHover)/2}}},[`${r}-mark`]:{position:"absolute",fontSize:t.fontSize},[`${r}-mark-text`]:{position:"absolute",display:"inline-block",color:t.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:t.colorText}},[`${r}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${r}-dot`]:{position:"absolute",width:u,height:u,backgroundColor:t.colorBgElevated,border:`${t.handleLineWidth}px solid ${t.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:t.dotActiveBorderColor}},[`&${r}-disabled`]:{cursor:"not-allowed",[`${r}-rail`]:{backgroundColor:`${t.railBg} !important`},[`${r}-track`]:{backgroundColor:`${t.trackBgDisabled} !important`},[`
          ${r}-dot
        `]:{backgroundColor:t.colorBgElevated,borderColor:t.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${r}-handle::after`]:{backgroundColor:t.colorBgElevated,cursor:"not-allowed",width:t.handleSize,height:t.handleSize,boxShadow:`0 0 0 ${t.handleLineWidth}px ${new Zt(t.colorTextDisabled).onBackground(t.colorBgContainer).toHexShortString()}`,insetInlineStart:0,insetBlockStart:0},[`
          ${r}-mark-text,
          ${r}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${a}-tooltip-inner`]:{minWidth:"unset"}})}},nx=(t,r)=>{const{componentCls:a,railSize:o,handleSize:u,dotSize:d}=t,h=r?"paddingBlock":"paddingInline",l=r?"width":"height",g=r?"height":"width",y=r?"insetBlockStart":"insetInlineStart",v=r?"top":"insetInlineStart",b=(o*3-u)/2,e=(u-o)/2,n=r?{borderWidth:`${e}px 0`,transform:`translateY(-${e}px)`}:{borderWidth:`0 ${e}px`,transform:`translateX(-${e}px)`};return{[h]:o,[g]:o*3,[`${a}-rail`]:{[l]:"100%",[g]:o},[`${a}-track`]:{[g]:o},[`${a}-track-draggable`]:Object.assign({},n),[`${a}-handle`]:{[y]:b},[`${a}-mark`]:{insetInlineStart:0,top:0,[v]:o*3+(r?0:t.marginFull),[l]:"100%"},[`${a}-step`]:{insetInlineStart:0,top:0,[v]:o,[l]:"100%",[g]:o},[`${a}-dot`]:{position:"absolute",[y]:(o-d)/2}}},PI=t=>{const{componentCls:r,marginPartWithMark:a}=t;return{[`${r}-horizontal`]:Object.assign(Object.assign({},nx(t,!0)),{[`&${r}-with-marks`]:{marginBottom:a}})}},II=t=>{const{componentCls:r}=t;return{[`${r}-vertical`]:Object.assign(Object.assign({},nx(t,!1)),{height:"100%"})}},BI=zS("Slider",t=>{const r=Rs(t,{marginPart:(t.controlHeight-t.controlSize)/2,marginFull:t.controlSize/2,marginPartWithMark:t.controlHeightLG-t.controlSize});return[TI(r),PI(r),II(r)]},t=>{const a=t.controlHeightLG/4,o=t.controlHeightSM/2,u=t.lineWidth+1,d=t.lineWidth+1*3;return{controlSize:a,railSize:4,handleSize:a,handleSizeHover:o,dotSize:8,handleLineWidth:u,handleLineWidthHover:d,railBg:t.colorFillTertiary,railHoverBg:t.colorFillSecondary,trackBg:t.colorPrimaryBorder,trackHoverBg:t.colorPrimaryBorderHover,handleColor:t.colorPrimaryBorder,handleActiveColor:t.colorPrimary,dotBorderColor:t.colorBorderSecondary,dotActiveBorderColor:t.colorPrimaryBorder,trackBgDisabled:t.colorBgContainerDisabled}});var kI=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const DI=t=>typeof t=="number"?t.toString():"",LI=ue.forwardRef((t,r)=>{const{prefixCls:a,range:o,className:u,rootClassName:d,style:h,disabled:l,tooltipPrefixCls:g,tipFormatter:y,tooltipVisible:v,getTooltipPopupContainer:b,tooltipPlacement:e}=t,n=kI(t,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement"]),{direction:s,slider:c,getPrefixCls:f,getPopupContainer:m}=ue.useContext(ma),p=ue.useContext(RS),_=l??p,[S,w]=ue.useState({}),x=(F,O)=>{w(I=>Object.assign(Object.assign({},I),{[F]:O}))},U=(F,O)=>F||(O?s==="rtl"?"left":"right":"top"),A=f("slider",a),[E,T]=BI(A),P=ht(u,c==null?void 0:c.className,d,{[`${A}-rtl`]:s==="rtl"},T);s==="rtl"&&!n.vertical&&(n.reverse=!n.reverse);const[z,R]=ue.useMemo(()=>o?typeof o=="object"?[!0,o.draggableTrack]:[!0,!1]:[!1],[o]),D=(F,O)=>{var I;const{index:L,dragging:M}=O,{tooltip:k={},vertical:$}=t,J=Object.assign({},k),{open:ae,placement:ce,getPopupContainer:X,prefixCls:ee,formatter:be}=J;let de;be||be===null?de=be:y||y===null?de=y:de=DI;const _e=de?S[L]||M:!1,Ee=(I=ae??v)!==null&&I!==void 0?I:ae===void 0&&_e,Xe=Object.assign(Object.assign({},F.props),{onMouseEnter:()=>x(L,!0),onMouseLeave:()=>x(L,!1)}),ge=f("tooltip",ee??g);return ue.createElement(AI,Object.assign({},J,{prefixCls:ge,title:de?de(O.value):"",open:Ee,placement:U(ce??e,$),key:L,overlayClassName:`${A}-tooltip`,getPopupContainer:X||b||m}),ue.cloneElement(F,Xe))},B=Object.assign(Object.assign({},c==null?void 0:c.style),h);return E(ue.createElement(UI,Object.assign({},n,{step:n.step,range:z,draggableTrack:R,className:P,style:B,disabled:_,ref:r,prefixCls:A,handleRender:D})))}),zI=LI;var RI=Object.defineProperty,FI=(t,r,a)=>r in t?RI(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,eo=(t,r,a)=>(FI(t,typeof r!="symbol"?r+"":r,a),a),Tm=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)},se=(t,r,a)=>(Tm(t,r,"read from private field"),a?a.call(t):r.get(t)),sr=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},ti=(t,r,a,o)=>(Tm(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a),ac=(t,r,a)=>(Tm(t,r,"access private method"),a),OI=Object.defineProperty,MI=(t,r,a)=>r in t?OI(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,Dt=(t,r,a)=>(MI(t,typeof r!="symbol"?r+"":r,a),a),Pm=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)},Fe=(t,r,a)=>(Pm(t,r,"read from private field"),a?a.call(t):r.get(t)),_i=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},wi=(t,r,a,o)=>(Pm(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a),NI=(t,r,a)=>(Pm(t,r,"access private method"),a);let Ko=1;const y_={debug:(...t)=>{Ko<=0&&console.debug(...t)},info:(...t)=>{Ko<=1&&console.info(...t)},warn:(...t)=>{Ko<=2&&console.warn(...t)},error:(...t)=>{Ko<=3&&console.error(...t)}},Js=new Map,la={setLogLevel:t=>{Ko=Js.get(t)??1},...y_,create:t=>Object.fromEntries(Object.entries(y_).map(([r,a])=>[r,(...o)=>a(t,...o)]))};Js.set(la.debug,0);Js.set(la.info,1);Js.set(la.warn,2);Js.set(la.error,3);const HI=()=>{let t,r=16.6;self.onmessage=a=>{a.data.event==="start"&&(self.clearInterval(t),t=self.setInterval(()=>{self.postMessage({})},r)),a.data.event==="stop"&&self.clearInterval(t)}},GI=()=>{const t=new Blob([`(${HI.toString()})()`]),r=URL.createObjectURL(t);return new Worker(r)},$I=new Map;let b_=1;const jI=GI();jI.onmessage=()=>{b_+=1;for(const[t,r]of $I.entries())b_%t===0&&r.forEach(a=>a())};function VI(t){return Array(t.numberOfChannels).fill(0).map((r,a)=>t.getChannelData(a))}function S_(t,r,a){const o=a-r,u=new Float32Array(o);let d=0;for(;d<o;)u[d]=t[(r+d)%t.length],d+=1;return u}var YI={};(function(t){var r=function(){var e=new Date,n=4,s=3,c=2,f=1,m=n,p={setLogLevel:function(_){_==this.debug?m=f:_==this.info?m=c:_==this.warn?m=s:(_==this.error,m=n)},debug:function(_,S){console.debug===void 0&&(console.debug=console.log),f>=m&&console.debug("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},log:function(_,S){this.debug(_.msg)},info:function(_,S){c>=m&&console.info("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},warn:function(_,S){s>=m&&console.warn("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},error:function(_,S){n>=m&&console.error("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)}};return p}();r.getDurationString=function(e,n){var s;function c(w,x){for(var U=""+w,A=U.split(".");A[0].length<x;)A[0]="0"+A[0];return A.join(".")}e<0?(s=!0,e=-e):s=!1;var f=n||1,m=e/f,p=Math.floor(m/3600);m-=p*3600;var _=Math.floor(m/60);m-=_*60;var S=m*1e3;return m=Math.floor(m),S-=m*1e3,S=Math.floor(S),(s?"-":"")+p+":"+c(_,2)+":"+c(m,2)+"."+c(S,3)},r.printRanges=function(e){var n=e.length;if(n>0){for(var s="",c=0;c<n;c++)c>0&&(s+=","),s+="["+r.getDurationString(e.start(c))+","+r.getDurationString(e.end(c))+"]";return s}else return"(empty)"},t.Log=r;var a=function(e){if(e instanceof ArrayBuffer)this.buffer=e,this.dataview=new DataView(e);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(e){var n=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(e,n){var s=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:n?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:n?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,s}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var n="",s=0;s<e;s++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var e=[];;){var n=this.readUint8();if(n!==0)e.push(n);else break}return String.fromCharCode.apply(null,e)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(e){for(var n=new Uint8Array(e),s=0;s<e;s++)n[s]=this.readUint8();return n},a.prototype.readInt16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readInt16();return n},a.prototype.readUint16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readUint16();return n},a.prototype.readUint32Array=function(e){for(var n=new Uint32Array(e),s=0;s<e;s++)n[s]=this.readUint32();return n},a.prototype.readInt32Array=function(e){for(var n=new Int32Array(e),s=0;s<e;s++)n[s]=this.readInt32();return n},t.MP4BoxStream=a;var o=function(e,n,s){this._byteOffset=n||0,e instanceof ArrayBuffer?this.buffer=e:typeof e=="object"?(this.dataView=e,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=s??o.LITTLE_ENDIAN};o.prototype={},o.prototype.getPosition=function(){return this.position},o.prototype._realloc=function(e){if(this._dynamicSize){var n=this._byteOffset+this.position+e,s=this._buffer.byteLength;if(n<=s){n>this._byteLength&&(this._byteLength=n);return}for(s<1&&(s=1);n>s;)s*=2;var c=new ArrayBuffer(s),f=new Uint8Array(this._buffer),m=new Uint8Array(c,0,f.length);m.set(f),this.buffer=c,this._byteLength=n}},o.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),n=new Uint8Array(e),s=new Uint8Array(this._buffer,0,n.length);n.set(s),this.buffer=e}},o.BIG_ENDIAN=!1,o.LITTLE_ENDIAN=!0,o.prototype._byteLength=0,Object.defineProperty(o.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),o.prototype.seek=function(e){var n=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(n)||!isFinite(n)?0:n},o.prototype.isEof=function(){return this.position>=this._byteLength},o.prototype.mapUint8Array=function(e){this._realloc(e*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.readInt32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Int32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Int16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt8Array=function(e){e=e??this.byteLength-this.position;var n=new Int8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readUint32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Uint32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Uint16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint8Array=function(e){e=e??this.byteLength-this.position;var n=new Uint8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readFloat64Array=function(e,n){e=e??this.byteLength-this.position/8;var s=new Float64Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readFloat32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Float32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt32=function(e){var n=this._dataView.getInt32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readInt16=function(e){var n=this._dataView.getInt16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},o.prototype.readUint32=function(e){var n=this._dataView.getUint32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readUint16=function(e){var n=this._dataView.getUint16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},o.prototype.readFloat32=function(e){var n=this._dataView.getFloat32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readFloat64=function(e){var n=this._dataView.getFloat64(this.position,e??this.endianness);return this.position+=8,n},o.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,o.memcpy=function(e,n,s,c,f){var m=new Uint8Array(e,n,f),p=new Uint8Array(s,c,f);m.set(p)},o.arrayToNative=function(e,n){return n==this.endianness?e:this.flipArrayEndianness(e)},o.nativeToEndian=function(e,n){return this.endianness==n?e:this.flipArrayEndianness(e)},o.flipArrayEndianness=function(e){for(var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=0;s<e.byteLength;s+=e.BYTES_PER_ELEMENT)for(var c=s+e.BYTES_PER_ELEMENT-1,f=s;c>f;c--,f++){var m=n[f];n[f]=n[c],n[c]=m}return e},o.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var n=[],s=0;s<e.length;s++)n[s]=e[s];return String.fromCharCode.apply(null,n)},o.prototype.readString=function(e,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(e??this.byteLength-this.position)]):new TextDecoder(n).decode(this.mapUint8Array(e))},o.prototype.readCString=function(e){var n=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),c=n;e!=null&&(c=Math.min(e,n));for(var f=0;f<c&&s[f]!==0;f++);var m=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(f)]);return e!=null?this.position+=c-f:f!=n&&(this.position+=1),m};var u=Math.pow(2,32);o.prototype.readInt64=function(){return this.readInt32()*u+this.readUint32()},o.prototype.readUint64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readInt64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},t.DataStream=o,o.prototype.save=function(e){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(n),c=document.createElement("a");document.body.appendChild(c),c.setAttribute("href",s),c.setAttribute("download",e),c.setAttribute("target","_self"),c.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},o.prototype._dynamicSize=!0,Object.defineProperty(o.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),o.prototype.shift=function(e){var n=new ArrayBuffer(this._byteLength-e),s=new Uint8Array(n),c=new Uint8Array(this._buffer,e,s.length);s.set(c),this.buffer=n,this.position-=e},o.prototype.writeInt32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt32(e[s],n)},o.prototype.writeInt16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt16(e[s],n)},o.prototype.writeInt8Array=function(e){if(this._realloc(e.length*1),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var n=0;n<e.length;n++)this.writeInt8(e[n])},o.prototype.writeUint32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint32(e[s],n)},o.prototype.writeUint16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint16(e[s],n)},o.prototype.writeUint8Array=function(e){if(this._realloc(e.length*1),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var n=0;n<e.length;n++)this.writeUint8(e[n])},o.prototype.writeFloat64Array=function(e,n){if(this._realloc(e.length*8),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat64(e[s],n)},o.prototype.writeFloat32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat32(e[s],n)},o.prototype.writeInt32=function(e,n){this._realloc(4),this._dataView.setInt32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeInt16=function(e,n){this._realloc(2),this._dataView.setInt16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},o.prototype.writeUint32=function(e,n){this._realloc(4),this._dataView.setUint32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeUint16=function(e,n){this._realloc(2),this._dataView.setUint16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},o.prototype.writeFloat32=function(e,n){this._realloc(4),this._dataView.setFloat32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeFloat64=function(e,n){this._realloc(8),this._dataView.setFloat64(this.position,e,n??this.endianness),this.position+=8},o.prototype.writeUCS2String=function(e,n,s){s==null&&(s=e.length);for(var c=0;c<e.length&&c<s;c++)this.writeUint16(e.charCodeAt(c),n);for(;c<s;c++)this.writeUint16(0)},o.prototype.writeString=function(e,n,s){var c=0;if(n==null||n=="ASCII")if(s!=null){var f=Math.min(e.length,s);for(c=0;c<f;c++)this.writeUint8(e.charCodeAt(c));for(;c<s;c++)this.writeUint8(0)}else for(c=0;c<e.length;c++)this.writeUint8(e.charCodeAt(c));else this.writeUint8Array(new TextEncoder(n).encode(e.substring(0,s)))},o.prototype.writeCString=function(e,n){var s=0;if(n!=null){var c=Math.min(e.length,n);for(s=0;s<c;s++)this.writeUint8(e.charCodeAt(s));for(;s<n;s++)this.writeUint8(0)}else{for(s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));this.writeUint8(0)}},o.prototype.writeStruct=function(e,n){for(var s=0;s<e.length;s+=2){var c=e[s+1];this.writeType(c,n[e[s]],n)}},o.prototype.writeType=function(e,n,s){var c;if(typeof e=="function")return e(this,n);if(typeof e=="object"&&!(e instanceof Array))return e.set(this,n,s);var f=null,m="ASCII",p=this.position;switch(typeof e=="string"&&/:/.test(e)&&(c=e.split(":"),e=c[0],f=parseInt(c[1])),typeof e=="string"&&/,/.test(e)&&(c=e.split(","),e=c[0],m=parseInt(c[1])),e){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,o.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,o.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,o.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,o.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,o.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,o.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,o.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,o.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,o.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,o.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,o.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,o.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,f);break;case"string":this.writeString(n,m,f);break;case"u16string":this.writeUCS2String(n,this.endianness,f);break;case"u16stringle":this.writeUCS2String(n,o.LITTLE_ENDIAN,f);break;case"u16stringbe":this.writeUCS2String(n,o.BIG_ENDIAN,f);break;default:if(e.length==3){for(var _=e[1],S=0;S<n.length;S++)this.writeType(_,n[S]);break}else{this.writeStruct(e,n);break}}f!=null&&(this.position=p,this._realloc(f),this.position=p+f)},o.prototype.writeUint64=function(e){var n=Math.floor(e/u);this.writeUint32(n),this.writeUint32(e&4294967295)},o.prototype.writeUint24=function(e){this.writeUint8((e&16711680)>>16),this.writeUint8((e&65280)>>8),this.writeUint8(e&255)},o.prototype.adjustUint32=function(e,n){var s=this.position;this.seek(e),this.writeUint32(n),this.seek(s)},o.prototype.mapInt32Array=function(e,n){this._realloc(e*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapInt16Array=function(e,n){this._realloc(e*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapInt8Array=function(e){this._realloc(e*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.mapUint32Array=function(e,n){this._realloc(e*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapUint16Array=function(e,n){this._realloc(e*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapFloat64Array=function(e,n){this._realloc(e*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*8,s},o.prototype.mapFloat32Array=function(e,n){this._realloc(e*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s};var d=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};d.prototype=new o(new ArrayBuffer,0,o.BIG_ENDIAN),d.prototype.initialized=function(){var e;return this.bufferIndex>-1?!0:this.buffers.length>0?(e=this.buffers[0],e.fileStart===0?(this.buffer=e,this.bufferIndex=0,r.debug("MultiBufferStream","Stream ready for parsing"),!0):(r.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(r.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(e,n){r.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+n.byteLength));var s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s.buffer},d.prototype.reduceBuffer=function(e,n,s){var c;return c=new Uint8Array(s),c.set(new Uint8Array(e,n,s)),c.buffer.fileStart=e.fileStart+n,c.buffer.usedBytes=0,c.buffer},d.prototype.insertBuffer=function(e){for(var n=!0,s=0;s<this.buffers.length;s++){var c=this.buffers[s];if(e.fileStart<=c.fileStart){if(e.fileStart===c.fileStart)if(e.byteLength>c.byteLength){this.buffers.splice(s,1),s--;continue}else r.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring");else e.fileStart+e.byteLength<=c.fileStart||(e=this.reduceBuffer(e,0,c.fileStart-e.fileStart)),r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(s,0,e),s===0&&(this.buffer=e);n=!1;break}else if(e.fileStart<c.fileStart+c.byteLength){var f=c.fileStart+c.byteLength-e.fileStart,m=e.byteLength-f;if(m>0)e=this.reduceBuffer(e,f,m);else{n=!1;break}}}n&&(r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),s===0&&(this.buffer=e))},d.prototype.logBufferLevel=function(e){var n,s,c,f,m=[],p,_="";for(c=0,f=0,n=0;n<this.buffers.length;n++)s=this.buffers[n],n===0?(p={},m.push(p),p.start=s.fileStart,p.end=s.fileStart+s.byteLength,_+="["+p.start+"-"):p.end===s.fileStart?p.end=s.fileStart+s.byteLength:(p={},p.start=s.fileStart,_+=m[m.length-1].end-1+"], ["+p.start+"-",p.end=s.fileStart+s.byteLength,m.push(p)),c+=s.usedBytes,f+=s.byteLength;m.length>0&&(_+=p.end-1+"]");var S=e?r.info:r.debug;this.buffers.length===0?S("MultiBufferStream","No more buffer in memory"):S("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+c+"/"+f+" bytes), continuous ranges: "+_)},d.prototype.cleanBuffers=function(){var e,n;for(e=0;e<this.buffers.length;e++)n=this.buffers[e],n.usedBytes===n.byteLength&&(r.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},d.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length)if(e=this.buffers[this.bufferIndex+1],e.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,s=this.buffer.usedBytes,c=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=c,r.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},d.prototype.findPosition=function(e,n,s){var c,f=null,m=-1;for(e===!0?c=0:c=this.bufferIndex;c<this.buffers.length&&(f=this.buffers[c],f.fileStart<=n);)m=c,s&&(f.fileStart+f.byteLength<=n?f.usedBytes=f.byteLength:f.usedBytes=n-f.fileStart,this.logBufferLevel()),c++;return m!==-1?(f=this.buffers[m],f.fileStart+f.byteLength>=n?(r.debug("MultiBufferStream","Found position in existing buffer #"+m),m):-1):-1},d.prototype.findEndContiguousBuf=function(e){var n,s,c,f=e!==void 0?e:this.bufferIndex;if(s=this.buffers[f],this.buffers.length>f+1)for(n=f+1;n<this.buffers.length&&(c=this.buffers[n],c.fileStart===s.fileStart+s.byteLength);n++)s=c;return s.fileStart+s.byteLength},d.prototype.getEndFilePositionAfter=function(e){var n=this.findPosition(!0,e,!1);return n!==-1?this.findEndContiguousBuf(n):e},d.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},d.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},d.prototype.seek=function(e,n,s){var c;return c=this.findPosition(n,e,s),c!==-1?(this.buffer=this.buffers[c],this.bufferIndex=c,this.position=e-this.buffer.fileStart,r.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(r.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},d.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},d.prototype.getLength=function(){return this.byteLength},d.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=d;var h=function(){var e=3,n=4,s=5,c=6,f=[];f[e]="ES_Descriptor",f[n]="DecoderConfigDescriptor",f[s]="DecoderSpecificInfo",f[c]="SLConfigDescriptor",this.getDescriptorName=function(_){return f[_]};var m=this,p={};return this.parseOneDescriptor=function(_){var S=0,w,x,U;for(w=_.readUint8(),U=_.readUint8();U&128;)S=(U&127)<<7,U=_.readUint8();return S+=U&127,r.debug("MPEG4DescriptorParser","Found "+(f[w]||"Descriptor "+w)+", size "+S+" at position "+_.getPosition()),f[w]?x=new p[f[w]](S):x=new p.Descriptor(S),x.parse(_),x},p.Descriptor=function(_,S){this.tag=_,this.size=S,this.descs=[]},p.Descriptor.prototype.parse=function(_){this.data=_.readUint8Array(this.size)},p.Descriptor.prototype.findDescriptor=function(_){for(var S=0;S<this.descs.length;S++)if(this.descs[S].tag==_)return this.descs[S];return null},p.Descriptor.prototype.parseRemainingDescriptors=function(_){for(var S=_.position;_.position<S+this.size;){var w=m.parseOneDescriptor(_);this.descs.push(w)}},p.ES_Descriptor=function(_){p.Descriptor.call(this,e,_)},p.ES_Descriptor.prototype=new p.Descriptor,p.ES_Descriptor.prototype.parse=function(_){if(this.ES_ID=_.readUint16(),this.flags=_.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=_.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var S=_.readUint8();this.URL=_.readString(S),this.size-=S+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=_.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(_)},p.ES_Descriptor.prototype.getOTI=function(_){var S=this.findDescriptor(n);return S?S.oti:0},p.ES_Descriptor.prototype.getAudioConfig=function(_){var S=this.findDescriptor(n);if(!S)return null;var w=S.findDescriptor(s);if(w&&w.data){var x=(w.data[0]&248)>>3;return x===31&&w.data.length>=2&&(x=32+((w.data[0]&7)<<3)+((w.data[1]&224)>>5)),x}else return null},p.DecoderConfigDescriptor=function(_){p.Descriptor.call(this,n,_)},p.DecoderConfigDescriptor.prototype=new p.Descriptor,p.DecoderConfigDescriptor.prototype.parse=function(_){this.oti=_.readUint8(),this.streamType=_.readUint8(),this.bufferSize=_.readUint24(),this.maxBitrate=_.readUint32(),this.avgBitrate=_.readUint32(),this.size-=13,this.parseRemainingDescriptors(_)},p.DecoderSpecificInfo=function(_){p.Descriptor.call(this,s,_)},p.DecoderSpecificInfo.prototype=new p.Descriptor,p.SLConfigDescriptor=function(_){p.Descriptor.call(this,c,_)},p.SLConfigDescriptor.prototype=new p.Descriptor,this};t.MPEG4DescriptorParser=h;var l={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"],["grpl"],["j2kH"],["etyp",["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){l.FullBox.prototype=new l.Box,l.ContainerBox.prototype=new l.Box,l.SampleEntry.prototype=new l.Box,l.TrackGroupTypeBox.prototype=new l.FullBox,l.BASIC_BOXES.forEach(function(e){l.createBoxCtor(e)}),l.FULL_BOXES.forEach(function(e){l.createFullBoxCtor(e)}),l.CONTAINER_BOXES.forEach(function(e){l.createContainerBoxCtor(e[0],null,e[1])})},Box:function(e,n,s){this.type=e,this.size=n,this.uuid=s},FullBox:function(e,n,s){l.Box.call(this,e,n,s),this.flags=0,this.version=0},ContainerBox:function(e,n,s){l.Box.call(this,e,n,s),this.boxes=[]},SampleEntry:function(e,n,s,c){l.ContainerBox.call(this,e,n),this.hdr_size=s,this.start=c},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,n){l.FullBox.call(this,e,n)},createBoxCtor:function(e,n){l.boxCodes.push(e),l[e+"Box"]=function(s){l.Box.call(this,e,s)},l[e+"Box"].prototype=new l.Box,n&&(l[e+"Box"].prototype.parse=n)},createFullBoxCtor:function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){this.parseFullHeader(s),n&&n.call(this,s)}},addSubBoxArrays:function(e){if(e){this.subBoxNames=e;for(var n=e.length,s=0;s<n;s++)this[e[s]+"s"]=[]}},createContainerBoxCtor:function(e,n,s){l[e+"Box"]=function(c){l.ContainerBox.call(this,e,c),l.addSubBoxArrays.call(this,s)},l[e+"Box"].prototype=new l.ContainerBox,n&&(l[e+"Box"].prototype.parse=n)},createMediaSampleEntryCtor:function(e,n,s){l.sampleEntryCodes[e]=[],l[e+"SampleEntry"]=function(c,f){l.SampleEntry.call(this,c,f),l.addSubBoxArrays.call(this,s)},l[e+"SampleEntry"].prototype=new l.SampleEntry,n&&(l[e+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(e,n,s,c){l.sampleEntryCodes[e].push(n),l[n+"SampleEntry"]=function(f){l[e+"SampleEntry"].call(this,n,f),l.addSubBoxArrays.call(this,c)},l[n+"SampleEntry"].prototype=new l[e+"SampleEntry"],s&&(l[n+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(e,n,s){l.createSampleEntryCtor.call(this,e,n,s,["sinf"])},createSampleGroupCtor:function(e,n){l[e+"SampleGroupEntry"]=function(s){l.SampleGroupEntry.call(this,e,s)},l[e+"SampleGroupEntry"].prototype=new l.SampleGroupEntry,n&&(l[e+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(e,n){l[e+"TrackGroupTypeBox"]=function(s){l.TrackGroupTypeBox.call(this,e,s)},l[e+"TrackGroupTypeBox"].prototype=new l.TrackGroupTypeBox,n&&(l[e+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(e,n,s,c){l.UUIDs.push(e),l.UUIDBoxes[e]=function(f){n?l.FullBox.call(this,"uuid",f,e):s?l.ContainerBox.call(this,"uuid",f,e):l.Box.call(this,"uuid",f,e)},l.UUIDBoxes[e].prototype=n?new l.FullBox:s?new l.ContainerBox:new l.Box,c&&(n?l.UUIDBoxes[e].prototype.parse=function(f){this.parseFullHeader(f),c&&c.call(this,f)}:l.UUIDBoxes[e].prototype.parse=c)}};l.initialize(),l.TKHD_FLAG_ENABLED=1,l.TKHD_FLAG_IN_MOVIE=2,l.TKHD_FLAG_IN_PREVIEW=4,l.TFHD_FLAG_BASE_DATA_OFFSET=1,l.TFHD_FLAG_SAMPLE_DESC=2,l.TFHD_FLAG_SAMPLE_DUR=8,l.TFHD_FLAG_SAMPLE_SIZE=16,l.TFHD_FLAG_SAMPLE_FLAGS=32,l.TFHD_FLAG_DUR_EMPTY=65536,l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,l.TRUN_FLAGS_DATA_OFFSET=1,l.TRUN_FLAGS_FIRST_FLAG=4,l.TRUN_FLAGS_DURATION=256,l.TRUN_FLAGS_SIZE=512,l.TRUN_FLAGS_FLAGS=1024,l.TRUN_FLAGS_CTS_OFFSET=2048,l.Box.prototype.add=function(e){return this.addBox(new l[e+"Box"])},l.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},l.Box.prototype.set=function(e,n){return this[e]=n,this},l.Box.prototype.addEntry=function(e,n){var s=n||"entries";return this[s]||(this[s]=[]),this[s].push(e),this},t.BoxParser=l,l.parseUUID=function(e){return l.parseHex16(e)},l.parseHex16=function(e){for(var n="",s=0;s<16;s++){var c=e.readUint8().toString(16);n+=c.length===1?"0"+c:c}return n},l.parseOneBox=function(e,n,s){var c,f=e.getPosition(),m=0,p,_;if(e.getEndPosition()-f<8)return r.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:l.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return r.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:l.ERR_NOT_ENOUGH_DATA};var S=e.readUint32(),w=e.readString(4),x=w;if(r.debug("BoxParser","Found box of type '"+w+"' and size "+S+" at position "+f),m=8,w=="uuid"){if(e.getEndPosition()-e.getPosition()<16||s-m<16)return e.seek(f),r.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:l.ERR_NOT_ENOUGH_DATA};_=l.parseUUID(e),m+=16,x=_}if(S==1){if(e.getEndPosition()-e.getPosition()<8||s&&s-m<8)return e.seek(f),r.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+w+'" box'),{code:l.ERR_NOT_ENOUGH_DATA};S=e.readUint64(),m+=8}else if(S===0){if(s)S=s;else if(w!=="mdat")return r.error("BoxParser","Unlimited box size not supported for type: '"+w+"'"),c=new l.Box(w,S),{code:l.OK,box:c,size:c.size}}return S!==0&&S<m?(r.error("BoxParser","Box of type "+w+" has an invalid size "+S+" (too small to be a box)"),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):S!==0&&s&&S>s?(r.error("BoxParser","Box of type '"+w+"' has a size "+S+" greater than its container size "+s),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):S!==0&&f+S>e.getEndPosition()?(e.seek(f),r.info("BoxParser","Not enough data in stream to parse the entire '"+w+"' box"),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):n?{code:l.OK,type:w,size:S,hdr_size:m,start:f}:(l[w+"Box"]?c=new l[w+"Box"](S):w!=="uuid"?(r.warn("BoxParser","Unknown box type: '"+w+"'"),c=new l.Box(w,S),c.has_unparsed_data=!0):l.UUIDBoxes[_]?c=new l.UUIDBoxes[_](S):(r.warn("BoxParser","Unknown uuid type: '"+_+"'"),c=new l.Box(w,S),c.uuid=_,c.has_unparsed_data=!0),c.hdr_size=m,c.start=f,c.write===l.Box.prototype.write&&c.type!=="mdat"&&(r.info("BoxParser","'"+x+"' box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(e)),c.parse(e),p=e.getPosition()-(c.start+c.size),p<0?(r.warn("BoxParser","Parsing of box '"+x+"' did not read the entire indicated box data size (missing "+-p+" bytes), seeking forward"),e.seek(c.start+c.size)):p>0&&(r.error("BoxParser","Parsing of box '"+x+"' read "+p+" more bytes than the indicated box data size, seeking backwards"),c.size!==0&&e.seek(c.start+c.size)),{code:l.OK,box:c,size:c.size})},l.Box.prototype.parse=function(e){this.type!="mdat"?this.data=e.readUint8Array(this.size-this.hdr_size):this.size===0?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},l.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},l.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.ContainerBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)if(s=n.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var c=s.type!=="uuid"?s.type:s.uuid;this[c]?r.warn("Box of type "+c+" already stored in field of this type"):this[c]=s}else return},l.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},l.SAMPLE_ENTRY_TYPE_VISUAL="Visual",l.SAMPLE_ENTRY_TYPE_AUDIO="Audio",l.SAMPLE_ENTRY_TYPE_HINT="Hint",l.SAMPLE_ENTRY_TYPE_METADATA="Metadata",l.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",l.SAMPLE_ENTRY_TYPE_SYSTEM="System",l.SAMPLE_ENTRY_TYPE_TEXT="Text",l.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},l.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},l.SampleEntry.prototype.parseFooter=function(e){l.ContainerBox.prototype.parse.call(this,e)},l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_HINT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var n;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),n=Math.min(31,e.readUint8()),this.compressorname=e.readString(n),n<31&&e.readString(31-n),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT,"enct"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"encm"),l.createBoxCtor("a1lx",function(e){var n=e.readUint8()&1,s=((n&1)+1)*16;this.layer_size=[];for(var c=0;c<3;c++)s==16?this.layer_size[c]=e.readUint16():this.layer_size[c]=e.readUint32()}),l.createBoxCtor("a1op",function(e){this.op_index=e.readUint8()}),l.createFullBoxCtor("auxC",function(e){this.aux_type=e.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(n)}),l.createBoxCtor("av1C",function(e){var n=e.readUint8();if(n>>7&!1){r.error("av1C marker problem");return}if(this.version=n&127,this.version!==1){r.error("av1C version "+this.version+" not supported");return}if(n=e.readUint8(),this.seq_profile=n>>5&7,this.seq_level_idx_0=n&31,n=e.readUint8(),this.seq_tier_0=n>>7&1,this.high_bitdepth=n>>6&1,this.twelve_bit=n>>5&1,this.monochrome=n>>4&1,this.chroma_subsampling_x=n>>3&1,this.chroma_subsampling_y=n>>2&1,this.chroma_sample_position=n&3,n=e.readUint8(),this.reserved_1=n>>5&7,this.reserved_1!==0){r.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=n>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=n&15;else if(this.reserved_2=n&15,this.reserved_2!==0){r.error("av1C reserved_2 parsing problem");return}var s=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(s)}),l.createBoxCtor("avcC",function(e){var n,s;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=e.readUint8()&3,this.nb_SPS_nalus=e.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=e.readUint16(),this.SPS[n].nalu=e.readUint8Array(this.SPS[n].length),s-=2+this.SPS[n].length;for(this.nb_PPS_nalus=e.readUint8(),s--,this.PPS=[],n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=e.readUint16(),this.PPS[n].nalu=e.readUint8Array(this.PPS[n].length),s-=2+this.PPS[n].length;s>0&&(this.ext=e.readUint8Array(s))}),l.createBoxCtor("btrt",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),l.createFullBoxCtor("ccst",function(e){var n=e.readUint8();this.all_ref_pics_intra=(n&128)==128,this.intra_pred_used=(n&64)==64,this.max_ref_per_pic=(n&63)>>2,e.readUint24()}),l.createBoxCtor("cdef",function(e){var n;for(this.channel_count=e.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],n=0;n<this.channel_count;n++)this.channel_indexes.push(e.readUint16()),this.channel_types.push(e.readUint16()),this.channel_associations.push(e.readUint16())}),l.createBoxCtor("clap",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),l.createBoxCtor("clli",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),l.createFullBoxCtor("cmex",function(e){this.flags&1&&(this.pos_x=e.readInt32()),this.flags&2&&(this.pos_y=e.readInt32()),this.flags&4&&(this.pos_z=e.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=e.readInt32(),this.quat_y=e.readInt32(),this.quat_z=e.readInt32()):(this.quat_x=e.readInt16(),this.quat_y=e.readInt16(),this.quat_z=e.readInt16()):this.version==1),this.flags&32&&(this.id=e.readUint32())}),l.createFullBoxCtor("cmin",function(e){this.focal_length_x=e.readInt32(),this.principal_point_x=e.readInt32(),this.principal_point_y=e.readInt32(),this.flags&1&&(this.focal_length_y=e.readInt32(),this.skew_factor=e.readInt32())}),l.createBoxCtor("cmpd",function(e){for(this.component_count=e.readUint16(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var n=e.readUint16();this.component_types.push(n),n>=32768&&this.component_type_urls.push(e.readCString())}}),l.createFullBoxCtor("co64",function(e){var n,s;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<n;s++)this.chunk_offsets.push(e.readUint64())}),l.createFullBoxCtor("CoLL",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),l.createBoxCtor("colr",function(e){if(this.colour_type=e.readString(4),this.colour_type==="nclx"){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var n=e.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=e.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=e.readUint8Array(this.size-4))}),l.createFullBoxCtor("cprt",function(e){this.parseLanguage(e),this.notice=e.readCString()}),l.createFullBoxCtor("cslg",function(e){this.version===0&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),l.createFullBoxCtor("ctts",function(e){var n,s;if(n=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<n;s++){this.sample_counts.push(e.readUint32());var c=e.readInt32();c<0&&r.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(c)}else if(this.version==1)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),l.createBoxCtor("dac3",function(e){var n=e.readUint8(),s=e.readUint8(),c=e.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|c>>5&7}),l.createBoxCtor("dec3",function(e){var n=e.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var c={};this.ind_subs.push(c);var f=e.readUint8(),m=e.readUint8(),p=e.readUint8();c.fscod=f>>6,c.bsid=f>>1&31,c.bsmod=(f&1)<<4|m>>4&15,c.acmod=m>>1&7,c.lfeon=m&1,c.num_dep_sub=p>>1&15,c.num_dep_sub>0&&(c.chan_loc=(p&1)<<8|e.readUint8())}}),l.createFullBoxCtor("dfLa",function(e){var n=127,s=128,c=[],f=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(e);do{var m=e.readUint8(),p=Math.min(m&n,f.length-1);if(p?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),c.push(f[p]),m&s)break}while(!0);this.numMetadataBlocks=c.length+" ("+c.join(", ")+")"}),l.createBoxCtor("dimm",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("dmed",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dOps",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=e.readUint8()}}),l.createFullBoxCtor("dref",function(e){var n,s;this.entries=[];for(var c=e.readUint32(),f=0;f<c;f++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=n.box,this.entries.push(s);else return}),l.createBoxCtor("drep",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("elng",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("elst",function(e){this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),this.version===1?(c.segment_duration=e.readUint64(),c.media_time=e.readInt64()):(c.segment_duration=e.readUint32(),c.media_time=e.readInt32()),c.media_rate_integer=e.readInt16(),c.media_rate_fraction=e.readInt16()}}),l.createFullBoxCtor("emsg",function(e){this.version==1?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=e.readUint8Array(n)}),l.createEntityToGroupCtor=function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){if(this.parseFullHeader(s),n)n.call(this,s);else for(this.group_id=s.readUint32(),this.num_entities_in_group=s.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var c=s.readUint32();this.entity_ids.push(c)}}},l.createEntityToGroupCtor("aebr"),l.createEntityToGroupCtor("afbr"),l.createEntityToGroupCtor("albc"),l.createEntityToGroupCtor("altr"),l.createEntityToGroupCtor("brst"),l.createEntityToGroupCtor("dobr"),l.createEntityToGroupCtor("eqiv"),l.createEntityToGroupCtor("favc"),l.createEntityToGroupCtor("fobr"),l.createEntityToGroupCtor("iaug"),l.createEntityToGroupCtor("pano"),l.createEntityToGroupCtor("slid"),l.createEntityToGroupCtor("ster"),l.createEntityToGroupCtor("tsyn"),l.createEntityToGroupCtor("wbbr"),l.createEntityToGroupCtor("prgr"),l.createFullBoxCtor("esds",function(e){var n=e.readUint8Array(this.size-this.hdr_size);if(this.data=n,typeof h<"u"){var s=new h;this.esd=s.parseOneDescriptor(new o(n.buffer,0,o.BIG_ENDIAN))}}),l.createBoxCtor("fiel",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),l.createBoxCtor("frma",function(e){this.data_format=e.readString(4)}),l.createBoxCtor("ftyp",function(e){var n=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),n-=8,this.compatible_brands=[];for(var s=0;n>=4;)this.compatible_brands[s]=e.readString(4),n-=4,s++}),l.createFullBoxCtor("hdlr",function(e){this.version===0&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),l.createBoxCtor("hvcC",function(e){var n,s,c,f;this.configurationVersion=e.readUint8(),f=e.readUint8(),this.general_profile_space=f>>6,this.general_tier_flag=(f&32)>>5,this.general_profile_idc=f&31,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=e.readUint16()&4095,this.parallelismType=e.readUint8()&3,this.chroma_format_idc=e.readUint8()&3,this.bit_depth_luma_minus8=e.readUint8()&7,this.bit_depth_chroma_minus8=e.readUint8()&7,this.avgFrameRate=e.readUint16(),f=e.readUint8(),this.constantFrameRate=f>>6,this.numTemporalLayers=(f&13)>>3,this.temporalIdNested=(f&4)>>2,this.lengthSizeMinusOne=f&3,this.nalu_arrays=[];var m=e.readUint8();for(n=0;n<m;n++){var p=[];this.nalu_arrays.push(p),f=e.readUint8(),p.completeness=(f&128)>>7,p.nalu_type=f&63;var _=e.readUint16();for(s=0;s<_;s++){var S={};p.push(S),c=e.readUint16(),S.data=e.readUint8Array(c)}}}),l.createFullBoxCtor("iinf",function(e){var n;this.version===0?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)n.box.type!=="infe"&&r.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[s]=n.box;else return}),l.createFullBoxCtor("iloc",function(e){var n;n=e.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=e.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=e.readUint16();else if(this.version===2)s=e.readUint32();else throw"version of iloc box not supported";for(var c=0;c<s;c++){var f={};if(this.items.push(f),this.version<2)f.item_ID=e.readUint16();else if(this.version===2)f.item_ID=e.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?f.construction_method=e.readUint16()&15:f.construction_method=0,f.data_reference_index=e.readUint16(),this.base_offset_size){case 0:f.base_offset=0;break;case 4:f.base_offset=e.readUint32();break;case 8:f.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var m=e.readUint16();f.extents=[];for(var p=0;p<m;p++){var _={};if(f.extents.push(_),this.version===1||this.version===2)switch(this.index_size){case 0:_.extent_index=0;break;case 4:_.extent_index=e.readUint32();break;case 8:_.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:_.extent_offset=0;break;case 4:_.extent_offset=e.readUint32();break;case 8:_.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:_.extent_length=0;break;case 4:_.extent_length=e.readUint32();break;case 8:_.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),l.createBoxCtor("imir",function(e){var n=e.readUint8();this.reserved=n>>7,this.axis=n&1}),l.createFullBoxCtor("infe",function(e){if((this.version===0||this.version===1)&&(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),this.version===1){this.extension_type=e.readString(4),r.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=e.readUint16():this.version===3&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),this.item_type==="mime"?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):this.item_type==="uri "&&(this.item_uri_type=e.readCString()))}),l.createFullBoxCtor("ipma",function(e){var n,s;for(entry_count=e.readUint32(),this.associations=[],n=0;n<entry_count;n++){var c={};this.associations.push(c),this.version<1?c.id=e.readUint16():c.id=e.readUint32();var f=e.readUint8();for(c.props=[],s=0;s<f;s++){var m=e.readUint8(),p={};c.props.push(p),p.essential=(m&128)>>7===1,this.flags&1?p.property_index=(m&127)<<8|e.readUint8():p.property_index=m&127}}}),l.createFullBoxCtor("iref",function(e){var n,s;for(this.references=[];e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)this.version===0?s=new l.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):s=new l.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.references.push(s);else return}),l.createBoxCtor("irot",function(e){this.angle=e.readUint8()&3}),l.createFullBoxCtor("ispe",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),l.createFullBoxCtor("kind",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),l.createFullBoxCtor("leva",function(e){var n=e.readUint8();this.levels=[];for(var s=0;s<n;s++){var c={};this.levels[s]=c,c.track_ID=e.readUint32();var f=e.readUint8();switch(c.padding_flag=f>>7,c.assignment_type=f&127,c.assignment_type){case 0:c.grouping_type=e.readString(4);break;case 1:c.grouping_type=e.readString(4),c.grouping_type_parameter=e.readUint32();break;case 2:break;case 3:break;case 4:c.sub_track_id=e.readUint32();break;default:r.warn("BoxParser","Unknown leva assignement type")}}}),l.createBoxCtor("lsel",function(e){this.layer_id=e.readUint16()}),l.createBoxCtor("maxr",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),l.createBoxCtor("mdcv",function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),l.createFullBoxCtor("mdhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),l.createFullBoxCtor("mehd",function(e){this.flags&1&&(r.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),l.createFullBoxCtor("meta",function(e){this.boxes=[],l.ContainerBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("mfhd",function(e){this.sequence_number=e.readUint32()}),l.createFullBoxCtor("mfro",function(e){this._size=e.readUint32()}),l.createFullBoxCtor("mvhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),l.createBoxCtor("npck",function(e){this.packetssent=e.readUint32()}),l.createBoxCtor("nump",function(e){this.packetssent=e.readUint64()}),l.createFullBoxCtor("padb",function(e){var n=e.readUint32();this.padbits=[];for(var s=0;s<Math.floor((n+1)/2);s++)this.padbits=e.readUint8()}),l.createBoxCtor("pasp",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),l.createBoxCtor("payl",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createBoxCtor("payt",function(e){this.payloadID=e.readUint32();var n=e.readUint8();this.rtpmap_string=e.readString(n)}),l.createFullBoxCtor("pdin",function(e){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<n;s++)this.rate[s]=e.readUint32(),this.initial_delay[s]=e.readUint32()}),l.createFullBoxCtor("pitm",function(e){this.version===0?this.item_id=e.readUint16():this.item_id=e.readUint32()}),l.createFullBoxCtor("pixi",function(e){var n;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=e.readUint8()}),l.createBoxCtor("pmax",function(e){this.bytes=e.readUint32()}),l.createFullBoxCtor("prdi",function(e){if(this.step_count=e.readUint16(),this.item_count=[],this.flags&2)for(var n=0;n<this.step_count;n++)this.item_count[n]=e.readUint16()}),l.createFullBoxCtor("prft",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),this.version===0?this.media_time=e.readUint32():this.media_time=e.readUint64()}),l.createFullBoxCtor("pssh",function(e){if(this.system_id=l.parseHex16(e),this.version>0){var n=e.readUint32();this.kid=[];for(var s=0;s<n;s++)this.kid[s]=l.parseHex16(e)}var c=e.readUint32();c>0&&(this.data=e.readUint8Array(c))}),l.createFullBoxCtor("clef",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("enof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("prof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),l.createBoxCtor("rtp ",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),l.createFullBoxCtor("saio",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var n=e.readUint32();this.offset=[];for(var s=0;s<n;s++)this.version===0?this.offset[s]=e.readUint32():this.offset[s]=e.readUint64()}),l.createFullBoxCtor("saiz",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var n=e.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var s=0;s<n;s++)this.sample_info_size[s]=e.readUint8()}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),l.createSampleGroupCtor("alst",function(e){var n,s=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],n=0;n<s;n++)this.sample_offset[n]=e.readUint32();var c=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<c/4;n++)this.num_output_samples[n]=e.readUint16(),this.num_total_samples[n]=e.readUint16()}),l.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),l.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var n=e.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var s=e.readUint8(),c=0;c<s;c++){var f={};this.dependency.push(f),f.subSeqDirectionFlag=e.readUint8(),f.layerNumber=e.readUint8(),f.subSequenceIdentifier=e.readUint16()}}),l.createSampleGroupCtor("dtrt",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("mvif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),l.createSampleGroupCtor("rap ",function(e){var n=e.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),l.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)r.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=e.readUint32(),this.target_rate_share[n]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),l.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),l.SampleGroupEntry.prototype.parse=function(e){r.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},l.createSampleGroupCtor("scif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("scnm",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var n=e.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=l.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),l.createSampleGroupCtor("stsa",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("sync",function(e){var n=e.readUint8();this.NAL_unit_type=n&63}),l.createSampleGroupCtor("tele",function(e){var n=e.readUint8();this.level_independently_decodable=n>>7}),l.createSampleGroupCtor("tsas",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("tscl",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("vipr",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createFullBoxCtor("sbgp",function(e){this.grouping_type=e.readString(4),this.version===1?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),c.sample_count=e.readInt32(),c.group_description_index=e.readInt32()}}),l.createFullBoxCtor("schm",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),this.flags&1&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),l.createBoxCtor("sdp ",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("sdtp",function(e){var n,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var c=0;c<s;c++)n=e.readUint8(),this.is_leading[c]=n>>6,this.sample_depends_on[c]=n>>4&3,this.sample_is_depended_on[c]=n>>2&3,this.sample_has_redundancy[c]=n&3}),l.createFullBoxCtor("senc"),l.createFullBoxCtor("sgpd",function(e){this.grouping_type=e.readString(4),r.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c;l[this.grouping_type+"SampleGroupEntry"]?c=new l[this.grouping_type+"SampleGroupEntry"](this.grouping_type):c=new l.SampleGroupEntry(this.grouping_type),this.entries.push(c),this.version===1?this.default_length===0?c.description_length=e.readUint32():c.description_length=this.default_length:c.description_length=this.default_length,c.write===l.SampleGroupEntry.prototype.write&&(r.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),c.data=e.readUint8Array(c.description_length),e.position-=c.description_length),c.parse(e)}}),l.createFullBoxCtor("sidx",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),this.version===0?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var n=e.readUint16(),s=0;s<n;s++){var c={};this.references.push(c);var f=e.readUint32();c.reference_type=f>>31&1,c.referenced_size=f&2147483647,c.subsegment_duration=e.readUint32(),f=e.readUint32(),c.starts_with_SAP=f>>31&1,c.SAP_type=f>>28&7,c.SAP_delta_time=f&268435455}}),l.SingleItemTypeReferenceBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBox.prototype=new l.Box,l.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint16()},l.SingleItemTypeReferenceBoxLarge=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBoxLarge.prototype=new l.Box,l.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint32()},l.createFullBoxCtor("SmDm",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),l.createFullBoxCtor("smhd",function(e){this.balance=e.readUint16(),e.readUint16()}),l.createFullBoxCtor("ssix",function(e){this.subsegments=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.subsegments.push(c),c.ranges=[];for(var f=e.readUint32(),m=0;m<f;m++){var p={};c.ranges.push(p),p.level=e.readUint8(),p.range_size=e.readUint24()}}}),l.createFullBoxCtor("stco",function(e){var n;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<n;s++)this.chunk_offsets.push(e.readUint32())}),l.createFullBoxCtor("stdp",function(e){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<n;s++)this.priority[s]=e.readUint16()}),l.createFullBoxCtor("sthd"),l.createFullBoxCtor("stri",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("stsc",function(e){var n,s;if(n=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<n;s++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),l.createFullBoxCtor("stsd",function(e){var n,s,c,f;for(this.entries=[],c=e.readUint32(),n=1;n<=c;n++)if(s=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),s.code===l.OK)l[s.type+"SampleEntry"]?(f=new l[s.type+"SampleEntry"](s.size),f.hdr_size=s.hdr_size,f.start=s.start):(r.warn("BoxParser","Unknown sample entry type: "+s.type),f=new l.SampleEntry(s.type,s.size,s.hdr_size,s.start)),f.write===l.SampleEntry.prototype.write&&(r.info("BoxParser","SampleEntry "+f.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),f.parseDataAndRewind(e)),f.parse(e),this.entries.push(f);else return}),l.createFullBoxCtor("stsg",function(e){this.grouping_type=e.readUint32();var n=e.readUint16();this.group_description_index=[];for(var s=0;s<n;s++)this.group_description_index[s]=e.readUint32()}),l.createFullBoxCtor("stsh",function(e){var n,s;if(n=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<n;s++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stss",function(e){var n,s;if(s=e.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<s;n++)this.sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stsz",function(e){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(e.readUint32()):this.sample_sizes[n]=this.sample_size}),l.createFullBoxCtor("stts",function(e){var n,s,c;if(n=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),c=e.readInt32(),c<0&&(r.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),c=1),this.sample_deltas.push(c)}),l.createFullBoxCtor("stvi",function(e){var n=e.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=e.readUint32();var s=e.readUint32();this.stereo_indication_type=e.readString(s);var c,f;for(this.boxes=[];e.getPosition()<this.start+this.size;)if(c=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),c.code===l.OK)f=c.box,this.boxes.push(f),this[f.type]=f;else return}),l.createBoxCtor("styp",function(e){l.ftypBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("stz2",function(e){var n,s;if(this.sample_sizes=[],this.version===0)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),s=e.readUint32(),this.field_size===4)for(n=0;n<s;n+=2){var c=e.readUint8();this.sample_sizes[n]=c>>4&15,this.sample_sizes[n+1]=c&15}else if(this.field_size===8)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint8();else if(this.field_size===16)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint16();else r.error("BoxParser","Error in length field in stz2 box")}),l.createFullBoxCtor("subs",function(e){var n,s,c,f;for(c=e.readUint32(),this.entries=[],n=0;n<c;n++){var m={};if(this.entries[n]=m,m.sample_delta=e.readUint32(),m.subsamples=[],f=e.readUint16(),f>0)for(s=0;s<f;s++){var p={};m.subsamples.push(p),this.version==1?p.size=e.readUint32():p.size=e.readUint16(),p.priority=e.readUint8(),p.discardable=e.readUint8(),p.codec_specific_parameters=e.readUint32()}}}),l.createFullBoxCtor("tenc",function(e){if(e.readUint8(),this.version===0)e.readUint8();else{var n=e.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=l.parseHex16(e),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),l.createFullBoxCtor("tfdt",function(e){this.version==1?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),l.createFullBoxCtor("tfhd",function(e){var n=0;this.track_id=e.readUint32(),this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),n+=4):this.default_sample_flags=0}),l.createFullBoxCtor("tfra",function(e){this.track_ID=e.readUint32(),e.readUint24();var n=e.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var s=e.readUint32(),c=0;c<s;c++)this.version===1?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),l.createFullBoxCtor("tkhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),l.createBoxCtor("tmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("tmin",function(e){this.time=e.readUint32()}),l.createBoxCtor("totl",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpay",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpyl",function(e){this.bytessent=e.readUint64()}),l.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},l.createTrackGroupCtor("msrc"),l.TrackReferenceTypeBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.TrackReferenceTypeBox.prototype=new l.Box,l.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},l.trefBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=new l.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.boxes.push(s);else return},l.createFullBoxCtor("trep",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;)if(ret=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code===l.OK)box=ret.box,this.boxes.push(box);else return}),l.createFullBoxCtor("trex",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),l.createBoxCtor("trpy",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("trun",function(e){var n=0;if(this.sample_count=e.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var s=0;s<this.sample_count;s++)this.flags&l.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_SIZE&&(this.sample_size[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=e.readUint32():this.sample_composition_time_offset[s]=e.readInt32())}),l.createFullBoxCtor("tsel",function(e){this.switch_group=e.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("txtC",function(e){this.config=e.readCString()}),l.createBoxCtor("tyco",function(e){var n=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var s=0;s<n;s++)this.compatible_brands[s]=e.readString(4)}),l.createFullBoxCtor("udes",function(e){this.lang=e.readCString(),this.name=e.readCString(),this.description=e.readCString(),this.tags=e.readCString()}),l.createFullBoxCtor("uncC",function(e){var n;for(this.profile=e.readUint32(),this.component_count=e.readUint16(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],n=0;n<this.component_count;n++)this.component_index.push(e.readUint16()),this.component_bit_depth_minus_one.push(e.readUint8()),this.component_format.push(e.readUint8()),this.component_align_size.push(e.readUint8());this.sampling_type=e.readUint8(),this.interleave_type=e.readUint8(),this.block_size=e.readUint8();var s=e.readUint8();this.component_little_endian=s>>7&1,this.block_pad_lsb=s>>6&1,this.block_little_endian=s>>5&1,this.block_reversed=s>>4&1,this.pad_unknown=s>>3&1,this.pixel_size=e.readUint8(),this.row_align_size=e.readUint32(),this.tile_align_size=e.readUint32(),this.num_tile_cols_minus_one=e.readUint32(),this.num_tile_rows_minus_one=e.readUint32()}),l.createFullBoxCtor("url ",function(e){this.flags!==1&&(this.location=e.readCString())}),l.createFullBoxCtor("urn ",function(e){this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())}),l.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),l.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(e){this.system_id=l.parseHex16(e);var n=e.readUint32();n>0&&(this.data=e.readUint8Array(n))}),l.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),l.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=l.parseHex16(e)}),l.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var s={},c=0,f=0;this.version===1?(c=e.readUint64(),f=e.readUint64()):(c=e.readUint32(),f=e.readUint32()),s.absolute_time=c,s.absolute_duration=f,this.entries.push(s)}}),l.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(e){this.version===1?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),l.createFullBoxCtor("vmhd",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),l.createFullBoxCtor("vpcC",function(e){var n;this.version===1?(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8(),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)):(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=e.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize))}),l.createBoxCtor("vttC",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("vvcC",function(e){var n,s,c={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(E){this.held_bits=E.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(E){this.held_bits=E.readUint16(),this.num_held_bits=16},extract_bits:function(E){var T=this.held_bits>>this.num_held_bits-E&(1<<E)-1;return this.num_held_bits-=E,T}};if(c.stream_read_1_bytes(e),c.extract_bits(5),this.lengthSizeMinusOne=c.extract_bits(2),this.ptl_present_flag=c.extract_bits(1),this.ptl_present_flag){c.stream_read_2_bytes(e),this.ols_idx=c.extract_bits(9),this.num_sublayers=c.extract_bits(3),this.constant_frame_rate=c.extract_bits(2),this.chroma_format_idc=c.extract_bits(2),c.stream_read_1_bytes(e),this.bit_depth_minus8=c.extract_bits(3),c.extract_bits(5);{if(c.stream_read_2_bytes(e),c.extract_bits(2),this.num_bytes_constraint_info=c.extract_bits(6),this.general_profile_idc=c.extract_bits(7),this.general_tier_flag=c.extract_bits(1),this.general_level_idc=e.readUint8(),c.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=c.extract_bits(1),this.ptl_multilayer_enabled_flag=c.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var f=c.extract_bits(6);c.stream_read_1_bytes(e);var m=c.extract_bits(2);this.general_constraint_info[n]=f<<2|m}this.general_constraint_info[this.num_bytes_constraint_info-1]=c.extract_bits(6)}else c.extract_bits(6);if(this.num_sublayers>1){for(c.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var p=c.extract_bits(1);this.ptl_sublayer_present_mask|=p<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)c.extract_bits(1);for(this.sublayer_level_idc=[],s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=e.readUint8())}if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(e.readUint32())}this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}var _=12,S=13;this.nalu_arrays=[];var w=e.readUint8();for(n=0;n<w;n++){var x=[];this.nalu_arrays.push(x),c.stream_read_1_bytes(e),x.completeness=c.extract_bits(1),c.extract_bits(2),x.nalu_type=c.extract_bits(5);var U=1;for(x.nalu_type!=S&&x.nalu_type!=_&&(U=e.readUint16()),s=0;s<U;s++){var A=e.readUint16();x.push({data:e.readUint8Array(A),length:A})}}}),l.createFullBoxCtor("vvnC",function(e){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),l.SampleEntry.prototype.isVideo=function(){return!1},l.SampleEntry.prototype.isAudio=function(){return!1},l.SampleEntry.prototype.isSubtitle=function(){return!1},l.SampleEntry.prototype.isMetadata=function(){return!1},l.SampleEntry.prototype.isHint=function(){return!1},l.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},l.SampleEntry.prototype.getWidth=function(){return""},l.SampleEntry.prototype.getHeight=function(){return""},l.SampleEntry.prototype.getChannelCount=function(){return""},l.SampleEntry.prototype.getSampleRate=function(){return""},l.SampleEntry.prototype.getSampleSize=function(){return""},l.VisualSampleEntry.prototype.isVideo=function(){return!0},l.VisualSampleEntry.prototype.getWidth=function(){return this.width},l.VisualSampleEntry.prototype.getHeight=function(){return this.height},l.AudioSampleEntry.prototype.isAudio=function(){return!0},l.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},l.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},l.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},l.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},l.MetadataSampleEntry.prototype.isMetadata=function(){return!0},l.decimalToHex=function(e,n){var s=Number(e).toString(16);for(n=typeof n>"u"||n===null?n=2:n;s.length<n;)s="0"+s;return s},l.avc1SampleEntry.prototype.getCodec=l.avc2SampleEntry.prototype.getCodec=l.avc3SampleEntry.prototype.getCodec=l.avc4SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+l.decimalToHex(this.avcC.AVCProfileIndication)+l.decimalToHex(this.avcC.profile_compatibility)+l.decimalToHex(this.avcC.AVCLevelIndication):e},l.hev1SampleEntry.prototype.getCodec=l.hvc1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var s=this.hvcC.general_profile_compatibility,c=0;for(e=0;e<32&&(c|=s&1,e!=31);e++)c<<=1,s>>=1;n+=l.decimalToHex(c,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var f=!1,m="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||f)&&(m="."+l.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+m,f=!0);n+=m}return n},l.vvc1SampleEntry.prototype.getCodec=l.vvi1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var c=[],f=0;f|=this.vvcC.ptl_frame_only_constraint<<7,f|=this.vvcC.ptl_multilayer_enabled<<6;var m;for(e=0;e<this.vvcC.general_constraint_info.length;++e)f|=this.vvcC.general_constraint_info[e]>>2&63,c.push(f),f&&(m=e),f=this.vvcC.general_constraint_info[e]>>2&3;if(m===void 0)s=".CA";else{s=".C";var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",_=0,S=0;for(e=0;e<=m;++e)for(_=_<<8|c[e],S+=8;S>=5;){var w=_>>S-5&31;s+=p[w],S-=5,_&=(1<<S)-1}S&&(_<<=5-S,s+=p[_&31])}}n+=s}return n},l.mp4aSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return e+"."+l.decimalToHex(n)+(s?"."+s:"")}else return e},l.stxtSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},l.vp08SampleEntry.prototype.getCodec=l.vp09SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),e+".0"+this.vpcC.profile+"."+n+"."+s},l.av01SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),e+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+s},l.Box.prototype.writeHeader=function(e,n){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),r.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(n||"")),this.size>u?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),this.type==="uuid"&&e.writeUint8Array(this.uuid),this.size>u&&e.writeUint64(this.size)},l.FullBox.prototype.writeHeader=function(e){this.size+=4,l.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},l.Box.prototype.write=function(e){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},l.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(e),this.size+=this.boxes[n].size);r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.TrackReferenceTypeBox.prototype.write=function(e){this.size=this.track_ids.length*4,this.writeHeader(e),e.writeUint32Array(this.track_ids)},l.avcCBox.prototype.write=function(e){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),n=0;n<this.SPS.length;n++)e.writeUint16(this.SPS[n].length),e.writeUint8Array(this.SPS[n].nalu);for(e.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)e.writeUint16(this.PPS[n].length),e.writeUint8Array(this.PPS[n].nalu);this.ext&&e.writeUint8Array(this.ext)},l.co64Box.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)e.writeUint64(this.chunk_offsets[n])},l.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},l.cttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),this.version===1?e.writeInt32(this.sample_offsets[n]):e.writeUint32(this.sample_offsets[n])},l.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},l.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeUint32(s.segment_duration),e.writeInt32(s.media_time),e.writeInt16(s.media_rate_integer),e.writeInt16(s.media_rate_fraction)}},l.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},l.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)e.writeString(this.compatible_brands[n],null,4)},l.hdlrBox.prototype.write=function(e){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},l.hvcCBox.prototype.write=function(e){var n,s;for(this.size=23,n=0;n<this.nalu_arrays.length;n++)for(this.size+=3,s=0;s<this.nalu_arrays[n].length;s++)this.size+=2+this.nalu_arrays[n][s].data.length;for(this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.general_profile_space<<6+this.general_tier_flag<<5+this.general_profile_idc),e.writeUint32(this.general_profile_compatibility),e.writeUint8Array(this.general_constraint_indicator),e.writeUint8(this.general_level_idc),e.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),e.writeUint8(this.parallelismType+252),e.writeUint8(this.chroma_format_idc+252),e.writeUint8(this.bit_depth_luma_minus8+248),e.writeUint8(this.bit_depth_chroma_minus8+248),e.writeUint16(this.avgFrameRate),e.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),e.writeUint8(this.nalu_arrays.length),n=0;n<this.nalu_arrays.length;n++)for(e.writeUint8((this.nalu_arrays[n].completeness<<7)+this.nalu_arrays[n].nalu_type),e.writeUint16(this.nalu_arrays[n].length),s=0;s<this.nalu_arrays[n].length;s++)e.writeUint16(this.nalu_arrays[n][s].data.length),e.writeUint8Array(this.nalu_arrays[n][s].data)},l.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},l.mdhdBox.prototype.write=function(e){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},l.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},l.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},l.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},l.SampleEntry.prototype.writeHeader=function(e){this.size=8,l.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},l.SampleEntry.prototype.writeFooter=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e),this.size+=this.boxes[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*7+6*4+32,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},l.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*4+3*4,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},l.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},l.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},l.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeInt32(s.sample_count),e.writeInt32(s.group_description_index)}},l.sgpdBox.prototype.write=function(e){var n,s;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),this.version===1&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&this.default_length===0&&e.writeUint32(s.description_length),s.write(e)},l.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var s=this.references[n];e.writeUint32(s.reference_type<<31|s.referenced_size),e.writeUint32(s.subsegment_duration),e.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},l.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},l.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},l.stscBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)e.writeUint32(this.first_chunk[n]),e.writeUint32(this.samples_per_chunk[n]),e.writeUint32(this.sample_description_index[n])},l.stsdBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.stshBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)e.writeUint32(this.shadowed_sample_numbers[n]),e.writeUint32(this.sync_sample_numbers[n])},l.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},l.stszBox.prototype.write=function(e){var n,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){s=!1;break}else n++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),s?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),s||e.writeUint32Array(this.sample_sizes)},l.sttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),e.writeUint32(this.sample_deltas[n])},l.tfdtBox.prototype.write=function(e){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(e),this.version===1?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},l.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},l.tkhdBox.prototype.write=function(e){this.version=0,this.size=4*18+2*4,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},l.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},l.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&l.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&l.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&l.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&l.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[n]),this.flags&l.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[n]),this.flags&l.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[n]),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?e.writeUint32(this.sample_composition_time_offset[n]):e.writeInt32(this.sample_composition_time_offset[n]))},l["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},l["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},l.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},l.cttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)e[c].pts=e[c].dts+this.sample_offsets[n],c++},l.sttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)c===0?e[c].dts=0:e[c].dts=e[c-1].dts+this.sample_deltas[n],c++},l.stcoBox.prototype.unpack=function(e){var n;for(n=0;n<this.chunk_offsets.length;n++)e[n].offset=this.chunk_offsets[n]},l.stscBox.prototype.unpack=function(e){var n,s,c,f,m;for(f=0,m=0,n=0;n<this.first_chunk.length;n++)for(s=0;s<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);s++)for(m++,c=0;c<this.samples_per_chunk[n];c++){if(e[f])e[f].description_index=this.sample_description_index[n],e[f].chunk_index=m;else return;f++}},l.stszBox.prototype.unpack=function(e){var n;for(n=0;n<this.sample_sizes.length;n++)e[n].size=this.sample_sizes[n]},l.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],l.boxEqualFields=function(e,n){if(e&&!n)return!1;var s;for(s in e)if(!(l.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(e[s]instanceof l.Box||n[s]instanceof l.Box||typeof e[s]>"u"||typeof n[s]>"u"||typeof e[s]=="function"||typeof n[s]=="function"||e.subBoxNames&&e.subBoxNames.indexOf(s.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(s.slice(0,4))>-1||s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time"||l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(e[s]!==n[s])return!1}return!0},l.boxEqual=function(e,n){if(!l.boxEqualFields(e,n))return!1;for(var s=0;s<l.DIFF_BOXES_PROP_NAMES.length;s++){var c=l.DIFF_BOXES_PROP_NAMES[s];if(e[c]&&n[c]&&!l.boxEqual(e[c],n[c]))return!1}return!0};var g=function(){};g.prototype.parseSample=function(e){var n={},s;n.resources=[];var c=new a(e.data.buffer);if(!e.subsamples||e.subsamples.length===0)n.documentString=c.readString(e.data.length);else if(n.documentString=c.readString(e.subsamples[0].size),e.subsamples.length>1)for(s=1;s<e.subsamples.length;s++)n.resources[s]=c.readUint8Array(e.subsamples[s].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var y=function(){};y.prototype.parseSample=function(e){var n,s=new a(e.data.buffer);return n=s.readString(e.data.length),n},y.prototype.parseConfig=function(e){var n,s=new a(e.buffer);return s.readUint32(),n=s.readCString(),n},t.XMLSubtitlein4Parser=g,t.Textin4Parser=y;var v=function(e){this.stream=e||new d,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};v.prototype.setSegmentOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.fragmentedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.segmentStream=null,f.nb_samples=1e3,f.rapAlignement=!0,s&&(s.nbSamples&&(f.nb_samples=s.nbSamples),s.rapAlignement&&(f.rapAlignement=s.rapAlignement))}},v.prototype.unsetSegmentOptions=function(e){for(var n=-1,s=0;s<this.fragmentedTracks.length;s++){var c=this.fragmentedTracks[s];c.id==e&&(n=s)}n>-1&&this.fragmentedTracks.splice(n,1)},v.prototype.setExtractionOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.extractedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.nb_samples=1e3,f.samples=[],s&&s.nbSamples&&(f.nb_samples=s.nbSamples)}},v.prototype.unsetExtractionOptions=function(e){for(var n=-1,s=0;s<this.extractedTracks.length;s++){var c=this.extractedTracks[s];c.id==e&&(n=s)}n>-1&&this.extractedTracks.splice(n,1)},v.prototype.parse=function(){var e,n,s=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),e=l.parseOneBox(this.stream,s),e.code===l.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}else return;else{var c;switch(n=e.box,c=n.type!=="uuid"?n.type:n.uuid,this.boxes.push(n),c){case"mdat":this.mdats.push(n);break;case"moof":this.moofs.push(n);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[c]!==void 0&&r.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=n;break}this.updateUsedBytes&&this.updateUsedBytes(n,e)}},v.prototype.checkBuffer=function(e){if(e==null)throw"Buffer must be defined and non empty";if(e.fileStart===void 0)throw"Buffer must have a fileStart property";return e.byteLength===0?(r.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(r.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),this.stream.initialized()?!0:(r.warn("ISOFile","Not ready to start parsing"),!1))},v.prototype.appendBuffer=function(e,n){var s;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(r.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},v.prototype.getInfo=function(){var e,n,s={},c,f,m,p,_=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(_+this.moov.mvhd.creation_time*1e3),s.modified=new Date(_+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(c=this.moov.traks[e],p=c.mdia.minf.stbl.stsd.entries[0],f={},s.tracks.push(f),f.id=c.tkhd.track_id,f.name=c.mdia.hdlr.name,f.references=[],c.tref)for(n=0;n<c.tref.boxes.length;n++)m={},f.references.push(m),m.type=c.tref.boxes[n].type,m.track_ids=c.tref.boxes[n].track_ids;c.edts&&(f.edits=c.edts.elst.entries),f.created=new Date(_+c.tkhd.creation_time*1e3),f.modified=new Date(_+c.tkhd.modification_time*1e3),f.movie_duration=c.tkhd.duration,f.movie_timescale=s.timescale,f.layer=c.tkhd.layer,f.alternate_group=c.tkhd.alternate_group,f.volume=c.tkhd.volume,f.matrix=c.tkhd.matrix,f.track_width=c.tkhd.width/65536,f.track_height=c.tkhd.height/65536,f.timescale=c.mdia.mdhd.timescale,f.cts_shift=c.mdia.minf.stbl.cslg,f.duration=c.mdia.mdhd.duration,f.samples_duration=c.samples_duration,f.codec=p.getCodec(),f.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},f.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,f.nb_samples=c.samples.length,f.size=c.samples_size,f.bitrate=f.size*8*f.timescale/f.samples_duration,p.isAudio()?(f.type="audio",s.audioTracks.push(f),f.audio={},f.audio.sample_rate=p.getSampleRate(),f.audio.channel_count=p.getChannelCount(),f.audio.sample_size=p.getSampleSize()):p.isVideo()?(f.type="video",s.videoTracks.push(f),f.video={},f.video.width=p.getWidth(),f.video.height=p.getHeight()):p.isSubtitle()?(f.type="subtitles",s.subtitleTracks.push(f)):p.isHint()?(f.type="metadata",s.hintTracks.push(f)):p.isMetadata()?(f.type="metadata",s.metadataTracks.push(f)):(f.type="metadata",s.otherTracks.push(f))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',e=0;e<s.tracks.length;e++)e!==0&&(s.mime+=","),s.mime+=s.tracks[e].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},v.prototype.setNextSeekPositionFromSample=function(e){e&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.offset+e.alreadyRead)},v.prototype.processSamples=function(e){var n,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var c=this.fragmentedTracks[n];for(s=c.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Creating media fragment on track #"+c.id+" for sample "+s.nextSample);var f=this.createFragment(c.id,s.nextSample,c.segmentStream);if(f)c.segmentStream=f,s.nextSample++;else break;if((s.nextSample%c.nb_samples===0||e||s.nextSample>=s.samples.length)&&(r.info("ISOFile","Sending fragmented data on track #"+c.id+" for samples ["+Math.max(0,s.nextSample-c.nb_samples)+","+(s.nextSample-1)+"]"),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(c.id,c.user,c.segmentStream.buffer,s.nextSample,e||s.nextSample>=s.samples.length),c.segmentStream=null,c!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var m=this.extractedTracks[n];for(s=m.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Exporting on track #"+m.id+" sample #"+s.nextSample);var p=this.getSample(s,s.nextSample);if(p)s.nextSample++,m.samples.push(p);else{this.setNextSeekPositionFromSample(s.samples[s.nextSample]);break}if((s.nextSample%m.nb_samples===0||s.nextSample>=s.samples.length)&&(r.debug("ISOFile","Sending samples on track #"+m.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(m.id,m.user,m.samples),m.samples=[],m!==this.extractedTracks[n]))break}}}},v.prototype.getBox=function(e){var n=this.getBoxes(e,!0);return n.length?n[0]:null},v.prototype.getBoxes=function(e,n){var s=[];return v._sweep.call(this,e,s,n),s},v._sweep=function(e,n,s){this.type&&this.type==e&&n.push(this);for(var c in this.boxes){if(n.length&&s)return;v._sweep.call(this.boxes[c],e,n,s)}},v.prototype.getTrackSamplesInfo=function(e){var n=this.getTrackById(e);if(n)return n.samples},v.prototype.getTrackSample=function(e,n){var s=this.getTrackById(e),c=this.getSample(s,n);return c},v.prototype.releaseUsedSamples=function(e,n){var s=0,c=this.getTrackById(e);c.lastValidSample||(c.lastValidSample=0);for(var f=c.lastValidSample;f<n;f++)s+=this.releaseSample(c,f);r.info("ISOFile","Track #"+e+" released samples up to "+n+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),c.lastValidSample=n},v.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},v.prototype.stop=function(){this.sampleProcessingStarted=!1},v.prototype.flush=function(){r.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},v.prototype.seekTrack=function(e,n,s){var c,f,m=1/0,p=0,_=0,S;if(s.samples.length===0)return r.info("ISOFile","No sample in track, cannot seek! Using time "+r.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(c=0;c<s.samples.length;c++){if(f=s.samples[c],c===0)_=0,S=f.timescale;else if(f.cts>e*f.timescale){_=c-1;break}n&&f.is_sync&&(p=c)}for(n&&(_=p),e=s.samples[_].cts,s.nextSample=_;s.samples[_].alreadyRead===s.samples[_].size&&s.samples[_+1];)_++;return m=s.samples[_].offset+s.samples[_].alreadyRead,r.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+r.getDurationString(e,S)+" and offset: "+m),{offset:m,time:e/S}},v.prototype.getTrackDuration=function(e){var n;return e.samples?(n=e.samples[e.samples.length-1],(n.cts+n.duration)/n.timescale):1/0},v.prototype.seek=function(e,n){var s=this.moov,c,f,m,p={offset:1/0,time:1/0};if(this.moov){for(m=0;m<s.traks.length;m++)c=s.traks[m],!(e>this.getTrackDuration(c))&&(f=this.seekTrack(e,n,c),f.offset<p.offset&&(p.offset=f.offset),f.time<p.time&&(p.time=f.time));return r.info("ISOFile","Seeking at time "+r.getDurationString(p.time,1)+" needs a buffer with a fileStart position of "+p.offset),p.offset===1/0?p={offset:this.nextParsePosition,time:0}:p.offset=this.stream.getEndFilePositionAfter(p.offset),r.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+p.offset),p}else throw"Cannot seek: moov not received!"},v.prototype.equal=function(e){for(var n=0;n<this.boxes.length&&n<e.boxes.length;){var s=this.boxes[n],c=e.boxes[n];if(!l.boxEqual(s,c))return!1;n++}return!0},t.ISOFile=v,v.prototype.lastBoxStartPosition=0,v.prototype.parsingMdat=null,v.prototype.nextParsePosition=0,v.prototype.discardMdatData=!1,v.prototype.processIncompleteBox=function(e){var n,s,c;return e.type==="mdat"?(n=new l[e.type+"Box"](e.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=e.start,n.hdr_size=e.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,c=this.stream.seek(n.start+n.size,!1,this.discardMdatData),c?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(e.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},v.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},v.prototype.processIncompleteMdat=function(){var e,n;return e=this.parsingMdat,n=this.stream.seek(e.start+e.size,!1,this.discardMdatData),n?(r.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},v.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},v.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},v.prototype.updateUsedBytes=function(e,n){this.stream.addUsedBytes&&(e.type==="mdat"?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},v.prototype.add=l.Box.prototype.add,v.prototype.addBox=l.Box.prototype.addBox,v.prototype.init=function(e){var n=e||{};this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]);var s=this.add("moov");return s.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),s.add("mvex"),this},v.prototype.addTrack=function(e){this.moov||this.init(e);var n=e||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,s.add("tkhd").set("flags",l.TKHD_FLAG_ENABLED|l.TKHD_FLAG_IN_MOVIE|l.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",n.width<<16).set("height",n.height<<16);var c=s.add("mdia");c.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),c.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),c.add("elng").set("extended_language",n.language||"fr-FR");var f=c.add("minf");if(l[n.type+"SampleEntry"]!==void 0){var m=new l[n.type+"SampleEntry"];m.data_reference_index=1;var p="";for(var _ in l.sampleEntryCodes)for(var S=l.sampleEntryCodes[_],w=0;w<S.length;w++)if(S.indexOf(n.type)>-1){p=_;break}switch(p){case"Visual":if(f.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),m.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var x=new l.avcCBox;x.parse(new a(n.avcDecoderConfigRecord)),m.addBox(x)}else if(n.hevcDecoderConfigRecord){var U=new l.hvcCBox;U.parse(new a(n.hevcDecoderConfigRecord)),m.addBox(U)}break;case"Audio":f.add("smhd").set("balance",n.balance||0),m.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||65536);break;case"Hint":f.add("hmhd");break;case"Subtitle":switch(f.add("sthd"),n.type){case"stpp":m.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":f.add("nmhd");break;case"System":f.add("nmhd");break;default:f.add("nmhd");break}n.description&&m.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(E){m.addBox(E)}),f.add("dinf").add("dref").addEntry(new l["url Box"]().set("flags",1));var A=f.add("stbl");return A.add("stsd").addEntry(m),A.add("stts").set("sample_counts",[]).set("sample_deltas",[]),A.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),A.add("stco").set("chunk_offsets",[]),A.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(s),n.id}},l.Box.prototype.computeSize=function(e){var n=e||new o;n.endianness=o.BIG_ENDIAN,this.write(n)},v.prototype.addSample=function(e,n,s){var c=s||{},f={},m=this.getTrackById(e);if(m!==null){f.number=m.samples.length,f.track_id=m.tkhd.track_id,f.timescale=m.mdia.mdhd.timescale,f.description_index=c.sample_description_index?c.sample_description_index-1:0,f.description=m.mdia.minf.stbl.stsd.entries[f.description_index],f.data=n,f.size=n.byteLength,f.alreadyRead=f.size,f.duration=c.duration||1,f.cts=c.cts||0,f.dts=c.dts||0,f.is_sync=c.is_sync||!1,f.is_leading=c.is_leading||0,f.depends_on=c.depends_on||0,f.is_depended_on=c.is_depended_on||0,f.has_redundancy=c.has_redundancy||0,f.degradation_priority=c.degradation_priority||0,f.offset=0,f.subsamples=c.subsamples,m.samples.push(f),m.samples_size+=f.size,m.samples_duration+=f.duration,m.first_dts===void 0&&(m.first_dts=c.dts),this.processSamples();var p=this.createSingleSampleMoof(f);return this.addBox(p),p.computeSize(),p.trafs[0].truns[0].data_offset=p.size+8,this.add("mdat").data=new Uint8Array(n),f}},v.prototype.createSingleSampleMoof=function(e){var n=0;e.is_sync?n=1<<25:n=65536;var s=new l.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=s.add("traf"),f=this.getTrackById(e.track_id);return c.add("tfhd").set("track_id",e.track_id).set("flags",l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",e.dts-(f.first_dts||0)),c.add("trun").set("flags",l.TRUN_FLAGS_DATA_OFFSET|l.TRUN_FLAGS_DURATION|l.TRUN_FLAGS_SIZE|l.TRUN_FLAGS_FLAGS|l.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[e.cts-e.dts]),s},v.prototype.lastMoofIndex=0,v.prototype.samplesDataSize=0,v.prototype.resetTables=function(){var e,n,s,c,f,m,p,_;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){n=this.moov.traks[e],n.tkhd.duration=0,n.mdia.mdhd.duration=0,s=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,s.chunk_offsets=[],c=n.mdia.minf.stbl.stsc,c.first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],f=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,f.sample_sizes=[],m=n.mdia.minf.stbl.stts,m.sample_counts=[],m.sample_deltas=[],p=n.mdia.minf.stbl.ctts,p&&(p.sample_counts=[],p.sample_offsets=[]),_=n.mdia.minf.stbl.stss;var S=n.mdia.minf.stbl.boxes.indexOf(_);S!=-1&&(n.mdia.minf.stbl.boxes[S]=null)}},v.initSampleGroups=function(e,n,s,c,f){var m,p,_,S;function w(x,U,A){this.grouping_type=x,this.grouping_type_parameter=U,this.sbgp=A,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),p=0;p<s.length;p++){for(S=s[p].grouping_type+"/"+s[p].grouping_type_parameter,_=new w(s[p].grouping_type,s[p].grouping_type_parameter,s[p]),n&&(n.sample_groups_info[S]=_),e.sample_groups_info[S]||(e.sample_groups_info[S]=_),m=0;m<c.length;m++)c[m].grouping_type===s[p].grouping_type&&(_.description=c[m],_.description.used=!0);if(f)for(m=0;m<f.length;m++)f[m].grouping_type===s[p].grouping_type&&(_.fragment_description=f[m],_.fragment_description.used=!0,_.is_fragment=!0)}if(n){if(f)for(p=0;p<f.length;p++)!f[p].used&&f[p].version>=2&&(S=f[p].grouping_type+"/0",_=new w(f[p].grouping_type,0),_.is_fragment=!0,n.sample_groups_info[S]||(n.sample_groups_info[S]=_))}else for(p=0;p<c.length;p++)!c[p].used&&c[p].version>=2&&(S=c[p].grouping_type+"/0",_=new w(c[p].grouping_type,0),e.sample_groups_info[S]||(e.sample_groups_info[S]=_))},v.setSampleGroupProperties=function(e,n,s,c){var f,m;n.sample_groups=[];for(f in c)if(n.sample_groups[f]={},n.sample_groups[f].grouping_type=c[f].grouping_type,n.sample_groups[f].grouping_type_parameter=c[f].grouping_type_parameter,s>=c[f].last_sample_in_run&&(c[f].last_sample_in_run<0&&(c[f].last_sample_in_run=0),c[f].entry_index++,c[f].entry_index<=c[f].sbgp.entries.length-1&&(c[f].last_sample_in_run+=c[f].sbgp.entries[c[f].entry_index].sample_count)),c[f].entry_index<=c[f].sbgp.entries.length-1?n.sample_groups[f].group_description_index=c[f].sbgp.entries[c[f].entry_index].group_description_index:n.sample_groups[f].group_description_index=-1,n.sample_groups[f].group_description_index!==0){var p;c[f].fragment_description?p=c[f].fragment_description:p=c[f].description,n.sample_groups[f].group_description_index>0?(n.sample_groups[f].group_description_index>65535?m=(n.sample_groups[f].group_description_index>>16)-1:m=n.sample_groups[f].group_description_index-1,p&&m>=0&&(n.sample_groups[f].description=p.entries[m])):p&&p.version>=2&&p.default_group_description_index>0&&(n.sample_groups[f].description=p.entries[p.default_group_description_index-1])}},v.process_sdtp=function(e,n,s){n&&(e?(n.is_leading=e.is_leading[s],n.depends_on=e.sample_depends_on[s],n.is_depended_on=e.sample_is_depended_on[s],n.has_redundancy=e.sample_has_redundancy[s]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},v.prototype.buildSampleLists=function(){var e,n;for(e=0;e<this.moov.traks.length;e++)n=this.moov.traks[e],this.buildTrakSampleLists(n)},v.prototype.buildTrakSampleLists=function(e){var n,s,c,f,m,p,_,S,w,x,U,A,E,T,P,z,R,D,B,F,O,I,L,M;if(e.samples=[],e.samples_duration=0,e.samples_size=0,s=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,c=e.mdia.minf.stbl.stsc,f=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,m=e.mdia.minf.stbl.stts,p=e.mdia.minf.stbl.ctts,_=e.mdia.minf.stbl.stss,S=e.mdia.minf.stbl.stsd,w=e.mdia.minf.stbl.subs,A=e.mdia.minf.stbl.stdp,x=e.mdia.minf.stbl.sbgps,U=e.mdia.minf.stbl.sgpds,D=-1,B=-1,F=-1,O=-1,I=0,L=0,M=0,v.initSampleGroups(e,null,x,U),!(typeof f>"u")){for(n=0;n<f.sample_sizes.length;n++){var k={};k.number=n,k.track_id=e.tkhd.track_id,k.timescale=e.mdia.mdhd.timescale,k.alreadyRead=0,e.samples[n]=k,k.size=f.sample_sizes[n],e.samples_size+=k.size,n===0?(T=1,E=0,k.chunk_index=T,k.chunk_run_index=E,R=c.samples_per_chunk[E],z=0,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0):n<R?(k.chunk_index=T,k.chunk_run_index=E):(T++,k.chunk_index=T,z=0,T<=P||(E++,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0),k.chunk_run_index=E,R+=c.samples_per_chunk[E]),k.description_index=c.sample_description_index[k.chunk_run_index]-1,k.description=S.entries[k.description_index],k.offset=s.chunk_offsets[k.chunk_index-1]+z,z+=k.size,n>D&&(B++,D<0&&(D=0),D+=m.sample_counts[B]),n>0?(e.samples[n-1].duration=m.sample_deltas[B],e.samples_duration+=e.samples[n-1].duration,k.dts=e.samples[n-1].dts+e.samples[n-1].duration):k.dts=0,p?(n>=F&&(O++,F<0&&(F=0),F+=p.sample_counts[O]),k.cts=e.samples[n].dts+p.sample_offsets[O]):k.cts=k.dts,_?(n==_.sample_numbers[I]-1?(k.is_sync=!0,I++):(k.is_sync=!1,k.degradation_priority=0),w&&w.entries[L].sample_delta+M==n+1&&(k.subsamples=w.entries[L].subsamples,M+=w.entries[L].sample_delta,L++)):k.is_sync=!0,v.process_sdtp(e.mdia.minf.stbl.sdtp,k,k.number),A?k.degradation_priority=A.priority[n]:k.degradation_priority=0,w&&w.entries[L].sample_delta+M==n&&(k.subsamples=w.entries[L].subsamples,M+=w.entries[L].sample_delta),(x.length>0||U.length>0)&&v.setSampleGroupProperties(e,k,n,e.sample_groups_info)}n>0&&(e.samples[n-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[n-1].dts,0),e.samples_duration+=e.samples[n-1].duration)}},v.prototype.updateSampleLists=function(){var e,n,s,c,f,m,p,_,S,w,x,U,A,E,T;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(S=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,S.type=="moof")for(w=S,e=0;e<w.trafs.length;e++){for(x=w.trafs[e],U=this.getTrackById(x.tfhd.track_id),A=this.getTrexById(x.tfhd.track_id),x.tfhd.flags&l.TFHD_FLAG_SAMPLE_DESC?c=x.tfhd.default_sample_description_index:c=A?A.default_sample_description_index:1,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_DUR?f=x.tfhd.default_sample_duration:f=A?A.default_sample_duration:0,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_SIZE?m=x.tfhd.default_sample_size:m=A?A.default_sample_size:0,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_FLAGS?p=x.tfhd.default_sample_flags:p=A?A.default_sample_flags:0,x.sample_number=0,x.sbgps.length>0&&v.initSampleGroups(U,x,x.sbgps,U.mdia.minf.stbl.sgpds,x.sgpds),n=0;n<x.truns.length;n++){var P=x.truns[n];for(s=0;s<P.sample_count;s++){E={},E.moof_number=this.lastMoofIndex,E.number_in_traf=x.sample_number,x.sample_number++,E.number=U.samples.length,x.first_sample_index=U.samples.length,U.samples.push(E),E.track_id=U.tkhd.track_id,E.timescale=U.mdia.mdhd.timescale,E.description_index=c-1,E.description=U.mdia.minf.stbl.stsd.entries[E.description_index],E.size=m,P.flags&l.TRUN_FLAGS_SIZE&&(E.size=P.sample_size[s]),U.samples_size+=E.size,E.duration=f,P.flags&l.TRUN_FLAGS_DURATION&&(E.duration=P.sample_duration[s]),U.samples_duration+=E.duration,U.first_traf_merged||s>0?E.dts=U.samples[U.samples.length-2].dts+U.samples[U.samples.length-2].duration:(x.tfdt?E.dts=x.tfdt.baseMediaDecodeTime:E.dts=0,U.first_traf_merged=!0),E.cts=E.dts,P.flags&l.TRUN_FLAGS_CTS_OFFSET&&(E.cts=E.dts+P.sample_composition_time_offset[s]),T=p,P.flags&l.TRUN_FLAGS_FLAGS?T=P.sample_flags[s]:s===0&&P.flags&l.TRUN_FLAGS_FIRST_FLAG&&(T=P.first_sample_flags),E.is_sync=!(T>>16&1),E.is_leading=T>>26&3,E.depends_on=T>>24&3,E.is_depended_on=T>>22&3,E.has_redundancy=T>>20&3,E.degradation_priority=T&65535;var z=!!(x.tfhd.flags&l.TFHD_FLAG_BASE_DATA_OFFSET),R=!!(x.tfhd.flags&l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),D=!!(P.flags&l.TRUN_FLAGS_DATA_OFFSET),B=0;z?B=x.tfhd.base_data_offset:R||n===0?B=w.start:B=_,n===0&&s===0?D?E.offset=B+P.data_offset:E.offset=B:E.offset=_,_=E.offset+E.size,(x.sbgps.length>0||x.sgpds.length>0||U.mdia.minf.stbl.sbgps.length>0||U.mdia.minf.stbl.sgpds.length>0)&&v.setSampleGroupProperties(U,E,E.number_in_traf,x.sample_groups_info)}}if(x.subs){U.has_fragment_subsamples=!0;var F=x.first_sample_index;for(n=0;n<x.subs.entries.length;n++)F+=x.subs.entries[n].sample_delta,E=U.samples[F-1],E.subsamples=x.subs.entries[n].subsamples}}}},v.prototype.getSample=function(e,n){var s,c=e.samples[n];if(!this.moov)return null;if(!c.data)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.samplesDataSize+=c.size,r.debug("ISOFile","Allocating sample #"+n+" on track #"+e.tkhd.track_id+" of size "+c.size+" (total: "+this.samplesDataSize+")");else if(c.alreadyRead==c.size)return c;for(;;){var f=this.stream.findPosition(!0,c.offset+c.alreadyRead,!1);if(f>-1){s=this.stream.buffers[f];var m=s.byteLength-(c.offset+c.alreadyRead-s.fileStart);if(c.size-c.alreadyRead<=m)return r.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+(c.size-c.alreadyRead)+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,c.size-c.alreadyRead),s.usedBytes+=c.size-c.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead=c.size,c;if(m===0)return null;r.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+m+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,m),c.alreadyRead+=m,s.usedBytes+=m,this.stream.logBufferLevel()}else return null}},v.prototype.releaseSample=function(e,n){var s=e.samples[n];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},v.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},v.prototype.getCodecs=function(){var e,n="";for(e=0;e<this.moov.traks.length;e++){var s=this.moov.traks[e];e>0&&(n+=","),n+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},v.prototype.getTrexById=function(e){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var s=this.moov.mvex.trexs[n];if(s.track_id==e)return s}return null},v.prototype.getTrackById=function(e){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var s=this.moov.traks[n];if(s.tkhd.track_id==e)return s}return null},v.prototype.items=[],v.prototype.itemsDataSize=0,v.prototype.flattenItemInfo=function(){var e=this.items,n,s,c,f=this.meta;if(f!=null&&f.hdlr!==void 0&&f.iinf!==void 0){for(n=0;n<f.iinf.item_infos.length;n++)c={},c.id=f.iinf.item_infos[n].item_ID,e[c.id]=c,c.ref_to=[],c.name=f.iinf.item_infos[n].item_name,f.iinf.item_infos[n].protection_index>0&&(c.protection=f.ipro.protections[f.iinf.item_infos[n].protection_index-1]),f.iinf.item_infos[n].item_type?c.type=f.iinf.item_infos[n].item_type:c.type="mime",c.content_type=f.iinf.item_infos[n].content_type,c.content_encoding=f.iinf.item_infos[n].content_encoding;if(f.iloc)for(n=0;n<f.iloc.items.length;n++){var m=f.iloc.items[n];switch(c=e[m.item_ID],m.data_reference_index!==0&&(r.warn("Item storage with reference to other files: not supported"),c.source=f.dinf.boxes[m.data_reference_index-1]),m.construction_method){case 0:break;case 1:r.warn("Item storage with construction_method : not supported");break;case 2:r.warn("Item storage with construction_method : not supported");break}for(c.extents=[],c.size=0,s=0;s<m.extents.length;s++)c.extents[s]={},c.extents[s].offset=m.extents[s].extent_offset+m.base_offset,c.extents[s].length=m.extents[s].extent_length,c.extents[s].alreadyRead=0,c.size+=c.extents[s].length}if(f.pitm&&(e[f.pitm.item_id].primary=!0),f.iref)for(n=0;n<f.iref.references.length;n++){var p=f.iref.references[n];for(s=0;s<p.references.length;s++)e[p.from_item_ID].ref_to.push({type:p.type,id:p.references[s]})}if(f.iprp)for(var _=0;_<f.iprp.ipmas.length;_++){var S=f.iprp.ipmas[_];for(n=0;n<S.associations.length;n++){var w=S.associations[n];for(c=e[w.id],c.properties===void 0&&(c.properties={},c.properties.boxes=[]),s=0;s<w.props.length;s++){var x=w.props[s];if(x.property_index>0&&x.property_index-1<f.iprp.ipco.boxes.length){var U=f.iprp.ipco.boxes[x.property_index-1];c.properties[U.type]=U,c.properties.boxes.push(U)}}}}}},v.prototype.getItem=function(e){var n,s;if(!this.meta)return null;if(s=this.items[e],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,r.debug("ISOFile","Allocating item #"+e+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var c=0;c<s.extents.length;c++){var f=s.extents[c];if(f.alreadyRead!==f.length){var m=this.stream.findPosition(!0,f.offset+f.alreadyRead,!1);if(m>-1){n=this.stream.buffers[m];var p=n.byteLength-(f.offset+f.alreadyRead-n.fileStart);if(f.length-f.alreadyRead<=p)r.debug("ISOFile","Getting item #"+e+" extent #"+c+" data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+(f.length-f.alreadyRead)+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,f.length-f.alreadyRead),n.usedBytes+=f.length-f.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=f.length-f.alreadyRead,f.alreadyRead=f.length;else return r.debug("ISOFile","Getting item #"+e+" extent #"+c+" partial data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+p+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,p),f.alreadyRead+=p,s.alreadyRead+=p,n.usedBytes+=p,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},v.prototype.releaseItem=function(e){var n=this.items[e];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var s=0;s<n.extents.length;s++){var c=n.extents[s];c.alreadyRead=0}return n.size}else return 0},v.prototype.processItems=function(e){for(var n in this.items){var s=this.items[n];this.getItem(s.id),e&&!s.sent&&(e(s),s.sent=!0,s.data=null)}},v.prototype.hasItem=function(e){for(var n in this.items){var s=this.items[n];if(s.name===e)return s.id}return-1},v.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},v.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},v.prototype.itemToFragmentedTrackFile=function(e){var n=e||{},s=null;if(n.itemId?s=this.getItem(n.itemId):s=this.getPrimaryItem(),s==null)return null;var c=new v;c.discardMdatData=!1;var f={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(f.width=s.properties.ispe.image_width,f.height=s.properties.ispe.image_height);var m=c.addTrack(f);return m?(c.addSample(m,s.data),c):null},v.prototype.write=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e)},v.prototype.createFragment=function(e,n,s){var c=this.getTrackById(e),f=this.getSample(c,n);if(f==null)return this.setNextSeekPositionFromSample(c.samples[n]),null;var m=s||new o;m.endianness=o.BIG_ENDIAN;var p=this.createSingleSampleMoof(f);p.write(m),p.trafs[0].truns[0].data_offset=p.size+8,r.debug("MP4Box","Adjusting data_offset with new value "+p.trafs[0].truns[0].data_offset),m.adjustUint32(p.trafs[0].truns[0].data_offset_position,p.trafs[0].truns[0].data_offset);var _=new l.mdatBox;return _.data=f.data,_.write(m),m},v.writeInitializationSegment=function(e,n,s,c){var f;r.debug("ISOFile","Generating initialization segment");var m=new o;m.endianness=o.BIG_ENDIAN,e.write(m);var p=n.add("mvex");for(s&&p.add("mehd").set("fragment_duration",s),f=0;f<n.traks.length;f++)p.add("trex").set("track_id",n.traks[f].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",c).set("default_sample_size",0).set("default_sample_flags",65536);return n.write(m),m.buffer},v.prototype.save=function(e){var n=new o;n.endianness=o.BIG_ENDIAN,this.write(n),n.save(e)},v.prototype.getBuffer=function(){var e=new o;return e.endianness=o.BIG_ENDIAN,this.write(e),e.buffer},v.prototype.initializeSegmentation=function(){var e,n,s,c;for(this.onSegment===null&&r.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),n=[],e=0;e<this.fragmentedTracks.length;e++){var f=new l.moovBox;f.mvhd=this.moov.mvhd,f.boxes.push(f.mvhd),s=this.getTrackById(this.fragmentedTracks[e].id),f.boxes.push(s),f.traks.push(s),c={},c.id=s.tkhd.track_id,c.user=this.fragmentedTracks[e].user,c.buffer=v.writeInitializationSegment(this.ftyp,f,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[e].samples.length>0?this.moov.traks[e].samples[0].duration:0),n.push(c)}return n},l.Box.prototype.printHeader=function(e){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},l.FullBox.prototype.printHeader=function(e){this.size+=4,l.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},l.Box.prototype.print=function(e){this.printHeader(e)},l.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var s=e.indent;e.indent+=" ",this.boxes[n].print(e),e.indent=s}},v.prototype.print=function(e){e.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(e)},l.mvhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},l.tkhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)};var b={};b.createFile=function(e,n){var s=e!==void 0?e:!0,c=new v(n);return c.discardMdatData=!s,c},t.createFile=b.createFile})(YI);const Xh={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2"};var fs,Zi,$n,Xo,Vi,ja,Qh,ax;const Su=class{constructor(r,a={}){_i(this,Qh),Dt(this,"ready"),_i(this,fs,{duration:0,width:0,height:0}),_i(this,Zi,new Float32Array),_i(this,$n,new Float32Array),_i(this,Xo,0),_i(this,Vi,0),_i(this,ja,void 0),wi(this,ja,{loop:!1,volume:1,...a}),this.ready=NI(this,Qh,ax).call(this,r).then(()=>({width:0,height:0,duration:a.loop?1/0:Fe(this,fs).duration}))}getPCMData(){return[Fe(this,Zi),Fe(this,$n)]}async tick(r){if(r<Fe(this,Xo))throw Error("time not allow rollback");if(!Fe(this,ja).loop&&r>=Fe(this,fs).duration)return{audio:[],state:"done"};const a=r-Fe(this,Xo);wi(this,Xo,r);const o=Math.ceil(a*(Xh.sampleRate/1e6)),u=Fe(this,Vi)+o,d=Fe(this,ja).loop?[S_(Fe(this,Zi),Fe(this,Vi),u),S_(Fe(this,$n),Fe(this,Vi),u)]:[Fe(this,Zi).slice(Fe(this,Vi),u),Fe(this,$n).slice(Fe(this,Vi),u)];return wi(this,Vi,u),{audio:d,state:"success"}}destroy(){wi(this,Zi,new Float32Array(0)),wi(this,$n,new Float32Array(0)),la.info("---- audioclip destroy ----")}};let WI=Su;fs=new WeakMap,Zi=new WeakMap,$n=new WeakMap,Xo=new WeakMap,Vi=new WeakMap,ja=new WeakMap,Qh=new WeakSet,ax=async function(t){Su.ctx==null&&(Su.ctx=new AudioContext({sampleRate:Xh.sampleRate}));const r=performance.now(),a=t instanceof ReadableStream?await qI(t,Su.ctx):t;la.info("Audio clip decoded complete:",performance.now()-r);const o=Fe(this,ja).volume;if(o!==1)for(const u of a)for(let d=0;d<u.length;d+=1)u[d]*=o;Fe(this,fs).duration=a[0].length/Xh.sampleRate*1e6,wi(this,Zi,a[0]),wi(this,$n,a[1]??Fe(this,Zi)),la.info("Audio clip convert to AudioData, time:",performance.now()-r)},Dt(WI,"ctx",null);async function qI(t,r){const a=await new Response(t).arrayBuffer();return VI(await r.decodeAudioData(a))}const KI=["t","b","l","r","lt","lb","rt","rb","rotate"],Sr=class{constructor(t,r,a,o,u){Dt(this,"x",0),Dt(this,"y",0),Dt(this,"w",0),Dt(this,"h",0),Dt(this,"angle",0),Dt(this,"master",null),this.x=t??0,this.y=r??0,this.w=a??0,this.h=o??0,this.master=u??null}get center(){const{x:t,y:r,w:a,h:o}=this;return{x:t+a/2,y:r+o/2}}get ctrls(){const{w:t,h:r}=this,a=Sr.CTRL_SIZE,o=a/2,u=t/2,d=r/2,h=a*1.5,l=h/2;return{t:new Sr(-o,-d-o,a,a,this),b:new Sr(-o,d-o,a,a,this),l:new Sr(-u-o,-o,a,a,this),r:new Sr(u-o,-o,a,a,this),lt:new Sr(-u-o,-d-o,a,a,this),lb:new Sr(-u-o,d-o,a,a,this),rt:new Sr(u-o,-d-o,a,a,this),rb:new Sr(u-o,d-o,a,a,this),rotate:new Sr(-l,-d-a*2-l,h,h,this)}}clone(){const{x:t,y:r,w:a,h:o,master:u}=this;return new Sr(t,r,a,o,u)}checkHit(t,r){let{angle:a,center:o,x:u,y:d,w:h,h:l,master:g}=this;const y=(g==null?void 0:g.center)??o,v=(g==null?void 0:g.angle)??a;g==null&&(u=u-y.x,d=d-y.y);const b=t-y.x,e=r-y.y;let n=b,s=e;return v!==0&&(n=b*Math.cos(v)+e*Math.sin(v),s=e*Math.cos(v)-b*Math.sin(v)),!(n<u||n>u+h||s<d||s>d+l)}};let Im=Sr;Dt(Im,"CTRL_SIZE",16);var Qo,Mn;let XI=class{constructor(r){Dt(this,"rect",new Im),Dt(this,"visible",!0),Dt(this,"zIndex",0),Dt(this,"opacity",1),Dt(this,"flip",null),_i(this,Qo,null),_i(this,Mn,null),Dt(this,"audioNode",null),Dt(this,"initReady",Promise.resolve()),this.name=r}render(r){const{rect:{center:a,angle:o}}=this;r.setTransform(this.flip==="horizontal"?-1:1,0,0,this.flip==="vertical"?-1:1,a.x,a.y),r.rotate((this.flip==null?1:-1)*o),r.globalAlpha=this.opacity}setAnimation(r,a){wi(this,Qo,Object.entries(r).map(([o,u])=>{const d={from:0,to:100}[o]??Number(o.slice(0,-1));if(isNaN(d)||d>100||d<0)throw Error("keyFrame must between 0~100");return[d/100,u]})),wi(this,Mn,Object.assign({},Fe(this,Mn),{duration:a.duration*1e6,delay:(a.delay??0)*1e6,iterCount:a.iterCount??1/0}))}animate(r){if(Fe(this,Qo)==null||Fe(this,Mn)==null||r<Fe(this,Mn).delay)return;const a=QI(r,Fe(this,Qo),Fe(this,Mn));for(const o in a)switch(o){case"opacity":this.opacity=a[o];break;case"x":case"y":case"w":case"h":case"angle":this.rect[o]=a[o];break}}};Qo=new WeakMap,Mn=new WeakMap;function QI(t,r,a){if(t/a.duration>=a.iterCount)return{};const o=t%a.duration,u=t===a.duration?1:o/a.duration,d=r.findIndex(e=>e[0]>=u);if(d===-1)return{};const h=r[d-1],l=r[d],g=l[1];if(h==null)return g;const y=h[1],v={},b=(u-h[0])/(l[0]-h[0]);for(const e in g){const n=e;y[n]!=null&&(v[n]=(g[n]-y[n])*b+y[n])}return v}function oc(t){return document.createElement(t)}var Yi;let ZI=class{constructor(){sr(this,Yi,new Map),eo(this,"on",(r,a)=>{const o=se(this,Yi).get(r)??new Set;return o.add(a),se(this,Yi).has(r)||se(this,Yi).set(r,o),()=>{o.delete(a),o.size===0&&se(this,Yi).delete(r)}}),eo(this,"emit",(r,...a)=>{const o=se(this,Yi).get(r);o!=null&&o.forEach(u=>u(...a))})}destroy(){se(this,Yi).clear()}};Yi=new WeakMap;var el=(t=>(t.ActiveSpriteChange="activeSpriteChange",t.AddSprite="addSprite",t))(el||{}),xr,Zo,Aa,Zh,ox;class JI{constructor(){sr(this,Zh),sr(this,xr,[]),sr(this,Zo,null),sr(this,Aa,new ZI),eo(this,"audioCtx",new AudioContext),eo(this,"audioMSDest",this.audioCtx.createMediaStreamDestination()),eo(this,"on",se(this,Aa).on),ac(this,Zh,ox).call(this)}get activeSprite(){return se(this,Zo)}set activeSprite(r){r!==se(this,Zo)&&(ti(this,Zo,r),se(this,Aa).emit("activeSpriteChange",r))}async addSprite(r){var a;await r.initReady,se(this,xr).push(r),ti(this,xr,se(this,xr).sort((o,u)=>o.zIndex-u.zIndex)),(a=r.audioNode)==null||a.connect(this.audioMSDest),se(this,Aa).emit("addSprite",r)}sortSprite(){ti(this,xr,se(this,xr).sort((r,a)=>r.zIndex-a.zIndex))}removeSprite(r){ti(this,xr,se(this,xr).filter(a=>a!==r)),r.destroy()}getSprites(){return[...se(this,xr)]}destroy(){se(this,Aa).destroy(),se(this,xr).forEach(r=>r.destroy()),ti(this,xr,[]),this.audioMSDest.disconnect(),this.audioCtx.close().catch(console.error)}}xr=new WeakMap,Zo=new WeakMap,Aa=new WeakMap,Zh=new WeakSet,ox=function(){const t=this.audioCtx.createOscillator(),r=this.audioCtx.createPeriodicWave(new Float32Array([0,0]),new Float32Array([0,0]),{disableNormalization:!0});t.setPeriodicWave(r),t.connect(this.audioMSDest),t.start()};function eB(t,r,a){const o={w:r.clientWidth/r.width,h:r.clientHeight/r.height},u=new ResizeObserver(()=>{o.w=r.clientWidth/r.width,o.h=r.clientHeight/r.height,a.activeSprite!=null&&hf(a.activeSprite,d,h,o)});u.observe(r);const{rectEl:d,ctrlsEl:h}=tB(t),l=a.on(el.ActiveSpriteChange,e=>{if(e==null){d.style.display="none";return}hf(e,d,h,o),d.style.display=""});let g=!1;const y=e=>{e.button===0&&(g=!0)},v=()=>{g=!1},b=()=>{!g||a.activeSprite==null||hf(a.activeSprite,d,h,o)};return r.addEventListener("mousedown",y),window.addEventListener("mouseup",v),window.addEventListener("mousemove",b),()=>{u.disconnect(),l(),d.remove(),r.removeEventListener("mousedown",y),window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",b)}}function tB(t){const r=oc("div");r.style.cssText=`
    position: absolute;
    pointer-events: none;
    border: 1px solid #eee;
    box-sizing: border-box;
    display: none;
  `;const a=Object.fromEntries(KI.map(o=>{const u=oc("div");return u.style.cssText=`
      position: absolute;
      border: 1px solid #3ee;
      box-sizing: border-box;
      border-radius: 50%;
      background-color: #fff;
    `,[o,u]}));return Object.values(a).forEach(o=>r.appendChild(o)),t.appendChild(r),{rectEl:r,ctrlsEl:a}}function hf(t,r,a,o){const{x:u,y:d,w:h,h:l,angle:g,ctrls:y}=t.rect;Object.assign(r.style,{left:`${u*o.w}px`,top:`${d*o.h}px`,width:`${h*o.w}px`,height:`${l*o.h}px`,rotate:`${g}rad`}),Object.entries(y).forEach(([v,{x:b,y:e,w:n,h:s}])=>{Object.assign(a[v].style,{left:"50%",top:"50%",width:`${n*o.w}px`,height:`${s*o.h}px`,transform:`translate(${b*o.w}px, ${e*o.h}px)`})})}function rB(t,r){const a={w:t.clientWidth/t.width,h:t.clientHeight/t.height},o=new ResizeObserver(()=>{a.w=t.clientWidth/t.width,a.h=t.clientHeight/t.height});o.observe(t);let u=r.getSprites().reverse();const d=r.on(el.AddSprite,()=>{u=r.getSprites().reverse()}),h=l=>{if(l.button!==0)return;const{offsetX:g,offsetY:y}=l,v=g/a.w,b=y/a.h;if(r.activeSprite!=null){const[e]=Object.entries(r.activeSprite.rect.ctrls).find(([,n])=>n.checkHit(v,b))??[];if(e!=null)return}r.activeSprite=u.find(e=>e.rect.checkHit(v,b))??null};return t.addEventListener("mousedown",h),()=>{o.disconnect(),d(),t.removeEventListener("mousedown",h)}}function iB(t,r){const a={w:t.clientWidth/t.width,h:t.clientHeight/t.height},o=new ResizeObserver(()=>{a.w=t.clientWidth/t.width,a.h=t.clientHeight/t.height});o.observe(t);let u=0,d=0,h=null,l=null,g=null;const y=e=>{if(e.button!==0||r.activeSprite==null)return;g=r.activeSprite;const{offsetX:n,offsetY:s,clientX:c,clientY:f}=e;sB({rect:g.rect,offsetX:n,offsetY:s,clientX:c,clientY:f,cvsRatio:a,cvsEl:t})||(h=g.rect.clone(),l={xl:-h.w+10,xr:t.width-10,yt:-h.h+10,yb:t.height-10},u=c,d=f,window.addEventListener("mousemove",v),window.addEventListener("mouseup",b))},v=e=>{if(g==null||h==null||l==null)return;const{clientX:n,clientY:s}=e;let c=h.x+(n-u)/a.w,f=h.y+(s-d)/a.h;c=c<=l.xl?l.xl:c>=l.xr?l.xr:c,f=f<=l.yt?l.yt:f>=l.yb?l.yb:f,g.rect.x=c,g.rect.y=f};t.addEventListener("mousedown",y);const b=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",b)};return()=>{o.disconnect(),b(),t.removeEventListener("mousedown",y)}}function nB({sprRect:t,startX:r,startY:a,ctrlKey:o,cvsRatio:u}){const d=t.clone(),h=g=>{const{clientX:y,clientY:v}=g,b=(y-r)/u.w,e=(v-a)/u.h,n=o.length===1?aB:oB,{x:s,y:c,w:f,h:m}=d,p=Math.atan2(m,f),{incW:_,incH:S,incS:w,rotateAngle:x}=n({deltaX:b,deltaY:e,angle:t.angle,ctrlKey:o,diagonalAngle:p}),U=10;let A=f+_;A=A<U?U:A;let E=m+S;E=E<U?U:E;const T=w/2*Math.cos(x)+s+f/2,P=w/2*Math.sin(x)+c+m/2,z=T-A/2,R=P-E/2;t.x=z,t.y=R,t.w=A,t.h=E},l=()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",l)};window.addEventListener("mousemove",h),window.addEventListener("mouseup",l)}function aB({deltaX:t,deltaY:r,angle:a,ctrlKey:o}){let u=0,d=0,h=0,l=a;return o==="l"||o==="r"?(u=t*Math.cos(a)+r*Math.sin(a),d=u*(o==="l"?-1:1)):(o==="t"||o==="b")&&(l=a-Math.PI/2,u=t*Math.cos(l)+r*Math.sin(l),h=u*(o==="b"?-1:1)),{incW:d,incH:h,incS:u,rotateAngle:l}}function oB({deltaX:t,deltaY:r,angle:a,ctrlKey:o,diagonalAngle:u}){const d=(o==="lt"||o==="rb"?1:-1)*u+a,h=t*Math.cos(d)+r*Math.sin(d),l=o==="lt"||o==="lb"?-1:1,g=h*Math.cos(u)*l,y=h*Math.sin(u)*l;return{incW:g,incH:y,incS:h,rotateAngle:d}}function sB({rect:t,cvsRatio:r,offsetX:a,offsetY:o,clientX:u,clientY:d,cvsEl:h}){const l=a/r.w,g=o/r.h,[y]=Object.entries(t.ctrls).find(([,v])=>v.checkHit(l,g))??[];return y==null?!1:(y==="rotate"?lB(t,uB(t.center,r,h)):nB({sprRect:t,ctrlKey:y,startX:u,startY:d,cvsRatio:r}),!0)}function lB(t,r){const a=({clientX:u,clientY:d})=>{const h=u-r.x,l=d-r.y,g=Math.atan2(l,h)+Math.PI/2;t.angle=g},o=()=>{window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",a),window.addEventListener("mouseup",o)}function uB(t,r,a){const o=t.x*r.w,u=t.y*r.h,{left:d,top:h}=a.getBoundingClientRect();return{x:o+d,y:u+h}}function cB(t){const r=oc("canvas");return r.style.cssText=`
    width: 100%;
    height: 100%;
  `,r.width=t.width,r.height=t.height,r}var Nt,Va,xu,wu,Jh,sx;class dB{constructor(r,a){sr(this,Jh),sr(this,Nt,void 0),eo(this,"spriteManager"),sr(this,Va,void 0),sr(this,xu,!1),sr(this,wu,[]),ti(this,Nt,cB(a.resolution));const o=se(this,Nt).getContext("2d",{alpha:!1});if(o==null)throw Error("canvas context is null");ti(this,Va,o),r.appendChild(se(this,Nt)),Im.CTRL_SIZE=14/(se(this,Nt).clientWidth/se(this,Nt).width),this.spriteManager=new JI,se(this,wu).push(rB(se(this,Nt),this.spriteManager),fB(se(this,Nt),this.spriteManager),iB(se(this,Nt),this.spriteManager),eB(r,se(this,Nt),this.spriteManager),this.spriteManager.on(el.AddSprite,d=>{const{rect:h}=d;h.x===0&&h.y===0&&(h.x=(se(this,Nt).width-h.w)/2,h.y=(se(this,Nt).height-h.h)/2)}));const u=()=>{se(this,xu)||(se(this,Va).fillStyle=a.bgColor,se(this,Va).fillRect(0,0,a.resolution.width,a.resolution.height),ac(this,Jh,sx).call(this),requestAnimationFrame(u))};u()}destroy(){ti(this,xu,!0),se(this,Nt).remove(),se(this,wu).forEach(r=>r()),this.spriteManager.destroy()}captureStream(){const r=new MediaStream;return se(this,Nt).captureStream().getTracks().concat(this.spriteManager.audioMSDest.stream.getTracks()).forEach(a=>{r.addTrack(a)}),r}}Nt=new WeakMap,Va=new WeakMap,xu=new WeakMap,wu=new WeakMap,Jh=new WeakSet,sx=function(){const t=se(this,Va);this.spriteManager.getSprites().forEach(r=>r.render(t)),t.resetTransform()};function fB(t,r){const a={w:t.clientWidth/t.width,h:t.clientHeight/t.height},o=new ResizeObserver(()=>{a.w=t.clientWidth/t.width,a.h=t.clientHeight/t.height});o.observe(t);const u=t.style;let d=r.activeSprite;r.on(el.ActiveSpriteChange,e=>{d=e,e==null&&(u.cursor="")});let h=!1;const l=({offsetX:e,offsetY:n})=>{h=!0;const s=e/a.w,c=n/a.h;(d==null?void 0:d.rect.checkHit(s,c))===!0&&u.cursor===""&&(u.cursor="move")},g=()=>{h=!1},y=["ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize"],v={t:0,rt:1,r:2,rb:3,b:4,lb:5,l:6,lt:7},b=e=>{if(d==null||h)return;const{offsetX:n,offsetY:s}=e,c=n/a.w,f=s/a.h,[m]=Object.entries(d.rect.ctrls).find(([,p])=>p.checkHit(c,f))??[];if(m!=null){if(m==="rotate"){u.cursor="crosshair";return}const p=d.rect.angle,_=p<0?p+2*Math.PI:p,S=(v[m]+Math.floor((_+Math.PI/8)/(Math.PI/4)))%8;u.cursor=y[S];return}if(d.rect.checkHit(c,f)){u.cursor="move";return}u.cursor=""};return t.addEventListener("mousemove",b),t.addEventListener("mousedown",l),window.addEventListener("mouseup",g),()=>{o.disconnect(),t.removeEventListener("mousemove",b),t.removeEventListener("mousedown",l),window.removeEventListener("mouseup",g)}}var gi,ep,lx,tp,ux;class x_ extends XI{constructor(r,a,o={}){super(r),sr(this,ep),sr(this,tp),sr(this,gi,null),this.initReady=(a instanceof MediaStream?ac(this,ep,lx).call(this,a,o):ac(this,tp,ux).call(this,a,o)).then(({videoEl:u,audioSource:d})=>{u.loop=!0,this.rect.w=u.videoWidth,this.rect.h=u.videoHeight,ti(this,gi,u),d!=null&&o.audioCtx!=null&&(this.audioNode=o.audioCtx.createGain(),d.connect(this.audioNode))})}render(r){if(se(this,gi)==null)return;super.render(r);const{w:a,h:o}=this.rect;r.drawImage(se(this,gi),-a/2,-o/2,a,o)}get volume(){var r;return((r=this.audioNode)==null?void 0:r.gain.value)??0}set volume(r){this.audioNode!=null&&(this.audioNode.gain.value=r)}destroy(){var r,a,o;(r=se(this,gi))==null||r.remove(),((a=se(this,gi))==null?void 0:a.src)!=null&&URL.revokeObjectURL(se(this,gi).src),ti(this,gi,null),(o=this.audioNode)==null||o.disconnect()}}gi=new WeakMap,ep=new WeakSet,lx=async function(t,r){const a=new MediaStream;t.getAudioTracks().forEach(d=>{t.removeTrack(d),a.addTrack(d)});const o=await hB(t);await o.play();let u=null;return r.audioCtx!=null&&a.getAudioTracks().length>0&&(u=r.audioCtx.createMediaStreamSource(a)),{videoEl:o,audioSource:u}},tp=new WeakSet,ux=async function(t,r){if(!["video/mp4","video/webm"].includes(t.type))throw Error("Unsupport video format");const a=oc("video");a.src=URL.createObjectURL(t),await a.play();let o=null;return r.audioCtx!=null&&(o=r.audioCtx.createMediaElementSource(a)),{videoEl:a,audioSource:o}};async function hB(t){const r=document.createElement("video");let a;return r.srcObject=t,await new Promise((o,u)=>{let d=!1;r.addEventListener("loadeddata",()=>{d||(clearTimeout(a),o(r))}),a=window.setTimeout(()=>{d=!0,u(new Error("video load failed"))},2e3)})}var cx={};(function(t){var r=function(){var e=new Date,n=4,s=3,c=2,f=1,m=n,p={setLogLevel:function(_){_==this.debug?m=f:_==this.info?m=c:_==this.warn?m=s:(_==this.error,m=n)},debug:function(_,S){console.debug===void 0&&(console.debug=console.log),f>=m&&console.debug("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},log:function(_,S){this.debug(_.msg)},info:function(_,S){c>=m&&console.info("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},warn:function(_,S){s>=m&&console.warn("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},error:function(_,S){n>=m&&console.error("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)}};return p}();r.getDurationString=function(e,n){var s;function c(w,x){for(var U=""+w,A=U.split(".");A[0].length<x;)A[0]="0"+A[0];return A.join(".")}e<0?(s=!0,e=-e):s=!1;var f=n||1,m=e/f,p=Math.floor(m/3600);m-=p*3600;var _=Math.floor(m/60);m-=_*60;var S=m*1e3;return m=Math.floor(m),S-=m*1e3,S=Math.floor(S),(s?"-":"")+p+":"+c(_,2)+":"+c(m,2)+"."+c(S,3)},r.printRanges=function(e){var n=e.length;if(n>0){for(var s="",c=0;c<n;c++)c>0&&(s+=","),s+="["+r.getDurationString(e.start(c))+","+r.getDurationString(e.end(c))+"]";return s}else return"(empty)"},t.Log=r;var a=function(e){if(e instanceof ArrayBuffer)this.buffer=e,this.dataview=new DataView(e);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(e){var n=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(e,n){var s=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:n?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:n?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,s}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var n="",s=0;s<e;s++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var e=[];;){var n=this.readUint8();if(n!==0)e.push(n);else break}return String.fromCharCode.apply(null,e)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(e){for(var n=new Uint8Array(e),s=0;s<e;s++)n[s]=this.readUint8();return n},a.prototype.readInt16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readInt16();return n},a.prototype.readUint16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readUint16();return n},a.prototype.readUint32Array=function(e){for(var n=new Uint32Array(e),s=0;s<e;s++)n[s]=this.readUint32();return n},a.prototype.readInt32Array=function(e){for(var n=new Int32Array(e),s=0;s<e;s++)n[s]=this.readInt32();return n},t.MP4BoxStream=a;var o=function(e,n,s){this._byteOffset=n||0,e instanceof ArrayBuffer?this.buffer=e:typeof e=="object"?(this.dataView=e,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=s??o.LITTLE_ENDIAN};o.prototype={},o.prototype.getPosition=function(){return this.position},o.prototype._realloc=function(e){if(this._dynamicSize){var n=this._byteOffset+this.position+e,s=this._buffer.byteLength;if(n<=s){n>this._byteLength&&(this._byteLength=n);return}for(s<1&&(s=1);n>s;)s*=2;var c=new ArrayBuffer(s),f=new Uint8Array(this._buffer),m=new Uint8Array(c,0,f.length);m.set(f),this.buffer=c,this._byteLength=n}},o.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),n=new Uint8Array(e),s=new Uint8Array(this._buffer,0,n.length);n.set(s),this.buffer=e}},o.BIG_ENDIAN=!1,o.LITTLE_ENDIAN=!0,o.prototype._byteLength=0,Object.defineProperty(o.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),o.prototype.seek=function(e){var n=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(n)||!isFinite(n)?0:n},o.prototype.isEof=function(){return this.position>=this._byteLength},o.prototype.mapUint8Array=function(e){this._realloc(e*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.readInt32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Int32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Int16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt8Array=function(e){e=e??this.byteLength-this.position;var n=new Int8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readUint32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Uint32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Uint16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint8Array=function(e){e=e??this.byteLength-this.position;var n=new Uint8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readFloat64Array=function(e,n){e=e??this.byteLength-this.position/8;var s=new Float64Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readFloat32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Float32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt32=function(e){var n=this._dataView.getInt32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readInt16=function(e){var n=this._dataView.getInt16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},o.prototype.readUint32=function(e){var n=this._dataView.getUint32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readUint16=function(e){var n=this._dataView.getUint16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},o.prototype.readFloat32=function(e){var n=this._dataView.getFloat32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readFloat64=function(e){var n=this._dataView.getFloat64(this.position,e??this.endianness);return this.position+=8,n},o.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,o.memcpy=function(e,n,s,c,f){var m=new Uint8Array(e,n,f),p=new Uint8Array(s,c,f);m.set(p)},o.arrayToNative=function(e,n){return n==this.endianness?e:this.flipArrayEndianness(e)},o.nativeToEndian=function(e,n){return this.endianness==n?e:this.flipArrayEndianness(e)},o.flipArrayEndianness=function(e){for(var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=0;s<e.byteLength;s+=e.BYTES_PER_ELEMENT)for(var c=s+e.BYTES_PER_ELEMENT-1,f=s;c>f;c--,f++){var m=n[f];n[f]=n[c],n[c]=m}return e},o.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var n=[],s=0;s<e.length;s++)n[s]=e[s];return String.fromCharCode.apply(null,n)},o.prototype.readString=function(e,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(e??this.byteLength-this.position)]):new TextDecoder(n).decode(this.mapUint8Array(e))},o.prototype.readCString=function(e){var n=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),c=n;e!=null&&(c=Math.min(e,n));for(var f=0;f<c&&s[f]!==0;f++);var m=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(f)]);return e!=null?this.position+=c-f:f!=n&&(this.position+=1),m};var u=Math.pow(2,32);o.prototype.readInt64=function(){return this.readInt32()*u+this.readUint32()},o.prototype.readUint64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readInt64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},t.DataStream=o,o.prototype.save=function(e){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(n),c=document.createElement("a");document.body.appendChild(c),c.setAttribute("href",s),c.setAttribute("download",e),c.setAttribute("target","_self"),c.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},o.prototype._dynamicSize=!0,Object.defineProperty(o.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),o.prototype.shift=function(e){var n=new ArrayBuffer(this._byteLength-e),s=new Uint8Array(n),c=new Uint8Array(this._buffer,e,s.length);s.set(c),this.buffer=n,this.position-=e},o.prototype.writeInt32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt32(e[s],n)},o.prototype.writeInt16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt16(e[s],n)},o.prototype.writeInt8Array=function(e){if(this._realloc(e.length*1),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var n=0;n<e.length;n++)this.writeInt8(e[n])},o.prototype.writeUint32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint32(e[s],n)},o.prototype.writeUint16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint16(e[s],n)},o.prototype.writeUint8Array=function(e){if(this._realloc(e.length*1),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var n=0;n<e.length;n++)this.writeUint8(e[n])},o.prototype.writeFloat64Array=function(e,n){if(this._realloc(e.length*8),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat64(e[s],n)},o.prototype.writeFloat32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat32(e[s],n)},o.prototype.writeInt32=function(e,n){this._realloc(4),this._dataView.setInt32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeInt16=function(e,n){this._realloc(2),this._dataView.setInt16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},o.prototype.writeUint32=function(e,n){this._realloc(4),this._dataView.setUint32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeUint16=function(e,n){this._realloc(2),this._dataView.setUint16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},o.prototype.writeFloat32=function(e,n){this._realloc(4),this._dataView.setFloat32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeFloat64=function(e,n){this._realloc(8),this._dataView.setFloat64(this.position,e,n??this.endianness),this.position+=8},o.prototype.writeUCS2String=function(e,n,s){s==null&&(s=e.length);for(var c=0;c<e.length&&c<s;c++)this.writeUint16(e.charCodeAt(c),n);for(;c<s;c++)this.writeUint16(0)},o.prototype.writeString=function(e,n,s){var c=0;if(n==null||n=="ASCII")if(s!=null){var f=Math.min(e.length,s);for(c=0;c<f;c++)this.writeUint8(e.charCodeAt(c));for(;c<s;c++)this.writeUint8(0)}else for(c=0;c<e.length;c++)this.writeUint8(e.charCodeAt(c));else this.writeUint8Array(new TextEncoder(n).encode(e.substring(0,s)))},o.prototype.writeCString=function(e,n){var s=0;if(n!=null){var c=Math.min(e.length,n);for(s=0;s<c;s++)this.writeUint8(e.charCodeAt(s));for(;s<n;s++)this.writeUint8(0)}else{for(s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));this.writeUint8(0)}},o.prototype.writeStruct=function(e,n){for(var s=0;s<e.length;s+=2){var c=e[s+1];this.writeType(c,n[e[s]],n)}},o.prototype.writeType=function(e,n,s){var c;if(typeof e=="function")return e(this,n);if(typeof e=="object"&&!(e instanceof Array))return e.set(this,n,s);var f=null,m="ASCII",p=this.position;switch(typeof e=="string"&&/:/.test(e)&&(c=e.split(":"),e=c[0],f=parseInt(c[1])),typeof e=="string"&&/,/.test(e)&&(c=e.split(","),e=c[0],m=parseInt(c[1])),e){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,o.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,o.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,o.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,o.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,o.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,o.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,o.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,o.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,o.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,o.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,o.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,o.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,f);break;case"string":this.writeString(n,m,f);break;case"u16string":this.writeUCS2String(n,this.endianness,f);break;case"u16stringle":this.writeUCS2String(n,o.LITTLE_ENDIAN,f);break;case"u16stringbe":this.writeUCS2String(n,o.BIG_ENDIAN,f);break;default:if(e.length==3){for(var _=e[1],S=0;S<n.length;S++)this.writeType(_,n[S]);break}else{this.writeStruct(e,n);break}}f!=null&&(this.position=p,this._realloc(f),this.position=p+f)},o.prototype.writeUint64=function(e){var n=Math.floor(e/u);this.writeUint32(n),this.writeUint32(e&4294967295)},o.prototype.writeUint24=function(e){this.writeUint8((e&16711680)>>16),this.writeUint8((e&65280)>>8),this.writeUint8(e&255)},o.prototype.adjustUint32=function(e,n){var s=this.position;this.seek(e),this.writeUint32(n),this.seek(s)},o.prototype.mapInt32Array=function(e,n){this._realloc(e*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapInt16Array=function(e,n){this._realloc(e*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapInt8Array=function(e){this._realloc(e*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.mapUint32Array=function(e,n){this._realloc(e*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapUint16Array=function(e,n){this._realloc(e*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapFloat64Array=function(e,n){this._realloc(e*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*8,s},o.prototype.mapFloat32Array=function(e,n){this._realloc(e*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s};var d=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};d.prototype=new o(new ArrayBuffer,0,o.BIG_ENDIAN),d.prototype.initialized=function(){var e;return this.bufferIndex>-1?!0:this.buffers.length>0?(e=this.buffers[0],e.fileStart===0?(this.buffer=e,this.bufferIndex=0,r.debug("MultiBufferStream","Stream ready for parsing"),!0):(r.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(r.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(e,n){r.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+n.byteLength));var s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s.buffer},d.prototype.reduceBuffer=function(e,n,s){var c;return c=new Uint8Array(s),c.set(new Uint8Array(e,n,s)),c.buffer.fileStart=e.fileStart+n,c.buffer.usedBytes=0,c.buffer},d.prototype.insertBuffer=function(e){for(var n=!0,s=0;s<this.buffers.length;s++){var c=this.buffers[s];if(e.fileStart<=c.fileStart){if(e.fileStart===c.fileStart)if(e.byteLength>c.byteLength){this.buffers.splice(s,1),s--;continue}else r.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring");else e.fileStart+e.byteLength<=c.fileStart||(e=this.reduceBuffer(e,0,c.fileStart-e.fileStart)),r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(s,0,e),s===0&&(this.buffer=e);n=!1;break}else if(e.fileStart<c.fileStart+c.byteLength){var f=c.fileStart+c.byteLength-e.fileStart,m=e.byteLength-f;if(m>0)e=this.reduceBuffer(e,f,m);else{n=!1;break}}}n&&(r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),s===0&&(this.buffer=e))},d.prototype.logBufferLevel=function(e){var n,s,c,f,m=[],p,_="";for(c=0,f=0,n=0;n<this.buffers.length;n++)s=this.buffers[n],n===0?(p={},m.push(p),p.start=s.fileStart,p.end=s.fileStart+s.byteLength,_+="["+p.start+"-"):p.end===s.fileStart?p.end=s.fileStart+s.byteLength:(p={},p.start=s.fileStart,_+=m[m.length-1].end-1+"], ["+p.start+"-",p.end=s.fileStart+s.byteLength,m.push(p)),c+=s.usedBytes,f+=s.byteLength;m.length>0&&(_+=p.end-1+"]");var S=e?r.info:r.debug;this.buffers.length===0?S("MultiBufferStream","No more buffer in memory"):S("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+c+"/"+f+" bytes), continuous ranges: "+_)},d.prototype.cleanBuffers=function(){var e,n;for(e=0;e<this.buffers.length;e++)n=this.buffers[e],n.usedBytes===n.byteLength&&(r.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},d.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length)if(e=this.buffers[this.bufferIndex+1],e.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,s=this.buffer.usedBytes,c=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=c,r.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},d.prototype.findPosition=function(e,n,s){var c,f=null,m=-1;for(e===!0?c=0:c=this.bufferIndex;c<this.buffers.length&&(f=this.buffers[c],f.fileStart<=n);){m=c,s&&(f.fileStart+f.byteLength<=n?f.usedBytes=f.byteLength:f.usedBytes=n-f.fileStart,this.logBufferLevel());c++}return m!==-1?(f=this.buffers[m],f.fileStart+f.byteLength>=n?(r.debug("MultiBufferStream","Found position in existing buffer #"+m),m):-1):-1},d.prototype.findEndContiguousBuf=function(e){var n,s,c,f=e!==void 0?e:this.bufferIndex;if(s=this.buffers[f],this.buffers.length>f+1)for(n=f+1;n<this.buffers.length&&(c=this.buffers[n],c.fileStart===s.fileStart+s.byteLength);n++)s=c;return s.fileStart+s.byteLength},d.prototype.getEndFilePositionAfter=function(e){var n=this.findPosition(!0,e,!1);return n!==-1?this.findEndContiguousBuf(n):e},d.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},d.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},d.prototype.seek=function(e,n,s){var c;return c=this.findPosition(n,e,s),c!==-1?(this.buffer=this.buffers[c],this.bufferIndex=c,this.position=e-this.buffer.fileStart,r.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(r.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},d.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},d.prototype.getLength=function(){return this.byteLength},d.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=d;var h=function(){var e=3,n=4,s=5,c=6,f=[];f[e]="ES_Descriptor",f[n]="DecoderConfigDescriptor",f[s]="DecoderSpecificInfo",f[c]="SLConfigDescriptor",this.getDescriptorName=function(_){return f[_]};var m=this,p={};return this.parseOneDescriptor=function(_){var S=0,w,x,U;for(w=_.readUint8(),U=_.readUint8();U&128;)S=(U&127)<<7,U=_.readUint8();return S+=U&127,r.debug("MPEG4DescriptorParser","Found "+(f[w]||"Descriptor "+w)+", size "+S+" at position "+_.getPosition()),f[w]?x=new p[f[w]](S):x=new p.Descriptor(S),x.parse(_),x},p.Descriptor=function(_,S){this.tag=_,this.size=S,this.descs=[]},p.Descriptor.prototype.parse=function(_){this.data=_.readUint8Array(this.size)},p.Descriptor.prototype.findDescriptor=function(_){for(var S=0;S<this.descs.length;S++)if(this.descs[S].tag==_)return this.descs[S];return null},p.Descriptor.prototype.parseRemainingDescriptors=function(_){for(var S=_.position;_.position<S+this.size;){var w=m.parseOneDescriptor(_);this.descs.push(w)}},p.ES_Descriptor=function(_){p.Descriptor.call(this,e,_)},p.ES_Descriptor.prototype=new p.Descriptor,p.ES_Descriptor.prototype.parse=function(_){if(this.ES_ID=_.readUint16(),this.flags=_.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=_.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var S=_.readUint8();this.URL=_.readString(S),this.size-=S+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=_.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(_)},p.ES_Descriptor.prototype.getOTI=function(_){var S=this.findDescriptor(n);return S?S.oti:0},p.ES_Descriptor.prototype.getAudioConfig=function(_){var S=this.findDescriptor(n);if(!S)return null;var w=S.findDescriptor(s);if(w&&w.data){var x=(w.data[0]&248)>>3;return x===31&&w.data.length>=2&&(x=32+((w.data[0]&7)<<3)+((w.data[1]&224)>>5)),x}else return null},p.DecoderConfigDescriptor=function(_){p.Descriptor.call(this,n,_)},p.DecoderConfigDescriptor.prototype=new p.Descriptor,p.DecoderConfigDescriptor.prototype.parse=function(_){this.oti=_.readUint8(),this.streamType=_.readUint8(),this.bufferSize=_.readUint24(),this.maxBitrate=_.readUint32(),this.avgBitrate=_.readUint32(),this.size-=13,this.parseRemainingDescriptors(_)},p.DecoderSpecificInfo=function(_){p.Descriptor.call(this,s,_)},p.DecoderSpecificInfo.prototype=new p.Descriptor,p.SLConfigDescriptor=function(_){p.Descriptor.call(this,c,_)},p.SLConfigDescriptor.prototype=new p.Descriptor,this};t.MPEG4DescriptorParser=h;var l={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"],["grpl"],["j2kH"],["etyp",["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){l.FullBox.prototype=new l.Box,l.ContainerBox.prototype=new l.Box,l.SampleEntry.prototype=new l.Box,l.TrackGroupTypeBox.prototype=new l.FullBox,l.BASIC_BOXES.forEach(function(e){l.createBoxCtor(e)}),l.FULL_BOXES.forEach(function(e){l.createFullBoxCtor(e)}),l.CONTAINER_BOXES.forEach(function(e){l.createContainerBoxCtor(e[0],null,e[1])})},Box:function(e,n,s){this.type=e,this.size=n,this.uuid=s},FullBox:function(e,n,s){l.Box.call(this,e,n,s),this.flags=0,this.version=0},ContainerBox:function(e,n,s){l.Box.call(this,e,n,s),this.boxes=[]},SampleEntry:function(e,n,s,c){l.ContainerBox.call(this,e,n),this.hdr_size=s,this.start=c},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,n){l.FullBox.call(this,e,n)},createBoxCtor:function(e,n){l.boxCodes.push(e),l[e+"Box"]=function(s){l.Box.call(this,e,s)},l[e+"Box"].prototype=new l.Box,n&&(l[e+"Box"].prototype.parse=n)},createFullBoxCtor:function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){this.parseFullHeader(s),n&&n.call(this,s)}},addSubBoxArrays:function(e){if(e){this.subBoxNames=e;for(var n=e.length,s=0;s<n;s++)this[e[s]+"s"]=[]}},createContainerBoxCtor:function(e,n,s){l[e+"Box"]=function(c){l.ContainerBox.call(this,e,c),l.addSubBoxArrays.call(this,s)},l[e+"Box"].prototype=new l.ContainerBox,n&&(l[e+"Box"].prototype.parse=n)},createMediaSampleEntryCtor:function(e,n,s){l.sampleEntryCodes[e]=[],l[e+"SampleEntry"]=function(c,f){l.SampleEntry.call(this,c,f),l.addSubBoxArrays.call(this,s)},l[e+"SampleEntry"].prototype=new l.SampleEntry,n&&(l[e+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(e,n,s,c){l.sampleEntryCodes[e].push(n),l[n+"SampleEntry"]=function(f){l[e+"SampleEntry"].call(this,n,f),l.addSubBoxArrays.call(this,c)},l[n+"SampleEntry"].prototype=new l[e+"SampleEntry"],s&&(l[n+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(e,n,s){l.createSampleEntryCtor.call(this,e,n,s,["sinf"])},createSampleGroupCtor:function(e,n){l[e+"SampleGroupEntry"]=function(s){l.SampleGroupEntry.call(this,e,s)},l[e+"SampleGroupEntry"].prototype=new l.SampleGroupEntry,n&&(l[e+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(e,n){l[e+"TrackGroupTypeBox"]=function(s){l.TrackGroupTypeBox.call(this,e,s)},l[e+"TrackGroupTypeBox"].prototype=new l.TrackGroupTypeBox,n&&(l[e+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(e,n,s,c){l.UUIDs.push(e),l.UUIDBoxes[e]=function(f){n?l.FullBox.call(this,"uuid",f,e):s?l.ContainerBox.call(this,"uuid",f,e):l.Box.call(this,"uuid",f,e)},l.UUIDBoxes[e].prototype=n?new l.FullBox:s?new l.ContainerBox:new l.Box,c&&(n?l.UUIDBoxes[e].prototype.parse=function(f){this.parseFullHeader(f),c&&c.call(this,f)}:l.UUIDBoxes[e].prototype.parse=c)}};l.initialize(),l.TKHD_FLAG_ENABLED=1,l.TKHD_FLAG_IN_MOVIE=2,l.TKHD_FLAG_IN_PREVIEW=4,l.TFHD_FLAG_BASE_DATA_OFFSET=1,l.TFHD_FLAG_SAMPLE_DESC=2,l.TFHD_FLAG_SAMPLE_DUR=8,l.TFHD_FLAG_SAMPLE_SIZE=16,l.TFHD_FLAG_SAMPLE_FLAGS=32,l.TFHD_FLAG_DUR_EMPTY=65536,l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,l.TRUN_FLAGS_DATA_OFFSET=1,l.TRUN_FLAGS_FIRST_FLAG=4,l.TRUN_FLAGS_DURATION=256,l.TRUN_FLAGS_SIZE=512,l.TRUN_FLAGS_FLAGS=1024,l.TRUN_FLAGS_CTS_OFFSET=2048,l.Box.prototype.add=function(e){return this.addBox(new l[e+"Box"])},l.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},l.Box.prototype.set=function(e,n){return this[e]=n,this},l.Box.prototype.addEntry=function(e,n){var s=n||"entries";return this[s]||(this[s]=[]),this[s].push(e),this},t.BoxParser=l,l.parseUUID=function(e){return l.parseHex16(e)},l.parseHex16=function(e){for(var n="",s=0;s<16;s++){var c=e.readUint8().toString(16);n+=c.length===1?"0"+c:c}return n},l.parseOneBox=function(e,n,s){var c,f=e.getPosition(),m=0,p,_;if(e.getEndPosition()-f<8)return r.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:l.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return r.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:l.ERR_NOT_ENOUGH_DATA};var S=e.readUint32(),w=e.readString(4),x=w;if(r.debug("BoxParser","Found box of type '"+w+"' and size "+S+" at position "+f),m=8,w=="uuid"){if(e.getEndPosition()-e.getPosition()<16||s-m<16)return e.seek(f),r.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:l.ERR_NOT_ENOUGH_DATA};_=l.parseUUID(e),m+=16,x=_}if(S==1){if(e.getEndPosition()-e.getPosition()<8||s&&s-m<8)return e.seek(f),r.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+w+'" box'),{code:l.ERR_NOT_ENOUGH_DATA};S=e.readUint64(),m+=8}else if(S===0){if(s)S=s;else if(w!=="mdat")return r.error("BoxParser","Unlimited box size not supported for type: '"+w+"'"),c=new l.Box(w,S),{code:l.OK,box:c,size:c.size}}return S!==0&&S<m?(r.error("BoxParser","Box of type "+w+" has an invalid size "+S+" (too small to be a box)"),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):S!==0&&s&&S>s?(r.error("BoxParser","Box of type '"+w+"' has a size "+S+" greater than its container size "+s),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):S!==0&&f+S>e.getEndPosition()?(e.seek(f),r.info("BoxParser","Not enough data in stream to parse the entire '"+w+"' box"),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):n?{code:l.OK,type:w,size:S,hdr_size:m,start:f}:(l[w+"Box"]?c=new l[w+"Box"](S):w!=="uuid"?(r.warn("BoxParser","Unknown box type: '"+w+"'"),c=new l.Box(w,S),c.has_unparsed_data=!0):l.UUIDBoxes[_]?c=new l.UUIDBoxes[_](S):(r.warn("BoxParser","Unknown uuid type: '"+_+"'"),c=new l.Box(w,S),c.uuid=_,c.has_unparsed_data=!0),c.hdr_size=m,c.start=f,c.write===l.Box.prototype.write&&c.type!=="mdat"&&(r.info("BoxParser","'"+x+"' box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(e)),c.parse(e),p=e.getPosition()-(c.start+c.size),p<0?(r.warn("BoxParser","Parsing of box '"+x+"' did not read the entire indicated box data size (missing "+-p+" bytes), seeking forward"),e.seek(c.start+c.size)):p>0&&(r.error("BoxParser","Parsing of box '"+x+"' read "+p+" more bytes than the indicated box data size, seeking backwards"),c.size!==0&&e.seek(c.start+c.size)),{code:l.OK,box:c,size:c.size})},l.Box.prototype.parse=function(e){this.type!="mdat"?this.data=e.readUint8Array(this.size-this.hdr_size):this.size===0?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},l.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},l.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.ContainerBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)if(s=n.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var c=s.type!=="uuid"?s.type:s.uuid;this[c]?r.warn("Box of type "+c+" already stored in field of this type"):this[c]=s}else return},l.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},l.SAMPLE_ENTRY_TYPE_VISUAL="Visual",l.SAMPLE_ENTRY_TYPE_AUDIO="Audio",l.SAMPLE_ENTRY_TYPE_HINT="Hint",l.SAMPLE_ENTRY_TYPE_METADATA="Metadata",l.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",l.SAMPLE_ENTRY_TYPE_SYSTEM="System",l.SAMPLE_ENTRY_TYPE_TEXT="Text",l.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},l.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},l.SampleEntry.prototype.parseFooter=function(e){l.ContainerBox.prototype.parse.call(this,e)},l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_HINT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var n;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),n=Math.min(31,e.readUint8()),this.compressorname=e.readString(n),n<31&&e.readString(31-n),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT,"enct"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"encm"),l.createBoxCtor("a1lx",function(e){var n=e.readUint8()&1,s=((n&1)+1)*16;this.layer_size=[];for(var c=0;c<3;c++)s==16?this.layer_size[c]=e.readUint16():this.layer_size[c]=e.readUint32()}),l.createBoxCtor("a1op",function(e){this.op_index=e.readUint8()}),l.createFullBoxCtor("auxC",function(e){this.aux_type=e.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(n)}),l.createBoxCtor("av1C",function(e){var n=e.readUint8();if(n>>7&!1){r.error("av1C marker problem");return}if(this.version=n&127,this.version!==1){r.error("av1C version "+this.version+" not supported");return}if(n=e.readUint8(),this.seq_profile=n>>5&7,this.seq_level_idx_0=n&31,n=e.readUint8(),this.seq_tier_0=n>>7&1,this.high_bitdepth=n>>6&1,this.twelve_bit=n>>5&1,this.monochrome=n>>4&1,this.chroma_subsampling_x=n>>3&1,this.chroma_subsampling_y=n>>2&1,this.chroma_sample_position=n&3,n=e.readUint8(),this.reserved_1=n>>5&7,this.reserved_1!==0){r.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=n>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=n&15;else if(this.reserved_2=n&15,this.reserved_2!==0){r.error("av1C reserved_2 parsing problem");return}var s=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(s)}),l.createBoxCtor("avcC",function(e){var n,s;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=e.readUint8()&3,this.nb_SPS_nalus=e.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=e.readUint16(),this.SPS[n].nalu=e.readUint8Array(this.SPS[n].length),s-=2+this.SPS[n].length;for(this.nb_PPS_nalus=e.readUint8(),s--,this.PPS=[],n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=e.readUint16(),this.PPS[n].nalu=e.readUint8Array(this.PPS[n].length),s-=2+this.PPS[n].length;s>0&&(this.ext=e.readUint8Array(s))}),l.createBoxCtor("btrt",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),l.createFullBoxCtor("ccst",function(e){var n=e.readUint8();this.all_ref_pics_intra=(n&128)==128,this.intra_pred_used=(n&64)==64,this.max_ref_per_pic=(n&63)>>2,e.readUint24()}),l.createBoxCtor("cdef",function(e){var n;for(this.channel_count=e.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],n=0;n<this.channel_count;n++)this.channel_indexes.push(e.readUint16()),this.channel_types.push(e.readUint16()),this.channel_associations.push(e.readUint16())}),l.createBoxCtor("clap",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),l.createBoxCtor("clli",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),l.createFullBoxCtor("cmex",function(e){this.flags&1&&(this.pos_x=e.readInt32()),this.flags&2&&(this.pos_y=e.readInt32()),this.flags&4&&(this.pos_z=e.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=e.readInt32(),this.quat_y=e.readInt32(),this.quat_z=e.readInt32()):(this.quat_x=e.readInt16(),this.quat_y=e.readInt16(),this.quat_z=e.readInt16()):this.version==1),this.flags&32&&(this.id=e.readUint32())}),l.createFullBoxCtor("cmin",function(e){this.focal_length_x=e.readInt32(),this.principal_point_x=e.readInt32(),this.principal_point_y=e.readInt32(),this.flags&1&&(this.focal_length_y=e.readInt32(),this.skew_factor=e.readInt32())}),l.createBoxCtor("cmpd",function(e){for(this.component_count=e.readUint16(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var n=e.readUint16();this.component_types.push(n),n>=32768&&this.component_type_urls.push(e.readCString())}}),l.createFullBoxCtor("co64",function(e){var n,s;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<n;s++)this.chunk_offsets.push(e.readUint64())}),l.createFullBoxCtor("CoLL",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),l.createBoxCtor("colr",function(e){if(this.colour_type=e.readString(4),this.colour_type==="nclx"){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var n=e.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=e.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=e.readUint8Array(this.size-4))}),l.createFullBoxCtor("cprt",function(e){this.parseLanguage(e),this.notice=e.readCString()}),l.createFullBoxCtor("cslg",function(e){this.version===0&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),l.createFullBoxCtor("ctts",function(e){var n,s;if(n=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<n;s++){this.sample_counts.push(e.readUint32());var c=e.readInt32();c<0&&r.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(c)}else if(this.version==1)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),l.createBoxCtor("dac3",function(e){var n=e.readUint8(),s=e.readUint8(),c=e.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|c>>5&7}),l.createBoxCtor("dec3",function(e){var n=e.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var c={};this.ind_subs.push(c);var f=e.readUint8(),m=e.readUint8(),p=e.readUint8();c.fscod=f>>6,c.bsid=f>>1&31,c.bsmod=(f&1)<<4|m>>4&15,c.acmod=m>>1&7,c.lfeon=m&1,c.num_dep_sub=p>>1&15,c.num_dep_sub>0&&(c.chan_loc=(p&1)<<8|e.readUint8())}}),l.createFullBoxCtor("dfLa",function(e){var n=127,s=128,c=[],f=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(e);do{var m=e.readUint8(),p=Math.min(m&n,f.length-1);if(p?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),c.push(f[p]),m&s)break}while(!0);this.numMetadataBlocks=c.length+" ("+c.join(", ")+")"}),l.createBoxCtor("dimm",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("dmed",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dOps",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=e.readUint8()}}),l.createFullBoxCtor("dref",function(e){var n,s;this.entries=[];for(var c=e.readUint32(),f=0;f<c;f++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=n.box,this.entries.push(s);else return}),l.createBoxCtor("drep",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("elng",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("elst",function(e){this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),this.version===1?(c.segment_duration=e.readUint64(),c.media_time=e.readInt64()):(c.segment_duration=e.readUint32(),c.media_time=e.readInt32()),c.media_rate_integer=e.readInt16(),c.media_rate_fraction=e.readInt16()}}),l.createFullBoxCtor("emsg",function(e){this.version==1?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=e.readUint8Array(n)}),l.createEntityToGroupCtor=function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){if(this.parseFullHeader(s),n)n.call(this,s);else for(this.group_id=s.readUint32(),this.num_entities_in_group=s.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var c=s.readUint32();this.entity_ids.push(c)}}},l.createEntityToGroupCtor("aebr"),l.createEntityToGroupCtor("afbr"),l.createEntityToGroupCtor("albc"),l.createEntityToGroupCtor("altr"),l.createEntityToGroupCtor("brst"),l.createEntityToGroupCtor("dobr"),l.createEntityToGroupCtor("eqiv"),l.createEntityToGroupCtor("favc"),l.createEntityToGroupCtor("fobr"),l.createEntityToGroupCtor("iaug"),l.createEntityToGroupCtor("pano"),l.createEntityToGroupCtor("slid"),l.createEntityToGroupCtor("ster"),l.createEntityToGroupCtor("tsyn"),l.createEntityToGroupCtor("wbbr"),l.createEntityToGroupCtor("prgr"),l.createFullBoxCtor("esds",function(e){var n=e.readUint8Array(this.size-this.hdr_size);if(this.data=n,typeof h<"u"){var s=new h;this.esd=s.parseOneDescriptor(new o(n.buffer,0,o.BIG_ENDIAN))}}),l.createBoxCtor("fiel",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),l.createBoxCtor("frma",function(e){this.data_format=e.readString(4)}),l.createBoxCtor("ftyp",function(e){var n=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),n-=8,this.compatible_brands=[];for(var s=0;n>=4;)this.compatible_brands[s]=e.readString(4),n-=4,s++}),l.createFullBoxCtor("hdlr",function(e){this.version===0&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),l.createBoxCtor("hvcC",function(e){var n,s,c,f;this.configurationVersion=e.readUint8(),f=e.readUint8(),this.general_profile_space=f>>6,this.general_tier_flag=(f&32)>>5,this.general_profile_idc=f&31,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=e.readUint16()&4095,this.parallelismType=e.readUint8()&3,this.chroma_format_idc=e.readUint8()&3,this.bit_depth_luma_minus8=e.readUint8()&7,this.bit_depth_chroma_minus8=e.readUint8()&7,this.avgFrameRate=e.readUint16(),f=e.readUint8(),this.constantFrameRate=f>>6,this.numTemporalLayers=(f&13)>>3,this.temporalIdNested=(f&4)>>2,this.lengthSizeMinusOne=f&3,this.nalu_arrays=[];var m=e.readUint8();for(n=0;n<m;n++){var p=[];this.nalu_arrays.push(p),f=e.readUint8(),p.completeness=(f&128)>>7,p.nalu_type=f&63;var _=e.readUint16();for(s=0;s<_;s++){var S={};p.push(S),c=e.readUint16(),S.data=e.readUint8Array(c)}}}),l.createFullBoxCtor("iinf",function(e){var n;this.version===0?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)n.box.type!=="infe"&&r.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[s]=n.box;else return}),l.createFullBoxCtor("iloc",function(e){var n;n=e.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=e.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=e.readUint16();else if(this.version===2)s=e.readUint32();else throw"version of iloc box not supported";for(var c=0;c<s;c++){var f={};if(this.items.push(f),this.version<2)f.item_ID=e.readUint16();else if(this.version===2)f.item_ID=e.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?f.construction_method=e.readUint16()&15:f.construction_method=0,f.data_reference_index=e.readUint16(),this.base_offset_size){case 0:f.base_offset=0;break;case 4:f.base_offset=e.readUint32();break;case 8:f.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var m=e.readUint16();f.extents=[];for(var p=0;p<m;p++){var _={};if(f.extents.push(_),this.version===1||this.version===2)switch(this.index_size){case 0:_.extent_index=0;break;case 4:_.extent_index=e.readUint32();break;case 8:_.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:_.extent_offset=0;break;case 4:_.extent_offset=e.readUint32();break;case 8:_.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:_.extent_length=0;break;case 4:_.extent_length=e.readUint32();break;case 8:_.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),l.createBoxCtor("imir",function(e){var n=e.readUint8();this.reserved=n>>7,this.axis=n&1}),l.createFullBoxCtor("infe",function(e){if((this.version===0||this.version===1)&&(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),this.version===1){this.extension_type=e.readString(4),r.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=e.readUint16():this.version===3&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),this.item_type==="mime"?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):this.item_type==="uri "&&(this.item_uri_type=e.readCString()))}),l.createFullBoxCtor("ipma",function(e){var n,s;for(entry_count=e.readUint32(),this.associations=[],n=0;n<entry_count;n++){var c={};this.associations.push(c),this.version<1?c.id=e.readUint16():c.id=e.readUint32();var f=e.readUint8();for(c.props=[],s=0;s<f;s++){var m=e.readUint8(),p={};c.props.push(p),p.essential=(m&128)>>7===1,this.flags&1?p.property_index=(m&127)<<8|e.readUint8():p.property_index=m&127}}}),l.createFullBoxCtor("iref",function(e){var n,s;for(this.references=[];e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)this.version===0?s=new l.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):s=new l.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.references.push(s);else return}),l.createBoxCtor("irot",function(e){this.angle=e.readUint8()&3}),l.createFullBoxCtor("ispe",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),l.createFullBoxCtor("kind",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),l.createFullBoxCtor("leva",function(e){var n=e.readUint8();this.levels=[];for(var s=0;s<n;s++){var c={};this.levels[s]=c,c.track_ID=e.readUint32();var f=e.readUint8();switch(c.padding_flag=f>>7,c.assignment_type=f&127,c.assignment_type){case 0:c.grouping_type=e.readString(4);break;case 1:c.grouping_type=e.readString(4),c.grouping_type_parameter=e.readUint32();break;case 2:break;case 3:break;case 4:c.sub_track_id=e.readUint32();break;default:r.warn("BoxParser","Unknown leva assignement type")}}}),l.createBoxCtor("lsel",function(e){this.layer_id=e.readUint16()}),l.createBoxCtor("maxr",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),l.createBoxCtor("mdcv",function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),l.createFullBoxCtor("mdhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),l.createFullBoxCtor("mehd",function(e){this.flags&1&&(r.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),l.createFullBoxCtor("meta",function(e){this.boxes=[],l.ContainerBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("mfhd",function(e){this.sequence_number=e.readUint32()}),l.createFullBoxCtor("mfro",function(e){this._size=e.readUint32()}),l.createFullBoxCtor("mvhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),l.createBoxCtor("npck",function(e){this.packetssent=e.readUint32()}),l.createBoxCtor("nump",function(e){this.packetssent=e.readUint64()}),l.createFullBoxCtor("padb",function(e){var n=e.readUint32();this.padbits=[];for(var s=0;s<Math.floor((n+1)/2);s++)this.padbits=e.readUint8()}),l.createBoxCtor("pasp",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),l.createBoxCtor("payl",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createBoxCtor("payt",function(e){this.payloadID=e.readUint32();var n=e.readUint8();this.rtpmap_string=e.readString(n)}),l.createFullBoxCtor("pdin",function(e){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<n;s++)this.rate[s]=e.readUint32(),this.initial_delay[s]=e.readUint32()}),l.createFullBoxCtor("pitm",function(e){this.version===0?this.item_id=e.readUint16():this.item_id=e.readUint32()}),l.createFullBoxCtor("pixi",function(e){var n;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=e.readUint8()}),l.createBoxCtor("pmax",function(e){this.bytes=e.readUint32()}),l.createFullBoxCtor("prdi",function(e){if(this.step_count=e.readUint16(),this.item_count=[],this.flags&2)for(var n=0;n<this.step_count;n++)this.item_count[n]=e.readUint16()}),l.createFullBoxCtor("prft",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),this.version===0?this.media_time=e.readUint32():this.media_time=e.readUint64()}),l.createFullBoxCtor("pssh",function(e){if(this.system_id=l.parseHex16(e),this.version>0){var n=e.readUint32();this.kid=[];for(var s=0;s<n;s++)this.kid[s]=l.parseHex16(e)}var c=e.readUint32();c>0&&(this.data=e.readUint8Array(c))}),l.createFullBoxCtor("clef",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("enof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("prof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),l.createBoxCtor("rtp ",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),l.createFullBoxCtor("saio",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var n=e.readUint32();this.offset=[];for(var s=0;s<n;s++)this.version===0?this.offset[s]=e.readUint32():this.offset[s]=e.readUint64()}),l.createFullBoxCtor("saiz",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var n=e.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var s=0;s<n;s++)this.sample_info_size[s]=e.readUint8()}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),l.createSampleGroupCtor("alst",function(e){var n,s=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],n=0;n<s;n++)this.sample_offset[n]=e.readUint32();var c=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<c/4;n++)this.num_output_samples[n]=e.readUint16(),this.num_total_samples[n]=e.readUint16()}),l.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),l.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var n=e.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var s=e.readUint8(),c=0;c<s;c++){var f={};this.dependency.push(f),f.subSeqDirectionFlag=e.readUint8(),f.layerNumber=e.readUint8(),f.subSequenceIdentifier=e.readUint16()}}),l.createSampleGroupCtor("dtrt",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("mvif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),l.createSampleGroupCtor("rap ",function(e){var n=e.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),l.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)r.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=e.readUint32(),this.target_rate_share[n]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),l.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),l.SampleGroupEntry.prototype.parse=function(e){r.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},l.createSampleGroupCtor("scif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("scnm",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var n=e.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=l.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),l.createSampleGroupCtor("stsa",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("sync",function(e){var n=e.readUint8();this.NAL_unit_type=n&63}),l.createSampleGroupCtor("tele",function(e){var n=e.readUint8();this.level_independently_decodable=n>>7}),l.createSampleGroupCtor("tsas",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("tscl",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("vipr",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createFullBoxCtor("sbgp",function(e){this.grouping_type=e.readString(4),this.version===1?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),c.sample_count=e.readInt32(),c.group_description_index=e.readInt32()}}),l.createFullBoxCtor("schm",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),this.flags&1&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),l.createBoxCtor("sdp ",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("sdtp",function(e){var n,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var c=0;c<s;c++)n=e.readUint8(),this.is_leading[c]=n>>6,this.sample_depends_on[c]=n>>4&3,this.sample_is_depended_on[c]=n>>2&3,this.sample_has_redundancy[c]=n&3}),l.createFullBoxCtor("senc"),l.createFullBoxCtor("sgpd",function(e){this.grouping_type=e.readString(4),r.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c;l[this.grouping_type+"SampleGroupEntry"]?c=new l[this.grouping_type+"SampleGroupEntry"](this.grouping_type):c=new l.SampleGroupEntry(this.grouping_type),this.entries.push(c),this.version===1?this.default_length===0?c.description_length=e.readUint32():c.description_length=this.default_length:c.description_length=this.default_length,c.write===l.SampleGroupEntry.prototype.write&&(r.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),c.data=e.readUint8Array(c.description_length),e.position-=c.description_length),c.parse(e)}}),l.createFullBoxCtor("sidx",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),this.version===0?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var n=e.readUint16(),s=0;s<n;s++){var c={};this.references.push(c);var f=e.readUint32();c.reference_type=f>>31&1,c.referenced_size=f&2147483647,c.subsegment_duration=e.readUint32(),f=e.readUint32(),c.starts_with_SAP=f>>31&1,c.SAP_type=f>>28&7,c.SAP_delta_time=f&268435455}}),l.SingleItemTypeReferenceBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBox.prototype=new l.Box,l.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint16()},l.SingleItemTypeReferenceBoxLarge=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBoxLarge.prototype=new l.Box,l.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint32()},l.createFullBoxCtor("SmDm",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),l.createFullBoxCtor("smhd",function(e){this.balance=e.readUint16(),e.readUint16()}),l.createFullBoxCtor("ssix",function(e){this.subsegments=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.subsegments.push(c),c.ranges=[];for(var f=e.readUint32(),m=0;m<f;m++){var p={};c.ranges.push(p),p.level=e.readUint8(),p.range_size=e.readUint24()}}}),l.createFullBoxCtor("stco",function(e){var n;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<n;s++)this.chunk_offsets.push(e.readUint32())}),l.createFullBoxCtor("stdp",function(e){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<n;s++)this.priority[s]=e.readUint16()}),l.createFullBoxCtor("sthd"),l.createFullBoxCtor("stri",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("stsc",function(e){var n,s;if(n=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<n;s++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),l.createFullBoxCtor("stsd",function(e){var n,s,c,f;for(this.entries=[],c=e.readUint32(),n=1;n<=c;n++)if(s=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),s.code===l.OK)l[s.type+"SampleEntry"]?(f=new l[s.type+"SampleEntry"](s.size),f.hdr_size=s.hdr_size,f.start=s.start):(r.warn("BoxParser","Unknown sample entry type: "+s.type),f=new l.SampleEntry(s.type,s.size,s.hdr_size,s.start)),f.write===l.SampleEntry.prototype.write&&(r.info("BoxParser","SampleEntry "+f.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),f.parseDataAndRewind(e)),f.parse(e),this.entries.push(f);else return}),l.createFullBoxCtor("stsg",function(e){this.grouping_type=e.readUint32();var n=e.readUint16();this.group_description_index=[];for(var s=0;s<n;s++)this.group_description_index[s]=e.readUint32()}),l.createFullBoxCtor("stsh",function(e){var n,s;if(n=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<n;s++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stss",function(e){var n,s;if(s=e.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<s;n++)this.sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stsz",function(e){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(e.readUint32()):this.sample_sizes[n]=this.sample_size}),l.createFullBoxCtor("stts",function(e){var n,s,c;if(n=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),c=e.readInt32(),c<0&&(r.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),c=1),this.sample_deltas.push(c)}),l.createFullBoxCtor("stvi",function(e){var n=e.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=e.readUint32();var s=e.readUint32();this.stereo_indication_type=e.readString(s);var c,f;for(this.boxes=[];e.getPosition()<this.start+this.size;)if(c=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),c.code===l.OK)f=c.box,this.boxes.push(f),this[f.type]=f;else return}),l.createBoxCtor("styp",function(e){l.ftypBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("stz2",function(e){var n,s;if(this.sample_sizes=[],this.version===0)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),s=e.readUint32(),this.field_size===4)for(n=0;n<s;n+=2){var c=e.readUint8();this.sample_sizes[n]=c>>4&15,this.sample_sizes[n+1]=c&15}else if(this.field_size===8)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint8();else if(this.field_size===16)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint16();else r.error("BoxParser","Error in length field in stz2 box")}),l.createFullBoxCtor("subs",function(e){var n,s,c,f;for(c=e.readUint32(),this.entries=[],n=0;n<c;n++){var m={};if(this.entries[n]=m,m.sample_delta=e.readUint32(),m.subsamples=[],f=e.readUint16(),f>0)for(s=0;s<f;s++){var p={};m.subsamples.push(p),this.version==1?p.size=e.readUint32():p.size=e.readUint16(),p.priority=e.readUint8(),p.discardable=e.readUint8(),p.codec_specific_parameters=e.readUint32()}}}),l.createFullBoxCtor("tenc",function(e){if(e.readUint8(),this.version===0)e.readUint8();else{var n=e.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=l.parseHex16(e),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),l.createFullBoxCtor("tfdt",function(e){this.version==1?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),l.createFullBoxCtor("tfhd",function(e){var n=0;this.track_id=e.readUint32(),this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),n+=4):this.default_sample_flags=0}),l.createFullBoxCtor("tfra",function(e){this.track_ID=e.readUint32(),e.readUint24();var n=e.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var s=e.readUint32(),c=0;c<s;c++)this.version===1?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),l.createFullBoxCtor("tkhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),l.createBoxCtor("tmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("tmin",function(e){this.time=e.readUint32()}),l.createBoxCtor("totl",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpay",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpyl",function(e){this.bytessent=e.readUint64()}),l.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},l.createTrackGroupCtor("msrc"),l.TrackReferenceTypeBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.TrackReferenceTypeBox.prototype=new l.Box,l.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},l.trefBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=new l.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.boxes.push(s);else return},l.createFullBoxCtor("trep",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;)if(ret=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code===l.OK)box=ret.box,this.boxes.push(box);else return}),l.createFullBoxCtor("trex",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),l.createBoxCtor("trpy",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("trun",function(e){var n=0;if(this.sample_count=e.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var s=0;s<this.sample_count;s++)this.flags&l.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_SIZE&&(this.sample_size[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=e.readUint32():this.sample_composition_time_offset[s]=e.readInt32())}),l.createFullBoxCtor("tsel",function(e){this.switch_group=e.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("txtC",function(e){this.config=e.readCString()}),l.createBoxCtor("tyco",function(e){var n=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var s=0;s<n;s++)this.compatible_brands[s]=e.readString(4)}),l.createFullBoxCtor("udes",function(e){this.lang=e.readCString(),this.name=e.readCString(),this.description=e.readCString(),this.tags=e.readCString()}),l.createFullBoxCtor("uncC",function(e){var n;for(this.profile=e.readUint32(),this.component_count=e.readUint16(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],n=0;n<this.component_count;n++)this.component_index.push(e.readUint16()),this.component_bit_depth_minus_one.push(e.readUint8()),this.component_format.push(e.readUint8()),this.component_align_size.push(e.readUint8());this.sampling_type=e.readUint8(),this.interleave_type=e.readUint8(),this.block_size=e.readUint8();var s=e.readUint8();this.component_little_endian=s>>7&1,this.block_pad_lsb=s>>6&1,this.block_little_endian=s>>5&1,this.block_reversed=s>>4&1,this.pad_unknown=s>>3&1,this.pixel_size=e.readUint8(),this.row_align_size=e.readUint32(),this.tile_align_size=e.readUint32(),this.num_tile_cols_minus_one=e.readUint32(),this.num_tile_rows_minus_one=e.readUint32()}),l.createFullBoxCtor("url ",function(e){this.flags!==1&&(this.location=e.readCString())}),l.createFullBoxCtor("urn ",function(e){this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())}),l.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),l.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(e){this.system_id=l.parseHex16(e);var n=e.readUint32();n>0&&(this.data=e.readUint8Array(n))}),l.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),l.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=l.parseHex16(e)}),l.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var s={},c=0,f=0;this.version===1?(c=e.readUint64(),f=e.readUint64()):(c=e.readUint32(),f=e.readUint32()),s.absolute_time=c,s.absolute_duration=f,this.entries.push(s)}}),l.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(e){this.version===1?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),l.createFullBoxCtor("vmhd",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),l.createFullBoxCtor("vpcC",function(e){var n;this.version===1?(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8(),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)):(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=e.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize))}),l.createBoxCtor("vttC",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("vvcC",function(e){var n,s,c={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(E){this.held_bits=E.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(E){this.held_bits=E.readUint16(),this.num_held_bits=16},extract_bits:function(E){var T=this.held_bits>>this.num_held_bits-E&(1<<E)-1;return this.num_held_bits-=E,T}};if(c.stream_read_1_bytes(e),c.extract_bits(5),this.lengthSizeMinusOne=c.extract_bits(2),this.ptl_present_flag=c.extract_bits(1),this.ptl_present_flag){c.stream_read_2_bytes(e),this.ols_idx=c.extract_bits(9),this.num_sublayers=c.extract_bits(3),this.constant_frame_rate=c.extract_bits(2),this.chroma_format_idc=c.extract_bits(2),c.stream_read_1_bytes(e),this.bit_depth_minus8=c.extract_bits(3),c.extract_bits(5);{if(c.stream_read_2_bytes(e),c.extract_bits(2),this.num_bytes_constraint_info=c.extract_bits(6),this.general_profile_idc=c.extract_bits(7),this.general_tier_flag=c.extract_bits(1),this.general_level_idc=e.readUint8(),c.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=c.extract_bits(1),this.ptl_multilayer_enabled_flag=c.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var f=c.extract_bits(6);c.stream_read_1_bytes(e);var m=c.extract_bits(2);this.general_constraint_info[n]=f<<2|m}this.general_constraint_info[this.num_bytes_constraint_info-1]=c.extract_bits(6)}else c.extract_bits(6);if(this.num_sublayers>1){for(c.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var p=c.extract_bits(1);this.ptl_sublayer_present_mask|=p<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)c.extract_bits(1);for(this.sublayer_level_idc=[],s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=e.readUint8())}if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(e.readUint32())}this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}var _=12,S=13;this.nalu_arrays=[];var w=e.readUint8();for(n=0;n<w;n++){var x=[];this.nalu_arrays.push(x),c.stream_read_1_bytes(e),x.completeness=c.extract_bits(1),c.extract_bits(2),x.nalu_type=c.extract_bits(5);var U=1;for(x.nalu_type!=S&&x.nalu_type!=_&&(U=e.readUint16()),s=0;s<U;s++){var A=e.readUint16();x.push({data:e.readUint8Array(A),length:A})}}}),l.createFullBoxCtor("vvnC",function(e){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),l.SampleEntry.prototype.isVideo=function(){return!1},l.SampleEntry.prototype.isAudio=function(){return!1},l.SampleEntry.prototype.isSubtitle=function(){return!1},l.SampleEntry.prototype.isMetadata=function(){return!1},l.SampleEntry.prototype.isHint=function(){return!1},l.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},l.SampleEntry.prototype.getWidth=function(){return""},l.SampleEntry.prototype.getHeight=function(){return""},l.SampleEntry.prototype.getChannelCount=function(){return""},l.SampleEntry.prototype.getSampleRate=function(){return""},l.SampleEntry.prototype.getSampleSize=function(){return""},l.VisualSampleEntry.prototype.isVideo=function(){return!0},l.VisualSampleEntry.prototype.getWidth=function(){return this.width},l.VisualSampleEntry.prototype.getHeight=function(){return this.height},l.AudioSampleEntry.prototype.isAudio=function(){return!0},l.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},l.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},l.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},l.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},l.MetadataSampleEntry.prototype.isMetadata=function(){return!0},l.decimalToHex=function(e,n){var s=Number(e).toString(16);for(n=typeof n>"u"||n===null?n=2:n;s.length<n;)s="0"+s;return s},l.avc1SampleEntry.prototype.getCodec=l.avc2SampleEntry.prototype.getCodec=l.avc3SampleEntry.prototype.getCodec=l.avc4SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+l.decimalToHex(this.avcC.AVCProfileIndication)+l.decimalToHex(this.avcC.profile_compatibility)+l.decimalToHex(this.avcC.AVCLevelIndication):e},l.hev1SampleEntry.prototype.getCodec=l.hvc1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var s=this.hvcC.general_profile_compatibility,c=0;for(e=0;e<32&&(c|=s&1,e!=31);e++)c<<=1,s>>=1;n+=l.decimalToHex(c,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var f=!1,m="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||f)&&(m="."+l.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+m,f=!0);n+=m}return n},l.vvc1SampleEntry.prototype.getCodec=l.vvi1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var c=[],f=0;f|=this.vvcC.ptl_frame_only_constraint<<7,f|=this.vvcC.ptl_multilayer_enabled<<6;var m;for(e=0;e<this.vvcC.general_constraint_info.length;++e)f|=this.vvcC.general_constraint_info[e]>>2&63,c.push(f),f&&(m=e),f=this.vvcC.general_constraint_info[e]>>2&3;if(m===void 0)s=".CA";else{s=".C";var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",_=0,S=0;for(e=0;e<=m;++e)for(_=_<<8|c[e],S+=8;S>=5;){var w=_>>S-5&31;s+=p[w],S-=5,_&=(1<<S)-1}S&&(_<<=5-S,s+=p[_&31])}}n+=s}return n},l.mp4aSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return e+"."+l.decimalToHex(n)+(s?"."+s:"")}else return e},l.stxtSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},l.vp08SampleEntry.prototype.getCodec=l.vp09SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),e+".0"+this.vpcC.profile+"."+n+"."+s},l.av01SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),e+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+s},l.Box.prototype.writeHeader=function(e,n){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),r.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(n||"")),this.size>u?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),this.type==="uuid"&&e.writeUint8Array(this.uuid),this.size>u&&e.writeUint64(this.size)},l.FullBox.prototype.writeHeader=function(e){this.size+=4,l.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},l.Box.prototype.write=function(e){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},l.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(e),this.size+=this.boxes[n].size);r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.TrackReferenceTypeBox.prototype.write=function(e){this.size=this.track_ids.length*4,this.writeHeader(e),e.writeUint32Array(this.track_ids)},l.avcCBox.prototype.write=function(e){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),n=0;n<this.SPS.length;n++)e.writeUint16(this.SPS[n].length),e.writeUint8Array(this.SPS[n].nalu);for(e.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)e.writeUint16(this.PPS[n].length),e.writeUint8Array(this.PPS[n].nalu);this.ext&&e.writeUint8Array(this.ext)},l.co64Box.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)e.writeUint64(this.chunk_offsets[n])},l.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},l.cttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),this.version===1?e.writeInt32(this.sample_offsets[n]):e.writeUint32(this.sample_offsets[n])},l.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},l.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeUint32(s.segment_duration),e.writeInt32(s.media_time),e.writeInt16(s.media_rate_integer),e.writeInt16(s.media_rate_fraction)}},l.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},l.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)e.writeString(this.compatible_brands[n],null,4)},l.hdlrBox.prototype.write=function(e){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},l.hvcCBox.prototype.write=function(e){var n,s;for(this.size=23,n=0;n<this.nalu_arrays.length;n++)for(this.size+=3,s=0;s<this.nalu_arrays[n].length;s++)this.size+=2+this.nalu_arrays[n][s].data.length;for(this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.general_profile_space<<6+this.general_tier_flag<<5+this.general_profile_idc),e.writeUint32(this.general_profile_compatibility),e.writeUint8Array(this.general_constraint_indicator),e.writeUint8(this.general_level_idc),e.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),e.writeUint8(this.parallelismType+252),e.writeUint8(this.chroma_format_idc+252),e.writeUint8(this.bit_depth_luma_minus8+248),e.writeUint8(this.bit_depth_chroma_minus8+248),e.writeUint16(this.avgFrameRate),e.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),e.writeUint8(this.nalu_arrays.length),n=0;n<this.nalu_arrays.length;n++)for(e.writeUint8((this.nalu_arrays[n].completeness<<7)+this.nalu_arrays[n].nalu_type),e.writeUint16(this.nalu_arrays[n].length),s=0;s<this.nalu_arrays[n].length;s++)e.writeUint16(this.nalu_arrays[n][s].data.length),e.writeUint8Array(this.nalu_arrays[n][s].data)},l.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},l.mdhdBox.prototype.write=function(e){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},l.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},l.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},l.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},l.SampleEntry.prototype.writeHeader=function(e){this.size=8,l.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},l.SampleEntry.prototype.writeFooter=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e),this.size+=this.boxes[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*7+6*4+32,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},l.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*4+3*4,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},l.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},l.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},l.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeInt32(s.sample_count),e.writeInt32(s.group_description_index)}},l.sgpdBox.prototype.write=function(e){var n,s;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),this.version===1&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&this.default_length===0&&e.writeUint32(s.description_length),s.write(e)},l.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var s=this.references[n];e.writeUint32(s.reference_type<<31|s.referenced_size),e.writeUint32(s.subsegment_duration),e.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},l.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},l.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},l.stscBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)e.writeUint32(this.first_chunk[n]),e.writeUint32(this.samples_per_chunk[n]),e.writeUint32(this.sample_description_index[n])},l.stsdBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.stshBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)e.writeUint32(this.shadowed_sample_numbers[n]),e.writeUint32(this.sync_sample_numbers[n])},l.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},l.stszBox.prototype.write=function(e){var n,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){s=!1;break}else n++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),s?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),s||e.writeUint32Array(this.sample_sizes)},l.sttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),e.writeUint32(this.sample_deltas[n])},l.tfdtBox.prototype.write=function(e){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(e),this.version===1?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},l.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},l.tkhdBox.prototype.write=function(e){this.version=0,this.size=4*18+2*4,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},l.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},l.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&l.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&l.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&l.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&l.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[n]),this.flags&l.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[n]),this.flags&l.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[n]),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?e.writeUint32(this.sample_composition_time_offset[n]):e.writeInt32(this.sample_composition_time_offset[n]))},l["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},l["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},l.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},l.cttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)e[c].pts=e[c].dts+this.sample_offsets[n],c++},l.sttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)c===0?e[c].dts=0:e[c].dts=e[c-1].dts+this.sample_deltas[n],c++},l.stcoBox.prototype.unpack=function(e){var n;for(n=0;n<this.chunk_offsets.length;n++)e[n].offset=this.chunk_offsets[n]},l.stscBox.prototype.unpack=function(e){var n,s,c,f,m;for(f=0,m=0,n=0;n<this.first_chunk.length;n++)for(s=0;s<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);s++)for(m++,c=0;c<this.samples_per_chunk[n];c++){if(e[f])e[f].description_index=this.sample_description_index[n],e[f].chunk_index=m;else return;f++}},l.stszBox.prototype.unpack=function(e){var n;for(n=0;n<this.sample_sizes.length;n++)e[n].size=this.sample_sizes[n]},l.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],l.boxEqualFields=function(e,n){if(e&&!n)return!1;var s;for(s in e)if(!(l.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(e[s]instanceof l.Box||n[s]instanceof l.Box)continue;if(typeof e[s]>"u"||typeof n[s]>"u")continue;if(typeof e[s]=="function"||typeof n[s]=="function")continue;if(e.subBoxNames&&e.subBoxNames.indexOf(s.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(s.slice(0,4))>-1)continue;if(s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time")continue;if(l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(e[s]!==n[s])return!1}return!0},l.boxEqual=function(e,n){if(!l.boxEqualFields(e,n))return!1;for(var s=0;s<l.DIFF_BOXES_PROP_NAMES.length;s++){var c=l.DIFF_BOXES_PROP_NAMES[s];if(e[c]&&n[c]&&!l.boxEqual(e[c],n[c]))return!1}return!0};var g=function(){};g.prototype.parseSample=function(e){var n={},s;n.resources=[];var c=new a(e.data.buffer);if(!e.subsamples||e.subsamples.length===0)n.documentString=c.readString(e.data.length);else if(n.documentString=c.readString(e.subsamples[0].size),e.subsamples.length>1)for(s=1;s<e.subsamples.length;s++)n.resources[s]=c.readUint8Array(e.subsamples[s].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var y=function(){};y.prototype.parseSample=function(e){var n,s=new a(e.data.buffer);return n=s.readString(e.data.length),n},y.prototype.parseConfig=function(e){var n,s=new a(e.buffer);return s.readUint32(),n=s.readCString(),n},t.XMLSubtitlein4Parser=g,t.Textin4Parser=y;var v=function(e){this.stream=e||new d,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};v.prototype.setSegmentOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.fragmentedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.segmentStream=null,f.nb_samples=1e3,f.rapAlignement=!0,s&&(s.nbSamples&&(f.nb_samples=s.nbSamples),s.rapAlignement&&(f.rapAlignement=s.rapAlignement))}},v.prototype.unsetSegmentOptions=function(e){for(var n=-1,s=0;s<this.fragmentedTracks.length;s++){var c=this.fragmentedTracks[s];c.id==e&&(n=s)}n>-1&&this.fragmentedTracks.splice(n,1)},v.prototype.setExtractionOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.extractedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.nb_samples=1e3,f.samples=[],s&&s.nbSamples&&(f.nb_samples=s.nbSamples)}},v.prototype.unsetExtractionOptions=function(e){for(var n=-1,s=0;s<this.extractedTracks.length;s++){var c=this.extractedTracks[s];c.id==e&&(n=s)}n>-1&&this.extractedTracks.splice(n,1)},v.prototype.parse=function(){var e,n,s=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),e=l.parseOneBox(this.stream,s),e.code===l.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}else return;else{var c;switch(n=e.box,c=n.type!=="uuid"?n.type:n.uuid,this.boxes.push(n),c){case"mdat":this.mdats.push(n);break;case"moof":this.moofs.push(n);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[c]!==void 0&&r.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=n;break}this.updateUsedBytes&&this.updateUsedBytes(n,e)}},v.prototype.checkBuffer=function(e){if(e==null)throw"Buffer must be defined and non empty";if(e.fileStart===void 0)throw"Buffer must have a fileStart property";return e.byteLength===0?(r.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(r.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),this.stream.initialized()?!0:(r.warn("ISOFile","Not ready to start parsing"),!1))},v.prototype.appendBuffer=function(e,n){var s;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(r.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},v.prototype.getInfo=function(){var e,n,s={},c,f,m,p,_=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(_+this.moov.mvhd.creation_time*1e3),s.modified=new Date(_+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(c=this.moov.traks[e],p=c.mdia.minf.stbl.stsd.entries[0],f={},s.tracks.push(f),f.id=c.tkhd.track_id,f.name=c.mdia.hdlr.name,f.references=[],c.tref)for(n=0;n<c.tref.boxes.length;n++)m={},f.references.push(m),m.type=c.tref.boxes[n].type,m.track_ids=c.tref.boxes[n].track_ids;c.edts&&(f.edits=c.edts.elst.entries),f.created=new Date(_+c.tkhd.creation_time*1e3),f.modified=new Date(_+c.tkhd.modification_time*1e3),f.movie_duration=c.tkhd.duration,f.movie_timescale=s.timescale,f.layer=c.tkhd.layer,f.alternate_group=c.tkhd.alternate_group,f.volume=c.tkhd.volume,f.matrix=c.tkhd.matrix,f.track_width=c.tkhd.width/65536,f.track_height=c.tkhd.height/65536,f.timescale=c.mdia.mdhd.timescale,f.cts_shift=c.mdia.minf.stbl.cslg,f.duration=c.mdia.mdhd.duration,f.samples_duration=c.samples_duration,f.codec=p.getCodec(),f.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},f.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,f.nb_samples=c.samples.length,f.size=c.samples_size,f.bitrate=f.size*8*f.timescale/f.samples_duration,p.isAudio()?(f.type="audio",s.audioTracks.push(f),f.audio={},f.audio.sample_rate=p.getSampleRate(),f.audio.channel_count=p.getChannelCount(),f.audio.sample_size=p.getSampleSize()):p.isVideo()?(f.type="video",s.videoTracks.push(f),f.video={},f.video.width=p.getWidth(),f.video.height=p.getHeight()):p.isSubtitle()?(f.type="subtitles",s.subtitleTracks.push(f)):p.isHint()?(f.type="metadata",s.hintTracks.push(f)):p.isMetadata()?(f.type="metadata",s.metadataTracks.push(f)):(f.type="metadata",s.otherTracks.push(f))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',e=0;e<s.tracks.length;e++)e!==0&&(s.mime+=","),s.mime+=s.tracks[e].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},v.prototype.setNextSeekPositionFromSample=function(e){e&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.offset+e.alreadyRead)},v.prototype.processSamples=function(e){var n,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var c=this.fragmentedTracks[n];for(s=c.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Creating media fragment on track #"+c.id+" for sample "+s.nextSample);var f=this.createFragment(c.id,s.nextSample,c.segmentStream);if(f)c.segmentStream=f,s.nextSample++;else break;if((s.nextSample%c.nb_samples===0||e||s.nextSample>=s.samples.length)&&(r.info("ISOFile","Sending fragmented data on track #"+c.id+" for samples ["+Math.max(0,s.nextSample-c.nb_samples)+","+(s.nextSample-1)+"]"),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(c.id,c.user,c.segmentStream.buffer,s.nextSample,e||s.nextSample>=s.samples.length),c.segmentStream=null,c!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var m=this.extractedTracks[n];for(s=m.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Exporting on track #"+m.id+" sample #"+s.nextSample);var p=this.getSample(s,s.nextSample);if(p)s.nextSample++,m.samples.push(p);else{this.setNextSeekPositionFromSample(s.samples[s.nextSample]);break}if((s.nextSample%m.nb_samples===0||s.nextSample>=s.samples.length)&&(r.debug("ISOFile","Sending samples on track #"+m.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(m.id,m.user,m.samples),m.samples=[],m!==this.extractedTracks[n]))break}}}},v.prototype.getBox=function(e){var n=this.getBoxes(e,!0);return n.length?n[0]:null},v.prototype.getBoxes=function(e,n){var s=[];return v._sweep.call(this,e,s,n),s},v._sweep=function(e,n,s){this.type&&this.type==e&&n.push(this);for(var c in this.boxes){if(n.length&&s)return;v._sweep.call(this.boxes[c],e,n,s)}},v.prototype.getTrackSamplesInfo=function(e){var n=this.getTrackById(e);if(n)return n.samples},v.prototype.getTrackSample=function(e,n){var s=this.getTrackById(e),c=this.getSample(s,n);return c},v.prototype.releaseUsedSamples=function(e,n){var s=0,c=this.getTrackById(e);c.lastValidSample||(c.lastValidSample=0);for(var f=c.lastValidSample;f<n;f++)s+=this.releaseSample(c,f);r.info("ISOFile","Track #"+e+" released samples up to "+n+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),c.lastValidSample=n},v.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},v.prototype.stop=function(){this.sampleProcessingStarted=!1},v.prototype.flush=function(){r.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},v.prototype.seekTrack=function(e,n,s){var c,f,m=1/0,p=0,_=0,S;if(s.samples.length===0)return r.info("ISOFile","No sample in track, cannot seek! Using time "+r.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(c=0;c<s.samples.length;c++){if(f=s.samples[c],c===0)_=0,S=f.timescale;else if(f.cts>e*f.timescale){_=c-1;break}n&&f.is_sync&&(p=c)}for(n&&(_=p),e=s.samples[_].cts,s.nextSample=_;s.samples[_].alreadyRead===s.samples[_].size&&s.samples[_+1];)_++;return m=s.samples[_].offset+s.samples[_].alreadyRead,r.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+r.getDurationString(e,S)+" and offset: "+m),{offset:m,time:e/S}},v.prototype.getTrackDuration=function(e){var n;return e.samples?(n=e.samples[e.samples.length-1],(n.cts+n.duration)/n.timescale):1/0},v.prototype.seek=function(e,n){var s=this.moov,c,f,m,p={offset:1/0,time:1/0};if(this.moov){for(m=0;m<s.traks.length;m++)c=s.traks[m],!(e>this.getTrackDuration(c))&&(f=this.seekTrack(e,n,c),f.offset<p.offset&&(p.offset=f.offset),f.time<p.time&&(p.time=f.time));return r.info("ISOFile","Seeking at time "+r.getDurationString(p.time,1)+" needs a buffer with a fileStart position of "+p.offset),p.offset===1/0?p={offset:this.nextParsePosition,time:0}:p.offset=this.stream.getEndFilePositionAfter(p.offset),r.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+p.offset),p}else throw"Cannot seek: moov not received!"},v.prototype.equal=function(e){for(var n=0;n<this.boxes.length&&n<e.boxes.length;){var s=this.boxes[n],c=e.boxes[n];if(!l.boxEqual(s,c))return!1;n++}return!0},t.ISOFile=v,v.prototype.lastBoxStartPosition=0,v.prototype.parsingMdat=null,v.prototype.nextParsePosition=0,v.prototype.discardMdatData=!1,v.prototype.processIncompleteBox=function(e){var n,s,c;return e.type==="mdat"?(n=new l[e.type+"Box"](e.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=e.start,n.hdr_size=e.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,c=this.stream.seek(n.start+n.size,!1,this.discardMdatData),c?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(e.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},v.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},v.prototype.processIncompleteMdat=function(){var e,n;return e=this.parsingMdat,n=this.stream.seek(e.start+e.size,!1,this.discardMdatData),n?(r.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},v.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},v.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},v.prototype.updateUsedBytes=function(e,n){this.stream.addUsedBytes&&(e.type==="mdat"?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},v.prototype.add=l.Box.prototype.add,v.prototype.addBox=l.Box.prototype.addBox,v.prototype.init=function(e){var n=e||{};this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]);var s=this.add("moov");return s.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),s.add("mvex"),this},v.prototype.addTrack=function(e){this.moov||this.init(e);var n=e||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,s.add("tkhd").set("flags",l.TKHD_FLAG_ENABLED|l.TKHD_FLAG_IN_MOVIE|l.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",n.width<<16).set("height",n.height<<16);var c=s.add("mdia");c.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),c.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),c.add("elng").set("extended_language",n.language||"fr-FR");var f=c.add("minf");if(l[n.type+"SampleEntry"]!==void 0){var m=new l[n.type+"SampleEntry"];m.data_reference_index=1;var p="";for(var _ in l.sampleEntryCodes)for(var S=l.sampleEntryCodes[_],w=0;w<S.length;w++)if(S.indexOf(n.type)>-1){p=_;break}switch(p){case"Visual":if(f.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),m.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var x=new l.avcCBox;x.parse(new a(n.avcDecoderConfigRecord)),m.addBox(x)}else if(n.hevcDecoderConfigRecord){var U=new l.hvcCBox;U.parse(new a(n.hevcDecoderConfigRecord)),m.addBox(U)}break;case"Audio":f.add("smhd").set("balance",n.balance||0),m.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||65536);break;case"Hint":f.add("hmhd");break;case"Subtitle":switch(f.add("sthd"),n.type){case"stpp":m.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":f.add("nmhd");break;case"System":f.add("nmhd");break;default:f.add("nmhd");break}n.description&&m.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(E){m.addBox(E)}),f.add("dinf").add("dref").addEntry(new l["url Box"]().set("flags",1));var A=f.add("stbl");return A.add("stsd").addEntry(m),A.add("stts").set("sample_counts",[]).set("sample_deltas",[]),A.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),A.add("stco").set("chunk_offsets",[]),A.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(s),n.id}},l.Box.prototype.computeSize=function(e){var n=e||new o;n.endianness=o.BIG_ENDIAN,this.write(n)},v.prototype.addSample=function(e,n,s){var c=s||{},f={},m=this.getTrackById(e);if(m!==null){f.number=m.samples.length,f.track_id=m.tkhd.track_id,f.timescale=m.mdia.mdhd.timescale,f.description_index=c.sample_description_index?c.sample_description_index-1:0,f.description=m.mdia.minf.stbl.stsd.entries[f.description_index],f.data=n,f.size=n.byteLength,f.alreadyRead=f.size,f.duration=c.duration||1,f.cts=c.cts||0,f.dts=c.dts||0,f.is_sync=c.is_sync||!1,f.is_leading=c.is_leading||0,f.depends_on=c.depends_on||0,f.is_depended_on=c.is_depended_on||0,f.has_redundancy=c.has_redundancy||0,f.degradation_priority=c.degradation_priority||0,f.offset=0,f.subsamples=c.subsamples,m.samples.push(f),m.samples_size+=f.size,m.samples_duration+=f.duration,m.first_dts===void 0&&(m.first_dts=c.dts),this.processSamples();var p=this.createSingleSampleMoof(f);return this.addBox(p),p.computeSize(),p.trafs[0].truns[0].data_offset=p.size+8,this.add("mdat").data=new Uint8Array(n),f}},v.prototype.createSingleSampleMoof=function(e){var n=0;e.is_sync?n=1<<25:n=65536;var s=new l.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=s.add("traf"),f=this.getTrackById(e.track_id);return c.add("tfhd").set("track_id",e.track_id).set("flags",l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",e.dts-(f.first_dts||0)),c.add("trun").set("flags",l.TRUN_FLAGS_DATA_OFFSET|l.TRUN_FLAGS_DURATION|l.TRUN_FLAGS_SIZE|l.TRUN_FLAGS_FLAGS|l.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[e.cts-e.dts]),s},v.prototype.lastMoofIndex=0,v.prototype.samplesDataSize=0,v.prototype.resetTables=function(){var e,n,s,c,f,m,p,_;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){n=this.moov.traks[e],n.tkhd.duration=0,n.mdia.mdhd.duration=0,s=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,s.chunk_offsets=[],c=n.mdia.minf.stbl.stsc,c.first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],f=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,f.sample_sizes=[],m=n.mdia.minf.stbl.stts,m.sample_counts=[],m.sample_deltas=[],p=n.mdia.minf.stbl.ctts,p&&(p.sample_counts=[],p.sample_offsets=[]),_=n.mdia.minf.stbl.stss;var S=n.mdia.minf.stbl.boxes.indexOf(_);S!=-1&&(n.mdia.minf.stbl.boxes[S]=null)}},v.initSampleGroups=function(e,n,s,c,f){var m,p,_,S;function w(x,U,A){this.grouping_type=x,this.grouping_type_parameter=U,this.sbgp=A,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),p=0;p<s.length;p++){for(S=s[p].grouping_type+"/"+s[p].grouping_type_parameter,_=new w(s[p].grouping_type,s[p].grouping_type_parameter,s[p]),n&&(n.sample_groups_info[S]=_),e.sample_groups_info[S]||(e.sample_groups_info[S]=_),m=0;m<c.length;m++)c[m].grouping_type===s[p].grouping_type&&(_.description=c[m],_.description.used=!0);if(f)for(m=0;m<f.length;m++)f[m].grouping_type===s[p].grouping_type&&(_.fragment_description=f[m],_.fragment_description.used=!0,_.is_fragment=!0)}if(n){if(f)for(p=0;p<f.length;p++)!f[p].used&&f[p].version>=2&&(S=f[p].grouping_type+"/0",_=new w(f[p].grouping_type,0),_.is_fragment=!0,n.sample_groups_info[S]||(n.sample_groups_info[S]=_))}else for(p=0;p<c.length;p++)!c[p].used&&c[p].version>=2&&(S=c[p].grouping_type+"/0",_=new w(c[p].grouping_type,0),e.sample_groups_info[S]||(e.sample_groups_info[S]=_))},v.setSampleGroupProperties=function(e,n,s,c){var f,m;n.sample_groups=[];for(f in c)if(n.sample_groups[f]={},n.sample_groups[f].grouping_type=c[f].grouping_type,n.sample_groups[f].grouping_type_parameter=c[f].grouping_type_parameter,s>=c[f].last_sample_in_run&&(c[f].last_sample_in_run<0&&(c[f].last_sample_in_run=0),c[f].entry_index++,c[f].entry_index<=c[f].sbgp.entries.length-1&&(c[f].last_sample_in_run+=c[f].sbgp.entries[c[f].entry_index].sample_count)),c[f].entry_index<=c[f].sbgp.entries.length-1?n.sample_groups[f].group_description_index=c[f].sbgp.entries[c[f].entry_index].group_description_index:n.sample_groups[f].group_description_index=-1,n.sample_groups[f].group_description_index!==0){var p;c[f].fragment_description?p=c[f].fragment_description:p=c[f].description,n.sample_groups[f].group_description_index>0?(n.sample_groups[f].group_description_index>65535?m=(n.sample_groups[f].group_description_index>>16)-1:m=n.sample_groups[f].group_description_index-1,p&&m>=0&&(n.sample_groups[f].description=p.entries[m])):p&&p.version>=2&&p.default_group_description_index>0&&(n.sample_groups[f].description=p.entries[p.default_group_description_index-1])}},v.process_sdtp=function(e,n,s){n&&(e?(n.is_leading=e.is_leading[s],n.depends_on=e.sample_depends_on[s],n.is_depended_on=e.sample_is_depended_on[s],n.has_redundancy=e.sample_has_redundancy[s]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},v.prototype.buildSampleLists=function(){var e,n;for(e=0;e<this.moov.traks.length;e++)n=this.moov.traks[e],this.buildTrakSampleLists(n)},v.prototype.buildTrakSampleLists=function(e){var n,s,c,f,m,p,_,S,w,x,U,A,E,T,P,z,R,D,B,F,O,I,L,M;if(e.samples=[],e.samples_duration=0,e.samples_size=0,s=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,c=e.mdia.minf.stbl.stsc,f=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,m=e.mdia.minf.stbl.stts,p=e.mdia.minf.stbl.ctts,_=e.mdia.minf.stbl.stss,S=e.mdia.minf.stbl.stsd,w=e.mdia.minf.stbl.subs,A=e.mdia.minf.stbl.stdp,x=e.mdia.minf.stbl.sbgps,U=e.mdia.minf.stbl.sgpds,D=-1,B=-1,F=-1,O=-1,I=0,L=0,M=0,v.initSampleGroups(e,null,x,U),!(typeof f>"u")){for(n=0;n<f.sample_sizes.length;n++){var k={};k.number=n,k.track_id=e.tkhd.track_id,k.timescale=e.mdia.mdhd.timescale,k.alreadyRead=0,e.samples[n]=k,k.size=f.sample_sizes[n],e.samples_size+=k.size,n===0?(T=1,E=0,k.chunk_index=T,k.chunk_run_index=E,R=c.samples_per_chunk[E],z=0,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0):n<R?(k.chunk_index=T,k.chunk_run_index=E):(T++,k.chunk_index=T,z=0,T<=P||(E++,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0),k.chunk_run_index=E,R+=c.samples_per_chunk[E]),k.description_index=c.sample_description_index[k.chunk_run_index]-1,k.description=S.entries[k.description_index],k.offset=s.chunk_offsets[k.chunk_index-1]+z,z+=k.size,n>D&&(B++,D<0&&(D=0),D+=m.sample_counts[B]),n>0?(e.samples[n-1].duration=m.sample_deltas[B],e.samples_duration+=e.samples[n-1].duration,k.dts=e.samples[n-1].dts+e.samples[n-1].duration):k.dts=0,p?(n>=F&&(O++,F<0&&(F=0),F+=p.sample_counts[O]),k.cts=e.samples[n].dts+p.sample_offsets[O]):k.cts=k.dts,_?(n==_.sample_numbers[I]-1?(k.is_sync=!0,I++):(k.is_sync=!1,k.degradation_priority=0),w&&w.entries[L].sample_delta+M==n+1&&(k.subsamples=w.entries[L].subsamples,M+=w.entries[L].sample_delta,L++)):k.is_sync=!0,v.process_sdtp(e.mdia.minf.stbl.sdtp,k,k.number),A?k.degradation_priority=A.priority[n]:k.degradation_priority=0,w&&w.entries[L].sample_delta+M==n&&(k.subsamples=w.entries[L].subsamples,M+=w.entries[L].sample_delta),(x.length>0||U.length>0)&&v.setSampleGroupProperties(e,k,n,e.sample_groups_info)}n>0&&(e.samples[n-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[n-1].dts,0),e.samples_duration+=e.samples[n-1].duration)}},v.prototype.updateSampleLists=function(){var e,n,s,c,f,m,p,_,S,w,x,U,A,E,T;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(S=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,S.type=="moof")for(w=S,e=0;e<w.trafs.length;e++){for(x=w.trafs[e],U=this.getTrackById(x.tfhd.track_id),A=this.getTrexById(x.tfhd.track_id),x.tfhd.flags&l.TFHD_FLAG_SAMPLE_DESC?c=x.tfhd.default_sample_description_index:c=A?A.default_sample_description_index:1,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_DUR?f=x.tfhd.default_sample_duration:f=A?A.default_sample_duration:0,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_SIZE?m=x.tfhd.default_sample_size:m=A?A.default_sample_size:0,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_FLAGS?p=x.tfhd.default_sample_flags:p=A?A.default_sample_flags:0,x.sample_number=0,x.sbgps.length>0&&v.initSampleGroups(U,x,x.sbgps,U.mdia.minf.stbl.sgpds,x.sgpds),n=0;n<x.truns.length;n++){var P=x.truns[n];for(s=0;s<P.sample_count;s++){E={},E.moof_number=this.lastMoofIndex,E.number_in_traf=x.sample_number,x.sample_number++,E.number=U.samples.length,x.first_sample_index=U.samples.length,U.samples.push(E),E.track_id=U.tkhd.track_id,E.timescale=U.mdia.mdhd.timescale,E.description_index=c-1,E.description=U.mdia.minf.stbl.stsd.entries[E.description_index],E.size=m,P.flags&l.TRUN_FLAGS_SIZE&&(E.size=P.sample_size[s]),U.samples_size+=E.size,E.duration=f,P.flags&l.TRUN_FLAGS_DURATION&&(E.duration=P.sample_duration[s]),U.samples_duration+=E.duration,U.first_traf_merged||s>0?E.dts=U.samples[U.samples.length-2].dts+U.samples[U.samples.length-2].duration:(x.tfdt?E.dts=x.tfdt.baseMediaDecodeTime:E.dts=0,U.first_traf_merged=!0),E.cts=E.dts,P.flags&l.TRUN_FLAGS_CTS_OFFSET&&(E.cts=E.dts+P.sample_composition_time_offset[s]),T=p,P.flags&l.TRUN_FLAGS_FLAGS?T=P.sample_flags[s]:s===0&&P.flags&l.TRUN_FLAGS_FIRST_FLAG&&(T=P.first_sample_flags),E.is_sync=!(T>>16&1),E.is_leading=T>>26&3,E.depends_on=T>>24&3,E.is_depended_on=T>>22&3,E.has_redundancy=T>>20&3,E.degradation_priority=T&65535;var z=!!(x.tfhd.flags&l.TFHD_FLAG_BASE_DATA_OFFSET),R=!!(x.tfhd.flags&l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),D=!!(P.flags&l.TRUN_FLAGS_DATA_OFFSET),B=0;z?B=x.tfhd.base_data_offset:R||n===0?B=w.start:B=_,n===0&&s===0?D?E.offset=B+P.data_offset:E.offset=B:E.offset=_,_=E.offset+E.size,(x.sbgps.length>0||x.sgpds.length>0||U.mdia.minf.stbl.sbgps.length>0||U.mdia.minf.stbl.sgpds.length>0)&&v.setSampleGroupProperties(U,E,E.number_in_traf,x.sample_groups_info)}}if(x.subs){U.has_fragment_subsamples=!0;var F=x.first_sample_index;for(n=0;n<x.subs.entries.length;n++)F+=x.subs.entries[n].sample_delta,E=U.samples[F-1],E.subsamples=x.subs.entries[n].subsamples}}}},v.prototype.getSample=function(e,n){var s,c=e.samples[n];if(!this.moov)return null;if(!c.data)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.samplesDataSize+=c.size,r.debug("ISOFile","Allocating sample #"+n+" on track #"+e.tkhd.track_id+" of size "+c.size+" (total: "+this.samplesDataSize+")");else if(c.alreadyRead==c.size)return c;for(;;){var f=this.stream.findPosition(!0,c.offset+c.alreadyRead,!1);if(f>-1){s=this.stream.buffers[f];var m=s.byteLength-(c.offset+c.alreadyRead-s.fileStart);if(c.size-c.alreadyRead<=m)return r.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+(c.size-c.alreadyRead)+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,c.size-c.alreadyRead),s.usedBytes+=c.size-c.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead=c.size,c;if(m===0)return null;r.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+m+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,m),c.alreadyRead+=m,s.usedBytes+=m,this.stream.logBufferLevel()}else return null}},v.prototype.releaseSample=function(e,n){var s=e.samples[n];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},v.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},v.prototype.getCodecs=function(){var e,n="";for(e=0;e<this.moov.traks.length;e++){var s=this.moov.traks[e];e>0&&(n+=","),n+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},v.prototype.getTrexById=function(e){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var s=this.moov.mvex.trexs[n];if(s.track_id==e)return s}return null},v.prototype.getTrackById=function(e){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var s=this.moov.traks[n];if(s.tkhd.track_id==e)return s}return null},v.prototype.items=[],v.prototype.itemsDataSize=0,v.prototype.flattenItemInfo=function(){var e=this.items,n,s,c,f=this.meta;if(f!=null&&f.hdlr!==void 0&&f.iinf!==void 0){for(n=0;n<f.iinf.item_infos.length;n++)c={},c.id=f.iinf.item_infos[n].item_ID,e[c.id]=c,c.ref_to=[],c.name=f.iinf.item_infos[n].item_name,f.iinf.item_infos[n].protection_index>0&&(c.protection=f.ipro.protections[f.iinf.item_infos[n].protection_index-1]),f.iinf.item_infos[n].item_type?c.type=f.iinf.item_infos[n].item_type:c.type="mime",c.content_type=f.iinf.item_infos[n].content_type,c.content_encoding=f.iinf.item_infos[n].content_encoding;if(f.iloc)for(n=0;n<f.iloc.items.length;n++){var m=f.iloc.items[n];switch(c=e[m.item_ID],m.data_reference_index!==0&&(r.warn("Item storage with reference to other files: not supported"),c.source=f.dinf.boxes[m.data_reference_index-1]),m.construction_method){case 0:break;case 1:r.warn("Item storage with construction_method : not supported");break;case 2:r.warn("Item storage with construction_method : not supported");break}for(c.extents=[],c.size=0,s=0;s<m.extents.length;s++)c.extents[s]={},c.extents[s].offset=m.extents[s].extent_offset+m.base_offset,c.extents[s].length=m.extents[s].extent_length,c.extents[s].alreadyRead=0,c.size+=c.extents[s].length}if(f.pitm&&(e[f.pitm.item_id].primary=!0),f.iref)for(n=0;n<f.iref.references.length;n++){var p=f.iref.references[n];for(s=0;s<p.references.length;s++)e[p.from_item_ID].ref_to.push({type:p.type,id:p.references[s]})}if(f.iprp)for(var _=0;_<f.iprp.ipmas.length;_++){var S=f.iprp.ipmas[_];for(n=0;n<S.associations.length;n++){var w=S.associations[n];for(c=e[w.id],c.properties===void 0&&(c.properties={},c.properties.boxes=[]),s=0;s<w.props.length;s++){var x=w.props[s];if(x.property_index>0&&x.property_index-1<f.iprp.ipco.boxes.length){var U=f.iprp.ipco.boxes[x.property_index-1];c.properties[U.type]=U,c.properties.boxes.push(U)}}}}}},v.prototype.getItem=function(e){var n,s;if(!this.meta)return null;if(s=this.items[e],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,r.debug("ISOFile","Allocating item #"+e+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var c=0;c<s.extents.length;c++){var f=s.extents[c];if(f.alreadyRead!==f.length){var m=this.stream.findPosition(!0,f.offset+f.alreadyRead,!1);if(m>-1){n=this.stream.buffers[m];var p=n.byteLength-(f.offset+f.alreadyRead-n.fileStart);if(f.length-f.alreadyRead<=p)r.debug("ISOFile","Getting item #"+e+" extent #"+c+" data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+(f.length-f.alreadyRead)+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,f.length-f.alreadyRead),n.usedBytes+=f.length-f.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=f.length-f.alreadyRead,f.alreadyRead=f.length;else return r.debug("ISOFile","Getting item #"+e+" extent #"+c+" partial data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+p+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,p),f.alreadyRead+=p,s.alreadyRead+=p,n.usedBytes+=p,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},v.prototype.releaseItem=function(e){var n=this.items[e];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var s=0;s<n.extents.length;s++){var c=n.extents[s];c.alreadyRead=0}return n.size}else return 0},v.prototype.processItems=function(e){for(var n in this.items){var s=this.items[n];this.getItem(s.id),e&&!s.sent&&(e(s),s.sent=!0,s.data=null)}},v.prototype.hasItem=function(e){for(var n in this.items){var s=this.items[n];if(s.name===e)return s.id}return-1},v.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},v.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},v.prototype.itemToFragmentedTrackFile=function(e){var n=e||{},s=null;if(n.itemId?s=this.getItem(n.itemId):s=this.getPrimaryItem(),s==null)return null;var c=new v;c.discardMdatData=!1;var f={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(f.width=s.properties.ispe.image_width,f.height=s.properties.ispe.image_height);var m=c.addTrack(f);return m?(c.addSample(m,s.data),c):null},v.prototype.write=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e)},v.prototype.createFragment=function(e,n,s){var c=this.getTrackById(e),f=this.getSample(c,n);if(f==null)return this.setNextSeekPositionFromSample(c.samples[n]),null;var m=s||new o;m.endianness=o.BIG_ENDIAN;var p=this.createSingleSampleMoof(f);p.write(m),p.trafs[0].truns[0].data_offset=p.size+8,r.debug("MP4Box","Adjusting data_offset with new value "+p.trafs[0].truns[0].data_offset),m.adjustUint32(p.trafs[0].truns[0].data_offset_position,p.trafs[0].truns[0].data_offset);var _=new l.mdatBox;return _.data=f.data,_.write(m),m},v.writeInitializationSegment=function(e,n,s,c){var f;r.debug("ISOFile","Generating initialization segment");var m=new o;m.endianness=o.BIG_ENDIAN,e.write(m);var p=n.add("mvex");for(s&&p.add("mehd").set("fragment_duration",s),f=0;f<n.traks.length;f++)p.add("trex").set("track_id",n.traks[f].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",c).set("default_sample_size",0).set("default_sample_flags",65536);return n.write(m),m.buffer},v.prototype.save=function(e){var n=new o;n.endianness=o.BIG_ENDIAN,this.write(n),n.save(e)},v.prototype.getBuffer=function(){var e=new o;return e.endianness=o.BIG_ENDIAN,this.write(e),e.buffer},v.prototype.initializeSegmentation=function(){var e,n,s,c;for(this.onSegment===null&&r.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),n=[],e=0;e<this.fragmentedTracks.length;e++){var f=new l.moovBox;f.mvhd=this.moov.mvhd,f.boxes.push(f.mvhd),s=this.getTrackById(this.fragmentedTracks[e].id),f.boxes.push(s),f.traks.push(s),c={},c.id=s.tkhd.track_id,c.user=this.fragmentedTracks[e].user,c.buffer=v.writeInitializationSegment(this.ftyp,f,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[e].samples.length>0?this.moov.traks[e].samples[0].duration:0),n.push(c)}return n},l.Box.prototype.printHeader=function(e){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},l.FullBox.prototype.printHeader=function(e){this.size+=4,l.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},l.Box.prototype.print=function(e){this.printHeader(e)},l.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var s=e.indent;e.indent+=" ",this.boxes[n].print(e),e.indent=s}},v.prototype.print=function(e){e.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(e)},l.mvhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},l.tkhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)};var b={};b.createFile=function(e,n){var s=e!==void 0?e:!0,c=new v(n);return c.discardMdatData=!s,c},t.createFile=b.createFile})(cx);const pB=js(cx);var ct,ro;const ng=class ng{constructor(){Hi(this,ct,[]);Hi(this,ro,0);sg(this,"meta")}append(r){we(this,ct).push(r),Qr(this,ro,we(this,ro)+(r.duration??0))}getChunks(){return we(this,ct)}getDuration(){return we(this,ro)}slice(r,a){console.log(1111,{start:r,end:a},we(this,ct));const o=new ng;o.meta=this.meta;const u=we(this,ct).findIndex(h=>h.timestamp>=r&&h.type==="key"),d=we(this,ct).findLastIndex(h=>h.timestamp<=a);if(u===-1||d===-1)throw Error("ChunkSlice out of bounds");console.log(22222,{startIndex:u,endIndex:d},we(this,ct).slice(u,d));for(const h of we(this,ct).slice(u,d))o.append(new EncodedVideoChunk({type:h.type,timestamp:h.timestamp-r,duration:h.duration??0,data:w_(h)}));return o}delete(r,a){const o=we(this,ct).findIndex(d=>d.timestamp>=r);let u=we(this,ct).findLastIndex(d=>d.timestamp<=a);if(o===-1||u===-1)throw Error("Deleted fragment out of bounds");for(let d=u;d<we(this,ct).length;d++)if(we(this,ct)[d].type==="key"){u=d;break}we(this,ct).splice(o,u-o);for(let d=o;d<we(this,ct).length;d++){const h=we(this,ct)[d];we(this,ct)[d]=new EncodedVideoChunk({type:h.type,timestamp:h.timestamp-(a-r),duration:h.duration??0,data:w_(h)})}Qr(this,ro,we(this,ct).reduce((d,h)=>(h.duration??0)+d,0))}};ct=new WeakMap,ro=new WeakMap;let rp=ng;function w_(t){const r=new ArrayBuffer(t.byteLength);return t.copyTo(r),r}function mB(t){var o,u;const r=pB.createFile(),a=r.addTrack({timescale:1e6,width:1280,height:720,brands:["isom","iso2","avc1","mp42","mp41"],avcDecoderConfigRecord:(u=(o=t.meta)==null?void 0:o.decoderConfig)==null?void 0:u.description});for(const d of t.getChunks()){const h=gB(d);r.addSample(a,h.data,h)}return r}function gB(t){const r=new ArrayBuffer(t.byteLength);t.copyTo(r);const a=t.timestamp;return{duration:t.duration??0,dts:a,cts:a,is_sync:t.type==="key",data:r}}var vB=Object.defineProperty,_B=(t,r,a)=>r in t?vB(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,Lt=(t,r,a)=>(_B(t,typeof r!="symbol"?r+"":r,a),a),Bm=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)},Oe=(t,r,a)=>(Bm(t,r,"read from private field"),a?a.call(t):r.get(t)),yi=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},Ei=(t,r,a,o)=>(Bm(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a),yB=(t,r,a)=>(Bm(t,r,"access private method"),a);let Jo=1;const E_={debug:(...t)=>{Jo<=0&&console.debug(...t)},info:(...t)=>{Jo<=1&&console.info(...t)},warn:(...t)=>{Jo<=2&&console.warn(...t)},error:(...t)=>{Jo<=3&&console.error(...t)}},tl=new Map,ua={setLogLevel:t=>{Jo=tl.get(t)??1},...E_,create:t=>Object.fromEntries(Object.entries(E_).map(([r,a])=>[r,(...o)=>a(t,...o)]))};tl.set(ua.debug,0);tl.set(ua.info,1);tl.set(ua.warn,2);tl.set(ua.error,3);const bB=()=>{let t,r=16.6;self.onmessage=a=>{a.data.event==="start"&&(self.clearInterval(t),t=self.setInterval(()=>{self.postMessage({})},r)),a.data.event==="stop"&&self.clearInterval(t)}},SB=()=>{const t=new Blob([`(${bB.toString()})()`]),r=URL.createObjectURL(t);return new Worker(r)},xB=new Map;let U_=1;const wB=SB();wB.onmessage=()=>{U_+=1;for(const[t,r]of xB.entries())U_%t===0&&r.forEach(a=>a())};function EB(t){return Array(t.numberOfChannels).fill(0).map((r,a)=>t.getChannelData(a))}function C_(t,r,a){const o=a-r,u=new Float32Array(o);let d=0;for(;d<o;)u[d]=t[(r+d)%t.length],d+=1;return u}var ip={};(function(t){var r=function(){var e=new Date,n=4,s=3,c=2,f=1,m=n,p={setLogLevel:function(_){_==this.debug?m=f:_==this.info?m=c:_==this.warn?m=s:(_==this.error,m=n)},debug:function(_,S){console.debug===void 0&&(console.debug=console.log),f>=m&&console.debug("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},log:function(_,S){this.debug(_.msg)},info:function(_,S){c>=m&&console.info("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},warn:function(_,S){s>=m&&console.warn("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},error:function(_,S){n>=m&&console.error("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)}};return p}();r.getDurationString=function(e,n){var s;function c(w,x){for(var U=""+w,A=U.split(".");A[0].length<x;)A[0]="0"+A[0];return A.join(".")}e<0?(s=!0,e=-e):s=!1;var f=n||1,m=e/f,p=Math.floor(m/3600);m-=p*3600;var _=Math.floor(m/60);m-=_*60;var S=m*1e3;return m=Math.floor(m),S-=m*1e3,S=Math.floor(S),(s?"-":"")+p+":"+c(_,2)+":"+c(m,2)+"."+c(S,3)},r.printRanges=function(e){var n=e.length;if(n>0){for(var s="",c=0;c<n;c++)c>0&&(s+=","),s+="["+r.getDurationString(e.start(c))+","+r.getDurationString(e.end(c))+"]";return s}else return"(empty)"},t.Log=r;var a=function(e){if(e instanceof ArrayBuffer)this.buffer=e,this.dataview=new DataView(e);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(e){var n=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(e,n){var s=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:n?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:n?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,s}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var n="",s=0;s<e;s++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var e=[];;){var n=this.readUint8();if(n!==0)e.push(n);else break}return String.fromCharCode.apply(null,e)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(e){for(var n=new Uint8Array(e),s=0;s<e;s++)n[s]=this.readUint8();return n},a.prototype.readInt16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readInt16();return n},a.prototype.readUint16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readUint16();return n},a.prototype.readUint32Array=function(e){for(var n=new Uint32Array(e),s=0;s<e;s++)n[s]=this.readUint32();return n},a.prototype.readInt32Array=function(e){for(var n=new Int32Array(e),s=0;s<e;s++)n[s]=this.readInt32();return n},t.MP4BoxStream=a;var o=function(e,n,s){this._byteOffset=n||0,e instanceof ArrayBuffer?this.buffer=e:typeof e=="object"?(this.dataView=e,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=s??o.LITTLE_ENDIAN};o.prototype={},o.prototype.getPosition=function(){return this.position},o.prototype._realloc=function(e){if(this._dynamicSize){var n=this._byteOffset+this.position+e,s=this._buffer.byteLength;if(n<=s){n>this._byteLength&&(this._byteLength=n);return}for(s<1&&(s=1);n>s;)s*=2;var c=new ArrayBuffer(s),f=new Uint8Array(this._buffer),m=new Uint8Array(c,0,f.length);m.set(f),this.buffer=c,this._byteLength=n}},o.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),n=new Uint8Array(e),s=new Uint8Array(this._buffer,0,n.length);n.set(s),this.buffer=e}},o.BIG_ENDIAN=!1,o.LITTLE_ENDIAN=!0,o.prototype._byteLength=0,Object.defineProperty(o.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),o.prototype.seek=function(e){var n=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(n)||!isFinite(n)?0:n},o.prototype.isEof=function(){return this.position>=this._byteLength},o.prototype.mapUint8Array=function(e){this._realloc(e*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.readInt32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Int32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Int16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt8Array=function(e){e=e??this.byteLength-this.position;var n=new Int8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readUint32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Uint32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Uint16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint8Array=function(e){e=e??this.byteLength-this.position;var n=new Uint8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readFloat64Array=function(e,n){e=e??this.byteLength-this.position/8;var s=new Float64Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readFloat32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Float32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt32=function(e){var n=this._dataView.getInt32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readInt16=function(e){var n=this._dataView.getInt16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},o.prototype.readUint32=function(e){var n=this._dataView.getUint32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readUint16=function(e){var n=this._dataView.getUint16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},o.prototype.readFloat32=function(e){var n=this._dataView.getFloat32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readFloat64=function(e){var n=this._dataView.getFloat64(this.position,e??this.endianness);return this.position+=8,n},o.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,o.memcpy=function(e,n,s,c,f){var m=new Uint8Array(e,n,f),p=new Uint8Array(s,c,f);m.set(p)},o.arrayToNative=function(e,n){return n==this.endianness?e:this.flipArrayEndianness(e)},o.nativeToEndian=function(e,n){return this.endianness==n?e:this.flipArrayEndianness(e)},o.flipArrayEndianness=function(e){for(var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=0;s<e.byteLength;s+=e.BYTES_PER_ELEMENT)for(var c=s+e.BYTES_PER_ELEMENT-1,f=s;c>f;c--,f++){var m=n[f];n[f]=n[c],n[c]=m}return e},o.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var n=[],s=0;s<e.length;s++)n[s]=e[s];return String.fromCharCode.apply(null,n)},o.prototype.readString=function(e,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(e??this.byteLength-this.position)]):new TextDecoder(n).decode(this.mapUint8Array(e))},o.prototype.readCString=function(e){var n=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),c=n;e!=null&&(c=Math.min(e,n));for(var f=0;f<c&&s[f]!==0;f++);var m=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(f)]);return e!=null?this.position+=c-f:f!=n&&(this.position+=1),m};var u=Math.pow(2,32);o.prototype.readInt64=function(){return this.readInt32()*u+this.readUint32()},o.prototype.readUint64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readInt64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},t.DataStream=o,o.prototype.save=function(e){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(n),c=document.createElement("a");document.body.appendChild(c),c.setAttribute("href",s),c.setAttribute("download",e),c.setAttribute("target","_self"),c.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},o.prototype._dynamicSize=!0,Object.defineProperty(o.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),o.prototype.shift=function(e){var n=new ArrayBuffer(this._byteLength-e),s=new Uint8Array(n),c=new Uint8Array(this._buffer,e,s.length);s.set(c),this.buffer=n,this.position-=e},o.prototype.writeInt32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt32(e[s],n)},o.prototype.writeInt16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt16(e[s],n)},o.prototype.writeInt8Array=function(e){if(this._realloc(e.length*1),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var n=0;n<e.length;n++)this.writeInt8(e[n])},o.prototype.writeUint32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint32(e[s],n)},o.prototype.writeUint16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint16(e[s],n)},o.prototype.writeUint8Array=function(e){if(this._realloc(e.length*1),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var n=0;n<e.length;n++)this.writeUint8(e[n])},o.prototype.writeFloat64Array=function(e,n){if(this._realloc(e.length*8),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat64(e[s],n)},o.prototype.writeFloat32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat32(e[s],n)},o.prototype.writeInt32=function(e,n){this._realloc(4),this._dataView.setInt32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeInt16=function(e,n){this._realloc(2),this._dataView.setInt16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},o.prototype.writeUint32=function(e,n){this._realloc(4),this._dataView.setUint32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeUint16=function(e,n){this._realloc(2),this._dataView.setUint16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},o.prototype.writeFloat32=function(e,n){this._realloc(4),this._dataView.setFloat32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeFloat64=function(e,n){this._realloc(8),this._dataView.setFloat64(this.position,e,n??this.endianness),this.position+=8},o.prototype.writeUCS2String=function(e,n,s){s==null&&(s=e.length);for(var c=0;c<e.length&&c<s;c++)this.writeUint16(e.charCodeAt(c),n);for(;c<s;c++)this.writeUint16(0)},o.prototype.writeString=function(e,n,s){var c=0;if(n==null||n=="ASCII")if(s!=null){var f=Math.min(e.length,s);for(c=0;c<f;c++)this.writeUint8(e.charCodeAt(c));for(;c<s;c++)this.writeUint8(0)}else for(c=0;c<e.length;c++)this.writeUint8(e.charCodeAt(c));else this.writeUint8Array(new TextEncoder(n).encode(e.substring(0,s)))},o.prototype.writeCString=function(e,n){var s=0;if(n!=null){var c=Math.min(e.length,n);for(s=0;s<c;s++)this.writeUint8(e.charCodeAt(s));for(;s<n;s++)this.writeUint8(0)}else{for(s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));this.writeUint8(0)}},o.prototype.writeStruct=function(e,n){for(var s=0;s<e.length;s+=2){var c=e[s+1];this.writeType(c,n[e[s]],n)}},o.prototype.writeType=function(e,n,s){var c;if(typeof e=="function")return e(this,n);if(typeof e=="object"&&!(e instanceof Array))return e.set(this,n,s);var f=null,m="ASCII",p=this.position;switch(typeof e=="string"&&/:/.test(e)&&(c=e.split(":"),e=c[0],f=parseInt(c[1])),typeof e=="string"&&/,/.test(e)&&(c=e.split(","),e=c[0],m=parseInt(c[1])),e){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,o.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,o.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,o.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,o.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,o.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,o.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,o.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,o.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,o.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,o.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,o.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,o.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,f);break;case"string":this.writeString(n,m,f);break;case"u16string":this.writeUCS2String(n,this.endianness,f);break;case"u16stringle":this.writeUCS2String(n,o.LITTLE_ENDIAN,f);break;case"u16stringbe":this.writeUCS2String(n,o.BIG_ENDIAN,f);break;default:if(e.length==3){for(var _=e[1],S=0;S<n.length;S++)this.writeType(_,n[S]);break}else{this.writeStruct(e,n);break}}f!=null&&(this.position=p,this._realloc(f),this.position=p+f)},o.prototype.writeUint64=function(e){var n=Math.floor(e/u);this.writeUint32(n),this.writeUint32(e&4294967295)},o.prototype.writeUint24=function(e){this.writeUint8((e&16711680)>>16),this.writeUint8((e&65280)>>8),this.writeUint8(e&255)},o.prototype.adjustUint32=function(e,n){var s=this.position;this.seek(e),this.writeUint32(n),this.seek(s)},o.prototype.mapInt32Array=function(e,n){this._realloc(e*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapInt16Array=function(e,n){this._realloc(e*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapInt8Array=function(e){this._realloc(e*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.mapUint32Array=function(e,n){this._realloc(e*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapUint16Array=function(e,n){this._realloc(e*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapFloat64Array=function(e,n){this._realloc(e*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*8,s},o.prototype.mapFloat32Array=function(e,n){this._realloc(e*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s};var d=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};d.prototype=new o(new ArrayBuffer,0,o.BIG_ENDIAN),d.prototype.initialized=function(){var e;return this.bufferIndex>-1?!0:this.buffers.length>0?(e=this.buffers[0],e.fileStart===0?(this.buffer=e,this.bufferIndex=0,r.debug("MultiBufferStream","Stream ready for parsing"),!0):(r.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(r.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(e,n){r.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+n.byteLength));var s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s.buffer},d.prototype.reduceBuffer=function(e,n,s){var c;return c=new Uint8Array(s),c.set(new Uint8Array(e,n,s)),c.buffer.fileStart=e.fileStart+n,c.buffer.usedBytes=0,c.buffer},d.prototype.insertBuffer=function(e){for(var n=!0,s=0;s<this.buffers.length;s++){var c=this.buffers[s];if(e.fileStart<=c.fileStart){if(e.fileStart===c.fileStart)if(e.byteLength>c.byteLength){this.buffers.splice(s,1),s--;continue}else r.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring");else e.fileStart+e.byteLength<=c.fileStart||(e=this.reduceBuffer(e,0,c.fileStart-e.fileStart)),r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(s,0,e),s===0&&(this.buffer=e);n=!1;break}else if(e.fileStart<c.fileStart+c.byteLength){var f=c.fileStart+c.byteLength-e.fileStart,m=e.byteLength-f;if(m>0)e=this.reduceBuffer(e,f,m);else{n=!1;break}}}n&&(r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),s===0&&(this.buffer=e))},d.prototype.logBufferLevel=function(e){var n,s,c,f,m=[],p,_="";for(c=0,f=0,n=0;n<this.buffers.length;n++)s=this.buffers[n],n===0?(p={},m.push(p),p.start=s.fileStart,p.end=s.fileStart+s.byteLength,_+="["+p.start+"-"):p.end===s.fileStart?p.end=s.fileStart+s.byteLength:(p={},p.start=s.fileStart,_+=m[m.length-1].end-1+"], ["+p.start+"-",p.end=s.fileStart+s.byteLength,m.push(p)),c+=s.usedBytes,f+=s.byteLength;m.length>0&&(_+=p.end-1+"]");var S=e?r.info:r.debug;this.buffers.length===0?S("MultiBufferStream","No more buffer in memory"):S("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+c+"/"+f+" bytes), continuous ranges: "+_)},d.prototype.cleanBuffers=function(){var e,n;for(e=0;e<this.buffers.length;e++)n=this.buffers[e],n.usedBytes===n.byteLength&&(r.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},d.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length)if(e=this.buffers[this.bufferIndex+1],e.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,s=this.buffer.usedBytes,c=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=c,r.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},d.prototype.findPosition=function(e,n,s){var c,f=null,m=-1;for(e===!0?c=0:c=this.bufferIndex;c<this.buffers.length&&(f=this.buffers[c],f.fileStart<=n);)m=c,s&&(f.fileStart+f.byteLength<=n?f.usedBytes=f.byteLength:f.usedBytes=n-f.fileStart,this.logBufferLevel()),c++;return m!==-1?(f=this.buffers[m],f.fileStart+f.byteLength>=n?(r.debug("MultiBufferStream","Found position in existing buffer #"+m),m):-1):-1},d.prototype.findEndContiguousBuf=function(e){var n,s,c,f=e!==void 0?e:this.bufferIndex;if(s=this.buffers[f],this.buffers.length>f+1)for(n=f+1;n<this.buffers.length&&(c=this.buffers[n],c.fileStart===s.fileStart+s.byteLength);n++)s=c;return s.fileStart+s.byteLength},d.prototype.getEndFilePositionAfter=function(e){var n=this.findPosition(!0,e,!1);return n!==-1?this.findEndContiguousBuf(n):e},d.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},d.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},d.prototype.seek=function(e,n,s){var c;return c=this.findPosition(n,e,s),c!==-1?(this.buffer=this.buffers[c],this.bufferIndex=c,this.position=e-this.buffer.fileStart,r.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(r.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},d.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},d.prototype.getLength=function(){return this.byteLength},d.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=d;var h=function(){var e=3,n=4,s=5,c=6,f=[];f[e]="ES_Descriptor",f[n]="DecoderConfigDescriptor",f[s]="DecoderSpecificInfo",f[c]="SLConfigDescriptor",this.getDescriptorName=function(_){return f[_]};var m=this,p={};return this.parseOneDescriptor=function(_){var S=0,w,x,U;for(w=_.readUint8(),U=_.readUint8();U&128;)S=(U&127)<<7,U=_.readUint8();return S+=U&127,r.debug("MPEG4DescriptorParser","Found "+(f[w]||"Descriptor "+w)+", size "+S+" at position "+_.getPosition()),f[w]?x=new p[f[w]](S):x=new p.Descriptor(S),x.parse(_),x},p.Descriptor=function(_,S){this.tag=_,this.size=S,this.descs=[]},p.Descriptor.prototype.parse=function(_){this.data=_.readUint8Array(this.size)},p.Descriptor.prototype.findDescriptor=function(_){for(var S=0;S<this.descs.length;S++)if(this.descs[S].tag==_)return this.descs[S];return null},p.Descriptor.prototype.parseRemainingDescriptors=function(_){for(var S=_.position;_.position<S+this.size;){var w=m.parseOneDescriptor(_);this.descs.push(w)}},p.ES_Descriptor=function(_){p.Descriptor.call(this,e,_)},p.ES_Descriptor.prototype=new p.Descriptor,p.ES_Descriptor.prototype.parse=function(_){if(this.ES_ID=_.readUint16(),this.flags=_.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=_.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var S=_.readUint8();this.URL=_.readString(S),this.size-=S+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=_.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(_)},p.ES_Descriptor.prototype.getOTI=function(_){var S=this.findDescriptor(n);return S?S.oti:0},p.ES_Descriptor.prototype.getAudioConfig=function(_){var S=this.findDescriptor(n);if(!S)return null;var w=S.findDescriptor(s);if(w&&w.data){var x=(w.data[0]&248)>>3;return x===31&&w.data.length>=2&&(x=32+((w.data[0]&7)<<3)+((w.data[1]&224)>>5)),x}else return null},p.DecoderConfigDescriptor=function(_){p.Descriptor.call(this,n,_)},p.DecoderConfigDescriptor.prototype=new p.Descriptor,p.DecoderConfigDescriptor.prototype.parse=function(_){this.oti=_.readUint8(),this.streamType=_.readUint8(),this.bufferSize=_.readUint24(),this.maxBitrate=_.readUint32(),this.avgBitrate=_.readUint32(),this.size-=13,this.parseRemainingDescriptors(_)},p.DecoderSpecificInfo=function(_){p.Descriptor.call(this,s,_)},p.DecoderSpecificInfo.prototype=new p.Descriptor,p.SLConfigDescriptor=function(_){p.Descriptor.call(this,c,_)},p.SLConfigDescriptor.prototype=new p.Descriptor,this};t.MPEG4DescriptorParser=h;var l={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"],["grpl"],["j2kH"],["etyp",["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){l.FullBox.prototype=new l.Box,l.ContainerBox.prototype=new l.Box,l.SampleEntry.prototype=new l.Box,l.TrackGroupTypeBox.prototype=new l.FullBox,l.BASIC_BOXES.forEach(function(e){l.createBoxCtor(e)}),l.FULL_BOXES.forEach(function(e){l.createFullBoxCtor(e)}),l.CONTAINER_BOXES.forEach(function(e){l.createContainerBoxCtor(e[0],null,e[1])})},Box:function(e,n,s){this.type=e,this.size=n,this.uuid=s},FullBox:function(e,n,s){l.Box.call(this,e,n,s),this.flags=0,this.version=0},ContainerBox:function(e,n,s){l.Box.call(this,e,n,s),this.boxes=[]},SampleEntry:function(e,n,s,c){l.ContainerBox.call(this,e,n),this.hdr_size=s,this.start=c},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,n){l.FullBox.call(this,e,n)},createBoxCtor:function(e,n){l.boxCodes.push(e),l[e+"Box"]=function(s){l.Box.call(this,e,s)},l[e+"Box"].prototype=new l.Box,n&&(l[e+"Box"].prototype.parse=n)},createFullBoxCtor:function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){this.parseFullHeader(s),n&&n.call(this,s)}},addSubBoxArrays:function(e){if(e){this.subBoxNames=e;for(var n=e.length,s=0;s<n;s++)this[e[s]+"s"]=[]}},createContainerBoxCtor:function(e,n,s){l[e+"Box"]=function(c){l.ContainerBox.call(this,e,c),l.addSubBoxArrays.call(this,s)},l[e+"Box"].prototype=new l.ContainerBox,n&&(l[e+"Box"].prototype.parse=n)},createMediaSampleEntryCtor:function(e,n,s){l.sampleEntryCodes[e]=[],l[e+"SampleEntry"]=function(c,f){l.SampleEntry.call(this,c,f),l.addSubBoxArrays.call(this,s)},l[e+"SampleEntry"].prototype=new l.SampleEntry,n&&(l[e+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(e,n,s,c){l.sampleEntryCodes[e].push(n),l[n+"SampleEntry"]=function(f){l[e+"SampleEntry"].call(this,n,f),l.addSubBoxArrays.call(this,c)},l[n+"SampleEntry"].prototype=new l[e+"SampleEntry"],s&&(l[n+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(e,n,s){l.createSampleEntryCtor.call(this,e,n,s,["sinf"])},createSampleGroupCtor:function(e,n){l[e+"SampleGroupEntry"]=function(s){l.SampleGroupEntry.call(this,e,s)},l[e+"SampleGroupEntry"].prototype=new l.SampleGroupEntry,n&&(l[e+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(e,n){l[e+"TrackGroupTypeBox"]=function(s){l.TrackGroupTypeBox.call(this,e,s)},l[e+"TrackGroupTypeBox"].prototype=new l.TrackGroupTypeBox,n&&(l[e+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(e,n,s,c){l.UUIDs.push(e),l.UUIDBoxes[e]=function(f){n?l.FullBox.call(this,"uuid",f,e):s?l.ContainerBox.call(this,"uuid",f,e):l.Box.call(this,"uuid",f,e)},l.UUIDBoxes[e].prototype=n?new l.FullBox:s?new l.ContainerBox:new l.Box,c&&(n?l.UUIDBoxes[e].prototype.parse=function(f){this.parseFullHeader(f),c&&c.call(this,f)}:l.UUIDBoxes[e].prototype.parse=c)}};l.initialize(),l.TKHD_FLAG_ENABLED=1,l.TKHD_FLAG_IN_MOVIE=2,l.TKHD_FLAG_IN_PREVIEW=4,l.TFHD_FLAG_BASE_DATA_OFFSET=1,l.TFHD_FLAG_SAMPLE_DESC=2,l.TFHD_FLAG_SAMPLE_DUR=8,l.TFHD_FLAG_SAMPLE_SIZE=16,l.TFHD_FLAG_SAMPLE_FLAGS=32,l.TFHD_FLAG_DUR_EMPTY=65536,l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,l.TRUN_FLAGS_DATA_OFFSET=1,l.TRUN_FLAGS_FIRST_FLAG=4,l.TRUN_FLAGS_DURATION=256,l.TRUN_FLAGS_SIZE=512,l.TRUN_FLAGS_FLAGS=1024,l.TRUN_FLAGS_CTS_OFFSET=2048,l.Box.prototype.add=function(e){return this.addBox(new l[e+"Box"])},l.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},l.Box.prototype.set=function(e,n){return this[e]=n,this},l.Box.prototype.addEntry=function(e,n){var s=n||"entries";return this[s]||(this[s]=[]),this[s].push(e),this},t.BoxParser=l,l.parseUUID=function(e){return l.parseHex16(e)},l.parseHex16=function(e){for(var n="",s=0;s<16;s++){var c=e.readUint8().toString(16);n+=c.length===1?"0"+c:c}return n},l.parseOneBox=function(e,n,s){var c,f=e.getPosition(),m=0,p,_;if(e.getEndPosition()-f<8)return r.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:l.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return r.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:l.ERR_NOT_ENOUGH_DATA};var S=e.readUint32(),w=e.readString(4),x=w;if(r.debug("BoxParser","Found box of type '"+w+"' and size "+S+" at position "+f),m=8,w=="uuid"){if(e.getEndPosition()-e.getPosition()<16||s-m<16)return e.seek(f),r.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:l.ERR_NOT_ENOUGH_DATA};_=l.parseUUID(e),m+=16,x=_}if(S==1){if(e.getEndPosition()-e.getPosition()<8||s&&s-m<8)return e.seek(f),r.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+w+'" box'),{code:l.ERR_NOT_ENOUGH_DATA};S=e.readUint64(),m+=8}else if(S===0){if(s)S=s;else if(w!=="mdat")return r.error("BoxParser","Unlimited box size not supported for type: '"+w+"'"),c=new l.Box(w,S),{code:l.OK,box:c,size:c.size}}return S!==0&&S<m?(r.error("BoxParser","Box of type "+w+" has an invalid size "+S+" (too small to be a box)"),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):S!==0&&s&&S>s?(r.error("BoxParser","Box of type '"+w+"' has a size "+S+" greater than its container size "+s),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):S!==0&&f+S>e.getEndPosition()?(e.seek(f),r.info("BoxParser","Not enough data in stream to parse the entire '"+w+"' box"),{code:l.ERR_NOT_ENOUGH_DATA,type:w,size:S,hdr_size:m,start:f}):n?{code:l.OK,type:w,size:S,hdr_size:m,start:f}:(l[w+"Box"]?c=new l[w+"Box"](S):w!=="uuid"?(r.warn("BoxParser","Unknown box type: '"+w+"'"),c=new l.Box(w,S),c.has_unparsed_data=!0):l.UUIDBoxes[_]?c=new l.UUIDBoxes[_](S):(r.warn("BoxParser","Unknown uuid type: '"+_+"'"),c=new l.Box(w,S),c.uuid=_,c.has_unparsed_data=!0),c.hdr_size=m,c.start=f,c.write===l.Box.prototype.write&&c.type!=="mdat"&&(r.info("BoxParser","'"+x+"' box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(e)),c.parse(e),p=e.getPosition()-(c.start+c.size),p<0?(r.warn("BoxParser","Parsing of box '"+x+"' did not read the entire indicated box data size (missing "+-p+" bytes), seeking forward"),e.seek(c.start+c.size)):p>0&&(r.error("BoxParser","Parsing of box '"+x+"' read "+p+" more bytes than the indicated box data size, seeking backwards"),c.size!==0&&e.seek(c.start+c.size)),{code:l.OK,box:c,size:c.size})},l.Box.prototype.parse=function(e){this.type!="mdat"?this.data=e.readUint8Array(this.size-this.hdr_size):this.size===0?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},l.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},l.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.ContainerBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)if(s=n.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var c=s.type!=="uuid"?s.type:s.uuid;this[c]?r.warn("Box of type "+c+" already stored in field of this type"):this[c]=s}else return},l.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},l.SAMPLE_ENTRY_TYPE_VISUAL="Visual",l.SAMPLE_ENTRY_TYPE_AUDIO="Audio",l.SAMPLE_ENTRY_TYPE_HINT="Hint",l.SAMPLE_ENTRY_TYPE_METADATA="Metadata",l.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",l.SAMPLE_ENTRY_TYPE_SYSTEM="System",l.SAMPLE_ENTRY_TYPE_TEXT="Text",l.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},l.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},l.SampleEntry.prototype.parseFooter=function(e){l.ContainerBox.prototype.parse.call(this,e)},l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_HINT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var n;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),n=Math.min(31,e.readUint8()),this.compressorname=e.readString(n),n<31&&e.readString(31-n),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT,"enct"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"encm"),l.createBoxCtor("a1lx",function(e){var n=e.readUint8()&1,s=((n&1)+1)*16;this.layer_size=[];for(var c=0;c<3;c++)s==16?this.layer_size[c]=e.readUint16():this.layer_size[c]=e.readUint32()}),l.createBoxCtor("a1op",function(e){this.op_index=e.readUint8()}),l.createFullBoxCtor("auxC",function(e){this.aux_type=e.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(n)}),l.createBoxCtor("av1C",function(e){var n=e.readUint8();if(n>>7&!1){r.error("av1C marker problem");return}if(this.version=n&127,this.version!==1){r.error("av1C version "+this.version+" not supported");return}if(n=e.readUint8(),this.seq_profile=n>>5&7,this.seq_level_idx_0=n&31,n=e.readUint8(),this.seq_tier_0=n>>7&1,this.high_bitdepth=n>>6&1,this.twelve_bit=n>>5&1,this.monochrome=n>>4&1,this.chroma_subsampling_x=n>>3&1,this.chroma_subsampling_y=n>>2&1,this.chroma_sample_position=n&3,n=e.readUint8(),this.reserved_1=n>>5&7,this.reserved_1!==0){r.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=n>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=n&15;else if(this.reserved_2=n&15,this.reserved_2!==0){r.error("av1C reserved_2 parsing problem");return}var s=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(s)}),l.createBoxCtor("avcC",function(e){var n,s;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=e.readUint8()&3,this.nb_SPS_nalus=e.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=e.readUint16(),this.SPS[n].nalu=e.readUint8Array(this.SPS[n].length),s-=2+this.SPS[n].length;for(this.nb_PPS_nalus=e.readUint8(),s--,this.PPS=[],n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=e.readUint16(),this.PPS[n].nalu=e.readUint8Array(this.PPS[n].length),s-=2+this.PPS[n].length;s>0&&(this.ext=e.readUint8Array(s))}),l.createBoxCtor("btrt",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),l.createFullBoxCtor("ccst",function(e){var n=e.readUint8();this.all_ref_pics_intra=(n&128)==128,this.intra_pred_used=(n&64)==64,this.max_ref_per_pic=(n&63)>>2,e.readUint24()}),l.createBoxCtor("cdef",function(e){var n;for(this.channel_count=e.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],n=0;n<this.channel_count;n++)this.channel_indexes.push(e.readUint16()),this.channel_types.push(e.readUint16()),this.channel_associations.push(e.readUint16())}),l.createBoxCtor("clap",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),l.createBoxCtor("clli",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),l.createFullBoxCtor("cmex",function(e){this.flags&1&&(this.pos_x=e.readInt32()),this.flags&2&&(this.pos_y=e.readInt32()),this.flags&4&&(this.pos_z=e.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=e.readInt32(),this.quat_y=e.readInt32(),this.quat_z=e.readInt32()):(this.quat_x=e.readInt16(),this.quat_y=e.readInt16(),this.quat_z=e.readInt16()):this.version==1),this.flags&32&&(this.id=e.readUint32())}),l.createFullBoxCtor("cmin",function(e){this.focal_length_x=e.readInt32(),this.principal_point_x=e.readInt32(),this.principal_point_y=e.readInt32(),this.flags&1&&(this.focal_length_y=e.readInt32(),this.skew_factor=e.readInt32())}),l.createBoxCtor("cmpd",function(e){for(this.component_count=e.readUint16(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var n=e.readUint16();this.component_types.push(n),n>=32768&&this.component_type_urls.push(e.readCString())}}),l.createFullBoxCtor("co64",function(e){var n,s;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<n;s++)this.chunk_offsets.push(e.readUint64())}),l.createFullBoxCtor("CoLL",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),l.createBoxCtor("colr",function(e){if(this.colour_type=e.readString(4),this.colour_type==="nclx"){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var n=e.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=e.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=e.readUint8Array(this.size-4))}),l.createFullBoxCtor("cprt",function(e){this.parseLanguage(e),this.notice=e.readCString()}),l.createFullBoxCtor("cslg",function(e){this.version===0&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),l.createFullBoxCtor("ctts",function(e){var n,s;if(n=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<n;s++){this.sample_counts.push(e.readUint32());var c=e.readInt32();c<0&&r.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(c)}else if(this.version==1)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),l.createBoxCtor("dac3",function(e){var n=e.readUint8(),s=e.readUint8(),c=e.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|c>>5&7}),l.createBoxCtor("dec3",function(e){var n=e.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var c={};this.ind_subs.push(c);var f=e.readUint8(),m=e.readUint8(),p=e.readUint8();c.fscod=f>>6,c.bsid=f>>1&31,c.bsmod=(f&1)<<4|m>>4&15,c.acmod=m>>1&7,c.lfeon=m&1,c.num_dep_sub=p>>1&15,c.num_dep_sub>0&&(c.chan_loc=(p&1)<<8|e.readUint8())}}),l.createFullBoxCtor("dfLa",function(e){var n=127,s=128,c=[],f=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(e);do{var m=e.readUint8(),p=Math.min(m&n,f.length-1);if(p?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),c.push(f[p]),m&s)break}while(!0);this.numMetadataBlocks=c.length+" ("+c.join(", ")+")"}),l.createBoxCtor("dimm",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("dmed",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dOps",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=e.readUint8()}}),l.createFullBoxCtor("dref",function(e){var n,s;this.entries=[];for(var c=e.readUint32(),f=0;f<c;f++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=n.box,this.entries.push(s);else return}),l.createBoxCtor("drep",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("elng",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("elst",function(e){this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),this.version===1?(c.segment_duration=e.readUint64(),c.media_time=e.readInt64()):(c.segment_duration=e.readUint32(),c.media_time=e.readInt32()),c.media_rate_integer=e.readInt16(),c.media_rate_fraction=e.readInt16()}}),l.createFullBoxCtor("emsg",function(e){this.version==1?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=e.readUint8Array(n)}),l.createEntityToGroupCtor=function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){if(this.parseFullHeader(s),n)n.call(this,s);else for(this.group_id=s.readUint32(),this.num_entities_in_group=s.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var c=s.readUint32();this.entity_ids.push(c)}}},l.createEntityToGroupCtor("aebr"),l.createEntityToGroupCtor("afbr"),l.createEntityToGroupCtor("albc"),l.createEntityToGroupCtor("altr"),l.createEntityToGroupCtor("brst"),l.createEntityToGroupCtor("dobr"),l.createEntityToGroupCtor("eqiv"),l.createEntityToGroupCtor("favc"),l.createEntityToGroupCtor("fobr"),l.createEntityToGroupCtor("iaug"),l.createEntityToGroupCtor("pano"),l.createEntityToGroupCtor("slid"),l.createEntityToGroupCtor("ster"),l.createEntityToGroupCtor("tsyn"),l.createEntityToGroupCtor("wbbr"),l.createEntityToGroupCtor("prgr"),l.createFullBoxCtor("esds",function(e){var n=e.readUint8Array(this.size-this.hdr_size);if(this.data=n,typeof h<"u"){var s=new h;this.esd=s.parseOneDescriptor(new o(n.buffer,0,o.BIG_ENDIAN))}}),l.createBoxCtor("fiel",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),l.createBoxCtor("frma",function(e){this.data_format=e.readString(4)}),l.createBoxCtor("ftyp",function(e){var n=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),n-=8,this.compatible_brands=[];for(var s=0;n>=4;)this.compatible_brands[s]=e.readString(4),n-=4,s++}),l.createFullBoxCtor("hdlr",function(e){this.version===0&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),l.createBoxCtor("hvcC",function(e){var n,s,c,f;this.configurationVersion=e.readUint8(),f=e.readUint8(),this.general_profile_space=f>>6,this.general_tier_flag=(f&32)>>5,this.general_profile_idc=f&31,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=e.readUint16()&4095,this.parallelismType=e.readUint8()&3,this.chroma_format_idc=e.readUint8()&3,this.bit_depth_luma_minus8=e.readUint8()&7,this.bit_depth_chroma_minus8=e.readUint8()&7,this.avgFrameRate=e.readUint16(),f=e.readUint8(),this.constantFrameRate=f>>6,this.numTemporalLayers=(f&13)>>3,this.temporalIdNested=(f&4)>>2,this.lengthSizeMinusOne=f&3,this.nalu_arrays=[];var m=e.readUint8();for(n=0;n<m;n++){var p=[];this.nalu_arrays.push(p),f=e.readUint8(),p.completeness=(f&128)>>7,p.nalu_type=f&63;var _=e.readUint16();for(s=0;s<_;s++){var S={};p.push(S),c=e.readUint16(),S.data=e.readUint8Array(c)}}}),l.createFullBoxCtor("iinf",function(e){var n;this.version===0?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)n.box.type!=="infe"&&r.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[s]=n.box;else return}),l.createFullBoxCtor("iloc",function(e){var n;n=e.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=e.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=e.readUint16();else if(this.version===2)s=e.readUint32();else throw"version of iloc box not supported";for(var c=0;c<s;c++){var f={};if(this.items.push(f),this.version<2)f.item_ID=e.readUint16();else if(this.version===2)f.item_ID=e.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?f.construction_method=e.readUint16()&15:f.construction_method=0,f.data_reference_index=e.readUint16(),this.base_offset_size){case 0:f.base_offset=0;break;case 4:f.base_offset=e.readUint32();break;case 8:f.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var m=e.readUint16();f.extents=[];for(var p=0;p<m;p++){var _={};if(f.extents.push(_),this.version===1||this.version===2)switch(this.index_size){case 0:_.extent_index=0;break;case 4:_.extent_index=e.readUint32();break;case 8:_.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:_.extent_offset=0;break;case 4:_.extent_offset=e.readUint32();break;case 8:_.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:_.extent_length=0;break;case 4:_.extent_length=e.readUint32();break;case 8:_.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),l.createBoxCtor("imir",function(e){var n=e.readUint8();this.reserved=n>>7,this.axis=n&1}),l.createFullBoxCtor("infe",function(e){if((this.version===0||this.version===1)&&(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),this.version===1){this.extension_type=e.readString(4),r.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=e.readUint16():this.version===3&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),this.item_type==="mime"?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):this.item_type==="uri "&&(this.item_uri_type=e.readCString()))}),l.createFullBoxCtor("ipma",function(e){var n,s;for(entry_count=e.readUint32(),this.associations=[],n=0;n<entry_count;n++){var c={};this.associations.push(c),this.version<1?c.id=e.readUint16():c.id=e.readUint32();var f=e.readUint8();for(c.props=[],s=0;s<f;s++){var m=e.readUint8(),p={};c.props.push(p),p.essential=(m&128)>>7===1,this.flags&1?p.property_index=(m&127)<<8|e.readUint8():p.property_index=m&127}}}),l.createFullBoxCtor("iref",function(e){var n,s;for(this.references=[];e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)this.version===0?s=new l.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):s=new l.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.references.push(s);else return}),l.createBoxCtor("irot",function(e){this.angle=e.readUint8()&3}),l.createFullBoxCtor("ispe",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),l.createFullBoxCtor("kind",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),l.createFullBoxCtor("leva",function(e){var n=e.readUint8();this.levels=[];for(var s=0;s<n;s++){var c={};this.levels[s]=c,c.track_ID=e.readUint32();var f=e.readUint8();switch(c.padding_flag=f>>7,c.assignment_type=f&127,c.assignment_type){case 0:c.grouping_type=e.readString(4);break;case 1:c.grouping_type=e.readString(4),c.grouping_type_parameter=e.readUint32();break;case 2:break;case 3:break;case 4:c.sub_track_id=e.readUint32();break;default:r.warn("BoxParser","Unknown leva assignement type")}}}),l.createBoxCtor("lsel",function(e){this.layer_id=e.readUint16()}),l.createBoxCtor("maxr",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),l.createBoxCtor("mdcv",function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),l.createFullBoxCtor("mdhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),l.createFullBoxCtor("mehd",function(e){this.flags&1&&(r.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),l.createFullBoxCtor("meta",function(e){this.boxes=[],l.ContainerBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("mfhd",function(e){this.sequence_number=e.readUint32()}),l.createFullBoxCtor("mfro",function(e){this._size=e.readUint32()}),l.createFullBoxCtor("mvhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),l.createBoxCtor("npck",function(e){this.packetssent=e.readUint32()}),l.createBoxCtor("nump",function(e){this.packetssent=e.readUint64()}),l.createFullBoxCtor("padb",function(e){var n=e.readUint32();this.padbits=[];for(var s=0;s<Math.floor((n+1)/2);s++)this.padbits=e.readUint8()}),l.createBoxCtor("pasp",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),l.createBoxCtor("payl",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createBoxCtor("payt",function(e){this.payloadID=e.readUint32();var n=e.readUint8();this.rtpmap_string=e.readString(n)}),l.createFullBoxCtor("pdin",function(e){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<n;s++)this.rate[s]=e.readUint32(),this.initial_delay[s]=e.readUint32()}),l.createFullBoxCtor("pitm",function(e){this.version===0?this.item_id=e.readUint16():this.item_id=e.readUint32()}),l.createFullBoxCtor("pixi",function(e){var n;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=e.readUint8()}),l.createBoxCtor("pmax",function(e){this.bytes=e.readUint32()}),l.createFullBoxCtor("prdi",function(e){if(this.step_count=e.readUint16(),this.item_count=[],this.flags&2)for(var n=0;n<this.step_count;n++)this.item_count[n]=e.readUint16()}),l.createFullBoxCtor("prft",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),this.version===0?this.media_time=e.readUint32():this.media_time=e.readUint64()}),l.createFullBoxCtor("pssh",function(e){if(this.system_id=l.parseHex16(e),this.version>0){var n=e.readUint32();this.kid=[];for(var s=0;s<n;s++)this.kid[s]=l.parseHex16(e)}var c=e.readUint32();c>0&&(this.data=e.readUint8Array(c))}),l.createFullBoxCtor("clef",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("enof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("prof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),l.createBoxCtor("rtp ",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),l.createFullBoxCtor("saio",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var n=e.readUint32();this.offset=[];for(var s=0;s<n;s++)this.version===0?this.offset[s]=e.readUint32():this.offset[s]=e.readUint64()}),l.createFullBoxCtor("saiz",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var n=e.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var s=0;s<n;s++)this.sample_info_size[s]=e.readUint8()}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),l.createSampleGroupCtor("alst",function(e){var n,s=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],n=0;n<s;n++)this.sample_offset[n]=e.readUint32();var c=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<c/4;n++)this.num_output_samples[n]=e.readUint16(),this.num_total_samples[n]=e.readUint16()}),l.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),l.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var n=e.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var s=e.readUint8(),c=0;c<s;c++){var f={};this.dependency.push(f),f.subSeqDirectionFlag=e.readUint8(),f.layerNumber=e.readUint8(),f.subSequenceIdentifier=e.readUint16()}}),l.createSampleGroupCtor("dtrt",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("mvif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),l.createSampleGroupCtor("rap ",function(e){var n=e.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),l.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)r.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=e.readUint32(),this.target_rate_share[n]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),l.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),l.SampleGroupEntry.prototype.parse=function(e){r.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},l.createSampleGroupCtor("scif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("scnm",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var n=e.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=l.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),l.createSampleGroupCtor("stsa",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("sync",function(e){var n=e.readUint8();this.NAL_unit_type=n&63}),l.createSampleGroupCtor("tele",function(e){var n=e.readUint8();this.level_independently_decodable=n>>7}),l.createSampleGroupCtor("tsas",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("tscl",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("vipr",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createFullBoxCtor("sbgp",function(e){this.grouping_type=e.readString(4),this.version===1?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),c.sample_count=e.readInt32(),c.group_description_index=e.readInt32()}}),l.createFullBoxCtor("schm",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),this.flags&1&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),l.createBoxCtor("sdp ",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("sdtp",function(e){var n,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var c=0;c<s;c++)n=e.readUint8(),this.is_leading[c]=n>>6,this.sample_depends_on[c]=n>>4&3,this.sample_is_depended_on[c]=n>>2&3,this.sample_has_redundancy[c]=n&3}),l.createFullBoxCtor("senc"),l.createFullBoxCtor("sgpd",function(e){this.grouping_type=e.readString(4),r.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c;l[this.grouping_type+"SampleGroupEntry"]?c=new l[this.grouping_type+"SampleGroupEntry"](this.grouping_type):c=new l.SampleGroupEntry(this.grouping_type),this.entries.push(c),this.version===1?this.default_length===0?c.description_length=e.readUint32():c.description_length=this.default_length:c.description_length=this.default_length,c.write===l.SampleGroupEntry.prototype.write&&(r.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),c.data=e.readUint8Array(c.description_length),e.position-=c.description_length),c.parse(e)}}),l.createFullBoxCtor("sidx",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),this.version===0?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var n=e.readUint16(),s=0;s<n;s++){var c={};this.references.push(c);var f=e.readUint32();c.reference_type=f>>31&1,c.referenced_size=f&2147483647,c.subsegment_duration=e.readUint32(),f=e.readUint32(),c.starts_with_SAP=f>>31&1,c.SAP_type=f>>28&7,c.SAP_delta_time=f&268435455}}),l.SingleItemTypeReferenceBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBox.prototype=new l.Box,l.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint16()},l.SingleItemTypeReferenceBoxLarge=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBoxLarge.prototype=new l.Box,l.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint32()},l.createFullBoxCtor("SmDm",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),l.createFullBoxCtor("smhd",function(e){this.balance=e.readUint16(),e.readUint16()}),l.createFullBoxCtor("ssix",function(e){this.subsegments=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.subsegments.push(c),c.ranges=[];for(var f=e.readUint32(),m=0;m<f;m++){var p={};c.ranges.push(p),p.level=e.readUint8(),p.range_size=e.readUint24()}}}),l.createFullBoxCtor("stco",function(e){var n;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<n;s++)this.chunk_offsets.push(e.readUint32())}),l.createFullBoxCtor("stdp",function(e){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<n;s++)this.priority[s]=e.readUint16()}),l.createFullBoxCtor("sthd"),l.createFullBoxCtor("stri",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("stsc",function(e){var n,s;if(n=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<n;s++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),l.createFullBoxCtor("stsd",function(e){var n,s,c,f;for(this.entries=[],c=e.readUint32(),n=1;n<=c;n++)if(s=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),s.code===l.OK)l[s.type+"SampleEntry"]?(f=new l[s.type+"SampleEntry"](s.size),f.hdr_size=s.hdr_size,f.start=s.start):(r.warn("BoxParser","Unknown sample entry type: "+s.type),f=new l.SampleEntry(s.type,s.size,s.hdr_size,s.start)),f.write===l.SampleEntry.prototype.write&&(r.info("BoxParser","SampleEntry "+f.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),f.parseDataAndRewind(e)),f.parse(e),this.entries.push(f);else return}),l.createFullBoxCtor("stsg",function(e){this.grouping_type=e.readUint32();var n=e.readUint16();this.group_description_index=[];for(var s=0;s<n;s++)this.group_description_index[s]=e.readUint32()}),l.createFullBoxCtor("stsh",function(e){var n,s;if(n=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<n;s++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stss",function(e){var n,s;if(s=e.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<s;n++)this.sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stsz",function(e){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(e.readUint32()):this.sample_sizes[n]=this.sample_size}),l.createFullBoxCtor("stts",function(e){var n,s,c;if(n=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),c=e.readInt32(),c<0&&(r.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),c=1),this.sample_deltas.push(c)}),l.createFullBoxCtor("stvi",function(e){var n=e.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=e.readUint32();var s=e.readUint32();this.stereo_indication_type=e.readString(s);var c,f;for(this.boxes=[];e.getPosition()<this.start+this.size;)if(c=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),c.code===l.OK)f=c.box,this.boxes.push(f),this[f.type]=f;else return}),l.createBoxCtor("styp",function(e){l.ftypBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("stz2",function(e){var n,s;if(this.sample_sizes=[],this.version===0)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),s=e.readUint32(),this.field_size===4)for(n=0;n<s;n+=2){var c=e.readUint8();this.sample_sizes[n]=c>>4&15,this.sample_sizes[n+1]=c&15}else if(this.field_size===8)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint8();else if(this.field_size===16)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint16();else r.error("BoxParser","Error in length field in stz2 box")}),l.createFullBoxCtor("subs",function(e){var n,s,c,f;for(c=e.readUint32(),this.entries=[],n=0;n<c;n++){var m={};if(this.entries[n]=m,m.sample_delta=e.readUint32(),m.subsamples=[],f=e.readUint16(),f>0)for(s=0;s<f;s++){var p={};m.subsamples.push(p),this.version==1?p.size=e.readUint32():p.size=e.readUint16(),p.priority=e.readUint8(),p.discardable=e.readUint8(),p.codec_specific_parameters=e.readUint32()}}}),l.createFullBoxCtor("tenc",function(e){if(e.readUint8(),this.version===0)e.readUint8();else{var n=e.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=l.parseHex16(e),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),l.createFullBoxCtor("tfdt",function(e){this.version==1?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),l.createFullBoxCtor("tfhd",function(e){var n=0;this.track_id=e.readUint32(),this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),n+=4):this.default_sample_flags=0}),l.createFullBoxCtor("tfra",function(e){this.track_ID=e.readUint32(),e.readUint24();var n=e.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var s=e.readUint32(),c=0;c<s;c++)this.version===1?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),l.createFullBoxCtor("tkhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),l.createBoxCtor("tmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("tmin",function(e){this.time=e.readUint32()}),l.createBoxCtor("totl",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpay",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpyl",function(e){this.bytessent=e.readUint64()}),l.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},l.createTrackGroupCtor("msrc"),l.TrackReferenceTypeBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.TrackReferenceTypeBox.prototype=new l.Box,l.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},l.trefBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=new l.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.boxes.push(s);else return},l.createFullBoxCtor("trep",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;)if(ret=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code===l.OK)box=ret.box,this.boxes.push(box);else return}),l.createFullBoxCtor("trex",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),l.createBoxCtor("trpy",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("trun",function(e){var n=0;if(this.sample_count=e.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var s=0;s<this.sample_count;s++)this.flags&l.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_SIZE&&(this.sample_size[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=e.readUint32():this.sample_composition_time_offset[s]=e.readInt32())}),l.createFullBoxCtor("tsel",function(e){this.switch_group=e.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("txtC",function(e){this.config=e.readCString()}),l.createBoxCtor("tyco",function(e){var n=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var s=0;s<n;s++)this.compatible_brands[s]=e.readString(4)}),l.createFullBoxCtor("udes",function(e){this.lang=e.readCString(),this.name=e.readCString(),this.description=e.readCString(),this.tags=e.readCString()}),l.createFullBoxCtor("uncC",function(e){var n;for(this.profile=e.readUint32(),this.component_count=e.readUint16(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],n=0;n<this.component_count;n++)this.component_index.push(e.readUint16()),this.component_bit_depth_minus_one.push(e.readUint8()),this.component_format.push(e.readUint8()),this.component_align_size.push(e.readUint8());this.sampling_type=e.readUint8(),this.interleave_type=e.readUint8(),this.block_size=e.readUint8();var s=e.readUint8();this.component_little_endian=s>>7&1,this.block_pad_lsb=s>>6&1,this.block_little_endian=s>>5&1,this.block_reversed=s>>4&1,this.pad_unknown=s>>3&1,this.pixel_size=e.readUint8(),this.row_align_size=e.readUint32(),this.tile_align_size=e.readUint32(),this.num_tile_cols_minus_one=e.readUint32(),this.num_tile_rows_minus_one=e.readUint32()}),l.createFullBoxCtor("url ",function(e){this.flags!==1&&(this.location=e.readCString())}),l.createFullBoxCtor("urn ",function(e){this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())}),l.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),l.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(e){this.system_id=l.parseHex16(e);var n=e.readUint32();n>0&&(this.data=e.readUint8Array(n))}),l.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),l.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=l.parseHex16(e)}),l.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var s={},c=0,f=0;this.version===1?(c=e.readUint64(),f=e.readUint64()):(c=e.readUint32(),f=e.readUint32()),s.absolute_time=c,s.absolute_duration=f,this.entries.push(s)}}),l.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(e){this.version===1?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),l.createFullBoxCtor("vmhd",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),l.createFullBoxCtor("vpcC",function(e){var n;this.version===1?(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8(),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)):(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=e.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize))}),l.createBoxCtor("vttC",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("vvcC",function(e){var n,s,c={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(E){this.held_bits=E.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(E){this.held_bits=E.readUint16(),this.num_held_bits=16},extract_bits:function(E){var T=this.held_bits>>this.num_held_bits-E&(1<<E)-1;return this.num_held_bits-=E,T}};if(c.stream_read_1_bytes(e),c.extract_bits(5),this.lengthSizeMinusOne=c.extract_bits(2),this.ptl_present_flag=c.extract_bits(1),this.ptl_present_flag){c.stream_read_2_bytes(e),this.ols_idx=c.extract_bits(9),this.num_sublayers=c.extract_bits(3),this.constant_frame_rate=c.extract_bits(2),this.chroma_format_idc=c.extract_bits(2),c.stream_read_1_bytes(e),this.bit_depth_minus8=c.extract_bits(3),c.extract_bits(5);{if(c.stream_read_2_bytes(e),c.extract_bits(2),this.num_bytes_constraint_info=c.extract_bits(6),this.general_profile_idc=c.extract_bits(7),this.general_tier_flag=c.extract_bits(1),this.general_level_idc=e.readUint8(),c.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=c.extract_bits(1),this.ptl_multilayer_enabled_flag=c.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var f=c.extract_bits(6);c.stream_read_1_bytes(e);var m=c.extract_bits(2);this.general_constraint_info[n]=f<<2|m}this.general_constraint_info[this.num_bytes_constraint_info-1]=c.extract_bits(6)}else c.extract_bits(6);if(this.num_sublayers>1){for(c.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var p=c.extract_bits(1);this.ptl_sublayer_present_mask|=p<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)c.extract_bits(1);for(this.sublayer_level_idc=[],s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=e.readUint8())}if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(e.readUint32())}this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}var _=12,S=13;this.nalu_arrays=[];var w=e.readUint8();for(n=0;n<w;n++){var x=[];this.nalu_arrays.push(x),c.stream_read_1_bytes(e),x.completeness=c.extract_bits(1),c.extract_bits(2),x.nalu_type=c.extract_bits(5);var U=1;for(x.nalu_type!=S&&x.nalu_type!=_&&(U=e.readUint16()),s=0;s<U;s++){var A=e.readUint16();x.push({data:e.readUint8Array(A),length:A})}}}),l.createFullBoxCtor("vvnC",function(e){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),l.SampleEntry.prototype.isVideo=function(){return!1},l.SampleEntry.prototype.isAudio=function(){return!1},l.SampleEntry.prototype.isSubtitle=function(){return!1},l.SampleEntry.prototype.isMetadata=function(){return!1},l.SampleEntry.prototype.isHint=function(){return!1},l.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},l.SampleEntry.prototype.getWidth=function(){return""},l.SampleEntry.prototype.getHeight=function(){return""},l.SampleEntry.prototype.getChannelCount=function(){return""},l.SampleEntry.prototype.getSampleRate=function(){return""},l.SampleEntry.prototype.getSampleSize=function(){return""},l.VisualSampleEntry.prototype.isVideo=function(){return!0},l.VisualSampleEntry.prototype.getWidth=function(){return this.width},l.VisualSampleEntry.prototype.getHeight=function(){return this.height},l.AudioSampleEntry.prototype.isAudio=function(){return!0},l.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},l.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},l.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},l.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},l.MetadataSampleEntry.prototype.isMetadata=function(){return!0},l.decimalToHex=function(e,n){var s=Number(e).toString(16);for(n=typeof n>"u"||n===null?n=2:n;s.length<n;)s="0"+s;return s},l.avc1SampleEntry.prototype.getCodec=l.avc2SampleEntry.prototype.getCodec=l.avc3SampleEntry.prototype.getCodec=l.avc4SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+l.decimalToHex(this.avcC.AVCProfileIndication)+l.decimalToHex(this.avcC.profile_compatibility)+l.decimalToHex(this.avcC.AVCLevelIndication):e},l.hev1SampleEntry.prototype.getCodec=l.hvc1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var s=this.hvcC.general_profile_compatibility,c=0;for(e=0;e<32&&(c|=s&1,e!=31);e++)c<<=1,s>>=1;n+=l.decimalToHex(c,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var f=!1,m="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||f)&&(m="."+l.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+m,f=!0);n+=m}return n},l.vvc1SampleEntry.prototype.getCodec=l.vvi1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var c=[],f=0;f|=this.vvcC.ptl_frame_only_constraint<<7,f|=this.vvcC.ptl_multilayer_enabled<<6;var m;for(e=0;e<this.vvcC.general_constraint_info.length;++e)f|=this.vvcC.general_constraint_info[e]>>2&63,c.push(f),f&&(m=e),f=this.vvcC.general_constraint_info[e]>>2&3;if(m===void 0)s=".CA";else{s=".C";var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",_=0,S=0;for(e=0;e<=m;++e)for(_=_<<8|c[e],S+=8;S>=5;){var w=_>>S-5&31;s+=p[w],S-=5,_&=(1<<S)-1}S&&(_<<=5-S,s+=p[_&31])}}n+=s}return n},l.mp4aSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return e+"."+l.decimalToHex(n)+(s?"."+s:"")}else return e},l.stxtSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},l.vp08SampleEntry.prototype.getCodec=l.vp09SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),e+".0"+this.vpcC.profile+"."+n+"."+s},l.av01SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),e+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+s},l.Box.prototype.writeHeader=function(e,n){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),r.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(n||"")),this.size>u?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),this.type==="uuid"&&e.writeUint8Array(this.uuid),this.size>u&&e.writeUint64(this.size)},l.FullBox.prototype.writeHeader=function(e){this.size+=4,l.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},l.Box.prototype.write=function(e){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},l.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(e),this.size+=this.boxes[n].size);r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.TrackReferenceTypeBox.prototype.write=function(e){this.size=this.track_ids.length*4,this.writeHeader(e),e.writeUint32Array(this.track_ids)},l.avcCBox.prototype.write=function(e){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),n=0;n<this.SPS.length;n++)e.writeUint16(this.SPS[n].length),e.writeUint8Array(this.SPS[n].nalu);for(e.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)e.writeUint16(this.PPS[n].length),e.writeUint8Array(this.PPS[n].nalu);this.ext&&e.writeUint8Array(this.ext)},l.co64Box.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)e.writeUint64(this.chunk_offsets[n])},l.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},l.cttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),this.version===1?e.writeInt32(this.sample_offsets[n]):e.writeUint32(this.sample_offsets[n])},l.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},l.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeUint32(s.segment_duration),e.writeInt32(s.media_time),e.writeInt16(s.media_rate_integer),e.writeInt16(s.media_rate_fraction)}},l.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},l.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)e.writeString(this.compatible_brands[n],null,4)},l.hdlrBox.prototype.write=function(e){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},l.hvcCBox.prototype.write=function(e){var n,s;for(this.size=23,n=0;n<this.nalu_arrays.length;n++)for(this.size+=3,s=0;s<this.nalu_arrays[n].length;s++)this.size+=2+this.nalu_arrays[n][s].data.length;for(this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.general_profile_space<<6+this.general_tier_flag<<5+this.general_profile_idc),e.writeUint32(this.general_profile_compatibility),e.writeUint8Array(this.general_constraint_indicator),e.writeUint8(this.general_level_idc),e.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),e.writeUint8(this.parallelismType+252),e.writeUint8(this.chroma_format_idc+252),e.writeUint8(this.bit_depth_luma_minus8+248),e.writeUint8(this.bit_depth_chroma_minus8+248),e.writeUint16(this.avgFrameRate),e.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),e.writeUint8(this.nalu_arrays.length),n=0;n<this.nalu_arrays.length;n++)for(e.writeUint8((this.nalu_arrays[n].completeness<<7)+this.nalu_arrays[n].nalu_type),e.writeUint16(this.nalu_arrays[n].length),s=0;s<this.nalu_arrays[n].length;s++)e.writeUint16(this.nalu_arrays[n][s].data.length),e.writeUint8Array(this.nalu_arrays[n][s].data)},l.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},l.mdhdBox.prototype.write=function(e){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},l.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},l.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},l.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},l.SampleEntry.prototype.writeHeader=function(e){this.size=8,l.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},l.SampleEntry.prototype.writeFooter=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e),this.size+=this.boxes[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*7+6*4+32,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},l.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*4+3*4,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},l.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},l.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},l.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeInt32(s.sample_count),e.writeInt32(s.group_description_index)}},l.sgpdBox.prototype.write=function(e){var n,s;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),this.version===1&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&this.default_length===0&&e.writeUint32(s.description_length),s.write(e)},l.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var s=this.references[n];e.writeUint32(s.reference_type<<31|s.referenced_size),e.writeUint32(s.subsegment_duration),e.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},l.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},l.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},l.stscBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)e.writeUint32(this.first_chunk[n]),e.writeUint32(this.samples_per_chunk[n]),e.writeUint32(this.sample_description_index[n])},l.stsdBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.stshBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)e.writeUint32(this.shadowed_sample_numbers[n]),e.writeUint32(this.sync_sample_numbers[n])},l.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},l.stszBox.prototype.write=function(e){var n,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){s=!1;break}else n++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),s?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),s||e.writeUint32Array(this.sample_sizes)},l.sttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),e.writeUint32(this.sample_deltas[n])},l.tfdtBox.prototype.write=function(e){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(e),this.version===1?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},l.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},l.tkhdBox.prototype.write=function(e){this.version=0,this.size=4*18+2*4,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},l.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},l.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&l.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&l.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&l.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&l.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[n]),this.flags&l.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[n]),this.flags&l.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[n]),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?e.writeUint32(this.sample_composition_time_offset[n]):e.writeInt32(this.sample_composition_time_offset[n]))},l["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},l["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},l.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},l.cttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)e[c].pts=e[c].dts+this.sample_offsets[n],c++},l.sttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)c===0?e[c].dts=0:e[c].dts=e[c-1].dts+this.sample_deltas[n],c++},l.stcoBox.prototype.unpack=function(e){var n;for(n=0;n<this.chunk_offsets.length;n++)e[n].offset=this.chunk_offsets[n]},l.stscBox.prototype.unpack=function(e){var n,s,c,f,m;for(f=0,m=0,n=0;n<this.first_chunk.length;n++)for(s=0;s<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);s++)for(m++,c=0;c<this.samples_per_chunk[n];c++){if(e[f])e[f].description_index=this.sample_description_index[n],e[f].chunk_index=m;else return;f++}},l.stszBox.prototype.unpack=function(e){var n;for(n=0;n<this.sample_sizes.length;n++)e[n].size=this.sample_sizes[n]},l.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],l.boxEqualFields=function(e,n){if(e&&!n)return!1;var s;for(s in e)if(!(l.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(e[s]instanceof l.Box||n[s]instanceof l.Box||typeof e[s]>"u"||typeof n[s]>"u"||typeof e[s]=="function"||typeof n[s]=="function"||e.subBoxNames&&e.subBoxNames.indexOf(s.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(s.slice(0,4))>-1||s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time"||l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(e[s]!==n[s])return!1}return!0},l.boxEqual=function(e,n){if(!l.boxEqualFields(e,n))return!1;for(var s=0;s<l.DIFF_BOXES_PROP_NAMES.length;s++){var c=l.DIFF_BOXES_PROP_NAMES[s];if(e[c]&&n[c]&&!l.boxEqual(e[c],n[c]))return!1}return!0};var g=function(){};g.prototype.parseSample=function(e){var n={},s;n.resources=[];var c=new a(e.data.buffer);if(!e.subsamples||e.subsamples.length===0)n.documentString=c.readString(e.data.length);else if(n.documentString=c.readString(e.subsamples[0].size),e.subsamples.length>1)for(s=1;s<e.subsamples.length;s++)n.resources[s]=c.readUint8Array(e.subsamples[s].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var y=function(){};y.prototype.parseSample=function(e){var n,s=new a(e.data.buffer);return n=s.readString(e.data.length),n},y.prototype.parseConfig=function(e){var n,s=new a(e.buffer);return s.readUint32(),n=s.readCString(),n},t.XMLSubtitlein4Parser=g,t.Textin4Parser=y;var v=function(e){this.stream=e||new d,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};v.prototype.setSegmentOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.fragmentedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.segmentStream=null,f.nb_samples=1e3,f.rapAlignement=!0,s&&(s.nbSamples&&(f.nb_samples=s.nbSamples),s.rapAlignement&&(f.rapAlignement=s.rapAlignement))}},v.prototype.unsetSegmentOptions=function(e){for(var n=-1,s=0;s<this.fragmentedTracks.length;s++){var c=this.fragmentedTracks[s];c.id==e&&(n=s)}n>-1&&this.fragmentedTracks.splice(n,1)},v.prototype.setExtractionOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.extractedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.nb_samples=1e3,f.samples=[],s&&s.nbSamples&&(f.nb_samples=s.nbSamples)}},v.prototype.unsetExtractionOptions=function(e){for(var n=-1,s=0;s<this.extractedTracks.length;s++){var c=this.extractedTracks[s];c.id==e&&(n=s)}n>-1&&this.extractedTracks.splice(n,1)},v.prototype.parse=function(){var e,n,s=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),e=l.parseOneBox(this.stream,s),e.code===l.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}else return;else{var c;switch(n=e.box,c=n.type!=="uuid"?n.type:n.uuid,this.boxes.push(n),c){case"mdat":this.mdats.push(n);break;case"moof":this.moofs.push(n);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[c]!==void 0&&r.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=n;break}this.updateUsedBytes&&this.updateUsedBytes(n,e)}},v.prototype.checkBuffer=function(e){if(e==null)throw"Buffer must be defined and non empty";if(e.fileStart===void 0)throw"Buffer must have a fileStart property";return e.byteLength===0?(r.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(r.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),this.stream.initialized()?!0:(r.warn("ISOFile","Not ready to start parsing"),!1))},v.prototype.appendBuffer=function(e,n){var s;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(r.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},v.prototype.getInfo=function(){var e,n,s={},c,f,m,p,_=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(_+this.moov.mvhd.creation_time*1e3),s.modified=new Date(_+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(c=this.moov.traks[e],p=c.mdia.minf.stbl.stsd.entries[0],f={},s.tracks.push(f),f.id=c.tkhd.track_id,f.name=c.mdia.hdlr.name,f.references=[],c.tref)for(n=0;n<c.tref.boxes.length;n++)m={},f.references.push(m),m.type=c.tref.boxes[n].type,m.track_ids=c.tref.boxes[n].track_ids;c.edts&&(f.edits=c.edts.elst.entries),f.created=new Date(_+c.tkhd.creation_time*1e3),f.modified=new Date(_+c.tkhd.modification_time*1e3),f.movie_duration=c.tkhd.duration,f.movie_timescale=s.timescale,f.layer=c.tkhd.layer,f.alternate_group=c.tkhd.alternate_group,f.volume=c.tkhd.volume,f.matrix=c.tkhd.matrix,f.track_width=c.tkhd.width/65536,f.track_height=c.tkhd.height/65536,f.timescale=c.mdia.mdhd.timescale,f.cts_shift=c.mdia.minf.stbl.cslg,f.duration=c.mdia.mdhd.duration,f.samples_duration=c.samples_duration,f.codec=p.getCodec(),f.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},f.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,f.nb_samples=c.samples.length,f.size=c.samples_size,f.bitrate=f.size*8*f.timescale/f.samples_duration,p.isAudio()?(f.type="audio",s.audioTracks.push(f),f.audio={},f.audio.sample_rate=p.getSampleRate(),f.audio.channel_count=p.getChannelCount(),f.audio.sample_size=p.getSampleSize()):p.isVideo()?(f.type="video",s.videoTracks.push(f),f.video={},f.video.width=p.getWidth(),f.video.height=p.getHeight()):p.isSubtitle()?(f.type="subtitles",s.subtitleTracks.push(f)):p.isHint()?(f.type="metadata",s.hintTracks.push(f)):p.isMetadata()?(f.type="metadata",s.metadataTracks.push(f)):(f.type="metadata",s.otherTracks.push(f))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',e=0;e<s.tracks.length;e++)e!==0&&(s.mime+=","),s.mime+=s.tracks[e].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},v.prototype.setNextSeekPositionFromSample=function(e){e&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.offset+e.alreadyRead)},v.prototype.processSamples=function(e){var n,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var c=this.fragmentedTracks[n];for(s=c.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Creating media fragment on track #"+c.id+" for sample "+s.nextSample);var f=this.createFragment(c.id,s.nextSample,c.segmentStream);if(f)c.segmentStream=f,s.nextSample++;else break;if((s.nextSample%c.nb_samples===0||e||s.nextSample>=s.samples.length)&&(r.info("ISOFile","Sending fragmented data on track #"+c.id+" for samples ["+Math.max(0,s.nextSample-c.nb_samples)+","+(s.nextSample-1)+"]"),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(c.id,c.user,c.segmentStream.buffer,s.nextSample,e||s.nextSample>=s.samples.length),c.segmentStream=null,c!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var m=this.extractedTracks[n];for(s=m.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Exporting on track #"+m.id+" sample #"+s.nextSample);var p=this.getSample(s,s.nextSample);if(p)s.nextSample++,m.samples.push(p);else{this.setNextSeekPositionFromSample(s.samples[s.nextSample]);break}if((s.nextSample%m.nb_samples===0||s.nextSample>=s.samples.length)&&(r.debug("ISOFile","Sending samples on track #"+m.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(m.id,m.user,m.samples),m.samples=[],m!==this.extractedTracks[n]))break}}}},v.prototype.getBox=function(e){var n=this.getBoxes(e,!0);return n.length?n[0]:null},v.prototype.getBoxes=function(e,n){var s=[];return v._sweep.call(this,e,s,n),s},v._sweep=function(e,n,s){this.type&&this.type==e&&n.push(this);for(var c in this.boxes){if(n.length&&s)return;v._sweep.call(this.boxes[c],e,n,s)}},v.prototype.getTrackSamplesInfo=function(e){var n=this.getTrackById(e);if(n)return n.samples},v.prototype.getTrackSample=function(e,n){var s=this.getTrackById(e),c=this.getSample(s,n);return c},v.prototype.releaseUsedSamples=function(e,n){var s=0,c=this.getTrackById(e);c.lastValidSample||(c.lastValidSample=0);for(var f=c.lastValidSample;f<n;f++)s+=this.releaseSample(c,f);r.info("ISOFile","Track #"+e+" released samples up to "+n+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),c.lastValidSample=n},v.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},v.prototype.stop=function(){this.sampleProcessingStarted=!1},v.prototype.flush=function(){r.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},v.prototype.seekTrack=function(e,n,s){var c,f,m=1/0,p=0,_=0,S;if(s.samples.length===0)return r.info("ISOFile","No sample in track, cannot seek! Using time "+r.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(c=0;c<s.samples.length;c++){if(f=s.samples[c],c===0)_=0,S=f.timescale;else if(f.cts>e*f.timescale){_=c-1;break}n&&f.is_sync&&(p=c)}for(n&&(_=p),e=s.samples[_].cts,s.nextSample=_;s.samples[_].alreadyRead===s.samples[_].size&&s.samples[_+1];)_++;return m=s.samples[_].offset+s.samples[_].alreadyRead,r.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+r.getDurationString(e,S)+" and offset: "+m),{offset:m,time:e/S}},v.prototype.getTrackDuration=function(e){var n;return e.samples?(n=e.samples[e.samples.length-1],(n.cts+n.duration)/n.timescale):1/0},v.prototype.seek=function(e,n){var s=this.moov,c,f,m,p={offset:1/0,time:1/0};if(this.moov){for(m=0;m<s.traks.length;m++)c=s.traks[m],!(e>this.getTrackDuration(c))&&(f=this.seekTrack(e,n,c),f.offset<p.offset&&(p.offset=f.offset),f.time<p.time&&(p.time=f.time));return r.info("ISOFile","Seeking at time "+r.getDurationString(p.time,1)+" needs a buffer with a fileStart position of "+p.offset),p.offset===1/0?p={offset:this.nextParsePosition,time:0}:p.offset=this.stream.getEndFilePositionAfter(p.offset),r.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+p.offset),p}else throw"Cannot seek: moov not received!"},v.prototype.equal=function(e){for(var n=0;n<this.boxes.length&&n<e.boxes.length;){var s=this.boxes[n],c=e.boxes[n];if(!l.boxEqual(s,c))return!1;n++}return!0},t.ISOFile=v,v.prototype.lastBoxStartPosition=0,v.prototype.parsingMdat=null,v.prototype.nextParsePosition=0,v.prototype.discardMdatData=!1,v.prototype.processIncompleteBox=function(e){var n,s,c;return e.type==="mdat"?(n=new l[e.type+"Box"](e.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=e.start,n.hdr_size=e.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,c=this.stream.seek(n.start+n.size,!1,this.discardMdatData),c?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(e.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},v.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},v.prototype.processIncompleteMdat=function(){var e,n;return e=this.parsingMdat,n=this.stream.seek(e.start+e.size,!1,this.discardMdatData),n?(r.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},v.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},v.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},v.prototype.updateUsedBytes=function(e,n){this.stream.addUsedBytes&&(e.type==="mdat"?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},v.prototype.add=l.Box.prototype.add,v.prototype.addBox=l.Box.prototype.addBox,v.prototype.init=function(e){var n=e||{};this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]);var s=this.add("moov");return s.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),s.add("mvex"),this},v.prototype.addTrack=function(e){this.moov||this.init(e);var n=e||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,s.add("tkhd").set("flags",l.TKHD_FLAG_ENABLED|l.TKHD_FLAG_IN_MOVIE|l.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",n.width<<16).set("height",n.height<<16);var c=s.add("mdia");c.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),c.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),c.add("elng").set("extended_language",n.language||"fr-FR");var f=c.add("minf");if(l[n.type+"SampleEntry"]!==void 0){var m=new l[n.type+"SampleEntry"];m.data_reference_index=1;var p="";for(var _ in l.sampleEntryCodes)for(var S=l.sampleEntryCodes[_],w=0;w<S.length;w++)if(S.indexOf(n.type)>-1){p=_;break}switch(p){case"Visual":if(f.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),m.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var x=new l.avcCBox;x.parse(new a(n.avcDecoderConfigRecord)),m.addBox(x)}else if(n.hevcDecoderConfigRecord){var U=new l.hvcCBox;U.parse(new a(n.hevcDecoderConfigRecord)),m.addBox(U)}break;case"Audio":f.add("smhd").set("balance",n.balance||0),m.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||65536);break;case"Hint":f.add("hmhd");break;case"Subtitle":switch(f.add("sthd"),n.type){case"stpp":m.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":f.add("nmhd");break;case"System":f.add("nmhd");break;default:f.add("nmhd");break}n.description&&m.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(E){m.addBox(E)}),f.add("dinf").add("dref").addEntry(new l["url Box"]().set("flags",1));var A=f.add("stbl");return A.add("stsd").addEntry(m),A.add("stts").set("sample_counts",[]).set("sample_deltas",[]),A.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),A.add("stco").set("chunk_offsets",[]),A.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(s),n.id}},l.Box.prototype.computeSize=function(e){var n=e||new o;n.endianness=o.BIG_ENDIAN,this.write(n)},v.prototype.addSample=function(e,n,s){var c=s||{},f={},m=this.getTrackById(e);if(m!==null){f.number=m.samples.length,f.track_id=m.tkhd.track_id,f.timescale=m.mdia.mdhd.timescale,f.description_index=c.sample_description_index?c.sample_description_index-1:0,f.description=m.mdia.minf.stbl.stsd.entries[f.description_index],f.data=n,f.size=n.byteLength,f.alreadyRead=f.size,f.duration=c.duration||1,f.cts=c.cts||0,f.dts=c.dts||0,f.is_sync=c.is_sync||!1,f.is_leading=c.is_leading||0,f.depends_on=c.depends_on||0,f.is_depended_on=c.is_depended_on||0,f.has_redundancy=c.has_redundancy||0,f.degradation_priority=c.degradation_priority||0,f.offset=0,f.subsamples=c.subsamples,m.samples.push(f),m.samples_size+=f.size,m.samples_duration+=f.duration,m.first_dts===void 0&&(m.first_dts=c.dts),this.processSamples();var p=this.createSingleSampleMoof(f);return this.addBox(p),p.computeSize(),p.trafs[0].truns[0].data_offset=p.size+8,this.add("mdat").data=new Uint8Array(n),f}},v.prototype.createSingleSampleMoof=function(e){var n=0;e.is_sync?n=1<<25:n=65536;var s=new l.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=s.add("traf"),f=this.getTrackById(e.track_id);return c.add("tfhd").set("track_id",e.track_id).set("flags",l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",e.dts-(f.first_dts||0)),c.add("trun").set("flags",l.TRUN_FLAGS_DATA_OFFSET|l.TRUN_FLAGS_DURATION|l.TRUN_FLAGS_SIZE|l.TRUN_FLAGS_FLAGS|l.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[e.cts-e.dts]),s},v.prototype.lastMoofIndex=0,v.prototype.samplesDataSize=0,v.prototype.resetTables=function(){var e,n,s,c,f,m,p,_;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){n=this.moov.traks[e],n.tkhd.duration=0,n.mdia.mdhd.duration=0,s=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,s.chunk_offsets=[],c=n.mdia.minf.stbl.stsc,c.first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],f=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,f.sample_sizes=[],m=n.mdia.minf.stbl.stts,m.sample_counts=[],m.sample_deltas=[],p=n.mdia.minf.stbl.ctts,p&&(p.sample_counts=[],p.sample_offsets=[]),_=n.mdia.minf.stbl.stss;var S=n.mdia.minf.stbl.boxes.indexOf(_);S!=-1&&(n.mdia.minf.stbl.boxes[S]=null)}},v.initSampleGroups=function(e,n,s,c,f){var m,p,_,S;function w(x,U,A){this.grouping_type=x,this.grouping_type_parameter=U,this.sbgp=A,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),p=0;p<s.length;p++){for(S=s[p].grouping_type+"/"+s[p].grouping_type_parameter,_=new w(s[p].grouping_type,s[p].grouping_type_parameter,s[p]),n&&(n.sample_groups_info[S]=_),e.sample_groups_info[S]||(e.sample_groups_info[S]=_),m=0;m<c.length;m++)c[m].grouping_type===s[p].grouping_type&&(_.description=c[m],_.description.used=!0);if(f)for(m=0;m<f.length;m++)f[m].grouping_type===s[p].grouping_type&&(_.fragment_description=f[m],_.fragment_description.used=!0,_.is_fragment=!0)}if(n){if(f)for(p=0;p<f.length;p++)!f[p].used&&f[p].version>=2&&(S=f[p].grouping_type+"/0",_=new w(f[p].grouping_type,0),_.is_fragment=!0,n.sample_groups_info[S]||(n.sample_groups_info[S]=_))}else for(p=0;p<c.length;p++)!c[p].used&&c[p].version>=2&&(S=c[p].grouping_type+"/0",_=new w(c[p].grouping_type,0),e.sample_groups_info[S]||(e.sample_groups_info[S]=_))},v.setSampleGroupProperties=function(e,n,s,c){var f,m;n.sample_groups=[];for(f in c)if(n.sample_groups[f]={},n.sample_groups[f].grouping_type=c[f].grouping_type,n.sample_groups[f].grouping_type_parameter=c[f].grouping_type_parameter,s>=c[f].last_sample_in_run&&(c[f].last_sample_in_run<0&&(c[f].last_sample_in_run=0),c[f].entry_index++,c[f].entry_index<=c[f].sbgp.entries.length-1&&(c[f].last_sample_in_run+=c[f].sbgp.entries[c[f].entry_index].sample_count)),c[f].entry_index<=c[f].sbgp.entries.length-1?n.sample_groups[f].group_description_index=c[f].sbgp.entries[c[f].entry_index].group_description_index:n.sample_groups[f].group_description_index=-1,n.sample_groups[f].group_description_index!==0){var p;c[f].fragment_description?p=c[f].fragment_description:p=c[f].description,n.sample_groups[f].group_description_index>0?(n.sample_groups[f].group_description_index>65535?m=(n.sample_groups[f].group_description_index>>16)-1:m=n.sample_groups[f].group_description_index-1,p&&m>=0&&(n.sample_groups[f].description=p.entries[m])):p&&p.version>=2&&p.default_group_description_index>0&&(n.sample_groups[f].description=p.entries[p.default_group_description_index-1])}},v.process_sdtp=function(e,n,s){n&&(e?(n.is_leading=e.is_leading[s],n.depends_on=e.sample_depends_on[s],n.is_depended_on=e.sample_is_depended_on[s],n.has_redundancy=e.sample_has_redundancy[s]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},v.prototype.buildSampleLists=function(){var e,n;for(e=0;e<this.moov.traks.length;e++)n=this.moov.traks[e],this.buildTrakSampleLists(n)},v.prototype.buildTrakSampleLists=function(e){var n,s,c,f,m,p,_,S,w,x,U,A,E,T,P,z,R,D,B,F,O,I,L,M;if(e.samples=[],e.samples_duration=0,e.samples_size=0,s=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,c=e.mdia.minf.stbl.stsc,f=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,m=e.mdia.minf.stbl.stts,p=e.mdia.minf.stbl.ctts,_=e.mdia.minf.stbl.stss,S=e.mdia.minf.stbl.stsd,w=e.mdia.minf.stbl.subs,A=e.mdia.minf.stbl.stdp,x=e.mdia.minf.stbl.sbgps,U=e.mdia.minf.stbl.sgpds,D=-1,B=-1,F=-1,O=-1,I=0,L=0,M=0,v.initSampleGroups(e,null,x,U),!(typeof f>"u")){for(n=0;n<f.sample_sizes.length;n++){var k={};k.number=n,k.track_id=e.tkhd.track_id,k.timescale=e.mdia.mdhd.timescale,k.alreadyRead=0,e.samples[n]=k,k.size=f.sample_sizes[n],e.samples_size+=k.size,n===0?(T=1,E=0,k.chunk_index=T,k.chunk_run_index=E,R=c.samples_per_chunk[E],z=0,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0):n<R?(k.chunk_index=T,k.chunk_run_index=E):(T++,k.chunk_index=T,z=0,T<=P||(E++,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0),k.chunk_run_index=E,R+=c.samples_per_chunk[E]),k.description_index=c.sample_description_index[k.chunk_run_index]-1,k.description=S.entries[k.description_index],k.offset=s.chunk_offsets[k.chunk_index-1]+z,z+=k.size,n>D&&(B++,D<0&&(D=0),D+=m.sample_counts[B]),n>0?(e.samples[n-1].duration=m.sample_deltas[B],e.samples_duration+=e.samples[n-1].duration,k.dts=e.samples[n-1].dts+e.samples[n-1].duration):k.dts=0,p?(n>=F&&(O++,F<0&&(F=0),F+=p.sample_counts[O]),k.cts=e.samples[n].dts+p.sample_offsets[O]):k.cts=k.dts,_?(n==_.sample_numbers[I]-1?(k.is_sync=!0,I++):(k.is_sync=!1,k.degradation_priority=0),w&&w.entries[L].sample_delta+M==n+1&&(k.subsamples=w.entries[L].subsamples,M+=w.entries[L].sample_delta,L++)):k.is_sync=!0,v.process_sdtp(e.mdia.minf.stbl.sdtp,k,k.number),A?k.degradation_priority=A.priority[n]:k.degradation_priority=0,w&&w.entries[L].sample_delta+M==n&&(k.subsamples=w.entries[L].subsamples,M+=w.entries[L].sample_delta),(x.length>0||U.length>0)&&v.setSampleGroupProperties(e,k,n,e.sample_groups_info)}n>0&&(e.samples[n-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[n-1].dts,0),e.samples_duration+=e.samples[n-1].duration)}},v.prototype.updateSampleLists=function(){var e,n,s,c,f,m,p,_,S,w,x,U,A,E,T;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(S=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,S.type=="moof")for(w=S,e=0;e<w.trafs.length;e++){for(x=w.trafs[e],U=this.getTrackById(x.tfhd.track_id),A=this.getTrexById(x.tfhd.track_id),x.tfhd.flags&l.TFHD_FLAG_SAMPLE_DESC?c=x.tfhd.default_sample_description_index:c=A?A.default_sample_description_index:1,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_DUR?f=x.tfhd.default_sample_duration:f=A?A.default_sample_duration:0,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_SIZE?m=x.tfhd.default_sample_size:m=A?A.default_sample_size:0,x.tfhd.flags&l.TFHD_FLAG_SAMPLE_FLAGS?p=x.tfhd.default_sample_flags:p=A?A.default_sample_flags:0,x.sample_number=0,x.sbgps.length>0&&v.initSampleGroups(U,x,x.sbgps,U.mdia.minf.stbl.sgpds,x.sgpds),n=0;n<x.truns.length;n++){var P=x.truns[n];for(s=0;s<P.sample_count;s++){E={},E.moof_number=this.lastMoofIndex,E.number_in_traf=x.sample_number,x.sample_number++,E.number=U.samples.length,x.first_sample_index=U.samples.length,U.samples.push(E),E.track_id=U.tkhd.track_id,E.timescale=U.mdia.mdhd.timescale,E.description_index=c-1,E.description=U.mdia.minf.stbl.stsd.entries[E.description_index],E.size=m,P.flags&l.TRUN_FLAGS_SIZE&&(E.size=P.sample_size[s]),U.samples_size+=E.size,E.duration=f,P.flags&l.TRUN_FLAGS_DURATION&&(E.duration=P.sample_duration[s]),U.samples_duration+=E.duration,U.first_traf_merged||s>0?E.dts=U.samples[U.samples.length-2].dts+U.samples[U.samples.length-2].duration:(x.tfdt?E.dts=x.tfdt.baseMediaDecodeTime:E.dts=0,U.first_traf_merged=!0),E.cts=E.dts,P.flags&l.TRUN_FLAGS_CTS_OFFSET&&(E.cts=E.dts+P.sample_composition_time_offset[s]),T=p,P.flags&l.TRUN_FLAGS_FLAGS?T=P.sample_flags[s]:s===0&&P.flags&l.TRUN_FLAGS_FIRST_FLAG&&(T=P.first_sample_flags),E.is_sync=!(T>>16&1),E.is_leading=T>>26&3,E.depends_on=T>>24&3,E.is_depended_on=T>>22&3,E.has_redundancy=T>>20&3,E.degradation_priority=T&65535;var z=!!(x.tfhd.flags&l.TFHD_FLAG_BASE_DATA_OFFSET),R=!!(x.tfhd.flags&l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),D=!!(P.flags&l.TRUN_FLAGS_DATA_OFFSET),B=0;z?B=x.tfhd.base_data_offset:R||n===0?B=w.start:B=_,n===0&&s===0?D?E.offset=B+P.data_offset:E.offset=B:E.offset=_,_=E.offset+E.size,(x.sbgps.length>0||x.sgpds.length>0||U.mdia.minf.stbl.sbgps.length>0||U.mdia.minf.stbl.sgpds.length>0)&&v.setSampleGroupProperties(U,E,E.number_in_traf,x.sample_groups_info)}}if(x.subs){U.has_fragment_subsamples=!0;var F=x.first_sample_index;for(n=0;n<x.subs.entries.length;n++)F+=x.subs.entries[n].sample_delta,E=U.samples[F-1],E.subsamples=x.subs.entries[n].subsamples}}}},v.prototype.getSample=function(e,n){var s,c=e.samples[n];if(!this.moov)return null;if(!c.data)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.samplesDataSize+=c.size,r.debug("ISOFile","Allocating sample #"+n+" on track #"+e.tkhd.track_id+" of size "+c.size+" (total: "+this.samplesDataSize+")");else if(c.alreadyRead==c.size)return c;for(;;){var f=this.stream.findPosition(!0,c.offset+c.alreadyRead,!1);if(f>-1){s=this.stream.buffers[f];var m=s.byteLength-(c.offset+c.alreadyRead-s.fileStart);if(c.size-c.alreadyRead<=m)return r.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+(c.size-c.alreadyRead)+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,c.size-c.alreadyRead),s.usedBytes+=c.size-c.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead=c.size,c;if(m===0)return null;r.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+m+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,m),c.alreadyRead+=m,s.usedBytes+=m,this.stream.logBufferLevel()}else return null}},v.prototype.releaseSample=function(e,n){var s=e.samples[n];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},v.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},v.prototype.getCodecs=function(){var e,n="";for(e=0;e<this.moov.traks.length;e++){var s=this.moov.traks[e];e>0&&(n+=","),n+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},v.prototype.getTrexById=function(e){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var s=this.moov.mvex.trexs[n];if(s.track_id==e)return s}return null},v.prototype.getTrackById=function(e){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var s=this.moov.traks[n];if(s.tkhd.track_id==e)return s}return null},v.prototype.items=[],v.prototype.itemsDataSize=0,v.prototype.flattenItemInfo=function(){var e=this.items,n,s,c,f=this.meta;if(f!=null&&f.hdlr!==void 0&&f.iinf!==void 0){for(n=0;n<f.iinf.item_infos.length;n++)c={},c.id=f.iinf.item_infos[n].item_ID,e[c.id]=c,c.ref_to=[],c.name=f.iinf.item_infos[n].item_name,f.iinf.item_infos[n].protection_index>0&&(c.protection=f.ipro.protections[f.iinf.item_infos[n].protection_index-1]),f.iinf.item_infos[n].item_type?c.type=f.iinf.item_infos[n].item_type:c.type="mime",c.content_type=f.iinf.item_infos[n].content_type,c.content_encoding=f.iinf.item_infos[n].content_encoding;if(f.iloc)for(n=0;n<f.iloc.items.length;n++){var m=f.iloc.items[n];switch(c=e[m.item_ID],m.data_reference_index!==0&&(r.warn("Item storage with reference to other files: not supported"),c.source=f.dinf.boxes[m.data_reference_index-1]),m.construction_method){case 0:break;case 1:r.warn("Item storage with construction_method : not supported");break;case 2:r.warn("Item storage with construction_method : not supported");break}for(c.extents=[],c.size=0,s=0;s<m.extents.length;s++)c.extents[s]={},c.extents[s].offset=m.extents[s].extent_offset+m.base_offset,c.extents[s].length=m.extents[s].extent_length,c.extents[s].alreadyRead=0,c.size+=c.extents[s].length}if(f.pitm&&(e[f.pitm.item_id].primary=!0),f.iref)for(n=0;n<f.iref.references.length;n++){var p=f.iref.references[n];for(s=0;s<p.references.length;s++)e[p.from_item_ID].ref_to.push({type:p.type,id:p.references[s]})}if(f.iprp)for(var _=0;_<f.iprp.ipmas.length;_++){var S=f.iprp.ipmas[_];for(n=0;n<S.associations.length;n++){var w=S.associations[n];for(c=e[w.id],c.properties===void 0&&(c.properties={},c.properties.boxes=[]),s=0;s<w.props.length;s++){var x=w.props[s];if(x.property_index>0&&x.property_index-1<f.iprp.ipco.boxes.length){var U=f.iprp.ipco.boxes[x.property_index-1];c.properties[U.type]=U,c.properties.boxes.push(U)}}}}}},v.prototype.getItem=function(e){var n,s;if(!this.meta)return null;if(s=this.items[e],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,r.debug("ISOFile","Allocating item #"+e+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var c=0;c<s.extents.length;c++){var f=s.extents[c];if(f.alreadyRead!==f.length){var m=this.stream.findPosition(!0,f.offset+f.alreadyRead,!1);if(m>-1){n=this.stream.buffers[m];var p=n.byteLength-(f.offset+f.alreadyRead-n.fileStart);if(f.length-f.alreadyRead<=p)r.debug("ISOFile","Getting item #"+e+" extent #"+c+" data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+(f.length-f.alreadyRead)+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,f.length-f.alreadyRead),n.usedBytes+=f.length-f.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=f.length-f.alreadyRead,f.alreadyRead=f.length;else return r.debug("ISOFile","Getting item #"+e+" extent #"+c+" partial data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+p+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,p),f.alreadyRead+=p,s.alreadyRead+=p,n.usedBytes+=p,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},v.prototype.releaseItem=function(e){var n=this.items[e];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var s=0;s<n.extents.length;s++){var c=n.extents[s];c.alreadyRead=0}return n.size}else return 0},v.prototype.processItems=function(e){for(var n in this.items){var s=this.items[n];this.getItem(s.id),e&&!s.sent&&(e(s),s.sent=!0,s.data=null)}},v.prototype.hasItem=function(e){for(var n in this.items){var s=this.items[n];if(s.name===e)return s.id}return-1},v.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},v.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},v.prototype.itemToFragmentedTrackFile=function(e){var n=e||{},s=null;if(n.itemId?s=this.getItem(n.itemId):s=this.getPrimaryItem(),s==null)return null;var c=new v;c.discardMdatData=!1;var f={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(f.width=s.properties.ispe.image_width,f.height=s.properties.ispe.image_height);var m=c.addTrack(f);return m?(c.addSample(m,s.data),c):null},v.prototype.write=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e)},v.prototype.createFragment=function(e,n,s){var c=this.getTrackById(e),f=this.getSample(c,n);if(f==null)return this.setNextSeekPositionFromSample(c.samples[n]),null;var m=s||new o;m.endianness=o.BIG_ENDIAN;var p=this.createSingleSampleMoof(f);p.write(m),p.trafs[0].truns[0].data_offset=p.size+8,r.debug("MP4Box","Adjusting data_offset with new value "+p.trafs[0].truns[0].data_offset),m.adjustUint32(p.trafs[0].truns[0].data_offset_position,p.trafs[0].truns[0].data_offset);var _=new l.mdatBox;return _.data=f.data,_.write(m),m},v.writeInitializationSegment=function(e,n,s,c){var f;r.debug("ISOFile","Generating initialization segment");var m=new o;m.endianness=o.BIG_ENDIAN,e.write(m);var p=n.add("mvex");for(s&&p.add("mehd").set("fragment_duration",s),f=0;f<n.traks.length;f++)p.add("trex").set("track_id",n.traks[f].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",c).set("default_sample_size",0).set("default_sample_flags",65536);return n.write(m),m.buffer},v.prototype.save=function(e){var n=new o;n.endianness=o.BIG_ENDIAN,this.write(n),n.save(e)},v.prototype.getBuffer=function(){var e=new o;return e.endianness=o.BIG_ENDIAN,this.write(e),e.buffer},v.prototype.initializeSegmentation=function(){var e,n,s,c;for(this.onSegment===null&&r.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),n=[],e=0;e<this.fragmentedTracks.length;e++){var f=new l.moovBox;f.mvhd=this.moov.mvhd,f.boxes.push(f.mvhd),s=this.getTrackById(this.fragmentedTracks[e].id),f.boxes.push(s),f.traks.push(s),c={},c.id=s.tkhd.track_id,c.user=this.fragmentedTracks[e].user,c.buffer=v.writeInitializationSegment(this.ftyp,f,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[e].samples.length>0?this.moov.traks[e].samples[0].duration:0),n.push(c)}return n},l.Box.prototype.printHeader=function(e){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},l.FullBox.prototype.printHeader=function(e){this.size+=4,l.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},l.Box.prototype.print=function(e){this.printHeader(e)},l.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var s=e.indent;e.indent+=" ",this.boxes[n].print(e),e.indent=s}},v.prototype.print=function(e){e.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(e)},l.mvhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},l.tkhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)};var b={};b.createFile=function(e,n){var s=e!==void 0?e:!0,c=new v(n);return c.discardMdatData=!s,c},t.createFile=b.createFile})(ip);const np={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2"};var hs,Ji,jn,es,Wi,Ya,ap,dx;const Eu=class{constructor(t,r={}){yi(this,ap),Lt(this,"ready"),yi(this,hs,{duration:0,width:0,height:0}),yi(this,Ji,new Float32Array),yi(this,jn,new Float32Array),yi(this,es,0),yi(this,Wi,0),yi(this,Ya,void 0),Ei(this,Ya,{loop:!1,volume:1,...r}),this.ready=yB(this,ap,dx).call(this,t).then(()=>({width:0,height:0,duration:r.loop?1/0:Oe(this,hs).duration}))}getPCMData(){return[Oe(this,Ji),Oe(this,jn)]}async tick(t){if(t<Oe(this,es))throw Error("time not allow rollback");if(!Oe(this,Ya).loop&&t>=Oe(this,hs).duration)return{audio:[],state:"done"};const r=t-Oe(this,es);Ei(this,es,t);const a=Math.ceil(r*(np.sampleRate/1e6)),o=Oe(this,Wi)+a,u=Oe(this,Ya).loop?[C_(Oe(this,Ji),Oe(this,Wi),o),C_(Oe(this,jn),Oe(this,Wi),o)]:[Oe(this,Ji).slice(Oe(this,Wi),o),Oe(this,jn).slice(Oe(this,Wi),o)];return Ei(this,Wi,o),{audio:u,state:"success"}}destroy(){Ei(this,Ji,new Float32Array(0)),Ei(this,jn,new Float32Array(0)),ua.info("---- audioclip destroy ----")}};let UB=Eu;hs=new WeakMap,Ji=new WeakMap,jn=new WeakMap,es=new WeakMap,Wi=new WeakMap,Ya=new WeakMap,ap=new WeakSet,dx=async function(t){Eu.ctx==null&&(Eu.ctx=new AudioContext({sampleRate:np.sampleRate}));const r=performance.now(),a=t instanceof ReadableStream?await CB(t,Eu.ctx):t;ua.info("Audio clip decoded complete:",performance.now()-r);const o=Oe(this,Ya).volume;if(o!==1)for(const u of a)for(let d=0;d<u.length;d+=1)u[d]*=o;Oe(this,hs).duration=a[0].length/np.sampleRate*1e6,Ei(this,Ji,a[0]),Ei(this,jn,a[1]??Oe(this,Ji)),ua.info("Audio clip convert to AudioData, time:",performance.now()-r)},Lt(UB,"ctx",null);async function CB(t,r){const a=await new Response(t).arrayBuffer();return EB(await r.decodeAudioData(a))}function AB(t,r,a){let o=0,u=0;const d=t.boxes,h=[],l=()=>{if(d.length<4||u>=d.length)return null;if(h.length===0)for(let e=1;;e+=1){const n=t.getTrackById(e);if(n==null)break;h.push({track:n,id:e})}const b=new ip.DataStream;b.endianness=ip.DataStream.BIG_ENDIAN;for(let e=u;e<d.length;e++)d[e].write(b),delete d[e];return h.forEach(({track:e,id:n})=>{t.releaseUsedSamples(n,e.samples.length),e.samples=[]}),t.mdats=[],t.moofs=[],u=d.length,new Uint8Array(b.buffer)};let g=!1,y=!1,v=null;return{stream:new ReadableStream({start(b){o=self.setInterval(()=>{const e=l();e!=null&&!y&&b.enqueue(e)},r),v=()=>{clearInterval(o),t.flush();const e=l();e!=null&&!y&&b.enqueue(e),y||b.close()},g&&v()},cancel(){y=!0,clearInterval(o),a==null||a()}}),stop:()=>{g||(g=!0,v==null||v())}}}const wr=class{constructor(r,a,o,u,d){Lt(this,"x",0),Lt(this,"y",0),Lt(this,"w",0),Lt(this,"h",0),Lt(this,"angle",0),Lt(this,"master",null),this.x=r??0,this.y=a??0,this.w=o??0,this.h=u??0,this.master=d??null}get center(){const{x:r,y:a,w:o,h:u}=this;return{x:r+o/2,y:a+u/2}}get ctrls(){const{w:r,h:a}=this,o=wr.CTRL_SIZE,u=o/2,d=r/2,h=a/2,l=o*1.5,g=l/2;return{t:new wr(-u,-h-u,o,o,this),b:new wr(-u,h-u,o,o,this),l:new wr(-d-u,-u,o,o,this),r:new wr(d-u,-u,o,o,this),lt:new wr(-d-u,-h-u,o,o,this),lb:new wr(-d-u,h-u,o,o,this),rt:new wr(d-u,-h-u,o,o,this),rb:new wr(d-u,h-u,o,o,this),rotate:new wr(-g,-h-o*2-g,l,l,this)}}clone(){const{x:r,y:a,w:o,h:u,master:d}=this;return new wr(r,a,o,u,d)}checkHit(r,a){let{angle:o,center:u,x:d,y:h,w:l,h:g,master:y}=this;const v=(y==null?void 0:y.center)??u,b=(y==null?void 0:y.angle)??o;y==null&&(d=d-v.x,h=h-v.y);const e=r-v.x,n=a-v.y;let s=e,c=n;return b!==0&&(s=e*Math.cos(b)+n*Math.sin(b),c=n*Math.cos(b)-e*Math.sin(b)),!(s<d||s>d+l||c<h||c>h+g)}};let fx=wr;Lt(fx,"CTRL_SIZE",16);var ts,Nn;class TB{constructor(r){Lt(this,"rect",new fx),Lt(this,"visible",!0),Lt(this,"zIndex",0),Lt(this,"opacity",1),Lt(this,"flip",null),yi(this,ts,null),yi(this,Nn,null),Lt(this,"audioNode",null),Lt(this,"initReady",Promise.resolve()),this.name=r}render(r){const{rect:{center:a,angle:o}}=this;r.setTransform(this.flip==="horizontal"?-1:1,0,0,this.flip==="vertical"?-1:1,a.x,a.y),r.rotate((this.flip==null?1:-1)*o),r.globalAlpha=this.opacity}setAnimation(r,a){Ei(this,ts,Object.entries(r).map(([o,u])=>{const d={from:0,to:100}[o]??Number(o.slice(0,-1));if(isNaN(d)||d>100||d<0)throw Error("keyFrame must between 0~100");return[d/100,u]})),Ei(this,Nn,Object.assign({},Oe(this,Nn),{duration:a.duration*1e6,delay:(a.delay??0)*1e6,iterCount:a.iterCount??1/0}))}animate(r){if(Oe(this,ts)==null||Oe(this,Nn)==null||r<Oe(this,Nn).delay)return;const a=PB(r,Oe(this,ts),Oe(this,Nn));for(const o in a)switch(o){case"opacity":this.opacity=a[o];break;case"x":case"y":case"w":case"h":case"angle":this.rect[o]=a[o];break}}}ts=new WeakMap,Nn=new WeakMap;function PB(t,r,a){if(t/a.duration>=a.iterCount)return{};const o=t%a.duration,u=t===a.duration?1:o/a.duration,d=r.findIndex(e=>e[0]>=u);if(d===-1)return{};const h=r[d-1],l=r[d],g=l[1];if(h==null)return g;const y=h[1],v={},b=(u-h[0])/(l[0]-h[0]);for(const e in g){const n=e;y[n]!=null&&(v[n]=(g[n]-y[n])*b+y[n])}return v}class IB extends TB{render(r){super.render(r),r.fillStyle="#fff",r.font="300px Noto Sans SC",r.fillText(String(~~performance.now()/1e3),-300,0)}destroy(){}}let Ui=null;const to=new rp,Ci={init:BB,start:DB,delete:(t,r)=>{to.delete(t,r)},getAVCanvas:kB,exportVideo:RB,getDuration:()=>to.getDuration()};function BB(t){return Ui!=null||(Ui=new dB(t,{bgColor:"#333",resolution:{width:1280,height:720}}),Ui.spriteManager.addSprite(new IB("ts"))),Ui}function kB(){if(Ui==null)throw Error("uninitialized");return Ui}async function DB(){if(Ui==null)throw Error("uninitialized");const r=Ui.captureStream().getVideoTracks()[0];if(r==null)throw Error("AVCanvas not video track");const a=new MediaStreamTrackProcessor({track:r}).readable,o=new VideoEncoder({error:console.error,output:(h,l)=>{l!=null&&to.meta==null&&(to.meta=l),to.append(h)}});o.configure({codec:"avc1.4D0032",framerate:30,bitrate:4e6,width:1280,height:720,latencyMode:"quality",alpha:"discard",avc:{format:"avc"}});const u=new LB(30),d=zB(a,{onChunk:async h=>{const l=u.transfrom(h);l!=null&&(o.encode(l.vf,l.opts),l.vf.close())}});return{pause:()=>{u.pause()},play:()=>{u.play()},stop:d}}var io,no,ao,en,oo;class LB{constructor(r){Hi(this,io,performance.now());Hi(this,no,we(this,io));Hi(this,ao,0);Hi(this,en,!1);Hi(this,oo,0);this.expectFPS=r}play(){we(this,en)&&(Qr(this,en,!1),Qr(this,io,we(this,io)+(performance.now()-we(this,oo))),Qr(this,no,we(this,no)+(performance.now()-we(this,oo))))}pause(){we(this,en)||(Qr(this,en,!0),Qr(this,oo,performance.now()))}transfrom(r){const a=performance.now(),o=a-we(this,io);if(we(this,en)||we(this,ao)/o*1e3>this.expectFPS){r.close();return}const u=new VideoFrame(r,{timestamp:o*1e3,duration:(a-we(this,no))*1e3});return Qr(this,no,a),Qr(this,ao,we(this,ao)+1),r.close(),{vf:u,opts:{keyFrame:we(this,ao)%30===0}}}}io=new WeakMap,no=new WeakMap,ao=new WeakMap,en=new WeakMap,oo=new WeakMap;function zB(t,r){let a=!1;async function o(){var d;const u=t.getReader();for(;!a;){const{value:h,done:l}=await u.read();if(l){(d=r.onDone)==null||d.call(r);return}await r.onChunk(h)}u.releaseLock(),await t.cancel()}return o().catch(console.error),()=>{a=!0}}async function RB(t,r){const a=to.slice(t,r),o=mB(a),{stream:u,stop:d}=AB(o,500);return d(),{url:URL.createObjectURL(await new Response(u).blob()),duration:a.getDuration()}}let FB=0;function hx(t,r){const a=`atom${++FB}`,o={toString:()=>a};return typeof t=="function"?o.read=t:(o.init=t,o.read=u=>u(o),o.write=(u,d,h)=>d(o,typeof h=="function"?h(u(o)):h)),r&&(o.write=r),o}const A_=t=>"init"in t,T_=t=>!!t.write,sc=new WeakMap,OB=(t,r)=>{sc.set(t,r),t.catch(()=>{}).finally(()=>sc.delete(t))},P_=(t,r)=>{const a=sc.get(t);a&&(sc.delete(t),a(r))},I_=(t,r)=>{t.status="fulfilled",t.value=r},B_=(t,r)=>{t.status="rejected",t.reason=r},MB=t=>typeof(t==null?void 0:t.then)=="function",Jl=(t,r)=>"v"in t&&"v"in r&&Object.is(t.v,r.v),k_=(t,r)=>"e"in t&&"e"in r&&Object.is(t.e,r.e),Ho=t=>"v"in t&&t.v instanceof Promise,NB=(t,r)=>"v"in t&&"v"in r&&t.v.orig&&t.v.orig===r.v.orig,eu=t=>{if("e"in t)throw t.e;return t.v},HB=()=>{const t=new WeakMap,r=new WeakMap,a=new Map;let o,u;const d=A=>t.get(A),h=(A,E)=>{const T=t.get(A);if(t.set(A,E),a.has(A)||a.set(A,T),T&&Ho(T)){const P="v"in E?E.v instanceof Promise?E.v:Promise.resolve(E.v):Promise.reject(E.e);P_(T.v,P)}},l=(A,E,T)=>{const P=new Map;let z=!1;T.forEach((R,D)=>{!R&&D===A&&(R=E),R&&(P.set(D,R),E.d.get(D)!==R&&(z=!0))}),(z||E.d.size!==P.size)&&(E.d=P)},g=(A,E,T)=>{const P=d(A),z={d:(P==null?void 0:P.d)||new Map,v:E};if(T&&l(A,z,T),P&&Jl(P,z)&&P.d===z.d)return P;if(P&&Ho(P)&&Ho(z)&&NB(P,z)){if(P.d===z.d)return P;z.v=P.v}return h(A,z),z},y=(A,E,T,P)=>{if(MB(E)){let z;const R=new Promise((D,B)=>{let F=!1;E.then(O=>{if(!F){F=!0;const I=d(A),L=g(A,R,T);I_(R,O),D(O),r.has(A)&&(I==null?void 0:I.d)!==L.d&&w(A,L,I==null?void 0:I.d)}},O=>{if(!F){F=!0;const I=d(A),L=g(A,R,T);B_(R,O),B(O),r.has(A)&&(I==null?void 0:I.d)!==L.d&&w(A,L,I==null?void 0:I.d)}}),z=O=>{F||(F=!0,O.then(I=>I_(R,I),I=>B_(R,I)),D(O))}});return R.orig=E,R.status="pending",OB(R,D=>{D&&z(D),P==null||P()}),g(A,R,T)}return g(A,E,T)},v=(A,E,T)=>{const P=d(A),z={d:(P==null?void 0:P.d)||new Map,e:E};return T&&l(A,z,T),P&&k_(P,z)&&P.d===z.d?P:(h(A,z),z)},b=(A,E)=>{const T=d(A);if(!E&&T&&(r.has(A)||Array.from(T.d).every(([O,I])=>O===A||b(O)===I)))return T;const P=new Map;let z=!0;const R=O=>{if(O===A){const L=d(O);if(L)return P.set(O,L),eu(L);if(A_(O))return P.set(O,void 0),O.init;throw new Error("no atom init")}const I=b(O);return P.set(O,I),eu(I)};let D,B;const F={get signal(){return D||(D=new AbortController),D.signal},get setSelf(){return!B&&T_(A)&&(B=(...O)=>{if(!z)return p(A,...O)}),B}};try{const O=A.read(R,F);return y(A,O,P,()=>D==null?void 0:D.abort())}catch(O){return v(A,O,P)}finally{z=!1}},e=A=>eu(b(A)),n=A=>{let E=r.get(A);return E||(E=_(A)),E},s=(A,E)=>!E.l.size&&(!E.t.size||E.t.size===1&&E.t.has(A)),c=A=>{const E=r.get(A);E&&s(A,E)&&S(A)},f=A=>{const E=new Map,T=new WeakMap,P=D=>{var B;const F=new Set((B=r.get(D))==null?void 0:B.t);return a.forEach((O,I)=>{var L;(L=d(I))!=null&&L.d.has(D)&&F.add(I)}),F},z=D=>{P(D).forEach(B=>{B!==D&&(E.set(B,(E.get(B)||new Set).add(D)),T.set(B,(T.get(B)||0)+1),z(B))})};z(A);const R=D=>{P(D).forEach(B=>{var F;if(B!==D){let O=T.get(B);if(O&&T.set(B,--O),!O){let I=!!((F=E.get(B))!=null&&F.size);if(I){const L=d(B),M=b(B,!0);I=!L||!Jl(L,M)}I||E.forEach(L=>L.delete(B))}R(B)}})};R(A)},m=(A,...E)=>{let T=!0;const P=D=>eu(b(D)),z=(D,...B)=>{let F;if(D===A){if(!A_(D))throw new Error("atom not writable");const O=d(D),I=y(D,B[0]);(!O||!Jl(O,I))&&f(D)}else F=m(D,...B);if(!T){const O=x()}return F},R=A.write(P,z,...E);return T=!1,R},p=(A,...E)=>{const T=m(A,...E),P=x();return T},_=(A,E,T)=>{var P;const z=T||[];(P=d(A))==null||P.d.forEach((D,B)=>{const F=r.get(B);F?F.t.add(A):B!==A&&_(B,A,z)}),b(A);const R={t:new Set(E&&[E]),l:new Set};if(r.set(A,R),T_(A)&&A.onMount){const{onMount:D}=A;z.push(()=>{const B=D((...F)=>p(A,...F));B&&(R.u=B)})}return T||z.forEach(D=>D()),R},S=A=>{var E;const T=(E=r.get(A))==null?void 0:E.u;T&&T(),r.delete(A);const P=d(A);P&&(Ho(P)&&P_(P.v),P.d.forEach((z,R)=>{if(R!==A){const D=r.get(R);D&&(D.t.delete(A),s(R,D)&&S(R))}}))},w=(A,E,T)=>{const P=new Set(E.d.keys());T==null||T.forEach((z,R)=>{if(P.has(R)){P.delete(R);return}const D=r.get(R);D&&(D.t.delete(A),s(R,D)&&S(R))}),P.forEach(z=>{const R=r.get(z);R?R.t.add(A):r.has(A)&&_(z,A)})},x=()=>{let A;for(;a.size;){const E=Array.from(a);a.clear(),E.forEach(([T,P])=>{const z=d(T);if(z){const R=r.get(T);R&&z.d!==(P==null?void 0:P.d)&&w(T,z,P==null?void 0:P.d),R&&!(P&&!Ho(P)&&(Jl(P,z)||k_(P,z)))&&R.l.forEach(D=>D())}})}};return{get:e,set:p,sub:(A,E)=>{const T=n(A),P=x(),z=T.l;return z.add(E),()=>{z.delete(E),c(A)}}}};let pf;const GB=()=>(pf||(pf=HB()),pf),$B=C.createContext(void 0),px=t=>{const r=C.useContext($B);return(t==null?void 0:t.store)||r||GB()},jB=t=>typeof(t==null?void 0:t.then)=="function",VB=ue.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(r=>{t.status="fulfilled",t.value=r},r=>{t.status="rejected",t.reason=r}),t)});function YB(t,r){const a=px(r),[[o,u,d],h]=C.useReducer(y=>{const v=a.get(t);return Object.is(y[0],v)&&y[1]===a&&y[2]===t?y:[v,a,t]},void 0,()=>[a.get(t),a,t]);let l=o;(u!==a||d!==t)&&(h(),l=a.get(t));const g=r==null?void 0:r.delay;return C.useEffect(()=>{const y=a.sub(t,()=>{if(typeof g=="number"){setTimeout(h,g);return}h()});return h(),y},[a,t,g]),C.useDebugValue(l),jB(l)?VB(l):l}function WB(t,r){const a=px(r);return C.useCallback((...u)=>a.set(t,...u),[a,t])}function td(t,r){return[YB(t,r),WB(t,r)]}const mx=hx([]),gx=hx([]);function qB(){const t=C.useRef(null),r=C.useRef(null),[a,o]=C.useState(!1),[u,d]=C.useState(0),[h,l]=C.useState([0,0]),g=String(u),[y,v]=td(mx);return C.useEffect(()=>{t.current!=null&&Ci.init(t.current)},[]),C.useEffect(()=>{const b=setInterval(()=>{const e=Math.round(Ci.getDuration()/1e6);d(e),a&&l([0,e])},1e3);return()=>{clearInterval(b)}},[a]),j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"cvs-container relative",ref:t}),j.jsxs("div",{className:"time-range-wrap flex",children:[j.jsx("div",{className:"flex-1",children:j.jsx(zI,{range:!0,min:0,max:u,step:.01,value:h,disabled:a||u===0,onChange:b=>l(b)})}),j.jsx("span",{id:"time-value-str",className:"ml-4 text-right",children:g})]}),j.jsxs("div",{className:"flex",children:[j.jsxs("div",{children:[j.jsx("button",{onClick:async()=>{var b,e;r.current==null?r.current=await Ci.start():a?(b=r.current)==null||b.pause():(e=r.current)==null||e.play(),o(!a)},children:a?"暂停":"录制"})," ","|"," ",j.jsx("button",{disabled:a,onClick:()=>{Ci.delete(h[0]*1e6,h[1]*1e6)},children:"删除片段"})]}),j.jsxs("div",{className:"ml-auto",children:[j.jsx("button",{className:"hidden",disabled:u===0,children:"截图"}),j.jsx("button",{className:"hidden",disabled:u===0,children:"生成动图"}),j.jsx("button",{disabled:u===0,onClick:async()=>{const[b,e]=h,n=await Ci.exportVideo(b*1e6,e*1e6);v(y.concat({type:"video",url:n.url,duration:Math.floor(n.duration/1e6),createTime:bC(Date.now(),"MM-dd HH:mm:ss")}))},children:"生成视频"})]})]})]})}function KB(){const[t,r]=td(gx);return j.jsxs("div",{className:"add-sprite",children:[j.jsx("div",{className:"font-bold",children:"添加素材"}),j.jsxs("div",{className:"flex",children:[j.jsx("button",{className:"border border-solid border-black mr-4 px-2",onClick:async()=>{const a=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}),o=t.filter(y=>y.name.includes("屏幕")).length,u=Ci.getAVCanvas(),d=new x_(`屏幕${o||""}`,a,{audioCtx:u.spriteManager.audioCtx});await u.spriteManager.addSprite(d);const{w:h,h:l}=d.rect,g=h/l;g>1280/720?(d.rect.x=0,d.rect.w=1280,d.rect.h=d.rect.w/g,d.rect.y=(720-d.rect.h)/2):(d.rect.y=0,d.rect.h=720,d.rect.w=d.rect.h*g,d.rect.x=(1280-d.rect.w)/2),r(t.concat(d))},children:"捕获屏幕"}),j.jsx("button",{className:"border border-solid border-black px-2",onClick:async()=>{const a=await navigator.mediaDevices.getUserMedia({video:{width:900,height:600},audio:!0}),o=t.filter(l=>l.name.includes("演讲者")).length,u=Ci.getAVCanvas(),d=new x_(`演讲者${o||""}`,a,{audioCtx:u.spriteManager.audioCtx});await u.spriteManager.addSprite(d);const h=1280*.015;d.rect.w=450,d.rect.h=300,d.rect.x=1280-d.rect.w-h,d.rect.y=720-d.rect.h-h,r(t.concat(d))},children:"演讲者"})]})]})}function XB(){const[t,r]=td(mx),[a,o]=C.useState(null),u=(d,h=!1)=>d.type==="video"?j.jsx("video",{src:d.url,controls:h}):j.jsx("div",{});return C.useEffect(()=>{const d=({key:h})=>{h==="Escape"&&a!=null&&o(null)};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[a]),j.jsxs(j.Fragment,{children:[t.map((d,h)=>j.jsxs("div",{children:[j.jsx(QB,{onDelete:()=>{const l=[...t];l.splice(h,1),r(l)},onDownload:()=>{ZB(d.url,d.createTime)},onPreview:()=>{o(d)},children:u(d)}),j.jsxs("div",{className:"text-center",children:[d.type," ",d.duration,"s"]}),j.jsx("div",{className:"text-center",children:d.createTime})]},d.url)),a&&j.jsx("div",{onClick:()=>o(null),className:"fixed z-50 top-0 left-0 w-full h-full bg-[#0009]",children:j.jsx("div",{onClick:d=>d.stopPropagation(),className:"absolute w-[900px] h-[500px] top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:u(a,!0)})})]})}const QB=function({children:r,onDelete:a,onPreview:o,onDownload:u}){const d="m-auto border rounded-full inline-block h-[40px] w-[40px]";return j.jsxs("div",{className:"relative text-white group text-xs",children:[j.jsxs("div",{className:"absolute w-full h-full bg-[#00000066] hidden group-hover:flex items-center content-center z-10 px-8",children:[j.jsx("button",{onClick:o,className:d,children:"预览"}),j.jsx("button",{onClick:u,className:d,children:"下载"}),j.jsx("button",{onClick:a,className:d,children:"删除"})]}),r]})};function ZB(t,r){const a=document.createElement("a");document.body.appendChild(a),a.setAttribute("href",t),a.setAttribute("download",`bloom-shadow-${r}.mp4`),a.setAttribute("target","_self"),a.click(),a.remove()}function op(t,r){return op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},op(t,r)}function vx(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,op(t,r)}function re(){return re=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},re.apply(this,arguments)}function Os(t){"@babel/helpers - typeof";return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Os(t)}function JB(t,r){if(Os(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var o=a.call(t,r||"default");if(Os(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function ek(t){var r=JB(t,"string");return Os(r)==="symbol"?r:String(r)}function tk(t,r,a){return r=ek(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function D_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,o)}return a}function L_(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?D_(Object(a),!0).forEach(function(o){tk(t,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D_(Object(a)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(a,o))})}return t}function Kt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var z_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),mf=function(){return Math.random().toString(36).substring(7).split("").join(".")},R_={INIT:"@@redux/INIT"+mf(),REPLACE:"@@redux/REPLACE"+mf(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+mf()}};function rk(t){if(typeof t!="object"||t===null)return!1;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function _x(t,r,a){var o;if(typeof r=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Kt(0));if(typeof r=="function"&&typeof a>"u"&&(a=r,r=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Kt(1));return a(_x)(t,r)}if(typeof t!="function")throw new Error(Kt(2));var u=t,d=r,h=[],l=h,g=!1;function y(){l===h&&(l=h.slice())}function v(){if(g)throw new Error(Kt(3));return d}function b(c){if(typeof c!="function")throw new Error(Kt(4));if(g)throw new Error(Kt(5));var f=!0;return y(),l.push(c),function(){if(f){if(g)throw new Error(Kt(6));f=!1,y();var p=l.indexOf(c);l.splice(p,1),h=null}}}function e(c){if(!rk(c))throw new Error(Kt(7));if(typeof c.type>"u")throw new Error(Kt(8));if(g)throw new Error(Kt(9));try{g=!0,d=u(d,c)}finally{g=!1}for(var f=h=l,m=0;m<f.length;m++){var p=f[m];p()}return c}function n(c){if(typeof c!="function")throw new Error(Kt(10));u=c,e({type:R_.REPLACE})}function s(){var c,f=b;return c={subscribe:function(p){if(typeof p!="object"||p===null)throw new Error(Kt(11));function _(){p.next&&p.next(v())}_();var S=f(_);return{unsubscribe:S}}},c[z_]=function(){return this},c}return e({type:R_.INIT}),o={dispatch:e,subscribe:b,getState:v,replaceReducer:n},o[z_]=s,o}function F_(t,r){return function(){return r(t.apply(this,arguments))}}function O_(t,r){if(typeof t=="function")return F_(t,r);if(typeof t!="object"||t===null)throw new Error(Kt(16));var a={};for(var o in t){var u=t[o];typeof u=="function"&&(a[o]=F_(u,r))}return a}function yx(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.length===0?function(o){return o}:r.length===1?r[0]:r.reduce(function(o,u){return function(){return o(u.apply(void 0,arguments))}})}function ik(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(o){return function(){var u=o.apply(void 0,arguments),d=function(){throw new Error(Kt(15))},h={getState:u.getState,dispatch:function(){return d.apply(void 0,arguments)}},l=r.map(function(g){return g(h)});return d=yx.apply(void 0,l)(u.dispatch),L_(L_({},u),{},{dispatch:d})}}}var bx=ue.createContext(null);function nk(t){t()}var Sx=nk,ak=function(r){return Sx=r},ok=function(){return Sx};function sk(){var t=ok(),r=null,a=null;return{clear:function(){r=null,a=null},notify:function(){t(function(){for(var u=r;u;)u.callback(),u=u.next})},get:function(){for(var u=[],d=r;d;)u.push(d),d=d.next;return u},subscribe:function(u){var d=!0,h=a={callback:u,next:null,prev:a};return h.prev?h.prev.next=h:r=h,function(){!d||r===null||(d=!1,h.next?h.next.prev=h.prev:a=h.prev,h.prev?h.prev.next=h.next:r=h.next)}}}}var M_={notify:function(){},get:function(){return[]}};function xx(t,r){var a,o=M_;function u(b){return g(),o.subscribe(b)}function d(){o.notify()}function h(){v.onStateChange&&v.onStateChange()}function l(){return!!a}function g(){a||(a=r?r.addNestedSub(h):t.subscribe(h),o=sk())}function y(){a&&(a(),a=void 0,o.clear(),o=M_)}var v={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:l,trySubscribe:g,tryUnsubscribe:y,getListeners:function(){return o}};return v}var wx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect;function lk(t){var r=t.store,a=t.context,o=t.children,u=C.useMemo(function(){var l=xx(r);return{store:r,subscription:l}},[r]),d=C.useMemo(function(){return r.getState()},[r]);wx(function(){var l=u.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),d!==r.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[u,d]);var h=a||bx;return ue.createElement(h.Provider,{value:u},o)}function on(){return on=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},on.apply(this,arguments)}function lc(t,r){if(t==null)return{};var a={},o=Object.keys(t),u,d;for(d=0;d<o.length;d++)u=o[d],!(r.indexOf(u)>=0)&&(a[u]=t[u]);return a}var km=hm,uk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ck={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dk={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ex={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Dm={};Dm[km.ForwardRef]=dk;Dm[km.Memo]=Ex;function N_(t){return km.isMemo(t)?Ex:Dm[t.$$typeof]||uk}var fk=Object.defineProperty,hk=Object.getOwnPropertyNames,H_=Object.getOwnPropertySymbols,pk=Object.getOwnPropertyDescriptor,mk=Object.getPrototypeOf,G_=Object.prototype;function Ux(t,r,a){if(typeof r!="string"){if(G_){var o=mk(r);o&&o!==G_&&Ux(t,o,a)}var u=hk(r);H_&&(u=u.concat(H_(r)));for(var d=N_(t),h=N_(r),l=0;l<u.length;++l){var g=u[l];if(!ck[g]&&!(a&&a[g])&&!(h&&h[g])&&!(d&&d[g])){var y=pk(r,g);try{fk(t,g,y)}catch{}}}}return t}var gk=Ux;const $_=js(gk);var Cx={exports:{}},De={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd=60103,id=60106,rl=60107,il=60108,nl=60114,al=60109,ol=60110,sl=60112,ll=60113,Lm=60120,ul=60115,cl=60116,Ax=60121,Tx=60122,Px=60117,Ix=60129,Bx=60131;if(typeof Symbol=="function"&&Symbol.for){var xt=Symbol.for;rd=xt("react.element"),id=xt("react.portal"),rl=xt("react.fragment"),il=xt("react.strict_mode"),nl=xt("react.profiler"),al=xt("react.provider"),ol=xt("react.context"),sl=xt("react.forward_ref"),ll=xt("react.suspense"),Lm=xt("react.suspense_list"),ul=xt("react.memo"),cl=xt("react.lazy"),Ax=xt("react.block"),Tx=xt("react.server.block"),Px=xt("react.fundamental"),Ix=xt("react.debug_trace_mode"),Bx=xt("react.legacy_hidden")}function Yr(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case rd:switch(t=t.type,t){case rl:case nl:case il:case ll:case Lm:return t;default:switch(t=t&&t.$$typeof,t){case ol:case sl:case cl:case ul:case al:return t;default:return r}}case id:return r}}}var vk=al,_k=rd,yk=sl,bk=rl,Sk=cl,xk=ul,wk=id,Ek=nl,Uk=il,Ck=ll;De.ContextConsumer=ol;De.ContextProvider=vk;De.Element=_k;De.ForwardRef=yk;De.Fragment=bk;De.Lazy=Sk;De.Memo=xk;De.Portal=wk;De.Profiler=Ek;De.StrictMode=Uk;De.Suspense=Ck;De.isAsyncMode=function(){return!1};De.isConcurrentMode=function(){return!1};De.isContextConsumer=function(t){return Yr(t)===ol};De.isContextProvider=function(t){return Yr(t)===al};De.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===rd};De.isForwardRef=function(t){return Yr(t)===sl};De.isFragment=function(t){return Yr(t)===rl};De.isLazy=function(t){return Yr(t)===cl};De.isMemo=function(t){return Yr(t)===ul};De.isPortal=function(t){return Yr(t)===id};De.isProfiler=function(t){return Yr(t)===nl};De.isStrictMode=function(t){return Yr(t)===il};De.isSuspense=function(t){return Yr(t)===ll};De.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===rl||t===nl||t===Ix||t===il||t===ll||t===Lm||t===Bx||typeof t=="object"&&t!==null&&(t.$$typeof===cl||t.$$typeof===ul||t.$$typeof===al||t.$$typeof===ol||t.$$typeof===sl||t.$$typeof===Px||t.$$typeof===Ax||t[0]===Tx)};De.typeOf=Yr;Cx.exports=De;var Ak=Cx.exports,Tk=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Pk=["reactReduxForwardedRef"],Ik=[],Bk=[null,null];function kk(t,r){var a=t[1];return[r.payload,a+1]}function j_(t,r,a){wx(function(){return t.apply(void 0,r)},a)}function Dk(t,r,a,o,u,d,h){t.current=o,r.current=u,a.current=!1,d.current&&(d.current=null,h())}function Lk(t,r,a,o,u,d,h,l,g,y){if(t){var v=!1,b=null,e=function(){if(!v){var c=r.getState(),f,m;try{f=o(c,u.current)}catch(p){m=p,b=p}m||(b=null),f===d.current?h.current||g():(d.current=f,l.current=f,h.current=!0,y({type:"STORE_UPDATED",payload:{error:m}}))}};a.onStateChange=e,a.trySubscribe(),e();var n=function(){if(v=!0,a.tryUnsubscribe(),a.onStateChange=null,b)throw b};return n}}var zk=function(){return[null,0]};function Rk(t,r){r===void 0&&(r={});var a=r,o=a.getDisplayName,u=o===void 0?function(_){return"ConnectAdvanced("+_+")"}:o,d=a.methodName,h=d===void 0?"connectAdvanced":d,l=a.renderCountProp,g=l===void 0?void 0:l,y=a.shouldHandleStateChanges,v=y===void 0?!0:y,b=a.storeKey,e=b===void 0?"store":b;a.withRef;var n=a.forwardRef,s=n===void 0?!1:n,c=a.context,f=c===void 0?bx:c,m=lc(a,Tk),p=f;return function(S){var w=S.displayName||S.name||"Component",x=u(w),U=on({},m,{getDisplayName:u,methodName:h,renderCountProp:g,shouldHandleStateChanges:v,storeKey:e,displayName:x,wrappedComponentName:w,WrappedComponent:S}),A=m.pure;function E(D){return t(D.dispatch,U)}var T=A?C.useMemo:function(D){return D()};function P(D){var B=C.useMemo(function(){var Q=D.reactReduxForwardedRef,te=lc(D,Pk);return[D.context,Q,te]},[D]),F=B[0],O=B[1],I=B[2],L=C.useMemo(function(){return F&&F.Consumer&&Ak.isContextConsumer(ue.createElement(F.Consumer,null))?F:p},[F,p]),M=C.useContext(L),k=!!D.store&&!!D.store.getState&&!!D.store.dispatch;M&&M.store;var $=k?D.store:M.store,J=C.useMemo(function(){return E($)},[$]),ae=C.useMemo(function(){if(!v)return Bk;var Q=xx($,k?null:M.subscription),te=Q.notifyNestedSubs.bind(Q);return[Q,te]},[$,k,M]),ce=ae[0],X=ae[1],ee=C.useMemo(function(){return k?M:on({},M,{subscription:ce})},[k,M,ce]),be=C.useReducer(kk,Ik,zk),de=be[0],_e=de[0],Ee=be[1];if(_e&&_e.error)throw _e.error;var Xe=C.useRef(),ge=C.useRef(I),Le=C.useRef(),fe=C.useRef(!1),Be=T(function(){return Le.current&&I===ge.current?Le.current:J($.getState(),I)},[$,_e,I]);j_(Dk,[ge,Xe,fe,I,Be,Le,X]),j_(Lk,[v,$,ce,J,ge,Xe,fe,Le,X,Ee],[$,ce,J]);var ye=C.useMemo(function(){return ue.createElement(S,on({},Be,{ref:O}))},[O,S,Be]),ie=C.useMemo(function(){return v?ue.createElement(L.Provider,{value:ee},ye):ye},[L,ye,ee]);return ie}var z=A?ue.memo(P):P;if(z.WrappedComponent=S,z.displayName=P.displayName=x,s){var R=ue.forwardRef(function(B,F){return ue.createElement(z,on({},B,{reactReduxForwardedRef:F}))});return R.displayName=x,R.WrappedComponent=S,$_(R,S)}return $_(z,S)}}function V_(t,r){return t===r?t!==0||r!==0||1/t===1/r:t!==t&&r!==r}function gf(t,r){if(V_(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var u=0;u<a.length;u++)if(!Object.prototype.hasOwnProperty.call(r,a[u])||!V_(t[a[u]],r[a[u]]))return!1;return!0}function Fk(t,r){var a={},o=function(h){var l=t[h];typeof l=="function"&&(a[h]=function(){return r(l.apply(void 0,arguments))})};for(var u in t)o(u);return a}function zm(t){return function(a,o){var u=t(a,o);function d(){return u}return d.dependsOnOwnProps=!1,d}}function Y_(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function kx(t,r){return function(o,u){u.displayName;var d=function(l,g){return d.dependsOnOwnProps?d.mapToProps(l,g):d.mapToProps(l)};return d.dependsOnOwnProps=!0,d.mapToProps=function(l,g){d.mapToProps=t,d.dependsOnOwnProps=Y_(t);var y=d(l,g);return typeof y=="function"&&(d.mapToProps=y,d.dependsOnOwnProps=Y_(y),y=d(l,g)),y},d}}function Ok(t){return typeof t=="function"?kx(t):void 0}function Mk(t){return t?void 0:zm(function(r){return{dispatch:r}})}function Nk(t){return t&&typeof t=="object"?zm(function(r){return Fk(t,r)}):void 0}const Hk=[Ok,Mk,Nk];function Gk(t){return typeof t=="function"?kx(t):void 0}function $k(t){return t?void 0:zm(function(){return{}})}const jk=[Gk,$k];function Vk(t,r,a){return on({},a,t,r)}function Yk(t){return function(a,o){o.displayName;var u=o.pure,d=o.areMergedPropsEqual,h=!1,l;return function(y,v,b){var e=t(y,v,b);return h?(!u||!d(e,l))&&(l=e):(h=!0,l=e),l}}}function Wk(t){return typeof t=="function"?Yk(t):void 0}function qk(t){return t?void 0:function(){return Vk}}const Kk=[Wk,qk];var Xk=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Qk(t,r,a,o){return function(d,h){return a(t(d,h),r(o,h),h)}}function Zk(t,r,a,o,u){var d=u.areStatesEqual,h=u.areOwnPropsEqual,l=u.areStatePropsEqual,g=!1,y,v,b,e,n;function s(_,S){return y=_,v=S,b=t(y,v),e=r(o,v),n=a(b,e,v),g=!0,n}function c(){return b=t(y,v),r.dependsOnOwnProps&&(e=r(o,v)),n=a(b,e,v),n}function f(){return t.dependsOnOwnProps&&(b=t(y,v)),r.dependsOnOwnProps&&(e=r(o,v)),n=a(b,e,v),n}function m(){var _=t(y,v),S=!l(_,b);return b=_,S&&(n=a(b,e,v)),n}function p(_,S){var w=!h(S,v),x=!d(_,y,S,v);return y=_,v=S,w&&x?c():w?f():x?m():n}return function(S,w){return g?p(S,w):s(S,w)}}function Jk(t,r){var a=r.initMapStateToProps,o=r.initMapDispatchToProps,u=r.initMergeProps,d=lc(r,Xk),h=a(t,d),l=o(t,d),g=u(t,d),y=d.pure?Zk:Qk;return y(h,l,g,t,d)}var eD=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function vf(t,r,a){for(var o=r.length-1;o>=0;o--){var u=r[o](t);if(u)return u}return function(d,h){throw new Error("Invalid value of type "+typeof t+" for "+a+" argument when connecting component "+h.wrappedComponentName+".")}}function tD(t,r){return t===r}function rD(t){var r=t===void 0?{}:t,a=r.connectHOC,o=a===void 0?Rk:a,u=r.mapStateToPropsFactories,d=u===void 0?jk:u,h=r.mapDispatchToPropsFactories,l=h===void 0?Hk:h,g=r.mergePropsFactories,y=g===void 0?Kk:g,v=r.selectorFactory,b=v===void 0?Jk:v;return function(n,s,c,f){f===void 0&&(f={});var m=f,p=m.pure,_=p===void 0?!0:p,S=m.areStatesEqual,w=S===void 0?tD:S,x=m.areOwnPropsEqual,U=x===void 0?gf:x,A=m.areStatePropsEqual,E=A===void 0?gf:A,T=m.areMergedPropsEqual,P=T===void 0?gf:T,z=lc(m,eD),R=vf(n,d,"mapStateToProps"),D=vf(s,l,"mapDispatchToProps"),B=vf(c,y,"mergeProps");return o(b,on({methodName:"connect",getDisplayName:function(O){return"Connect("+O+")"},shouldHandleStateChanges:!!n,initMapStateToProps:R,initMapDispatchToProps:D,initMergeProps:B,pure:_,areStatesEqual:w,areOwnPropsEqual:U,areStatePropsEqual:E,areMergedPropsEqual:P},z))}}const Dx=rD();ak(Xs.unstable_batchedUpdates);function iD(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}function Lx(t,r){var a=C.useState(function(){return{inputs:r,result:t()}})[0],o=C.useRef(!0),u=C.useRef(a),d=o.current||!!(r&&u.current.inputs&&iD(r,u.current.inputs)),h=d?u.current:{inputs:r,result:t()};return C.useEffect(function(){o.current=!1,u.current=h},[h]),h.result}function nD(t,r){return Lx(function(){return t},r)}var Se=Lx,K=nD,aD=!0,_f="Invariant failed";function oD(t,r){if(!t){if(aD)throw new Error(_f);var a=typeof r=="function"?r():r,o=a?"".concat(_f,": ").concat(a):_f;throw new Error(o)}}var Hr=function(r){var a=r.top,o=r.right,u=r.bottom,d=r.left,h=o-d,l=u-a,g={top:a,right:o,bottom:u,left:d,width:h,height:l,x:d,y:a,center:{x:(o+d)/2,y:(u+a)/2}};return g},Rm=function(r,a){return{top:r.top-a.top,left:r.left-a.left,bottom:r.bottom+a.bottom,right:r.right+a.right}},W_=function(r,a){return{top:r.top+a.top,left:r.left+a.left,bottom:r.bottom-a.bottom,right:r.right-a.right}},sD=function(r,a){return{top:r.top+a.y,left:r.left+a.x,bottom:r.bottom+a.y,right:r.right+a.x}},yf={top:0,right:0,bottom:0,left:0},Fm=function(r){var a=r.borderBox,o=r.margin,u=o===void 0?yf:o,d=r.border,h=d===void 0?yf:d,l=r.padding,g=l===void 0?yf:l,y=Hr(Rm(a,u)),v=Hr(W_(a,h)),b=Hr(W_(v,g));return{marginBox:y,borderBox:Hr(a),paddingBox:v,contentBox:b,margin:u,border:h,padding:g}},br=function(r){var a=r.slice(0,-2),o=r.slice(-2);if(o!=="px")return 0;var u=Number(a);return isNaN(u)&&oD(!1),u},lD=function(){return{x:window.pageXOffset,y:window.pageYOffset}},uc=function(r,a){var o=r.borderBox,u=r.border,d=r.margin,h=r.padding,l=sD(o,a);return Fm({borderBox:l,border:u,margin:d,padding:h})},cc=function(r,a){return a===void 0&&(a=lD()),uc(r,a)},zx=function(r,a){var o={top:br(a.marginTop),right:br(a.marginRight),bottom:br(a.marginBottom),left:br(a.marginLeft)},u={top:br(a.paddingTop),right:br(a.paddingRight),bottom:br(a.paddingBottom),left:br(a.paddingLeft)},d={top:br(a.borderTopWidth),right:br(a.borderRightWidth),bottom:br(a.borderBottomWidth),left:br(a.borderLeftWidth)};return Fm({borderBox:r,margin:o,padding:u,border:d})},Rx=function(r){var a=r.getBoundingClientRect(),o=window.getComputedStyle(r);return zx(a,o)},q_=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function uD(t,r){return!!(t===r||q_(t)&&q_(r))}function cD(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(!uD(t[a],r[a]))return!1;return!0}function vt(t,r){r===void 0&&(r=cD);var a,o=[],u,d=!1;function h(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return d&&a===this&&r(l,o)||(u=t.apply(this,l),d=!0,a=this,o=l),u}return h}var dD=function(r){var a=[],o=null,u=function(){for(var h=arguments.length,l=new Array(h),g=0;g<h;g++)l[g]=arguments[g];a=l,!o&&(o=requestAnimationFrame(function(){o=null,r.apply(void 0,a)}))};return u.cancel=function(){o&&(cancelAnimationFrame(o),o=null)},u};const Ms=dD;function Fx(t,r){}Fx.bind(null,"warn");Fx.bind(null,"error");function mn(){}function fD(t,r){return re({},t,{},r)}function Ar(t,r,a){var o=r.map(function(u){var d=fD(a,u.options);return t.addEventListener(u.eventName,u.fn,d),function(){t.removeEventListener(u.eventName,u.fn,d)}});return function(){o.forEach(function(d){d()})}}var hD="Invariant failed";function dc(t){this.message=t}dc.prototype.toString=function(){return this.message};function H(t,r){if(!t)throw new dc(hD)}var pD=function(t){vx(r,t);function r(){for(var o,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return o=t.call.apply(t,[this].concat(d))||this,o.callbacks=null,o.unbind=mn,o.onWindowError=function(l){var g=o.getCallbacks();g.isDragging()&&g.tryAbort();var y=l.error;y instanceof dc&&l.preventDefault()},o.getCallbacks=function(){if(!o.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return o.callbacks},o.setCallbacks=function(l){o.callbacks=l},o}var a=r.prototype;return a.componentDidMount=function(){this.unbind=Ar(window,[{eventName:"error",fn:this.onWindowError}])},a.componentDidCatch=function(u){if(u instanceof dc){this.setState({});return}throw u},a.componentWillUnmount=function(){this.unbind()},a.render=function(){return this.props.children(this.setCallbacks)},r}(ue.Component),mD=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,fc=function(r){return r+1},gD=function(r){return`
  You have lifted an item in position `+fc(r.source.index)+`
`},Ox=function(r,a){var o=r.droppableId===a.droppableId,u=fc(r.index),d=fc(a.index);return o?`
      You have moved the item from position `+u+`
      to position `+d+`
    `:`
    You have moved the item from position `+u+`
    in list `+r.droppableId+`
    to list `+a.droppableId+`
    in position `+d+`
  `},Mx=function(r,a,o){var u=a.droppableId===o.droppableId;return u?`
      The item `+r+`
      has been combined with `+o.draggableId:`
      The item `+r+`
      in list `+a.droppableId+`
      has been combined with `+o.draggableId+`
      in list `+o.droppableId+`
    `},vD=function(r){var a=r.destination;if(a)return Ox(r.source,a);var o=r.combine;return o?Mx(r.draggableId,r.source,o):"You are over an area that cannot be dropped on"},K_=function(r){return`
  The item has returned to its starting position
  of `+fc(r.index)+`
`},_D=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+K_(r.source)+`
    `;var a=r.destination,o=r.combine;return a?`
      You have dropped the item.
      `+Ox(r.source,a)+`
    `:o?`
      You have dropped the item.
      `+Mx(r.draggableId,r.source,o)+`
    `:`
    The item has been dropped while not over a drop area.
    `+K_(r.source)+`
  `},Uu={dragHandleUsageInstructions:mD,onDragStart:gD,onDragUpdate:vD,onDragEnd:_D},_t={x:0,y:0},Et=function(r,a){return{x:r.x+a.x,y:r.y+a.y}},ur=function(r,a){return{x:r.x-a.x,y:r.y-a.y}},gn=function(r,a){return r.x===a.x&&r.y===a.y},Uo=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},ca=function(r,a,o){var u;return o===void 0&&(o=0),u={},u[r]=a,u[r==="x"?"y":"x"]=o,u},Ns=function(r,a){return Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2))},X_=function(r,a){return Math.min.apply(Math,a.map(function(o){return Ns(r,o)}))},Nx=function(r){return function(a){return{x:r(a.x),y:r(a.y)}}},yD=function(t,r){var a=Hr({top:Math.max(r.top,t.top),right:Math.min(r.right,t.right),bottom:Math.min(r.bottom,t.bottom),left:Math.max(r.left,t.left)});return a.width<=0||a.height<=0?null:a},dl=function(r,a){return{top:r.top+a.y,left:r.left+a.x,bottom:r.bottom+a.y,right:r.right+a.x}},Q_=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},bD={top:0,right:0,bottom:0,left:0},SD=function(r,a){return a?dl(r,a.scroll.diff.displacement):r},xD=function(r,a,o){if(o&&o.increasedBy){var u;return re({},r,(u={},u[a.end]=r[a.end]+o.increasedBy[a.line],u))}return r},wD=function(r,a){return a&&a.shouldClipSubject?yD(a.pageMarginBox,r):Hr(r)},_o=function(t){var r=t.page,a=t.withPlaceholder,o=t.axis,u=t.frame,d=SD(r.marginBox,u),h=xD(d,o,a),l=wD(h,u);return{page:r,withPlaceholder:a,active:l}},Om=function(t,r){t.frame||H(!1);var a=t.frame,o=ur(r,a.scroll.initial),u=Uo(o),d=re({},a,{scroll:{initial:a.scroll.initial,current:r,diff:{value:o,displacement:u},max:a.scroll.max}}),h=_o({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:d}),l=re({},t,{frame:d,subject:h});return l};function hc(t){return Object.values?Object.values(t):Object.keys(t).map(function(r){return t[r]})}function Mm(t,r){if(t.findIndex)return t.findIndex(r);for(var a=0;a<t.length;a++)if(r(t[a]))return a;return-1}function En(t,r){if(t.find)return t.find(r);var a=Mm(t,r);if(a!==-1)return t[a]}function Hx(t){return Array.prototype.slice.call(t)}var Gx=vt(function(t){return t.reduce(function(r,a){return r[a.descriptor.id]=a,r},{})}),$x=vt(function(t){return t.reduce(function(r,a){return r[a.descriptor.id]=a,r},{})}),nd=vt(function(t){return hc(t)}),ED=vt(function(t){return hc(t)}),Co=vt(function(t,r){var a=ED(r).filter(function(o){return t===o.descriptor.droppableId}).sort(function(o,u){return o.descriptor.index-u.descriptor.index});return a});function Nm(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function ad(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var od=vt(function(t,r){return r.filter(function(a){return a.descriptor.id!==t.descriptor.id})}),UD=function(t){var r=t.isMovingForward,a=t.draggable,o=t.destination,u=t.insideDestination,d=t.previousImpact;if(!o.isCombineEnabled)return null;var h=Nm(d);if(!h)return null;function l(c){var f={type:"COMBINE",combine:{draggableId:c,droppableId:o.descriptor.id}};return re({},d,{at:f})}var g=d.displaced.all,y=g.length?g[0]:null;if(r)return y?l(y):null;var v=od(a,u);if(!y){if(!v.length)return null;var b=v[v.length-1];return l(b.descriptor.id)}var e=Mm(v,function(c){return c.descriptor.id===y});e===-1&&H(!1);var n=e-1;if(n<0)return null;var s=v[n];return l(s.descriptor.id)},Ao=function(t,r){return t.descriptor.droppableId===r.descriptor.id},jx={point:_t,value:0},Hs={invisible:{},visible:{},all:[]},CD={displaced:Hs,displacedBy:jx,at:null},Pr=function(t,r){return function(a){return t<=a&&a<=r}},Vx=function(t){var r=Pr(t.top,t.bottom),a=Pr(t.left,t.right);return function(o){var u=r(o.top)&&r(o.bottom)&&a(o.left)&&a(o.right);if(u)return!0;var d=r(o.top)||r(o.bottom),h=a(o.left)||a(o.right),l=d&&h;if(l)return!0;var g=o.top<t.top&&o.bottom>t.bottom,y=o.left<t.left&&o.right>t.right,v=g&&y;if(v)return!0;var b=g&&h||y&&d;return b}},AD=function(t){var r=Pr(t.top,t.bottom),a=Pr(t.left,t.right);return function(o){var u=r(o.top)&&r(o.bottom)&&a(o.left)&&a(o.right);return u}},Hm={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Yx={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},TD=function(t){return function(r){var a=Pr(r.top,r.bottom),o=Pr(r.left,r.right);return function(u){return t===Hm?a(u.top)&&a(u.bottom):o(u.left)&&o(u.right)}}},PD=function(r,a){var o=a.frame?a.frame.scroll.diff.displacement:_t;return dl(r,o)},ID=function(r,a,o){return a.subject.active?o(a.subject.active)(r):!1},BD=function(r,a,o){return o(a)(r)},Gm=function(r){var a=r.target,o=r.destination,u=r.viewport,d=r.withDroppableDisplacement,h=r.isVisibleThroughFrameFn,l=d?PD(a,o):a;return ID(l,o,h)&&BD(l,u,h)},kD=function(r){return Gm(re({},r,{isVisibleThroughFrameFn:Vx}))},Wx=function(r){return Gm(re({},r,{isVisibleThroughFrameFn:AD}))},DD=function(r){return Gm(re({},r,{isVisibleThroughFrameFn:TD(r.destination.axis)}))},LD=function(r,a,o){if(typeof o=="boolean")return o;if(!a)return!0;var u=a.invisible,d=a.visible;if(u[r])return!1;var h=d[r];return h?h.shouldAnimate:!0};function zD(t,r){var a=t.page.marginBox,o={top:r.point.y,right:0,bottom:0,left:r.point.x};return Hr(Rm(a,o))}function Gs(t){var r=t.afterDragging,a=t.destination,o=t.displacedBy,u=t.viewport,d=t.forceShouldAnimate,h=t.last;return r.reduce(function(g,y){var v=zD(y,o),b=y.descriptor.id;g.all.push(b);var e=kD({target:v,destination:a,viewport:u,withDroppableDisplacement:!0});if(!e)return g.invisible[y.descriptor.id]=!0,g;var n=LD(b,h,d),s={draggableId:b,shouldAnimate:n};return g.visible[b]=s,g},{all:[],visible:{},invisible:{}})}function RD(t,r){if(!t.length)return 0;var a=t[t.length-1].descriptor.index;return r.inHomeList?a:a+1}function Z_(t){var r=t.insideDestination,a=t.inHomeList,o=t.displacedBy,u=t.destination,d=RD(r,{inHomeList:a});return{displaced:Hs,displacedBy:o,at:{type:"REORDER",destination:{droppableId:u.descriptor.id,index:d}}}}function pc(t){var r=t.draggable,a=t.insideDestination,o=t.destination,u=t.viewport,d=t.displacedBy,h=t.last,l=t.index,g=t.forceShouldAnimate,y=Ao(r,o);if(l==null)return Z_({insideDestination:a,inHomeList:y,displacedBy:d,destination:o});var v=En(a,function(c){return c.descriptor.index===l});if(!v)return Z_({insideDestination:a,inHomeList:y,displacedBy:d,destination:o});var b=od(r,a),e=a.indexOf(v),n=b.slice(e),s=Gs({afterDragging:n,destination:o,displacedBy:d,last:h,viewport:u.frame,forceShouldAnimate:g});return{displaced:s,displacedBy:d,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:l}}}}function bn(t,r){return!!r.effected[t]}var FD=function(t){var r=t.isMovingForward,a=t.destination,o=t.draggables,u=t.combine,d=t.afterCritical;if(!a.isCombineEnabled)return null;var h=u.draggableId,l=o[h],g=l.descriptor.index,y=bn(h,d);return y?r?g:g-1:r?g+1:g},OD=function(t){var r=t.isMovingForward,a=t.isInHomeList,o=t.insideDestination,u=t.location;if(!o.length)return null;var d=u.index,h=r?d+1:d-1,l=o[0].descriptor.index,g=o[o.length-1].descriptor.index,y=a?g:g+1;return h<l||h>y?null:h},MD=function(t){var r=t.isMovingForward,a=t.isInHomeList,o=t.draggable,u=t.draggables,d=t.destination,h=t.insideDestination,l=t.previousImpact,g=t.viewport,y=t.afterCritical,v=l.at;if(v||H(!1),v.type==="REORDER"){var b=OD({isMovingForward:r,isInHomeList:a,location:v.destination,insideDestination:h});return b==null?null:pc({draggable:o,insideDestination:h,destination:d,viewport:g,last:l.displaced,displacedBy:l.displacedBy,index:b})}var e=FD({isMovingForward:r,destination:d,displaced:l.displaced,draggables:u,combine:v.combine,afterCritical:y});return e==null?null:pc({draggable:o,insideDestination:h,destination:d,viewport:g,last:l.displaced,displacedBy:l.displacedBy,index:e})},ND=function(t){var r=t.displaced,a=t.afterCritical,o=t.combineWith,u=t.displacedBy,d=!!(r.visible[o]||r.invisible[o]);return bn(o,a)?d?_t:Uo(u.point):d?u.point:_t},HD=function(t){var r=t.afterCritical,a=t.impact,o=t.draggables,u=ad(a);u||H(!1);var d=u.draggableId,h=o[d].page.borderBox.center,l=ND({displaced:a.displaced,afterCritical:r,combineWith:d,displacedBy:a.displacedBy});return Et(h,l)},qx=function(r,a){return a.margin[r.start]+a.borderBox[r.size]/2},GD=function(r,a){return a.margin[r.end]+a.borderBox[r.size]/2},$m=function(r,a,o){return a[r.crossAxisStart]+o.margin[r.crossAxisStart]+o.borderBox[r.crossAxisSize]/2},J_=function(r){var a=r.axis,o=r.moveRelativeTo,u=r.isMoving;return ca(a.line,o.marginBox[a.end]+qx(a,u),$m(a,o.marginBox,u))},ey=function(r){var a=r.axis,o=r.moveRelativeTo,u=r.isMoving;return ca(a.line,o.marginBox[a.start]-GD(a,u),$m(a,o.marginBox,u))},$D=function(r){var a=r.axis,o=r.moveInto,u=r.isMoving;return ca(a.line,o.contentBox[a.start]+qx(a,u),$m(a,o.contentBox,u))},jD=function(t){var r=t.impact,a=t.draggable,o=t.draggables,u=t.droppable,d=t.afterCritical,h=Co(u.descriptor.id,o),l=a.page,g=u.axis;if(!h.length)return $D({axis:g,moveInto:u.page,isMoving:l});var y=r.displaced,v=r.displacedBy,b=y.all[0];if(b){var e=o[b];if(bn(b,d))return ey({axis:g,moveRelativeTo:e.page,isMoving:l});var n=uc(e.page,v.point);return ey({axis:g,moveRelativeTo:n,isMoving:l})}var s=h[h.length-1];if(s.descriptor.id===a.descriptor.id)return l.borderBox.center;if(bn(s.descriptor.id,d)){var c=uc(s.page,Uo(d.displacedBy.point));return J_({axis:g,moveRelativeTo:c,isMoving:l})}return J_({axis:g,moveRelativeTo:s.page,isMoving:l})},sp=function(t,r){var a=t.frame;return a?Et(r,a.scroll.diff.displacement):r},VD=function(r){var a=r.impact,o=r.draggable,u=r.droppable,d=r.draggables,h=r.afterCritical,l=o.page.borderBox.center,g=a.at;return!u||!g?l:g.type==="REORDER"?jD({impact:a,draggable:o,draggables:d,droppable:u,afterCritical:h}):HD({impact:a,draggables:d,afterCritical:h})},sd=function(t){var r=VD(t),a=t.droppable,o=a?sp(a,r):r;return o},Kx=function(t,r){var a=ur(r,t.scroll.initial),o=Uo(a),u=Hr({top:r.y,bottom:r.y+t.frame.height,left:r.x,right:r.x+t.frame.width}),d={frame:u,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:r,diff:{value:a,displacement:o}}};return d};function ty(t,r){return t.map(function(a){return r[a]})}function YD(t,r){for(var a=0;a<r.length;a++){var o=r[a].visible[t];if(o)return o}return null}var WD=function(t){var r=t.impact,a=t.viewport,o=t.destination,u=t.draggables,d=t.maxScrollChange,h=Kx(a,Et(a.scroll.current,d)),l=o.frame?Om(o,Et(o.frame.scroll.current,d)):o,g=r.displaced,y=Gs({afterDragging:ty(g.all,u),destination:o,displacedBy:r.displacedBy,viewport:h.frame,last:g,forceShouldAnimate:!1}),v=Gs({afterDragging:ty(g.all,u),destination:l,displacedBy:r.displacedBy,viewport:a.frame,last:g,forceShouldAnimate:!1}),b={},e={},n=[g,y,v];g.all.forEach(function(c){var f=YD(c,n);if(f){e[c]=f;return}b[c]=!0});var s=re({},r,{displaced:{all:g.all,invisible:b,visible:e}});return s},qD=function(t,r){return Et(t.scroll.diff.displacement,r)},jm=function(t){var r=t.pageBorderBoxCenter,a=t.draggable,o=t.viewport,u=qD(o,r),d=ur(u,a.page.borderBox.center);return Et(a.client.borderBox.center,d)},Xx=function(t){var r=t.draggable,a=t.destination,o=t.newPageBorderBoxCenter,u=t.viewport,d=t.withDroppableDisplacement,h=t.onlyOnMainAxis,l=h===void 0?!1:h,g=ur(o,r.page.borderBox.center),y=dl(r.page.borderBox,g),v={target:y,destination:a,withDroppableDisplacement:d,viewport:u};return l?DD(v):Wx(v)},KD=function(t){var r=t.isMovingForward,a=t.draggable,o=t.destination,u=t.draggables,d=t.previousImpact,h=t.viewport,l=t.previousPageBorderBoxCenter,g=t.previousClientSelection,y=t.afterCritical;if(!o.isEnabled)return null;var v=Co(o.descriptor.id,u),b=Ao(a,o),e=UD({isMovingForward:r,draggable:a,destination:o,insideDestination:v,previousImpact:d})||MD({isMovingForward:r,isInHomeList:b,draggable:a,draggables:u,destination:o,insideDestination:v,previousImpact:d,viewport:h,afterCritical:y});if(!e)return null;var n=sd({impact:e,draggable:a,droppable:o,draggables:u,afterCritical:y}),s=Xx({draggable:a,destination:o,newPageBorderBoxCenter:n,viewport:h.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(s){var c=jm({pageBorderBoxCenter:n,draggable:a,viewport:h});return{clientSelection:c,impact:e,scrollJumpRequest:null}}var f=ur(n,l),m=WD({impact:e,viewport:h,destination:o,draggables:u,maxScrollChange:f});return{clientSelection:g,impact:m,scrollJumpRequest:f}},Mt=function(r){var a=r.subject.active;return a||H(!1),a},XD=function(t){var r=t.isMovingForward,a=t.pageBorderBoxCenter,o=t.source,u=t.droppables,d=t.viewport,h=o.subject.active;if(!h)return null;var l=o.axis,g=Pr(h[l.start],h[l.end]),y=nd(u).filter(function(b){return b!==o}).filter(function(b){return b.isEnabled}).filter(function(b){return!!b.subject.active}).filter(function(b){return Vx(d.frame)(Mt(b))}).filter(function(b){var e=Mt(b);return r?h[l.crossAxisEnd]<e[l.crossAxisEnd]:e[l.crossAxisStart]<h[l.crossAxisStart]}).filter(function(b){var e=Mt(b),n=Pr(e[l.start],e[l.end]);return g(e[l.start])||g(e[l.end])||n(h[l.start])||n(h[l.end])}).sort(function(b,e){var n=Mt(b)[l.crossAxisStart],s=Mt(e)[l.crossAxisStart];return r?n-s:s-n}).filter(function(b,e,n){return Mt(b)[l.crossAxisStart]===Mt(n[0])[l.crossAxisStart]});if(!y.length)return null;if(y.length===1)return y[0];var v=y.filter(function(b){var e=Pr(Mt(b)[l.start],Mt(b)[l.end]);return e(a[l.line])});return v.length===1?v[0]:v.length>1?v.sort(function(b,e){return Mt(b)[l.start]-Mt(e)[l.start]})[0]:y.sort(function(b,e){var n=X_(a,Q_(Mt(b))),s=X_(a,Q_(Mt(e)));return n!==s?n-s:Mt(b)[l.start]-Mt(e)[l.start]})[0]},ry=function(r,a){var o=r.page.borderBox.center;return bn(r.descriptor.id,a)?ur(o,a.displacedBy.point):o},QD=function(r,a){var o=r.page.borderBox;return bn(r.descriptor.id,a)?dl(o,Uo(a.displacedBy.point)):o},ZD=function(t){var r=t.pageBorderBoxCenter,a=t.viewport,o=t.destination,u=t.insideDestination,d=t.afterCritical,h=u.filter(function(l){return Wx({target:QD(l,d),destination:o,viewport:a.frame,withDroppableDisplacement:!0})}).sort(function(l,g){var y=Ns(r,sp(o,ry(l,d))),v=Ns(r,sp(o,ry(g,d)));return y<v?-1:v<y?1:l.descriptor.index-g.descriptor.index});return h[0]||null},fl=vt(function(r,a){var o=a[r.line];return{value:o,point:ca(r.line,o)}}),JD=function(r,a,o){var u=r.axis;if(r.descriptor.mode==="virtual")return ca(u.line,a[u.line]);var d=r.subject.page.contentBox[u.size],h=Co(r.descriptor.id,o),l=h.reduce(function(v,b){return v+b.client.marginBox[u.size]},0),g=l+a[u.line],y=g-d;return y<=0?null:ca(u.line,y)},Qx=function(r,a){return re({},r,{scroll:re({},r.scroll,{max:a})})},Zx=function(r,a,o){var u=r.frame;Ao(a,r)&&H(!1),r.subject.withPlaceholder&&H(!1);var d=fl(r.axis,a.displaceBy).point,h=JD(r,d,o),l={placeholderSize:d,increasedBy:h,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!u){var g=_o({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:r.frame});return re({},r,{subject:g})}var y=h?Et(u.scroll.max,h):u.scroll.max,v=Qx(u,y),b=_o({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:v});return re({},r,{subject:b,frame:v})},e3=function(r){var a=r.subject.withPlaceholder;a||H(!1);var o=r.frame;if(!o){var u=_o({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return re({},r,{subject:u})}var d=a.oldFrameMaxScroll;d||H(!1);var h=Qx(o,d),l=_o({page:r.subject.page,axis:r.axis,frame:h,withPlaceholder:null});return re({},r,{subject:l,frame:h})},t3=function(t){var r=t.previousPageBorderBoxCenter,a=t.moveRelativeTo,o=t.insideDestination,u=t.draggable,d=t.draggables,h=t.destination,l=t.viewport,g=t.afterCritical;if(!a){if(o.length)return null;var y={displaced:Hs,displacedBy:jx,at:{type:"REORDER",destination:{droppableId:h.descriptor.id,index:0}}},v=sd({impact:y,draggable:u,droppable:h,draggables:d,afterCritical:g}),b=Ao(u,h)?h:Zx(h,u,d),e=Xx({draggable:u,destination:b,newPageBorderBoxCenter:v,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return e?y:null}var n=r[h.axis.line]<=a.page.borderBox.center[h.axis.line],s=function(){var f=a.descriptor.index;return a.descriptor.id===u.descriptor.id||n?f:f+1}(),c=fl(h.axis,u.displaceBy);return pc({draggable:u,insideDestination:o,destination:h,viewport:l,displacedBy:c,last:Hs,index:s})},r3=function(t){var r=t.isMovingForward,a=t.previousPageBorderBoxCenter,o=t.draggable,u=t.isOver,d=t.draggables,h=t.droppables,l=t.viewport,g=t.afterCritical,y=XD({isMovingForward:r,pageBorderBoxCenter:a,source:u,droppables:h,viewport:l});if(!y)return null;var v=Co(y.descriptor.id,d),b=ZD({pageBorderBoxCenter:a,viewport:l,destination:y,insideDestination:v,afterCritical:g}),e=t3({previousPageBorderBoxCenter:a,destination:y,draggable:o,draggables:d,moveRelativeTo:b,insideDestination:v,viewport:l,afterCritical:g});if(!e)return null;var n=sd({impact:e,draggable:o,droppable:y,draggables:d,afterCritical:g}),s=jm({pageBorderBoxCenter:n,draggable:o,viewport:l});return{clientSelection:s,impact:e,scrollJumpRequest:null}},dr=function(t){var r=t.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},i3=function(r,a){var o=dr(r);return o?a[o]:null},n3=function(t){var r=t.state,a=t.type,o=i3(r.impact,r.dimensions.droppables),u=!!o,d=r.dimensions.droppables[r.critical.droppable.id],h=o||d,l=h.axis.direction,g=l==="vertical"&&(a==="MOVE_UP"||a==="MOVE_DOWN")||l==="horizontal"&&(a==="MOVE_LEFT"||a==="MOVE_RIGHT");if(g&&!u)return null;var y=a==="MOVE_DOWN"||a==="MOVE_RIGHT",v=r.dimensions.draggables[r.critical.draggable.id],b=r.current.page.borderBoxCenter,e=r.dimensions,n=e.draggables,s=e.droppables;return g?KD({isMovingForward:y,previousPageBorderBoxCenter:b,draggable:v,destination:h,draggables:n,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):r3({isMovingForward:y,previousPageBorderBoxCenter:b,draggable:v,isOver:h,draggables:n,droppables:s,viewport:r.viewport,afterCritical:r.afterCritical})};function Hn(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function Jx(t){var r=Pr(t.top,t.bottom),a=Pr(t.left,t.right);return function(u){return r(u.y)&&a(u.x)}}function a3(t,r){return t.left<r.right&&t.right>r.left&&t.top<r.bottom&&t.bottom>r.top}function o3(t){var r=t.pageBorderBox,a=t.draggable,o=t.candidates,u=a.page.borderBox.center,d=o.map(function(h){var l=h.axis,g=ca(h.axis.line,r.center[l.line],h.page.borderBox.center[l.crossAxisLine]);return{id:h.descriptor.id,distance:Ns(u,g)}}).sort(function(h,l){return l.distance-h.distance});return d[0]?d[0].id:null}function s3(t){var r=t.pageBorderBox,a=t.draggable,o=t.droppables,u=nd(o).filter(function(d){if(!d.isEnabled)return!1;var h=d.subject.active;if(!h||!a3(r,h))return!1;if(Jx(h)(r.center))return!0;var l=d.axis,g=h.center[l.crossAxisLine],y=r[l.crossAxisStart],v=r[l.crossAxisEnd],b=Pr(h[l.crossAxisStart],h[l.crossAxisEnd]),e=b(y),n=b(v);return!e&&!n?!0:e?y<g:v>g});return u.length?u.length===1?u[0].descriptor.id:o3({pageBorderBox:r,draggable:a,candidates:u}):null}var e1=function(r,a){return Hr(dl(r,a))},l3=function(t,r){var a=t.frame;return a?e1(r,a.scroll.diff.value):r};function t1(t){var r=t.displaced,a=t.id;return!!(r.visible[a]||r.invisible[a])}function u3(t){var r=t.draggable,a=t.closest,o=t.inHomeList;return a?o&&a.descriptor.index>r.descriptor.index?a.descriptor.index-1:a.descriptor.index:null}var c3=function(t){var r=t.pageBorderBoxWithDroppableScroll,a=t.draggable,o=t.destination,u=t.insideDestination,d=t.last,h=t.viewport,l=t.afterCritical,g=o.axis,y=fl(o.axis,a.displaceBy),v=y.value,b=r[g.start],e=r[g.end],n=od(a,u),s=En(n,function(f){var m=f.descriptor.id,p=f.page.borderBox.center[g.line],_=bn(m,l),S=t1({displaced:d,id:m});return _?S?e<=p:b<p-v:S?e<=p+v:b<p}),c=u3({draggable:a,closest:s,inHomeList:Ao(a,o)});return pc({draggable:a,insideDestination:u,destination:o,viewport:h,last:d,displacedBy:y,index:c})},d3=4,f3=function(t){var r=t.draggable,a=t.pageBorderBoxWithDroppableScroll,o=t.previousImpact,u=t.destination,d=t.insideDestination,h=t.afterCritical;if(!u.isCombineEnabled)return null;var l=u.axis,g=fl(u.axis,r.displaceBy),y=g.value,v=a[l.start],b=a[l.end],e=od(r,d),n=En(e,function(c){var f=c.descriptor.id,m=c.page.borderBox,p=m[l.size],_=p/d3,S=bn(f,h),w=t1({displaced:o.displaced,id:f});return S?w?b>m[l.start]+_&&b<m[l.end]-_:v>m[l.start]-y+_&&v<m[l.end]-y-_:w?b>m[l.start]+y+_&&b<m[l.end]+y-_:v>m[l.start]+_&&v<m[l.end]-_});if(!n)return null;var s={displacedBy:g,displaced:o.displaced,at:{type:"COMBINE",combine:{draggableId:n.descriptor.id,droppableId:u.descriptor.id}}};return s},r1=function(t){var r=t.pageOffset,a=t.draggable,o=t.draggables,u=t.droppables,d=t.previousImpact,h=t.viewport,l=t.afterCritical,g=e1(a.page.borderBox,r),y=s3({pageBorderBox:g,draggable:a,droppables:u});if(!y)return CD;var v=u[y],b=Co(v.descriptor.id,o),e=l3(v,g);return f3({pageBorderBoxWithDroppableScroll:e,draggable:a,previousImpact:d,destination:v,insideDestination:b,afterCritical:l})||c3({pageBorderBoxWithDroppableScroll:e,draggable:a,destination:v,insideDestination:b,last:d.displaced,viewport:h,afterCritical:l})},Vm=function(t,r){var a;return re({},t,(a={},a[r.descriptor.id]=r,a))},h3=function(r){var a=r.previousImpact,o=r.impact,u=r.droppables,d=dr(a),h=dr(o);if(!d||d===h)return u;var l=u[d];if(!l.subject.withPlaceholder)return u;var g=e3(l);return Vm(u,g)},p3=function(t){var r=t.draggable,a=t.draggables,o=t.droppables,u=t.previousImpact,d=t.impact,h=h3({previousImpact:u,impact:d,droppables:o}),l=dr(d);if(!l)return h;var g=o[l];if(Ao(r,g)||g.subject.withPlaceholder)return h;var y=Zx(g,r,a);return Vm(h,y)},ps=function(t){var r=t.state,a=t.clientSelection,o=t.dimensions,u=t.viewport,d=t.impact,h=t.scrollJumpRequest,l=u||r.viewport,g=o||r.dimensions,y=a||r.current.client.selection,v=ur(y,r.initial.client.selection),b={offset:v,selection:y,borderBoxCenter:Et(r.initial.client.borderBoxCenter,v)},e={selection:Et(b.selection,l.scroll.current),borderBoxCenter:Et(b.borderBoxCenter,l.scroll.current),offset:Et(b.offset,l.scroll.diff.value)},n={client:b,page:e};if(r.phase==="COLLECTING")return re({phase:"COLLECTING"},r,{dimensions:g,viewport:l,current:n});var s=g.draggables[r.critical.draggable.id],c=d||r1({pageOffset:e.offset,draggable:s,draggables:g.draggables,droppables:g.droppables,previousImpact:r.impact,viewport:l,afterCritical:r.afterCritical}),f=p3({draggable:s,impact:c,previousImpact:r.impact,draggables:g.draggables,droppables:g.droppables}),m=re({},r,{current:n,dimensions:{draggables:g.draggables,droppables:f},impact:c,viewport:l,scrollJumpRequest:h||null,forceShouldAnimate:h?!1:null});return m};function m3(t,r){return t.map(function(a){return r[a]})}var i1=function(t){var r=t.impact,a=t.viewport,o=t.draggables,u=t.destination,d=t.forceShouldAnimate,h=r.displaced,l=m3(h.all,o),g=Gs({afterDragging:l,destination:u,displacedBy:r.displacedBy,viewport:a.frame,forceShouldAnimate:d,last:h});return re({},r,{displaced:g})},n1=function(t){var r=t.impact,a=t.draggable,o=t.droppable,u=t.draggables,d=t.viewport,h=t.afterCritical,l=sd({impact:r,draggable:a,draggables:u,droppable:o,afterCritical:h});return jm({pageBorderBoxCenter:l,draggable:a,viewport:d})},a1=function(t){var r=t.state,a=t.dimensions,o=t.viewport;r.movementMode!=="SNAP"&&H(!1);var u=r.impact,d=o||r.viewport,h=a||r.dimensions,l=h.draggables,g=h.droppables,y=l[r.critical.draggable.id],v=dr(u);v||H(!1);var b=g[v],e=i1({impact:u,viewport:d,destination:b,draggables:l}),n=n1({impact:e,draggable:y,droppable:b,draggables:l,viewport:d,afterCritical:r.afterCritical});return ps({impact:e,clientSelection:n,state:r,dimensions:h,viewport:d})},g3=function(t){return{index:t.index,droppableId:t.droppableId}},o1=function(t){var r=t.draggable,a=t.home,o=t.draggables,u=t.viewport,d=fl(a.axis,r.displaceBy),h=Co(a.descriptor.id,o),l=h.indexOf(r);l===-1&&H(!1);var g=h.slice(l+1),y=g.reduce(function(n,s){return n[s.descriptor.id]=!0,n},{}),v={inVirtualList:a.descriptor.mode==="virtual",displacedBy:d,effected:y},b=Gs({afterDragging:g,destination:a,displacedBy:d,last:null,viewport:u.frame,forceShouldAnimate:!1}),e={displaced:b,displacedBy:d,at:{type:"REORDER",destination:g3(r.descriptor)}};return{impact:e,afterCritical:v}},v3=function(t,r){return{draggables:t.draggables,droppables:Vm(t.droppables,r)}},_3=function(t){var r=t.draggable,a=t.offset,o=t.initialWindowScroll,u=uc(r.client,a),d=cc(u,o),h=re({},r,{placeholder:re({},r.placeholder,{client:u}),client:u,page:d});return h},y3=function(t){var r=t.frame;return r||H(!1),r},b3=function(t){var r=t.additions,a=t.updatedDroppables,o=t.viewport,u=o.scroll.diff.value;return r.map(function(d){var h=d.descriptor.droppableId,l=a[h],g=y3(l),y=g.scroll.diff.value,v=Et(u,y),b=_3({draggable:d,offset:v,initialWindowScroll:o.scroll.initial});return b})},S3=function(t){var r=t.state,a=t.published,o=a.modified.map(function(_){var S=r.dimensions.droppables[_.droppableId],w=Om(S,_.scroll);return w}),u=re({},r.dimensions.droppables,{},Gx(o)),d=$x(b3({additions:a.additions,updatedDroppables:u,viewport:r.viewport})),h=re({},r.dimensions.draggables,{},d);a.removals.forEach(function(_){delete h[_]});var l={droppables:u,draggables:h},g=dr(r.impact),y=g?l.droppables[g]:null,v=l.draggables[r.critical.draggable.id],b=l.droppables[r.critical.droppable.id],e=o1({draggable:v,home:b,draggables:h,viewport:r.viewport}),n=e.impact,s=e.afterCritical,c=y&&y.isCombineEnabled?r.impact:n,f=r1({pageOffset:r.current.page.offset,draggable:l.draggables[r.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:c,viewport:r.viewport,afterCritical:s}),m=re({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:f,onLiftImpact:n,dimensions:l,afterCritical:s,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return m;var p=re({phase:"DROP_PENDING"},m,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return p},lp=function(r){return r.movementMode==="SNAP"},bf=function(r,a,o){var u=v3(r.dimensions,a);return!lp(r)||o?ps({state:r,dimensions:u}):a1({state:r,dimensions:u})};function Sf(t){return t.isDragging&&t.movementMode==="SNAP"?re({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var iy={phase:"IDLE",completed:null,shouldFlush:!1},x3=function(t,r){if(t===void 0&&(t=iy),r.type==="FLUSH")return re({},iy,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&H(!1);var a=r.payload,o=a.critical,u=a.clientSelection,d=a.viewport,h=a.dimensions,l=a.movementMode,g=h.draggables[o.draggable.id],y=h.droppables[o.droppable.id],v={selection:u,borderBoxCenter:g.client.borderBox.center,offset:_t},b={client:v,page:{selection:Et(v.selection,d.scroll.initial),borderBoxCenter:Et(v.selection,d.scroll.initial),offset:Et(v.selection,d.scroll.diff.value)}},e=nd(h.droppables).every(function(Ee){return!Ee.isFixedOnPage}),n=o1({draggable:g,home:y,draggables:h.draggables,viewport:d}),s=n.impact,c=n.afterCritical,f={phase:"DRAGGING",isDragging:!0,critical:o,movementMode:l,dimensions:h,initial:b,current:b,isWindowScrollAllowed:e,impact:s,afterCritical:c,onLiftImpact:s,viewport:d,scrollJumpRequest:null,forceShouldAnimate:null};return f}if(r.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&H(!1);var m=re({phase:"COLLECTING"},t,{phase:"COLLECTING"});return m}if(r.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||H(!1),S3({state:t,published:r.payload});if(r.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Hn(t)||H(!1);var p=r.payload.client;return gn(p,t.current.client.selection)?t:ps({state:t,clientSelection:p,impact:lp(t)?t.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Sf(t);Hn(t)||H(!1);var _=r.payload,S=_.id,w=_.newScroll,x=t.dimensions.droppables[S];if(!x)return t;var U=Om(x,w);return bf(t,U,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Hn(t)||H(!1);var A=r.payload,E=A.id,T=A.isEnabled,P=t.dimensions.droppables[E];P||H(!1),P.isEnabled===T&&H(!1);var z=re({},P,{isEnabled:T});return bf(t,z,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Hn(t)||H(!1);var R=r.payload,D=R.id,B=R.isCombineEnabled,F=t.dimensions.droppables[D];F||H(!1),F.isCombineEnabled===B&&H(!1);var O=re({},F,{isCombineEnabled:B});return bf(t,O,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Hn(t)||H(!1),t.isWindowScrollAllowed||H(!1);var I=r.payload.newScroll;if(gn(t.viewport.scroll.current,I))return Sf(t);var L=Kx(t.viewport,I);return lp(t)?a1({state:t,viewport:L}):ps({state:t,viewport:L})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Hn(t))return t;var M=r.payload.maxScroll;if(gn(M,t.viewport.scroll.max))return t;var k=re({},t.viewport,{scroll:re({},t.viewport.scroll,{max:M})});return re({phase:"DRAGGING"},t,{viewport:k})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&H(!1);var $=n3({state:t,type:r.type});return $?ps({state:t,impact:$.impact,clientSelection:$.clientSelection,scrollJumpRequest:$.scrollJumpRequest}):t}if(r.type==="DROP_PENDING"){var J=r.payload.reason;t.phase!=="COLLECTING"&&H(!1);var ae=re({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:J});return ae}if(r.type==="DROP_ANIMATE"){var ce=r.payload,X=ce.completed,ee=ce.dropDuration,be=ce.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||H(!1);var de={phase:"DROP_ANIMATING",completed:X,dropDuration:ee,newHomeClientOffset:be,dimensions:t.dimensions};return de}if(r.type==="DROP_COMPLETE"){var _e=r.payload.completed;return{phase:"IDLE",completed:_e,shouldFlush:!1}}return t},w3=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},E3=function(r){return{type:"LIFT",payload:r}},U3=function(r){return{type:"INITIAL_PUBLISH",payload:r}},C3=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},A3=function(){return{type:"COLLECTION_STARTING",payload:null}},T3=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},P3=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},I3=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},s1=function(r){return{type:"MOVE",payload:r}},B3=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},k3=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},D3=function(){return{type:"MOVE_UP",payload:null}},L3=function(){return{type:"MOVE_DOWN",payload:null}},z3=function(){return{type:"MOVE_RIGHT",payload:null}},R3=function(){return{type:"MOVE_LEFT",payload:null}},Ym=function(){return{type:"FLUSH",payload:null}},F3=function(r){return{type:"DROP_ANIMATE",payload:r}},Wm=function(r){return{type:"DROP_COMPLETE",payload:r}},l1=function(r){return{type:"DROP",payload:r}},O3=function(r){return{type:"DROP_PENDING",payload:r}},u1=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},M3=function(t){return function(r){var a=r.getState,o=r.dispatch;return function(u){return function(d){if(d.type!=="LIFT"){u(d);return}var h=d.payload,l=h.id,g=h.clientSelection,y=h.movementMode,v=a();v.phase==="DROP_ANIMATING"&&o(Wm({completed:v.completed})),a().phase!=="IDLE"&&H(!1),o(Ym()),o(w3({draggableId:l,movementMode:y}));var b={shouldPublishImmediately:y==="SNAP"},e={draggableId:l,scrollOptions:b},n=t.startPublishing(e),s=n.critical,c=n.dimensions,f=n.viewport;o(U3({critical:s,dimensions:c,clientSelection:g,movementMode:y,viewport:f}))}}}},N3=function(t){return function(){return function(r){return function(a){a.type==="INITIAL_PUBLISH"&&t.dragging(),a.type==="DROP_ANIMATE"&&t.dropping(a.payload.completed.result.reason),(a.type==="FLUSH"||a.type==="DROP_COMPLETE")&&t.resting(),r(a)}}}},qm={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},$s={opacity:{drop:0,combining:.7},scale:{drop:.75}},Km={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ln=Km.outOfTheWay+"s "+qm.outOfTheWay,ms={fluid:"opacity "+Ln,snap:"transform "+Ln+", opacity "+Ln,drop:function(r){var a=r+"s "+qm.drop;return"transform "+a+", opacity "+a},outOfTheWay:"transform "+Ln,placeholder:"height "+Ln+", width "+Ln+", margin "+Ln},ny=function(r){return gn(r,_t)?null:"translate("+r.x+"px, "+r.y+"px)"},up={moveTo:ny,drop:function(r,a){var o=ny(r);return o?a?o+" scale("+$s.scale.drop+")":o:null}},cp=Km.minDropTime,c1=Km.maxDropTime,H3=c1-cp,ay=1500,G3=.6,$3=function(t){var r=t.current,a=t.destination,o=t.reason,u=Ns(r,a);if(u<=0)return cp;if(u>=ay)return c1;var d=u/ay,h=cp+H3*d,l=o==="CANCEL"?h*G3:h;return Number(l.toFixed(2))},j3=function(t){var r=t.impact,a=t.draggable,o=t.dimensions,u=t.viewport,d=t.afterCritical,h=o.draggables,l=o.droppables,g=dr(r),y=g?l[g]:null,v=l[a.descriptor.droppableId],b=n1({impact:r,draggable:a,draggables:h,afterCritical:d,droppable:y||v,viewport:u}),e=ur(b,a.client.borderBox.center);return e},V3=function(t){var r=t.draggables,a=t.reason,o=t.lastImpact,u=t.home,d=t.viewport,h=t.onLiftImpact;if(!o.at||a!=="DROP"){var l=i1({draggables:r,impact:h,destination:u,viewport:d,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(o.at.type==="REORDER")return{impact:o,didDropInsideDroppable:!0};var g=re({},o,{displaced:Hs});return{impact:g,didDropInsideDroppable:!0}},Y3=function(t){var r=t.getState,a=t.dispatch;return function(o){return function(u){if(u.type!=="DROP"){o(u);return}var d=r(),h=u.payload.reason;if(d.phase==="COLLECTING"){a(O3({reason:h}));return}if(d.phase!=="IDLE"){var l=d.phase==="DROP_PENDING"&&d.isWaiting;l&&H(!1),d.phase==="DRAGGING"||d.phase==="DROP_PENDING"||H(!1);var g=d.critical,y=d.dimensions,v=y.draggables[d.critical.draggable.id],b=V3({reason:h,lastImpact:d.impact,afterCritical:d.afterCritical,onLiftImpact:d.onLiftImpact,home:d.dimensions.droppables[d.critical.droppable.id],viewport:d.viewport,draggables:d.dimensions.draggables}),e=b.impact,n=b.didDropInsideDroppable,s=n?Nm(e):null,c=n?ad(e):null,f={index:g.draggable.index,droppableId:g.droppable.id},m={draggableId:v.descriptor.id,type:v.descriptor.type,source:f,reason:h,mode:d.movementMode,destination:s,combine:c},p=j3({impact:e,draggable:v,dimensions:y,viewport:d.viewport,afterCritical:d.afterCritical}),_={critical:d.critical,afterCritical:d.afterCritical,result:m,impact:e},S=!gn(d.current.client.offset,p)||!!m.combine;if(!S){a(Wm({completed:_}));return}var w=$3({current:d.current.client.offset,destination:p,reason:h}),x={newHomeClientOffset:p,dropDuration:w,completed:_};a(F3(x))}}}},d1=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function W3(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(a){a.target!==window&&a.target!==window.document||t()}}}function q3(t){var r=t.onWindowScroll;function a(){r(d1())}var o=Ms(a),u=W3(o),d=mn;function h(){return d!==mn}function l(){h()&&H(!1),d=Ar(window,[u])}function g(){h()||H(!1),o.cancel(),d(),d=mn}return{start:l,stop:g,isActive:h}}var K3=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},X3=function(t){var r=q3({onWindowScroll:function(o){t.dispatch(B3({newScroll:o}))}});return function(a){return function(o){!r.isActive()&&o.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&K3(o)&&r.stop(),a(o)}}},Q3=function(t){var r=!1,a=!1,o=setTimeout(function(){a=!0}),u=function(h){r||a||(r=!0,t(h),clearTimeout(o))};return u.wasCalled=function(){return r},u},Z3=function(){var t=[],r=function(d){var h=Mm(t,function(y){return y.timerId===d});h===-1&&H(!1);var l=t.splice(h,1),g=l[0];g.callback()},a=function(d){var h=setTimeout(function(){return r(h)}),l={timerId:h,callback:d};t.push(l)},o=function(){if(t.length){var d=[].concat(t);t.length=0,d.forEach(function(h){clearTimeout(h.timerId),h.callback()})}};return{add:a,flush:o}},J3=function(r,a){return r==null&&a==null?!0:r==null||a==null?!1:r.droppableId===a.droppableId&&r.index===a.index},eL=function(r,a){return r==null&&a==null?!0:r==null||a==null?!1:r.draggableId===a.draggableId&&r.droppableId===a.droppableId},tL=function(r,a){if(r===a)return!0;var o=r.draggable.id===a.draggable.id&&r.draggable.droppableId===a.draggable.droppableId&&r.draggable.type===a.draggable.type&&r.draggable.index===a.draggable.index,u=r.droppable.id===a.droppable.id&&r.droppable.type===a.droppable.type;return o&&u},Go=function(r,a){a()},tu=function(r,a){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:a}},xf=function(r,a,o,u){if(!r){o(u(a));return}var d=Q3(o),h={announce:d};r(a,h),d.wasCalled()||o(u(a))},rL=function(t,r){var a=Z3(),o=null,u=function(e,n){o&&H(!1),Go("onBeforeCapture",function(){var s=t().onBeforeCapture;if(s){var c={draggableId:e,mode:n};s(c)}})},d=function(e,n){o&&H(!1),Go("onBeforeDragStart",function(){var s=t().onBeforeDragStart;s&&s(tu(e,n))})},h=function(e,n){o&&H(!1);var s=tu(e,n);o={mode:n,lastCritical:e,lastLocation:s.source,lastCombine:null},a.add(function(){Go("onDragStart",function(){return xf(t().onDragStart,s,r,Uu.onDragStart)})})},l=function(e,n){var s=Nm(n),c=ad(n);o||H(!1);var f=!tL(e,o.lastCritical);f&&(o.lastCritical=e);var m=!J3(o.lastLocation,s);m&&(o.lastLocation=s);var p=!eL(o.lastCombine,c);if(p&&(o.lastCombine=c),!(!f&&!m&&!p)){var _=re({},tu(e,o.mode),{combine:c,destination:s});a.add(function(){Go("onDragUpdate",function(){return xf(t().onDragUpdate,_,r,Uu.onDragUpdate)})})}},g=function(){o||H(!1),a.flush()},y=function(e){o||H(!1),o=null,Go("onDragEnd",function(){return xf(t().onDragEnd,e,r,Uu.onDragEnd)})},v=function(){if(o){var e=re({},tu(o.lastCritical,o.mode),{combine:null,destination:null,reason:"CANCEL"});y(e)}};return{beforeCapture:u,beforeStart:d,start:h,update:l,flush:g,drop:y,abort:v}},iL=function(t,r){var a=rL(t,r);return function(o){return function(u){return function(d){if(d.type==="BEFORE_INITIAL_CAPTURE"){a.beforeCapture(d.payload.draggableId,d.payload.movementMode);return}if(d.type==="INITIAL_PUBLISH"){var h=d.payload.critical;a.beforeStart(h,d.payload.movementMode),u(d),a.start(h,d.payload.movementMode);return}if(d.type==="DROP_COMPLETE"){var l=d.payload.completed.result;a.flush(),u(d),a.drop(l);return}if(u(d),d.type==="FLUSH"){a.abort();return}var g=o.getState();g.phase==="DRAGGING"&&a.update(g.critical,g.impact)}}}},nL=function(t){return function(r){return function(a){if(a.type!=="DROP_ANIMATION_FINISHED"){r(a);return}var o=t.getState();o.phase!=="DROP_ANIMATING"&&H(!1),t.dispatch(Wm({completed:o.completed}))}}},aL=function(t){var r=null,a=null;function o(){a&&(cancelAnimationFrame(a),a=null),r&&(r(),r=null)}return function(u){return function(d){if((d.type==="FLUSH"||d.type==="DROP_COMPLETE"||d.type==="DROP_ANIMATION_FINISHED")&&o(),u(d),d.type==="DROP_ANIMATE"){var h={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var g=t.getState();g.phase==="DROP_ANIMATING"&&t.dispatch(u1())}};a=requestAnimationFrame(function(){a=null,r=Ar(window,[h])})}}}},oL=function(t){return function(){return function(r){return function(a){(a.type==="DROP_COMPLETE"||a.type==="FLUSH"||a.type==="DROP_ANIMATE")&&t.stopPublishing(),r(a)}}}},sL=function(t){var r=!1;return function(){return function(a){return function(o){if(o.type==="INITIAL_PUBLISH"){r=!0,t.tryRecordFocus(o.payload.critical.draggable.id),a(o),t.tryRestoreFocusRecorded();return}if(a(o),!!r){if(o.type==="FLUSH"){r=!1,t.tryRestoreFocusRecorded();return}if(o.type==="DROP_COMPLETE"){r=!1;var u=o.payload.completed.result;u.combine&&t.tryShiftRecord(u.draggableId,u.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},lL=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},uL=function(t){return function(r){return function(a){return function(o){if(lL(o)){t.stop(),a(o);return}if(o.type==="INITIAL_PUBLISH"){a(o);var u=r.getState();u.phase!=="DRAGGING"&&H(!1),t.start(u);return}a(o),t.scroll(r.getState())}}}},cL=function(t){return function(r){return function(a){if(r(a),a.type==="PUBLISH_WHILE_DRAGGING"){var o=t.getState();o.phase==="DROP_PENDING"&&(o.isWaiting||t.dispatch(l1({reason:o.reason})))}}}},dL=yx,fL=function(t){var r=t.dimensionMarshal,a=t.focusMarshal,o=t.styleMarshal,u=t.getResponders,d=t.announce,h=t.autoScroller;return _x(x3,dL(ik(N3(o),oL(r),M3(r),Y3,nL,aL,cL,uL(h),X3,sL(a),iL(u,d))))},wf=function(){return{additions:{},removals:{},modified:{}}};function hL(t){var r=t.registry,a=t.callbacks,o=wf(),u=null,d=function(){u||(a.collectionStarting(),u=requestAnimationFrame(function(){u=null;var v=o,b=v.additions,e=v.removals,n=v.modified,s=Object.keys(b).map(function(m){return r.draggable.getById(m).getDimension(_t)}).sort(function(m,p){return m.descriptor.index-p.descriptor.index}),c=Object.keys(n).map(function(m){var p=r.droppable.getById(m),_=p.callbacks.getScrollWhileDragging();return{droppableId:m,scroll:_}}),f={additions:s,removals:Object.keys(e),modified:c};o=wf(),a.publish(f)}))},h=function(v){var b=v.descriptor.id;o.additions[b]=v,o.modified[v.descriptor.droppableId]=!0,o.removals[b]&&delete o.removals[b],d()},l=function(v){var b=v.descriptor;o.removals[b.id]=!0,o.modified[b.droppableId]=!0,o.additions[b.id]&&delete o.additions[b.id],d()},g=function(){u&&(cancelAnimationFrame(u),u=null,o=wf())};return{add:h,remove:l,stop:g}}var f1=function(t){var r=t.scrollHeight,a=t.scrollWidth,o=t.height,u=t.width,d=ur({x:a,y:r},{x:u,y:o}),h={x:Math.max(0,d.x),y:Math.max(0,d.y)};return h},h1=function(){var t=document.documentElement;return t||H(!1),t},p1=function(){var t=h1(),r=f1({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return r},pL=function(){var t=d1(),r=p1(),a=t.y,o=t.x,u=h1(),d=u.clientWidth,h=u.clientHeight,l=o+d,g=a+h,y=Hr({top:a,left:o,right:l,bottom:g}),v={frame:y,scroll:{initial:t,current:t,max:r,diff:{value:_t,displacement:_t}}};return v},mL=function(t){var r=t.critical,a=t.scrollOptions,o=t.registry,u=pL(),d=u.scroll.current,h=r.droppable,l=o.droppable.getAllByType(h.type).map(function(b){return b.callbacks.getDimensionAndWatchScroll(d,a)}),g=o.draggable.getAllByType(r.draggable.type).map(function(b){return b.getDimension(d)}),y={draggables:$x(g),droppables:Gx(l)},v={dimensions:y,critical:r,viewport:u};return v};function oy(t,r,a){if(a.descriptor.id===r.id||a.descriptor.type!==r.type)return!1;var o=t.droppable.getById(a.descriptor.droppableId);return o.descriptor.mode==="virtual"}var gL=function(t,r){var a=null,o=hL({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:t}),u=function(n,s){t.droppable.exists(n)||H(!1),a&&r.updateDroppableIsEnabled({id:n,isEnabled:s})},d=function(n,s){a&&(t.droppable.exists(n)||H(!1),r.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:s}))},h=function(n,s){a&&(t.droppable.exists(n)||H(!1),r.updateDroppableScroll({id:n,newScroll:s}))},l=function(n,s){a&&t.droppable.getById(n).callbacks.scroll(s)},g=function(){if(a){o.stop();var n=a.critical.droppable;t.droppable.getAllByType(n.type).forEach(function(s){return s.callbacks.dragStopped()}),a.unsubscribe(),a=null}},y=function(n){a||H(!1);var s=a.critical.draggable;n.type==="ADDITION"&&oy(t,s,n.value)&&o.add(n.value),n.type==="REMOVAL"&&oy(t,s,n.value)&&o.remove(n.value)},v=function(n){a&&H(!1);var s=t.draggable.getById(n.draggableId),c=t.droppable.getById(s.descriptor.droppableId),f={draggable:s.descriptor,droppable:c.descriptor},m=t.subscribe(y);return a={critical:f,unsubscribe:m},mL({critical:f,registry:t,scrollOptions:n.scrollOptions})},b={updateDroppableIsEnabled:u,updateDroppableIsCombineEnabled:d,scrollDroppable:l,updateDroppableScroll:h,startPublishing:v,stopPublishing:g};return b},m1=function(t,r){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===r?!1:t.completed.result.reason==="DROP"},vL=function(t){window.scrollBy(t.x,t.y)},_L=vt(function(t){return nd(t).filter(function(r){return!(!r.isEnabled||!r.frame)})}),yL=function(r,a){var o=En(_L(a),function(u){return u.frame||H(!1),Jx(u.frame.pageMarginBox)(r)});return o},bL=function(t){var r=t.center,a=t.destination,o=t.droppables;if(a){var u=o[a];return u.frame?u:null}var d=yL(r,o);return d},vn={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},SL=function(t,r){var a=t[r.size]*vn.startFromPercentage,o=t[r.size]*vn.maxScrollAtPercentage,u={startScrollingFrom:a,maxScrollValueAt:o};return u},g1=function(t){var r=t.startOfRange,a=t.endOfRange,o=t.current,u=a-r;if(u===0)return 0;var d=o-r,h=d/u;return h},Xm=1,xL=function(t,r){if(t>r.startScrollingFrom)return 0;if(t<=r.maxScrollValueAt)return vn.maxPixelScroll;if(t===r.startScrollingFrom)return Xm;var a=g1({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:t}),o=1-a,u=vn.maxPixelScroll*vn.ease(o);return Math.ceil(u)},sy=vn.durationDampening.accelerateAt,ly=vn.durationDampening.stopDampeningAt,wL=function(t,r){var a=r,o=ly,u=Date.now(),d=u-a;if(d>=ly)return t;if(d<sy)return Xm;var h=g1({startOfRange:sy,endOfRange:o,current:d}),l=t*vn.ease(h);return Math.ceil(l)},uy=function(t){var r=t.distanceToEdge,a=t.thresholds,o=t.dragStartTime,u=t.shouldUseTimeDampening,d=xL(r,a);return d===0?0:u?Math.max(wL(d,o),Xm):d},cy=function(t){var r=t.container,a=t.distanceToEdges,o=t.dragStartTime,u=t.axis,d=t.shouldUseTimeDampening,h=SL(r,u),l=a[u.end]<a[u.start];return l?uy({distanceToEdge:a[u.end],thresholds:h,dragStartTime:o,shouldUseTimeDampening:d}):-1*uy({distanceToEdge:a[u.start],thresholds:h,dragStartTime:o,shouldUseTimeDampening:d})},EL=function(t){var r=t.container,a=t.subject,o=t.proposedScroll,u=a.height>r.height,d=a.width>r.width;return!d&&!u?o:d&&u?null:{x:d?0:o.x,y:u?0:o.y}},UL=Nx(function(t){return t===0?0:t}),v1=function(t){var r=t.dragStartTime,a=t.container,o=t.subject,u=t.center,d=t.shouldUseTimeDampening,h={top:u.y-a.top,right:a.right-u.x,bottom:a.bottom-u.y,left:u.x-a.left},l=cy({container:a,distanceToEdges:h,dragStartTime:r,axis:Hm,shouldUseTimeDampening:d}),g=cy({container:a,distanceToEdges:h,dragStartTime:r,axis:Yx,shouldUseTimeDampening:d}),y=UL({x:g,y:l});if(gn(y,_t))return null;var v=EL({container:a,subject:o,proposedScroll:y});return v?gn(v,_t)?null:v:null},CL=Nx(function(t){return t===0?0:t>0?1:-1}),Qm=function(){var t=function(a,o){return a<0?a:a>o?a-o:0};return function(r){var a=r.current,o=r.max,u=r.change,d=Et(a,u),h={x:t(d.x,o.x),y:t(d.y,o.y)};return gn(h,_t)?null:h}}(),_1=function(r){var a=r.max,o=r.current,u=r.change,d={x:Math.max(o.x,a.x),y:Math.max(o.y,a.y)},h=CL(u),l=Qm({max:d,current:o,change:h});return!l||h.x!==0&&l.x===0||h.y!==0&&l.y===0},Zm=function(r,a){return _1({current:r.scroll.current,max:r.scroll.max,change:a})},AL=function(r,a){if(!Zm(r,a))return null;var o=r.scroll.max,u=r.scroll.current;return Qm({current:u,max:o,change:a})},Jm=function(r,a){var o=r.frame;return o?_1({current:o.scroll.current,max:o.scroll.max,change:a}):!1},TL=function(r,a){var o=r.frame;return!o||!Jm(r,a)?null:Qm({current:o.scroll.current,max:o.scroll.max,change:a})},PL=function(t){var r=t.viewport,a=t.subject,o=t.center,u=t.dragStartTime,d=t.shouldUseTimeDampening,h=v1({dragStartTime:u,container:r.frame,subject:a,center:o,shouldUseTimeDampening:d});return h&&Zm(r,h)?h:null},IL=function(t){var r=t.droppable,a=t.subject,o=t.center,u=t.dragStartTime,d=t.shouldUseTimeDampening,h=r.frame;if(!h)return null;var l=v1({dragStartTime:u,container:h.pageMarginBox,subject:a,center:o,shouldUseTimeDampening:d});return l&&Jm(r,l)?l:null},dy=function(t){var r=t.state,a=t.dragStartTime,o=t.shouldUseTimeDampening,u=t.scrollWindow,d=t.scrollDroppable,h=r.current.page.borderBoxCenter,l=r.dimensions.draggables[r.critical.draggable.id],g=l.page.marginBox;if(r.isWindowScrollAllowed){var y=r.viewport,v=PL({dragStartTime:a,viewport:y,subject:g,center:h,shouldUseTimeDampening:o});if(v){u(v);return}}var b=bL({center:h,destination:dr(r.impact),droppables:r.dimensions.droppables});if(b){var e=IL({dragStartTime:a,droppable:b,subject:g,center:h,shouldUseTimeDampening:o});e&&d(b.descriptor.id,e)}},BL=function(t){var r=t.scrollWindow,a=t.scrollDroppable,o=Ms(r),u=Ms(a),d=null,h=function(v){d||H(!1);var b=d,e=b.shouldUseTimeDampening,n=b.dragStartTime;dy({state:v,scrollWindow:o,scrollDroppable:u,dragStartTime:n,shouldUseTimeDampening:e})},l=function(v){d&&H(!1);var b=Date.now(),e=!1,n=function(){e=!0};dy({state:v,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),d={dragStartTime:b,shouldUseTimeDampening:e},e&&h(v)},g=function(){d&&(o.cancel(),u.cancel(),d=null)};return{start:l,stop:g,scroll:h}},kL=function(t){var r=t.move,a=t.scrollDroppable,o=t.scrollWindow,u=function(y,v){var b=Et(y.current.client.selection,v);r({client:b})},d=function(y,v){if(!Jm(y,v))return v;var b=TL(y,v);if(!b)return a(y.descriptor.id,v),null;var e=ur(v,b);a(y.descriptor.id,e);var n=ur(v,e);return n},h=function(y,v,b){if(!y||!Zm(v,b))return b;var e=AL(v,b);if(!e)return o(b),null;var n=ur(b,e);o(n);var s=ur(b,n);return s},l=function(y){var v=y.scrollJumpRequest;if(v){var b=dr(y.impact);b||H(!1);var e=d(y.dimensions.droppables[b],v);if(e){var n=y.viewport,s=h(y.isWindowScrollAllowed,n,e);s&&u(y,s)}}};return l},DL=function(t){var r=t.scrollDroppable,a=t.scrollWindow,o=t.move,u=BL({scrollWindow:a,scrollDroppable:r}),d=kL({move:o,scrollWindow:a,scrollDroppable:r}),h=function(y){if(y.phase==="DRAGGING"){if(y.movementMode==="FLUID"){u.scroll(y);return}y.scrollJumpRequest&&d(y)}},l={scroll:h,start:u.start,stop:u.stop};return l},yo="data-rbd",bo=function(){var t=yo+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),dp=function(){var t=yo+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),LL=function(){var t=yo+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),fy={contextId:yo+"-scroll-container-context-id"},zL=function(r){return function(a){return"["+a+'="'+r+'"]'}},$o=function(r,a){return r.map(function(o){var u=o.styles[a];return u?o.selector+" { "+u+" }":""}).join(" ")},RL="pointer-events: none;",FL=function(t){var r=zL(t),a=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(bo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:RL,dropAnimating:l}}}(),o=function(){var l=`
      transition: `+ms.outOfTheWay+`;
    `;return{selector:r(dp.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),u={selector:r(LL.contextId),styles:{always:"overflow-anchor: none;"}},d={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},h=[o,a,u,d];return{always:$o(h,"always"),resting:$o(h,"resting"),dragging:$o(h,"dragging"),dropAnimating:$o(h,"dropAnimating"),userCancel:$o(h,"userCancel")}},fr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect,Ef=function(){var r=document.querySelector("head");return r||H(!1),r},hy=function(r){var a=document.createElement("style");return r&&a.setAttribute("nonce",r),a.type="text/css",a};function OL(t,r){var a=Se(function(){return FL(t)},[t]),o=C.useRef(null),u=C.useRef(null),d=K(vt(function(b){var e=u.current;e||H(!1),e.textContent=b}),[]),h=K(function(b){var e=o.current;e||H(!1),e.textContent=b},[]);fr(function(){!o.current&&!u.current||H(!1);var b=hy(r),e=hy(r);return o.current=b,u.current=e,b.setAttribute(yo+"-always",t),e.setAttribute(yo+"-dynamic",t),Ef().appendChild(b),Ef().appendChild(e),h(a.always),d(a.resting),function(){var n=function(c){var f=c.current;f||H(!1),Ef().removeChild(f),c.current=null};n(o),n(u)}},[r,h,d,a.always,a.resting,t]);var l=K(function(){return d(a.dragging)},[d,a.dragging]),g=K(function(b){if(b==="DROP"){d(a.dropAnimating);return}d(a.userCancel)},[d,a.dropAnimating,a.userCancel]),y=K(function(){u.current&&d(a.resting)},[d,a.resting]),v=Se(function(){return{dragging:l,dropping:g,resting:y}},[l,g,y]);return v}var y1=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function ld(t){return t instanceof y1(t).HTMLElement}function ML(t,r){var a="["+bo.contextId+'="'+t+'"]',o=Hx(document.querySelectorAll(a));if(!o.length)return null;var u=En(o,function(d){return d.getAttribute(bo.draggableId)===r});return!u||!ld(u)?null:u}function NL(t){var r=C.useRef({}),a=C.useRef(null),o=C.useRef(null),u=C.useRef(!1),d=K(function(e,n){var s={id:e,focus:n};return r.current[e]=s,function(){var f=r.current,m=f[e];m!==s&&delete f[e]}},[]),h=K(function(e){var n=ML(t,e);n&&n!==document.activeElement&&n.focus()},[t]),l=K(function(e,n){a.current===e&&(a.current=n)},[]),g=K(function(){o.current||u.current&&(o.current=requestAnimationFrame(function(){o.current=null;var e=a.current;e&&h(e)}))},[h]),y=K(function(e){a.current=null;var n=document.activeElement;n&&n.getAttribute(bo.draggableId)===e&&(a.current=e)},[]);fr(function(){return u.current=!0,function(){u.current=!1;var e=o.current;e&&cancelAnimationFrame(e)}},[]);var v=Se(function(){return{register:d,tryRecordFocus:y,tryRestoreFocusRecorded:g,tryShiftRecord:l}},[d,y,g,l]);return v}function HL(){var t={draggables:{},droppables:{}},r=[];function a(b){return r.push(b),function(){var n=r.indexOf(b);n!==-1&&r.splice(n,1)}}function o(b){r.length&&r.forEach(function(e){return e(b)})}function u(b){return t.draggables[b]||null}function d(b){var e=u(b);return e||H(!1),e}var h={register:function(e){t.draggables[e.descriptor.id]=e,o({type:"ADDITION",value:e})},update:function(e,n){var s=t.draggables[n.descriptor.id];s&&s.uniqueId===e.uniqueId&&(delete t.draggables[n.descriptor.id],t.draggables[e.descriptor.id]=e)},unregister:function(e){var n=e.descriptor.id,s=u(n);s&&e.uniqueId===s.uniqueId&&(delete t.draggables[n],o({type:"REMOVAL",value:e}))},getById:d,findById:u,exists:function(e){return!!u(e)},getAllByType:function(e){return hc(t.draggables).filter(function(n){return n.descriptor.type===e})}};function l(b){return t.droppables[b]||null}function g(b){var e=l(b);return e||H(!1),e}var y={register:function(e){t.droppables[e.descriptor.id]=e},unregister:function(e){var n=l(e.descriptor.id);n&&e.uniqueId===n.uniqueId&&delete t.droppables[e.descriptor.id]},getById:g,findById:l,exists:function(e){return!!l(e)},getAllByType:function(e){return hc(t.droppables).filter(function(n){return n.descriptor.type===e})}};function v(){t.draggables={},t.droppables={},r.length=0}return{draggable:h,droppable:y,subscribe:a,clean:v}}function GL(){var t=Se(HL,[]);return C.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var eg=ue.createContext(null),mc=function(){var t=document.body;return t||H(!1),t},$L={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},jL=function(r){return"rbd-announcement-"+r};function VL(t){var r=Se(function(){return jL(t)},[t]),a=C.useRef(null);C.useEffect(function(){var d=document.createElement("div");return a.current=d,d.id=r,d.setAttribute("aria-live","assertive"),d.setAttribute("aria-atomic","true"),re(d.style,$L),mc().appendChild(d),function(){setTimeout(function(){var g=mc();g.contains(d)&&g.removeChild(d),d===a.current&&(a.current=null)})}},[r]);var o=K(function(u){var d=a.current;if(d){d.textContent=u;return}},[]);return o}var YL=0,WL={separator:"::"};function tg(t,r){return r===void 0&&(r=WL),Se(function(){return""+t+r.separator+YL++},[r.separator,t])}function qL(t){var r=t.contextId,a=t.uniqueId;return"rbd-hidden-text-"+r+"-"+a}function KL(t){var r=t.contextId,a=t.text,o=tg("hidden-text",{separator:"-"}),u=Se(function(){return qL({contextId:r,uniqueId:o})},[o,r]);return C.useEffect(function(){var h=document.createElement("div");return h.id=u,h.textContent=a,h.style.display="none",mc().appendChild(h),function(){var g=mc();g.contains(h)&&g.removeChild(h)}},[u,a]),u}var ud=ue.createContext(null);function b1(t){var r=C.useRef(t);return C.useEffect(function(){r.current=t}),r}function XL(){var t=null;function r(){return!!t}function a(h){return h===t}function o(h){t&&H(!1);var l={abandon:h};return t=l,l}function u(){t||H(!1),t=null}function d(){t&&(t.abandon(),u())}return{isClaimed:r,isActive:a,claim:o,release:u,tryAbandon:d}}var QL=9,ZL=13,rg=27,S1=32,JL=33,ez=34,tz=35,rz=36,iz=37,nz=38,az=39,oz=40,ru,sz=(ru={},ru[ZL]=!0,ru[QL]=!0,ru),x1=function(t){sz[t.keyCode]&&t.preventDefault()},cd=function(){var t="visibilitychange";if(typeof document>"u")return t;var r=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],a=En(r,function(o){return"on"+o in document});return a||t}(),w1=0,py=5;function lz(t,r){return Math.abs(r.x-t.x)>=py||Math.abs(r.y-t.y)>=py}var my={type:"IDLE"};function uz(t){var r=t.cancel,a=t.completed,o=t.getPhase,u=t.setPhase;return[{eventName:"mousemove",fn:function(h){var l=h.button,g=h.clientX,y=h.clientY;if(l===w1){var v={x:g,y},b=o();if(b.type==="DRAGGING"){h.preventDefault(),b.actions.move(v);return}b.type!=="PENDING"&&H(!1);var e=b.point;if(lz(e,v)){h.preventDefault();var n=b.actions.fluidLift(v);u({type:"DRAGGING",actions:n})}}}},{eventName:"mouseup",fn:function(h){var l=o();if(l.type!=="DRAGGING"){r();return}h.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"mousedown",fn:function(h){o().type==="DRAGGING"&&h.preventDefault(),r()}},{eventName:"keydown",fn:function(h){var l=o();if(l.type==="PENDING"){r();return}if(h.keyCode===rg){h.preventDefault(),r();return}x1(h)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){o().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(h){var l=o();if(l.type==="IDLE"&&H(!1),l.actions.shouldRespectForcePress()){r();return}h.preventDefault()}},{eventName:cd,fn:r}]}function cz(t){var r=C.useRef(my),a=C.useRef(mn),o=Se(function(){return{eventName:"mousedown",fn:function(b){if(!b.defaultPrevented&&b.button===w1&&!(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)){var e=t.findClosestDraggableId(b);if(e){var n=t.tryGetLock(e,h,{sourceEvent:b});if(n){b.preventDefault();var s={x:b.clientX,y:b.clientY};a.current(),y(n,s)}}}}}},[t]),u=Se(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(b){if(!b.defaultPrevented){var e=t.findClosestDraggableId(b);if(e){var n=t.findOptionsForDraggable(e);n&&(n.shouldRespectForcePress||t.canGetLock(e)&&b.preventDefault())}}}}},[t]),d=K(function(){var b={passive:!1,capture:!0};a.current=Ar(window,[u,o],b)},[u,o]),h=K(function(){var v=r.current;v.type!=="IDLE"&&(r.current=my,a.current(),d())},[d]),l=K(function(){var v=r.current;h(),v.type==="DRAGGING"&&v.actions.cancel({shouldBlockNextClick:!0}),v.type==="PENDING"&&v.actions.abort()},[h]),g=K(function(){var b={capture:!0,passive:!1},e=uz({cancel:l,completed:h,getPhase:function(){return r.current},setPhase:function(s){r.current=s}});a.current=Ar(window,e,b)},[l,h]),y=K(function(b,e){r.current.type!=="IDLE"&&H(!1),r.current={type:"PENDING",point:e,actions:b},g()},[g]);fr(function(){return d(),function(){a.current()}},[d])}var Ua;function dz(){}var fz=(Ua={},Ua[ez]=!0,Ua[JL]=!0,Ua[rz]=!0,Ua[tz]=!0,Ua);function hz(t,r){function a(){r(),t.cancel()}function o(){r(),t.drop()}return[{eventName:"keydown",fn:function(d){if(d.keyCode===rg){d.preventDefault(),a();return}if(d.keyCode===S1){d.preventDefault(),o();return}if(d.keyCode===oz){d.preventDefault(),t.moveDown();return}if(d.keyCode===nz){d.preventDefault(),t.moveUp();return}if(d.keyCode===az){d.preventDefault(),t.moveRight();return}if(d.keyCode===iz){d.preventDefault(),t.moveLeft();return}if(fz[d.keyCode]){d.preventDefault();return}x1(d)}},{eventName:"mousedown",fn:a},{eventName:"mouseup",fn:a},{eventName:"click",fn:a},{eventName:"touchstart",fn:a},{eventName:"resize",fn:a},{eventName:"wheel",fn:a,options:{passive:!0}},{eventName:cd,fn:a}]}function pz(t){var r=C.useRef(dz),a=Se(function(){return{eventName:"keydown",fn:function(d){if(d.defaultPrevented||d.keyCode!==S1)return;var h=t.findClosestDraggableId(d);if(!h)return;var l=t.tryGetLock(h,v,{sourceEvent:d});if(!l)return;d.preventDefault();var g=!0,y=l.snapLift();r.current();function v(){g||H(!1),g=!1,r.current(),o()}r.current=Ar(window,hz(y,v),{capture:!0,passive:!1})}}},[t]),o=K(function(){var d={passive:!1,capture:!0};r.current=Ar(window,[a],d)},[a]);fr(function(){return o(),function(){r.current()}},[o])}var Uf={type:"IDLE"},mz=120,gz=.15;function vz(t){var r=t.cancel,a=t.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(u){u.preventDefault()}},{eventName:"keydown",fn:function(u){if(a().type!=="DRAGGING"){r();return}u.keyCode===rg&&u.preventDefault(),r()}},{eventName:cd,fn:r}]}function _z(t){var r=t.cancel,a=t.completed,o=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(d){var h=o();if(h.type!=="DRAGGING"){r();return}h.hasMoved=!0;var l=d.touches[0],g=l.clientX,y=l.clientY,v={x:g,y};d.preventDefault(),h.actions.move(v)}},{eventName:"touchend",fn:function(d){var h=o();if(h.type!=="DRAGGING"){r();return}d.preventDefault(),h.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"touchcancel",fn:function(d){if(o().type!=="DRAGGING"){r();return}d.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(d){var h=o();h.type==="IDLE"&&H(!1);var l=d.touches[0];if(l){var g=l.force>=gz;if(g){var y=h.actions.shouldRespectForcePress();if(h.type==="PENDING"){y&&r();return}if(y){if(h.hasMoved){d.preventDefault();return}r();return}d.preventDefault()}}}},{eventName:cd,fn:r}]}function yz(t){var r=C.useRef(Uf),a=C.useRef(mn),o=K(function(){return r.current},[]),u=K(function(n){r.current=n},[]),d=Se(function(){return{eventName:"touchstart",fn:function(n){if(!n.defaultPrevented){var s=t.findClosestDraggableId(n);if(s){var c=t.tryGetLock(s,l,{sourceEvent:n});if(c){var f=n.touches[0],m=f.clientX,p=f.clientY,_={x:m,y:p};a.current(),b(c,_)}}}}}},[t]),h=K(function(){var n={capture:!0,passive:!1};a.current=Ar(window,[d],n)},[d]),l=K(function(){var e=r.current;e.type!=="IDLE"&&(e.type==="PENDING"&&clearTimeout(e.longPressTimerId),u(Uf),a.current(),h())},[h,u]),g=K(function(){var e=r.current;l(),e.type==="DRAGGING"&&e.actions.cancel({shouldBlockNextClick:!0}),e.type==="PENDING"&&e.actions.abort()},[l]),y=K(function(){var n={capture:!0,passive:!1},s={cancel:g,completed:l,getPhase:o},c=Ar(window,_z(s),n),f=Ar(window,vz(s),n);a.current=function(){c(),f()}},[g,o,l]),v=K(function(){var n=o();n.type!=="PENDING"&&H(!1);var s=n.actions.fluidLift(n.point);u({type:"DRAGGING",actions:s,hasMoved:!1})},[o,u]),b=K(function(n,s){o().type!=="IDLE"&&H(!1);var c=setTimeout(v,mz);u({type:"PENDING",point:s,actions:n,longPressTimerId:c}),y()},[y,o,u,v]);fr(function(){return h(),function(){a.current();var s=o();s.type==="PENDING"&&(clearTimeout(s.longPressTimerId),u(Uf))}},[o,h,u]),fr(function(){var n=Ar(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return n},[])}var bz={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function E1(t,r){if(r==null)return!1;var a=!!bz[r.tagName.toLowerCase()];if(a)return!0;var o=r.getAttribute("contenteditable");return o==="true"||o===""?!0:r===t?!1:E1(t,r.parentElement)}function Sz(t,r){var a=r.target;return ld(a)?E1(t,a):!1}var xz=function(t){return Hr(t.getBoundingClientRect()).center};function wz(t){return t instanceof y1(t).Element}var Ez=function(){var t="matches";if(typeof document>"u")return t;var r=[t,"msMatchesSelector","webkitMatchesSelector"],a=En(r,function(o){return o in Element.prototype});return a||t}();function U1(t,r){return t==null?null:t[Ez](r)?t:U1(t.parentElement,r)}function Uz(t,r){return t.closest?t.closest(r):U1(t,r)}function Cz(t){return"["+bo.contextId+'="'+t+'"]'}function Az(t,r){var a=r.target;if(!wz(a))return null;var o=Cz(t),u=Uz(a,o);return!u||!ld(u)?null:u}function Tz(t,r){var a=Az(t,r);return a?a.getAttribute(bo.draggableId):null}function Pz(t,r){var a="["+dp.contextId+'="'+t+'"]',o=Hx(document.querySelectorAll(a)),u=En(o,function(d){return d.getAttribute(dp.id)===r});return!u||!ld(u)?null:u}function Iz(t){t.preventDefault()}function iu(t){var r=t.expected,a=t.phase,o=t.isLockActive;return t.shouldWarn,!(!o()||r!==a)}function C1(t){var r=t.lockAPI,a=t.store,o=t.registry,u=t.draggableId;if(r.isClaimed())return!1;var d=o.draggable.findById(u);return!(!d||!d.options.isEnabled||!m1(a.getState(),u))}function Bz(t){var r=t.lockAPI,a=t.contextId,o=t.store,u=t.registry,d=t.draggableId,h=t.forceSensorStop,l=t.sourceEvent,g=C1({lockAPI:r,store:o,registry:u,draggableId:d});if(!g)return null;var y=u.draggable.getById(d),v=Pz(a,y.descriptor.id);if(!v||l&&!y.options.canDragInteractiveElements&&Sz(v,l))return null;var b=r.claim(h||mn),e="PRE_DRAG";function n(){return y.options.shouldRespectForcePress}function s(){return r.isActive(b)}function c(x,U){iu({expected:x,phase:e,isLockActive:s,shouldWarn:!0})&&o.dispatch(U())}var f=c.bind(null,"DRAGGING");function m(x){function U(){r.release(),e="COMPLETED"}e!=="PRE_DRAG"&&(U(),e!=="PRE_DRAG"&&H(!1)),o.dispatch(E3(x.liftActionArgs)),e="DRAGGING";function A(E,T){if(T===void 0&&(T={shouldBlockNextClick:!1}),x.cleanup(),T.shouldBlockNextClick){var P=Ar(window,[{eventName:"click",fn:Iz,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(P)}U(),o.dispatch(l1({reason:E}))}return re({isActive:function(){return iu({expected:"DRAGGING",phase:e,isLockActive:s,shouldWarn:!1})},shouldRespectForcePress:n,drop:function(T){return A("DROP",T)},cancel:function(T){return A("CANCEL",T)}},x.actions)}function p(x){var U=Ms(function(E){f(function(){return s1({client:E})})}),A=m({liftActionArgs:{id:d,clientSelection:x,movementMode:"FLUID"},cleanup:function(){return U.cancel()},actions:{move:U}});return re({},A,{move:U})}function _(){var x={moveUp:function(){return f(D3)},moveRight:function(){return f(z3)},moveDown:function(){return f(L3)},moveLeft:function(){return f(R3)}};return m({liftActionArgs:{id:d,clientSelection:xz(v),movementMode:"SNAP"},cleanup:mn,actions:x})}function S(){var x=iu({expected:"PRE_DRAG",phase:e,isLockActive:s,shouldWarn:!0});x&&r.release()}var w={isActive:function(){return iu({expected:"PRE_DRAG",phase:e,isLockActive:s,shouldWarn:!1})},shouldRespectForcePress:n,fluidLift:p,snapLift:_,abort:S};return w}var kz=[cz,pz,yz];function Dz(t){var r=t.contextId,a=t.store,o=t.registry,u=t.customSensors,d=t.enableDefaultSensors,h=[].concat(d?kz:[],u||[]),l=C.useState(function(){return XL()})[0],g=K(function(p,_){p.isDragging&&!_.isDragging&&l.tryAbandon()},[l]);fr(function(){var p=a.getState(),_=a.subscribe(function(){var S=a.getState();g(p,S),p=S});return _},[l,a,g]),fr(function(){return l.tryAbandon},[l.tryAbandon]);for(var y=K(function(m){return C1({lockAPI:l,registry:o,store:a,draggableId:m})},[l,o,a]),v=K(function(m,p,_){return Bz({lockAPI:l,registry:o,contextId:r,store:a,draggableId:m,forceSensorStop:p,sourceEvent:_&&_.sourceEvent?_.sourceEvent:null})},[r,l,o,a]),b=K(function(m){return Tz(r,m)},[r]),e=K(function(m){var p=o.draggable.findById(m);return p?p.options:null},[o.draggable]),n=K(function(){l.isClaimed()&&(l.tryAbandon(),a.getState().phase!=="IDLE"&&a.dispatch(Ym()))},[l,a]),s=K(l.isClaimed,[l]),c=Se(function(){return{canGetLock:y,tryGetLock:v,findClosestDraggableId:b,findOptionsForDraggable:e,tryReleaseLock:n,isLockClaimed:s}},[y,v,b,e,n,s]),f=0;f<h.length;f++)h[f](c)}var Lz=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function jo(t){return t.current||H(!1),t.current}function zz(t){var r=t.contextId,a=t.setCallbacks,o=t.sensors,u=t.nonce,d=t.dragHandleUsageInstructions,h=C.useRef(null),l=b1(t),g=K(function(){return Lz(l.current)},[l]),y=VL(r),v=KL({contextId:r,text:d}),b=OL(r,u),e=K(function(E){jo(h).dispatch(E)},[]),n=Se(function(){return O_({publishWhileDragging:C3,updateDroppableScroll:T3,updateDroppableIsEnabled:P3,updateDroppableIsCombineEnabled:I3,collectionStarting:A3},e)},[e]),s=GL(),c=Se(function(){return gL(s,n)},[s,n]),f=Se(function(){return DL(re({scrollWindow:vL,scrollDroppable:c.scrollDroppable},O_({move:s1},e)))},[c.scrollDroppable,e]),m=NL(r),p=Se(function(){return fL({announce:y,autoScroller:f,dimensionMarshal:c,focusMarshal:m,getResponders:g,styleMarshal:b})},[y,f,c,m,g,b]);h.current=p;var _=K(function(){var E=jo(h),T=E.getState();T.phase!=="IDLE"&&E.dispatch(Ym())},[]),S=K(function(){var E=jo(h).getState();return E.isDragging||E.phase==="DROP_ANIMATING"},[]),w=Se(function(){return{isDragging:S,tryAbort:_}},[S,_]);a(w);var x=K(function(E){return m1(jo(h).getState(),E)},[]),U=K(function(){return Hn(jo(h).getState())},[]),A=Se(function(){return{marshal:c,focus:m,contextId:r,canLift:x,isMovementAllowed:U,dragHandleUsageInstructionsId:v,registry:s}},[r,c,v,m,x,U,s]);return Dz({contextId:r,store:p,registry:s,customSensors:o,enableDefaultSensors:t.enableDefaultSensors!==!1}),C.useEffect(function(){return _},[_]),ue.createElement(ud.Provider,{value:A},ue.createElement(lk,{context:eg,store:p},t.children))}var Rz=0;function Fz(){return Se(function(){return""+Rz++},[])}function Oz(t){var r=Fz(),a=t.dragHandleUsageInstructions||Uu.dragHandleUsageInstructions;return ue.createElement(pD,null,function(o){return ue.createElement(zz,{nonce:t.nonce,contextId:r,setCallbacks:o,dragHandleUsageInstructions:a,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var A1=function(r){return function(a){return r===a}},Mz=A1("scroll"),Nz=A1("auto"),gy=function(r,a){return a(r.overflowX)||a(r.overflowY)},Hz=function(r){var a=window.getComputedStyle(r),o={overflowX:a.overflowX,overflowY:a.overflowY};return gy(o,Mz)||gy(o,Nz)},Gz=function(){return!1},$z=function t(r){return r==null?null:r===document.body?Gz()?r:null:r===document.documentElement?null:Hz(r)?r:t(r.parentElement)},fp=function(t){return{x:t.scrollLeft,y:t.scrollTop}},jz=function t(r){if(!r)return!1;var a=window.getComputedStyle(r);return a.position==="fixed"?!0:t(r.parentElement)},Vz=function(t){var r=$z(t),a=jz(t);return{closestScrollable:r,isFixedOnPage:a}},Yz=function(t){var r=t.descriptor,a=t.isEnabled,o=t.isCombineEnabled,u=t.isFixedOnPage,d=t.direction,h=t.client,l=t.page,g=t.closest,y=function(){if(!g)return null;var n=g.scrollSize,s=g.client,c=f1({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,height:s.paddingBox.height,width:s.paddingBox.width});return{pageMarginBox:g.page.marginBox,frameClient:s,scrollSize:n,shouldClipSubject:g.shouldClipSubject,scroll:{initial:g.scroll,current:g.scroll,max:c,diff:{value:_t,displacement:_t}}}}(),v=d==="vertical"?Hm:Yx,b=_o({page:l,withPlaceholder:null,axis:v,frame:y}),e={descriptor:r,isCombineEnabled:o,isFixedOnPage:u,axis:v,isEnabled:a,client:h,page:l,frame:y,subject:b};return e},Wz=function(r,a){var o=Rx(r);if(!a||r!==a)return o;var u=o.paddingBox.top-a.scrollTop,d=o.paddingBox.left-a.scrollLeft,h=u+a.scrollHeight,l=d+a.scrollWidth,g={top:u,right:l,bottom:h,left:d},y=Rm(g,o.border),v=Fm({borderBox:y,margin:o.margin,border:o.border,padding:o.padding});return v},qz=function(t){var r=t.ref,a=t.descriptor,o=t.env,u=t.windowScroll,d=t.direction,h=t.isDropDisabled,l=t.isCombineEnabled,g=t.shouldClipSubject,y=o.closestScrollable,v=Wz(r,y),b=cc(v,u),e=function(){if(!y)return null;var s=Rx(y),c={scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth};return{client:s,page:cc(s,u),scroll:fp(y),scrollSize:c,shouldClipSubject:g}}(),n=Yz({descriptor:a,isEnabled:!h,isCombineEnabled:l,isFixedOnPage:o.isFixedOnPage,direction:d,client:v,page:b,closest:e});return n},Kz={passive:!1},Xz={passive:!0},vy=function(t){return t.shouldPublishImmediately?Kz:Xz};function gc(t){var r=C.useContext(t);return r||H(!1),r}var nu=function(r){return r&&r.env.closestScrollable||null};function Qz(t){var r=C.useRef(null),a=gc(ud),o=tg("droppable"),u=a.registry,d=a.marshal,h=b1(t),l=Se(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),g=C.useRef(l),y=Se(function(){return vt(function(S,w){r.current||H(!1);var x={x:S,y:w};d.updateDroppableScroll(l.id,x)})},[l.id,d]),v=K(function(){var S=r.current;return!S||!S.env.closestScrollable?_t:fp(S.env.closestScrollable)},[]),b=K(function(){var S=v();y(S.x,S.y)},[v,y]),e=Se(function(){return Ms(b)},[b]),n=K(function(){var S=r.current,w=nu(S);S&&w||H(!1);var x=S.scrollOptions;if(x.shouldPublishImmediately){b();return}e()},[e,b]),s=K(function(S,w){r.current&&H(!1);var x=h.current,U=x.getDroppableRef();U||H(!1);var A=Vz(U),E={ref:U,descriptor:l,env:A,scrollOptions:w};r.current=E;var T=qz({ref:U,descriptor:l,env:A,windowScroll:S,direction:x.direction,isDropDisabled:x.isDropDisabled,isCombineEnabled:x.isCombineEnabled,shouldClipSubject:!x.ignoreContainerClipping}),P=A.closestScrollable;return P&&(P.setAttribute(fy.contextId,a.contextId),P.addEventListener("scroll",n,vy(E.scrollOptions))),T},[a.contextId,l,n,h]),c=K(function(){var S=r.current,w=nu(S);return S&&w||H(!1),fp(w)},[]),f=K(function(){var S=r.current;S||H(!1);var w=nu(S);r.current=null,w&&(e.cancel(),w.removeAttribute(fy.contextId),w.removeEventListener("scroll",n,vy(S.scrollOptions)))},[n,e]),m=K(function(S){var w=r.current;w||H(!1);var x=nu(w);x||H(!1),x.scrollTop+=S.y,x.scrollLeft+=S.x},[]),p=Se(function(){return{getDimensionAndWatchScroll:s,getScrollWhileDragging:c,dragStopped:f,scroll:m}},[f,s,c,m]),_=Se(function(){return{uniqueId:o,descriptor:l,callbacks:p}},[p,l,o]);fr(function(){return g.current=_.descriptor,u.droppable.register(_),function(){r.current&&f(),u.droppable.unregister(_)}},[p,l,f,_,d,u.droppable]),fr(function(){r.current&&d.updateDroppableIsEnabled(g.current.id,!t.isDropDisabled)},[t.isDropDisabled,d]),fr(function(){r.current&&d.updateDroppableIsCombineEnabled(g.current.id,t.isCombineEnabled)},[t.isCombineEnabled,d])}function Cf(){}var _y={width:0,height:0,margin:bD},Zz=function(r){var a=r.isAnimatingOpenOnMount,o=r.placeholder,u=r.animate;return a||u==="close"?_y:{height:o.client.borderBox.height,width:o.client.borderBox.width,margin:o.client.margin}},Jz=function(r){var a=r.isAnimatingOpenOnMount,o=r.placeholder,u=r.animate,d=Zz({isAnimatingOpenOnMount:a,placeholder:o,animate:u});return{display:o.display,boxSizing:"border-box",width:d.width,height:d.height,marginTop:d.margin.top,marginRight:d.margin.right,marginBottom:d.margin.bottom,marginLeft:d.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:u!=="none"?ms.placeholder:null}};function eR(t){var r=C.useRef(null),a=K(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),o=t.animate,u=t.onTransitionEnd,d=t.onClose,h=t.contextId,l=C.useState(t.animate==="open"),g=l[0],y=l[1];C.useEffect(function(){return g?o!=="open"?(a(),y(!1),Cf):r.current?Cf:(r.current=setTimeout(function(){r.current=null,y(!1)}),a):Cf},[o,g,a]);var v=K(function(e){e.propertyName==="height"&&(u(),o==="close"&&d())},[o,d,u]),b=Jz({isAnimatingOpenOnMount:g,animate:t.animate,placeholder:t.placeholder});return ue.createElement(t.placeholder.tagName,{style:b,"data-rbd-placeholder-context-id":h,onTransitionEnd:v,ref:t.innerRef})}var tR=ue.memo(eR),ig=ue.createContext(null),rR=function(t){vx(r,t);function r(){for(var o,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return o=t.call.apply(t,[this].concat(d))||this,o.state={isVisible:!!o.props.on,data:o.props.on,animate:o.props.shouldAnimate&&o.props.on?"open":"none"},o.onClose=function(){o.state.animate==="close"&&o.setState({isVisible:!1})},o}r.getDerivedStateFromProps=function(u,d){return u.shouldAnimate?u.on?{isVisible:!0,data:u.on,animate:"open"}:d.isVisible?{isVisible:!0,data:d.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!u.on,data:u.on,animate:"none"}};var a=r.prototype;return a.render=function(){if(!this.state.isVisible)return null;var u={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(u)},r}(ue.PureComponent),yy={dragging:5e3,dropAnimating:4500},iR=function(r,a){return a?ms.drop(a.duration):r?ms.snap:ms.fluid},nR=function(r,a){return r?a?$s.opacity.drop:$s.opacity.combining:null},aR=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function oR(t){var r=t.dimension,a=r.client,o=t.offset,u=t.combineWith,d=t.dropping,h=!!u,l=aR(t),g=!!d,y=g?up.drop(o,h):up.moveTo(o),v={position:"fixed",top:a.marginBox.top,left:a.marginBox.left,boxSizing:"border-box",width:a.borderBox.width,height:a.borderBox.height,transition:iR(l,d),transform:y,opacity:nR(h,g),zIndex:g?yy.dropAnimating:yy.dragging,pointerEvents:"none"};return v}function sR(t){return{transform:up.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function lR(t){return t.type==="DRAGGING"?oR(t):sR(t)}function uR(t,r,a){a===void 0&&(a=_t);var o=window.getComputedStyle(r),u=r.getBoundingClientRect(),d=zx(u,o),h=cc(d,a),l={client:d,tagName:r.tagName.toLowerCase(),display:o.display},g={x:d.marginBox.width,y:d.marginBox.height},y={descriptor:t,placeholder:l,displaceBy:g,client:d,page:h};return y}function cR(t){var r=tg("draggable"),a=t.descriptor,o=t.registry,u=t.getDraggableRef,d=t.canDragInteractiveElements,h=t.shouldRespectForcePress,l=t.isEnabled,g=Se(function(){return{canDragInteractiveElements:d,shouldRespectForcePress:h,isEnabled:l}},[d,l,h]),y=K(function(n){var s=u();return s||H(!1),uR(a,s,n)},[a,u]),v=Se(function(){return{uniqueId:r,descriptor:a,options:g,getDimension:y}},[a,y,g,r]),b=C.useRef(v),e=C.useRef(!0);fr(function(){return o.draggable.register(b.current),function(){return o.draggable.unregister(b.current)}},[o.draggable]),fr(function(){if(e.current){e.current=!1;return}var n=b.current;b.current=v,o.draggable.update(v,n)},[v,o.draggable])}function dR(t){t.preventDefault()}function fR(t){var r=C.useRef(null),a=K(function(E){r.current=E},[]),o=K(function(){return r.current},[]),u=gc(ud),d=u.contextId,h=u.dragHandleUsageInstructionsId,l=u.registry,g=gc(ig),y=g.type,v=g.droppableId,b=Se(function(){return{id:t.draggableId,index:t.index,type:y,droppableId:v}},[t.draggableId,t.index,y,v]),e=t.children,n=t.draggableId,s=t.isEnabled,c=t.shouldRespectForcePress,f=t.canDragInteractiveElements,m=t.isClone,p=t.mapped,_=t.dropAnimationFinished;if(!m){var S=Se(function(){return{descriptor:b,registry:l,getDraggableRef:o,canDragInteractiveElements:f,shouldRespectForcePress:c,isEnabled:s}},[b,l,o,f,c,s]);cR(S)}var w=Se(function(){return s?{tabIndex:0,role:"button","aria-describedby":h,"data-rbd-drag-handle-draggable-id":n,"data-rbd-drag-handle-context-id":d,draggable:!1,onDragStart:dR}:null},[d,h,n,s]),x=K(function(E){p.type==="DRAGGING"&&p.dropping&&E.propertyName==="transform"&&_()},[_,p]),U=Se(function(){var E=lR(p),T=p.type==="DRAGGING"&&p.dropping?x:null,P={innerRef:a,draggableProps:{"data-rbd-draggable-context-id":d,"data-rbd-draggable-id":n,style:E,onTransitionEnd:T},dragHandleProps:w};return P},[d,w,n,p,x,a]),A=Se(function(){return{draggableId:b.id,type:b.type,source:{index:b.index,droppableId:b.droppableId}}},[b.droppableId,b.id,b.index,b.type]);return e(U,p.snapshot,A)}var T1=function(t,r){return t===r},P1=function(t){var r=t.combine,a=t.destination;return a?a.droppableId:r?r.droppableId:null},hR=function(r){return r.combine?r.combine.draggableId:null},pR=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function mR(){var t=vt(function(u,d){return{x:u,y:d}}),r=vt(function(u,d,h,l,g){return{isDragging:!0,isClone:d,isDropAnimating:!!g,dropAnimation:g,mode:u,draggingOver:h,combineWith:l,combineTargetFor:null}}),a=vt(function(u,d,h,l,g,y,v){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:g,combineWith:y,mode:d,offset:u,dimension:h,forceShouldAnimate:v,snapshot:r(d,l,g,y,null)}}}),o=function(d,h){if(d.isDragging){if(d.critical.draggable.id!==h.draggableId)return null;var l=d.current.client.offset,g=d.dimensions.draggables[h.draggableId],y=dr(d.impact),v=pR(d.impact),b=d.forceShouldAnimate;return a(t(l.x,l.y),d.movementMode,g,h.isClone,y,v,b)}if(d.phase==="DROP_ANIMATING"){var e=d.completed;if(e.result.draggableId!==h.draggableId)return null;var n=h.isClone,s=d.dimensions.draggables[h.draggableId],c=e.result,f=c.mode,m=P1(c),p=hR(c),_=d.dropDuration,S={duration:_,curve:qm.drop,moveTo:d.newHomeClientOffset,opacity:p?$s.opacity.drop:null,scale:p?$s.scale.drop:null};return{mapped:{type:"DRAGGING",offset:d.newHomeClientOffset,dimension:s,dropping:S,draggingOver:m,combineWith:p,mode:f,forceShouldAnimate:null,snapshot:r(f,n,m,p,S)}}}return null};return o}function I1(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var gR={mapped:{type:"SECONDARY",offset:_t,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:I1(null)}};function vR(){var t=vt(function(h,l){return{x:h,y:l}}),r=vt(I1),a=vt(function(h,l,g){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:h,combineTargetFor:l,shouldAnimateDisplacement:g,snapshot:r(l)}}}),o=function(l){return l?a(_t,l,!0):null},u=function(l,g,y,v){var b=y.displaced.visible[l],e=!!(v.inVirtualList&&v.effected[l]),n=ad(y),s=n&&n.draggableId===l?g:null;if(!b){if(!e)return o(s);if(y.displaced.invisible[l])return null;var c=Uo(v.displacedBy.point),f=t(c.x,c.y);return a(f,s,!0)}if(e)return o(s);var m=y.displacedBy.point,p=t(m.x,m.y);return a(p,s,b.shouldAnimate)},d=function(l,g){if(l.isDragging)return l.critical.draggable.id===g.draggableId?null:u(g.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var y=l.completed;return y.result.draggableId===g.draggableId?null:u(g.draggableId,y.result.draggableId,y.impact,y.afterCritical)}return null};return d}var _R=function(){var r=mR(),a=vR(),o=function(d,h){return r(d,h)||a(d,h)||gR};return o},yR={dropAnimationFinished:u1},bR=Dx(_R,yR,null,{context:eg,pure:!0,areStatePropsEqual:T1})(fR);function B1(t){var r=gc(ig),a=r.isUsingCloneFor;return a===t.draggableId&&!t.isClone?null:ue.createElement(bR,t)}function SR(t){var r=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,a=!!t.disableInteractiveElementBlocking,o=!!t.shouldRespectForcePress;return ue.createElement(B1,re({},t,{isClone:!1,isEnabled:r,canDragInteractiveElements:a,shouldRespectForcePress:o}))}function xR(t){var r=C.useContext(ud);r||H(!1);var a=r.contextId,o=r.isMovementAllowed,u=C.useRef(null),d=C.useRef(null),h=t.children,l=t.droppableId,g=t.type,y=t.mode,v=t.direction,b=t.ignoreContainerClipping,e=t.isDropDisabled,n=t.isCombineEnabled,s=t.snapshot,c=t.useClone,f=t.updateViewportMaxScroll,m=t.getContainerForClone,p=K(function(){return u.current},[]),_=K(function(P){u.current=P},[]);K(function(){return d.current},[]);var S=K(function(P){d.current=P},[]),w=K(function(){o()&&f({maxScroll:p1()})},[o,f]);Qz({droppableId:l,type:g,mode:y,direction:v,isDropDisabled:e,isCombineEnabled:n,ignoreContainerClipping:b,getDroppableRef:p});var x=ue.createElement(rR,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(P){var z=P.onClose,R=P.data,D=P.animate;return ue.createElement(tR,{placeholder:R,onClose:z,innerRef:S,animate:D,contextId:a,onTransitionEnd:w})}),U=Se(function(){return{innerRef:_,placeholder:x,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":a}}},[a,l,x,_]),A=c?c.dragging.draggableId:null,E=Se(function(){return{droppableId:l,type:g,isUsingCloneFor:A}},[l,A,g]);function T(){if(!c)return null;var P=c.dragging,z=c.render,R=ue.createElement(B1,{draggableId:P.draggableId,index:P.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(D,B){return z(D,B,P)});return Lb.createPortal(R,m())}return ue.createElement(ig.Provider,{value:E},h(U,s),T())}var Af=function(r,a){return r===a.droppable.type},by=function(r,a){return a.draggables[r.draggable.id]},wR=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},a=re({},r,{shouldAnimatePlaceholder:!1}),o=vt(function(h){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}}),u=vt(function(h,l,g,y,v,b){var e=v.descriptor.id,n=v.descriptor.droppableId===h;if(n){var s=b?{render:b,dragging:o(v.descriptor)}:null,c={isDraggingOver:g,draggingOverWith:g?e:null,draggingFromThisWith:e,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!1,snapshot:c,useClone:s}}if(!l)return a;if(!y)return r;var f={isDraggingOver:g,draggingOverWith:e,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}}),d=function(l,g){var y=g.droppableId,v=g.type,b=!g.isDropDisabled,e=g.renderClone;if(l.isDragging){var n=l.critical;if(!Af(v,n))return a;var s=by(n,l.dimensions),c=dr(l.impact)===y;return u(y,b,c,c,s,e)}if(l.phase==="DROP_ANIMATING"){var f=l.completed;if(!Af(v,f.critical))return a;var m=by(f.critical,l.dimensions);return u(y,b,P1(f.result)===y,dr(f.impact)===y,m,e)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var p=l.completed;if(!Af(v,p.critical))return a;var _=dr(p.impact)===y,S=!!(p.impact.at&&p.impact.at.type==="COMBINE"),w=p.critical.droppable.id===y;return _?S?r:a:w?r:a}return a};return d},ER={updateViewportMaxScroll:k3};function UR(){return document.body||H(!1),document.body}var CR={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:UR},k1=Dx(wR,ER,null,{context:eg,pure:!0,areStatePropsEqual:T1})(xR);k1.defaultProps=CR;function AR(){const[t,r]=td(gx),a=o=>{if(!o.destination)return;const u=[...t],[d]=u.splice(o.source.index,1);u.splice(o.destination.index,0,d),u.forEach((h,l)=>{h.zIndex=l+1}),r(u),Ci.getAVCanvas().spriteManager.sortSprite()};return j.jsx("div",{className:"px-2 res-list",children:j.jsx(Oz,{onDragEnd:a,children:j.jsx(k1,{droppableId:"list-container",children:o=>j.jsxs("div",{className:"list-container",...o.droppableProps,ref:o.innerRef,children:[t.map((u,d)=>j.jsx(SR,{draggableId:u.name,index:d,children:h=>j.jsx("div",{className:"item-container",ref:h.innerRef,...h.dragHandleProps,...h.draggableProps,children:j.jsxs("div",{className:"flex",children:[j.jsx("span",{className:"flex-1",children:u.name}),j.jsx("button",{onClick:()=>{Ci.getAVCanvas().spriteManager.removeSprite(u),r(t.filter(l=>l!==u))},children:"X"})]})})},u.name)),o.placeholder]})})})})}function TR(){return j.jsxs("div",{className:"h-screen flex flex-col",children:[j.jsxs("div",{className:"flex flex-1",children:[j.jsxs("div",{className:"left flex flex-col border-solid border-2 w-[250px]",children:[j.jsx("div",{className:"flex-1",children:j.jsx(KB,{})}),j.jsxs("div",{className:"sprite-list flex-1",children:[j.jsx("div",{className:"font-bold",children:"素材列表"}),j.jsx(AR,{})]}),j.jsxs("div",{className:"tpl-list flex-1",children:[j.jsx("div",{className:"font-bold",children:"模板列表"}),j.jsx("div",{children:"开发中"})]})]}),j.jsx("div",{className:"main flex-1 border-solid border-2",children:j.jsx(qB,{})}),j.jsx("div",{className:"right border-solid border-2 w-[250px]",children:j.jsx(XB,{})})]}),j.jsxs("footer",{className:"text-center",children:[j.jsx("a",{className:"text-blue-400",href:"https://github.com/hughfenghen/bloom-shadow",children:"Bloom Shadow"})," ","Powerd by"," ",j.jsx("a",{className:"text-blue-400",href:"https://github.com/hughfenghen/WebAV",children:"WebAV"})]})]})}Tf.createRoot(document.getElementById("root")).render(j.jsx(TR,{}));
